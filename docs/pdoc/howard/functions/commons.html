<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.5.1"/>
    <title>howard.functions.commons API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../functions.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;howard.functions</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="variable" href="#file_folder">file_folder</a>
            </li>
            <li>
                    <a class="variable" href="#subfolder_plugins">subfolder_plugins</a>
            </li>
            <li>
                    <a class="variable" href="#folder_main">folder_main</a>
            </li>
            <li>
                    <a class="variable" href="#folder_config">folder_config</a>
            </li>
            <li>
                    <a class="variable" href="#folder_user_home">folder_user_home</a>
            </li>
            <li>
                    <a class="variable" href="#folder_howard_home">folder_howard_home</a>
            </li>
            <li>
                    <a class="variable" href="#folder_plugins">folder_plugins</a>
            </li>
            <li>
                    <a class="variable" href="#comparison_map">comparison_map</a>
            </li>
            <li>
                    <a class="variable" href="#code_type_map">code_type_map</a>
            </li>
            <li>
                    <a class="variable" href="#code_type_map_to_sql">code_type_map_to_sql</a>
            </li>
            <li>
                    <a class="variable" href="#file_format_delimiters">file_format_delimiters</a>
            </li>
            <li>
                    <a class="variable" href="#file_format_allowed">file_format_allowed</a>
            </li>
            <li>
                    <a class="variable" href="#file_compressed_format">file_compressed_format</a>
            </li>
            <li>
                    <a class="variable" href="#vcf_required_release">vcf_required_release</a>
            </li>
            <li>
                    <a class="variable" href="#vcf_required_columns">vcf_required_columns</a>
            </li>
            <li>
                    <a class="variable" href="#vcf_required">vcf_required</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_TOOLS_FOLDER">DEFAULT_TOOLS_FOLDER</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_TOOLS_BIN">DEFAULT_TOOLS_BIN</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_ANNOVAR_URL">DEFAULT_ANNOVAR_URL</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_REFSEQ_URL">DEFAULT_REFSEQ_URL</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_DBNSFP_URL">DEFAULT_DBNSFP_URL</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_EXOMISER_URL">DEFAULT_EXOMISER_URL</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_EXOMISER_REMM_URL">DEFAULT_EXOMISER_REMM_URL</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_EXOMISER_CADD_URL">DEFAULT_EXOMISER_CADD_URL</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_ALPHAMISSENSE_URL">DEFAULT_ALPHAMISSENSE_URL</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_DBSNP_URL">DEFAULT_DBSNP_URL</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_DATABASE_FOLDER">DEFAULT_DATABASE_FOLDER</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_ANNOTATIONS_FOLDER">DEFAULT_ANNOTATIONS_FOLDER</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_GENOME_FOLDER">DEFAULT_GENOME_FOLDER</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_SNPEFF_FOLDER">DEFAULT_SNPEFF_FOLDER</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_ANNOVAR_FOLDER">DEFAULT_ANNOVAR_FOLDER</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_REFSEQ_FOLDER">DEFAULT_REFSEQ_FOLDER</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_DBNSFP_FOLDER">DEFAULT_DBNSFP_FOLDER</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_EXOMISER_FOLDER">DEFAULT_EXOMISER_FOLDER</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_DBSNP_FOLDER">DEFAULT_DBSNP_FOLDER</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_SPLICE_FOLDER">DEFAULT_SPLICE_FOLDER</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_SPLICEAI_FOLDER">DEFAULT_SPLICEAI_FOLDER</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_SPIP_FOLDER">DEFAULT_SPIP_FOLDER</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_DATA_FOLDER">DEFAULT_DATA_FOLDER</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_ASSEMBLY">DEFAULT_ASSEMBLY</a>
            </li>
            <li>
                    <a class="variable" href="#DUCKDB_EXTENSION">DUCKDB_EXTENSION</a>
            </li>
            <li>
                    <a class="variable" href="#MACHIN_LIST">MACHIN_LIST</a>
            </li>
            <li>
                    <a class="variable" href="#BCFTOOLS_FORMAT">BCFTOOLS_FORMAT</a>
            </li>
            <li>
                    <a class="variable" href="#LOG_FORMAT">LOG_FORMAT</a>
            </li>
            <li>
                    <a class="variable" href="#CODE_TYPE_MAP">CODE_TYPE_MAP</a>
            </li>
            <li>
                    <a class="variable" href="#GENOTYPE_MAP">GENOTYPE_MAP</a>
            </li>
            <li>
                    <a class="variable" href="#DTYPE_LIMIT_AUTO">DTYPE_LIMIT_AUTO</a>
            </li>
            <li>
                    <a class="variable" href="#DEFAULT_CHUNK_SIZE">DEFAULT_CHUNK_SIZE</a>
            </li>
            <li>
                    <a class="function" href="#remove_if_exists">remove_if_exists</a>
            </li>
            <li>
                    <a class="function" href="#set_log_level">set_log_level</a>
            </li>
            <li>
                    <a class="function" href="#split_interval">split_interval</a>
            </li>
            <li>
                    <a class="function" href="#merge_regions">merge_regions</a>
            </li>
            <li>
                    <a class="function" href="#create_where_clause">create_where_clause</a>
            </li>
            <li>
                    <a class="function" href="#command">command</a>
            </li>
            <li>
                    <a class="function" href="#run_parallel_commands">run_parallel_commands</a>
            </li>
            <li>
                    <a class="function" href="#run_parallel_functions">run_parallel_functions</a>
            </li>
            <li>
                    <a class="function" href="#example_function">example_function</a>
            </li>
            <li>
                    <a class="function" href="#find">find</a>
            </li>
            <li>
                    <a class="function" href="#find_all">find_all</a>
            </li>
            <li>
                    <a class="function" href="#find_genome">find_genome</a>
            </li>
            <li>
                    <a class="function" href="#find_file_prefix">find_file_prefix</a>
            </li>
            <li>
                    <a class="function" href="#find_nomen">find_nomen</a>
            </li>
            <li>
                    <a class="function" href="#explode_annotation_format">explode_annotation_format</a>
            </li>
            <li>
                    <a class="function" href="#extract_snpeff_hgvs">extract_snpeff_hgvs</a>
            </li>
            <li>
                    <a class="function" href="#explode_snpeff_ann">explode_snpeff_ann</a>
            </li>
            <li>
                    <a class="function" href="#get_index">get_index</a>
            </li>
            <li>
                    <a class="function" href="#get_file_format">get_file_format</a>
            </li>
            <li>
                    <a class="function" href="#findbypipeline">findbypipeline</a>
            </li>
            <li>
                    <a class="function" href="#genotypeconcordance">genotypeconcordance</a>
            </li>
            <li>
                    <a class="function" href="#genotype_compression">genotype_compression</a>
            </li>
            <li>
                    <a class="function" href="#genotype_barcode">genotype_barcode</a>
            </li>
            <li>
                    <a class="function" href="#barcode">barcode</a>
            </li>
            <li>
                    <a class="function" href="#trio">trio</a>
            </li>
            <li>
                    <a class="function" href="#vaf_normalization">vaf_normalization</a>
            </li>
            <li>
                    <a class="function" href="#genotype_stats">genotype_stats</a>
            </li>
            <li>
                    <a class="function" href="#extract_file">extract_file</a>
            </li>
            <li>
                    <a class="function" href="#download_file">download_file</a>
            </li>
            <li>
                    <a class="function" href="#whereis_bin">whereis_bin</a>
            </li>
            <li>
                    <a class="function" href="#get_bin">get_bin</a>
            </li>
            <li>
                    <a class="function" href="#get_bin_command">get_bin_command</a>
            </li>
            <li>
                    <a class="function" href="#get_tmp">get_tmp</a>
            </li>
            <li>
                    <a class="function" href="#get_threads">get_threads</a>
            </li>
            <li>
                    <a class="function" href="#get_memory">get_memory</a>
            </li>
            <li>
                    <a class="function" href="#extract_float_from_str">extract_float_from_str</a>
            </li>
            <li>
                    <a class="function" href="#extract_memory_in_go">extract_memory_in_go</a>
            </li>
            <li>
                    <a class="function" href="#concat_file">concat_file</a>
            </li>
            <li>
                    <a class="function" href="#compress_file">compress_file</a>
            </li>
            <li>
                    <a class="function" href="#get_compression_type">get_compression_type</a>
            </li>
            <li>
                    <a class="function" href="#get_file_compressed">get_file_compressed</a>
            </li>
            <li>
                    <a class="function" href="#concat_into_infile">concat_into_infile</a>
            </li>
            <li>
                    <a class="function" href="#concat_and_compress_files">concat_and_compress_files</a>
            </li>
            <li>
                    <a class="function" href="#get_plateform_name_from_duckdb">get_plateform_name_from_duckdb</a>
            </li>
            <li>
                    <a class="function" href="#get_duckdb_extension_file">get_duckdb_extension_file</a>
            </li>
            <li>
                    <a class="function" href="#load_duckdb_extension">load_duckdb_extension</a>
            </li>
            <li>
                    <a class="class" href="#TimeoutException">TimeoutException</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="function" href="#time_limit">time_limit</a>
            </li>
            <li>
                    <a class="function" href="#duckdb_execute">duckdb_execute</a>
            </li>
            <li>
                    <a class="function" href="#genome_build_switch">genome_build_switch</a>
            </li>
            <li>
                    <a class="function" href="#get_argument">get_argument</a>
            </li>
            <li>
                    <a class="function" href="#get_argument_gooey">get_argument_gooey</a>
            </li>
            <li>
                    <a class="function" href="#get_argument_to_mk">get_argument_to_mk</a>
            </li>
            <li>
                    <a class="function" href="#help_generation_from_dict">help_generation_from_dict</a>
            </li>
            <li>
                    <a class="function" href="#help_generation_from_json">help_generation_from_json</a>
            </li>
            <li>
                    <a class="class" href="#RawTextArgumentDefaultsHelpFormatter">RawTextArgumentDefaultsHelpFormatter</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="function" href="#help_header">help_header</a>
            </li>
            <li>
                    <a class="function" href="#help_generation">help_generation</a>
            </li>
            <li>
                    <a class="function" href="#format_arg_help">format_arg_help</a>
            </li>
            <li>
                    <a class="function" href="#bed_sort">bed_sort</a>
            </li>
            <li>
                    <a class="function" href="#full_path">full_path</a>
            </li>
            <li>
                    <a class="function" href="#get_default_argument">get_default_argument</a>
            </li>
            <li>
                    <a class="function" href="#set_param">set_param</a>
            </li>
            <li>
                    <a class="function" href="#add_value_into_dict">add_value_into_dict</a>
            </li>
            <li>
                    <a class="function" href="#load_param">load_param</a>
            </li>
            <li>
                    <a class="function" href="#load_config_args">load_config_args</a>
            </li>
            <li>
                    <a class="function" href="#load_args">load_args</a>
            </li>
            <li>
                    <a class="function" href="#get_random">get_random</a>
            </li>
            <li>
                    <a class="function" href="#transcripts_file_to_df">transcripts_file_to_df</a>
            </li>
            <li>
                    <a class="function" href="#identical">identical</a>
            </li>
            <li>
                    <a class="function" href="#check_docker_image_exists">check_docker_image_exists</a>
            </li>
            <li>
                    <a class="function" href="#params_string_to_dict">params_string_to_dict</a>
            </li>
            <li>
                    <a class="function" href="#determine_value_type">determine_value_type</a>
            </li>
            <li>
                    <a class="function" href="#determine_column_types">determine_column_types</a>
            </li>
            <li>
                    <a class="function" href="#detect_column_type">detect_column_type</a>
            </li>
            <li>
                    <a class="function" href="#determine_column_number">determine_column_number</a>
            </li>
            <li>
                    <a class="function" href="#clean_annotation_field">clean_annotation_field</a>
            </li>
            <li>
                    <a class="function" href="#docker_automount">docker_automount</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../howard.html">howard</a><wbr>.<a href="./../functions.html">functions</a><wbr>.commons    </h1>

                
                        <input id="mod-commons-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-commons-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="kn">import</span> <span class="nn">io</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="kn">import</span> <span class="nn">multiprocessing</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="kn">import</span> <span class="nn">os</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="kn">import</span> <span class="nn">platform</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="kn">import</span> <span class="nn">re</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="kn">import</span> <span class="nn">statistics</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="kn">import</span> <span class="nn">string</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="kn">import</span> <span class="nn">subprocess</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a><span class="kn">import</span> <span class="nn">sys</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">NamedTemporaryFile</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="kn">import</span> <span class="nn">tempfile</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a><span class="kn">import</span> <span class="nn">typing</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="kn">import</span> <span class="nn">duckdb</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a><span class="kn">import</span> <span class="nn">json</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a><span class="kn">import</span> <span class="nn">argparse</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a><span class="kn">import</span> <span class="nn">vcf</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="kn">import</span> <span class="nn">logging</span> <span class="k">as</span> <span class="nn">log</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a><span class="kn">import</span> <span class="nn">shutil</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a><span class="kn">import</span> <span class="nn">urllib.request</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a><span class="kn">import</span> <span class="nn">zipfile</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a><span class="kn">import</span> <span class="nn">gzip</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a><span class="kn">import</span> <span class="nn">requests</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a><span class="kn">import</span> <span class="nn">fnmatch</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a><span class="kn">import</span> <span class="nn">ast</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a><span class="kn">import</span> <span class="nn">random</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a><span class="kn">import</span> <span class="nn">pgzip</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a><span class="kn">import</span> <span class="nn">mgzip</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a><span class="kn">import</span> <span class="nn">bgzip</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a><span class="kn">import</span> <span class="nn">pysam</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a><span class="kn">import</span> <span class="nn">yaml</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a><span class="kn">import</span> <span class="nn">pysam.bcftools</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a><span class="kn">import</span> <span class="nn">signal</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a><span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">contextmanager</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a><span class="kn">from</span> <span class="nn">configparser</span> <span class="kn">import</span> <span class="n">ConfigParser</span><span class="p">,</span> <span class="n">NoSectionError</span><span class="p">,</span> <span class="n">NoOptionError</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a><span class="kn">from</span> <span class="nn">importlib.metadata</span> <span class="kn">import</span> <span class="n">metadata</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a><span class="kn">from</span> <span class="nn">shutil</span> <span class="kn">import</span> <span class="n">which</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a><span class="n">file_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a><span class="c1"># plugin subfolder</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a><span class="n">subfolder_plugins</span> <span class="o">=</span> <span class="s2">&quot;plugins&quot;</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a><span class="c1"># Main folder</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a><span class="n">folder_main</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">file_folder</span><span class="p">,</span> <span class="s2">&quot;../..&quot;</span><span class="p">))</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a><span class="n">folder_config</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_main</span><span class="p">,</span> <span class="s2">&quot;config&quot;</span><span class="p">))</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a><span class="n">folder_user_home</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">))</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a><span class="n">folder_howard_home</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_user_home</span><span class="p">,</span> <span class="s2">&quot;howard&quot;</span><span class="p">)</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a><span class="n">folder_plugins</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_main</span><span class="p">,</span> <span class="s2">&quot;plugins&quot;</span><span class="p">)</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a><span class="n">comparison_map</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a>    <span class="s2">&quot;gt&quot;</span><span class="p">:</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a>    <span class="s2">&quot;gte&quot;</span><span class="p">:</span> <span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a>    <span class="s2">&quot;lt&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;&quot;</span><span class="p">,</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a>    <span class="s2">&quot;lte&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a>    <span class="s2">&quot;equals&quot;</span><span class="p">:</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a>    <span class="s2">&quot;contains&quot;</span><span class="p">:</span> <span class="s2">&quot;SIMILAR TO&quot;</span><span class="p">,</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a><span class="p">}</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a><span class="n">code_type_map</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Integer&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;String&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Float&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Flag&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a><span class="n">code_type_map_to_sql</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a>    <span class="s2">&quot;Integer&quot;</span><span class="p">:</span> <span class="s2">&quot;INTEGER&quot;</span><span class="p">,</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a>    <span class="s2">&quot;String&quot;</span><span class="p">:</span> <span class="s2">&quot;VARCHAR&quot;</span><span class="p">,</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a>    <span class="s2">&quot;Float&quot;</span><span class="p">:</span> <span class="s2">&quot;FLOAT&quot;</span><span class="p">,</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a>    <span class="s2">&quot;Flag&quot;</span><span class="p">:</span> <span class="s2">&quot;VARCHAR&quot;</span><span class="p">,</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a><span class="p">}</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a><span class="n">file_format_delimiters</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;vcf&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;tsv&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;csv&quot;</span><span class="p">:</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;psv&quot;</span><span class="p">:</span> <span class="s2">&quot;|&quot;</span><span class="p">,</span> <span class="s2">&quot;bed&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">}</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a><span class="n">file_format_allowed</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">file_format_delimiters</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">+</span> <span class="p">[</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a>    <span class="s2">&quot;json&quot;</span><span class="p">,</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a>    <span class="s2">&quot;parquet&quot;</span><span class="p">,</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a>    <span class="s2">&quot;duckdb&quot;</span><span class="p">,</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a><span class="p">]</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a><span class="n">file_compressed_format</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;gz&quot;</span><span class="p">,</span> <span class="s2">&quot;bgz&quot;</span><span class="p">]</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a><span class="n">vcf_required_release</span> <span class="o">=</span> <span class="s2">&quot;##fileformat=VCFv4.2&quot;</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a><span class="n">vcf_required_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;#CHROM&quot;</span><span class="p">,</span> <span class="s2">&quot;POS&quot;</span><span class="p">,</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;REF&quot;</span><span class="p">,</span> <span class="s2">&quot;ALT&quot;</span><span class="p">,</span> <span class="s2">&quot;QUAL&quot;</span><span class="p">,</span> <span class="s2">&quot;FILTER&quot;</span><span class="p">,</span> <span class="s2">&quot;INFO&quot;</span><span class="p">]</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a><span class="n">vcf_required</span> <span class="o">=</span> <span class="p">[</span><span class="n">vcf_required_release</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vcf_required_columns</span><span class="p">)]</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a><span class="c1"># Tools</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a><span class="n">DEFAULT_TOOLS_FOLDER</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_howard_home</span><span class="p">,</span> <span class="s2">&quot;tools&quot;</span><span class="p">)</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a><span class="n">DEFAULT_TOOLS_BIN</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a>    <span class="s2">&quot;bcftools&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;bcftools&quot;</span><span class="p">},</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a>    <span class="s2">&quot;bgzip&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;bgzip&quot;</span><span class="p">},</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a>    <span class="s2">&quot;java&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;java&quot;</span><span class="p">},</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a>    <span class="s2">&quot;snpeff&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;jar&quot;</span><span class="p">:</span> <span class="s2">&quot;~/howard/tools/snpeff/current/bin/snpEff.jar&quot;</span><span class="p">},</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a>    <span class="s2">&quot;annovar&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;perl&quot;</span><span class="p">:</span> <span class="s2">&quot;~/howard/tools/annovar/current/bin/table_annovar.pl&quot;</span><span class="p">},</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a>    <span class="s2">&quot;exomiser&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;jar&quot;</span><span class="p">:</span> <span class="s2">&quot;~/howard/tools/exomiser/current/bin/exomiser.jar&quot;</span><span class="p">},</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a>    <span class="s2">&quot;docker&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;bin&quot;</span><span class="p">:</span> <span class="s2">&quot;docker&quot;</span><span class="p">},</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a>    <span class="s2">&quot;splice&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a>        <span class="s2">&quot;docker&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a>            <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;bioinfochrustrasbourg/splice:0.2.1&quot;</span><span class="p">,</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a>            <span class="s2">&quot;entrypoint&quot;</span><span class="p">:</span> <span class="s2">&quot;/bin/bash&quot;</span><span class="p">,</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a>            <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a>            <span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a>        <span class="p">}</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a>    <span class="p">},</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a><span class="p">}</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a><span class="c1"># URL</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a><span class="n">DEFAULT_ANNOVAR_URL</span> <span class="o">=</span> <span class="s2">&quot;http://www.openbioinformatics.org/annovar/download&quot;</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a><span class="n">DEFAULT_REFSEQ_URL</span> <span class="o">=</span> <span class="s2">&quot;http://hgdownload.soe.ucsc.edu/goldenPath&quot;</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a><span class="n">DEFAULT_DBNSFP_URL</span> <span class="o">=</span> <span class="s2">&quot;https://dbnsfp.s3.amazonaws.com&quot;</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a><span class="n">DEFAULT_EXOMISER_URL</span> <span class="o">=</span> <span class="s2">&quot;http://data.monarchinitiative.org/exomiser&quot;</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a><span class="n">DEFAULT_EXOMISER_REMM_URL</span> <span class="o">=</span> <span class="s2">&quot;https://kircherlab.bihealth.org/download/ReMM&quot;</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a><span class="n">DEFAULT_EXOMISER_CADD_URL</span> <span class="o">=</span> <span class="s2">&quot;https://kircherlab.bihealth.org/download/CADD&quot;</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a><span class="n">DEFAULT_ALPHAMISSENSE_URL</span> <span class="o">=</span> <span class="s2">&quot;https://storage.googleapis.com/dm_alphamissense&quot;</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a><span class="n">DEFAULT_DBSNP_URL</span> <span class="o">=</span> <span class="s2">&quot;https://ftp.ncbi.nih.gov/snp/archive&quot;</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a><span class="c1"># Databases default folder</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a><span class="n">DEFAULT_DATABASE_FOLDER</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_howard_home</span><span class="p">,</span> <span class="s2">&quot;databases&quot;</span><span class="p">)</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a><span class="n">DEFAULT_ANNOTATIONS_FOLDER</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DEFAULT_DATABASE_FOLDER</span><span class="si">}</span><span class="s2">/annotations/current&quot;</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a><span class="n">DEFAULT_GENOME_FOLDER</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DEFAULT_DATABASE_FOLDER</span><span class="si">}</span><span class="s2">/genomes/current&quot;</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a><span class="n">DEFAULT_SNPEFF_FOLDER</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DEFAULT_DATABASE_FOLDER</span><span class="si">}</span><span class="s2">/snpeff/current&quot;</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a><span class="n">DEFAULT_ANNOVAR_FOLDER</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DEFAULT_DATABASE_FOLDER</span><span class="si">}</span><span class="s2">/annovar/current&quot;</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a><span class="n">DEFAULT_REFSEQ_FOLDER</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DEFAULT_DATABASE_FOLDER</span><span class="si">}</span><span class="s2">/refseq/current&quot;</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a><span class="n">DEFAULT_DBNSFP_FOLDER</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DEFAULT_DATABASE_FOLDER</span><span class="si">}</span><span class="s2">/dbnsfp/current&quot;</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a><span class="n">DEFAULT_EXOMISER_FOLDER</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DEFAULT_DATABASE_FOLDER</span><span class="si">}</span><span class="s2">/exomiser/current&quot;</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a><span class="n">DEFAULT_DBSNP_FOLDER</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DEFAULT_DATABASE_FOLDER</span><span class="si">}</span><span class="s2">/exomiser/dbsnp&quot;</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a><span class="n">DEFAULT_SPLICE_FOLDER</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DEFAULT_DATABASE_FOLDER</span><span class="si">}</span><span class="s2">/splice&quot;</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a><span class="n">DEFAULT_SPLICEAI_FOLDER</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DEFAULT_DATABASE_FOLDER</span><span class="si">}</span><span class="s2">/spliceai&quot;</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a><span class="n">DEFAULT_SPIP_FOLDER</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DEFAULT_DATABASE_FOLDER</span><span class="si">}</span><span class="s2">/spip&quot;</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a><span class="c1"># Data default folder</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a><span class="n">DEFAULT_DATA_FOLDER</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_howard_home</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">)</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a><span class="c1"># Deefault Assembly</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a><span class="n">DEFAULT_ASSEMBLY</span> <span class="o">=</span> <span class="s2">&quot;hg19&quot;</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a><span class="c1"># DuckDB extension</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a><span class="n">DUCKDB_EXTENSION</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_folder</span><span class="si">}</span><span class="s2">/duckdb_extension&quot;</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a><span class="c1"># Variables</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a><span class="n">MACHIN_LIST</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;amd64&quot;</span><span class="p">:</span> <span class="s2">&quot;amd64&quot;</span><span class="p">,</span> <span class="s2">&quot;arm64&quot;</span><span class="p">:</span> <span class="s2">&quot;arm64&quot;</span><span class="p">}</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a><span class="c1"># bcftools format allowed</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a><span class="n">BCFTOOLS_FORMAT</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;vcf&quot;</span><span class="p">,</span> <span class="s2">&quot;bed&quot;</span><span class="p">]</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a><span class="n">LOG_FORMAT</span> <span class="o">=</span> <span class="s2">&quot;#[</span><span class="si">%(asctime)s</span><span class="s2">] [</span><span class="si">%(levelname)s</span><span class="s2">] </span><span class="si">%(message)s</span><span class="s2">&quot;</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a><span class="n">CODE_TYPE_MAP</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Integer&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;String&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Float&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Flag&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a><span class="n">GENOTYPE_MAP</span> <span class="o">=</span> <span class="p">{</span><span class="kc">None</span><span class="p">:</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">:</span> <span class="s2">&quot;R&quot;</span><span class="p">}</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a><span class="n">DTYPE_LIMIT_AUTO</span> <span class="o">=</span> <span class="mi">10000</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a><span class="n">DEFAULT_CHUNK_SIZE</span> <span class="o">=</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a><span class="k">def</span> <span class="nf">remove_if_exists</span><span class="p">(</span><span class="n">filepaths</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a><span class="sd">    The function removes a file if it exists at the specified filepath(s).</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a><span class="sd">    :param filepaths: A list of file paths that you want to check for existence and remove if they exist</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a><span class="sd">    :type filepaths: list</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a>    <span class="c1"># If input is string</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filepaths</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a>        <span class="n">filepaths</span> <span class="o">=</span> <span class="p">[</span><span class="n">filepaths</span><span class="p">]</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a>    <span class="k">for</span> <span class="n">filepath</span> <span class="ow">in</span> <span class="n">filepaths</span><span class="p">:</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a>        <span class="k">if</span> <span class="n">filepath</span><span class="p">:</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a>            <span class="c1"># full path</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>            <span class="n">filepath</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a>            <span class="c1"># If path exists</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filepath</span><span class="p">):</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>                <span class="c1"># Folder</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a>                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">filepath</span><span class="p">):</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a>                    <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a>                <span class="c1"># File</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a>                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a><span class="k">def</span> <span class="nf">set_log_level</span><span class="p">(</span><span class="n">verbosity</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">log_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a><span class="sd">    It sets the log level of the Python logging module</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a><span class="sd">    :param verbosity: The level of verbosity</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a>    <span class="n">verbosity</span> <span class="o">=</span> <span class="n">verbosity</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a>    <span class="n">configs</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a>        <span class="s2">&quot;debug&quot;</span><span class="p">:</span> <span class="n">log</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a>        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="n">log</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a>        <span class="s2">&quot;warning&quot;</span><span class="p">:</span> <span class="n">log</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a>        <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">log</span><span class="o">.</span><span class="n">ERROR</span><span class="p">,</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a>        <span class="s2">&quot;critical&quot;</span><span class="p">:</span> <span class="n">log</span><span class="o">.</span><span class="n">CRITICAL</span><span class="p">,</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a>        <span class="s2">&quot;notset&quot;</span><span class="p">:</span> <span class="n">log</span><span class="o">.</span><span class="n">NOTSET</span><span class="p">,</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a>    <span class="p">}</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>    <span class="k">if</span> <span class="n">verbosity</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">configs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unknown verbosity level:&quot;</span> <span class="o">+</span> <span class="n">verbosity</span><span class="p">)</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a>    <span class="n">log</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>        <span class="n">filename</span><span class="o">=</span><span class="n">log_file</span><span class="p">,</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>        <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a>        <span class="nb">format</span><span class="o">=</span><span class="n">LOG_FORMAT</span><span class="p">,</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>        <span class="n">datefmt</span><span class="o">=</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">,</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a>        <span class="n">level</span><span class="o">=</span><span class="n">configs</span><span class="p">[</span><span class="n">verbosity</span><span class="p">],</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a>    <span class="p">)</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a>    <span class="k">return</span> <span class="n">verbosity</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a><span class="k">def</span> <span class="nf">split_interval</span><span class="p">(</span><span class="n">start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">step</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ncuts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a><span class="sd">    It takes a start and end value, and either a step size or a number of cuts, and returns a list of</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a><span class="sd">    values that split the interval into equal-sized pieces</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a><span class="sd">    :param start: the start of the interval</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a><span class="sd">    :param end: the end of the interval</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a><span class="sd">    :param step: the step size between each cut</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a><span class="sd">    :param ncuts: number of cuts to make</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a><span class="sd">    :return: A list of numbers.</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a>    <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ncuts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either step or ncuts must be provided&quot;</span><span class="p">)</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a>    <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ncuts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only one of step or ncuts must be provided&quot;</span><span class="p">)</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>    <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">step</span><span class="p">))</span> <span class="o">+</span> <span class="p">[</span><span class="n">end</span><span class="p">]</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a>    <span class="k">if</span> <span class="n">ncuts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a>        <span class="n">step</span> <span class="o">=</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span> <span class="o">/</span> <span class="n">ncuts</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">step</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ncuts</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a><span class="k">def</span> <span class="nf">merge_regions</span><span class="p">(</span><span class="n">regions</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a><span class="sd">    It takes a list of genomic regions and returns a list of genomic regions where overlapping regions</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a><span class="sd">    have been merged</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a><span class="sd">    :param regions: A list of tuples representing genomic regions with the values of the chrom, start</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a><span class="sd">    and end columns</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a><span class="sd">    :return: A list of tuples representing the merged regions with the values of the columns chrom,</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a><span class="sd">    start and end.</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a>    <span class="n">merged_regions</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a>    <span class="k">if</span> <span class="n">regions</span><span class="p">:</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a>        <span class="c1"># Sort regions by chromosomes and first position</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a>        <span class="n">sorted_regions</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">regions</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>        <span class="c1"># Init current region</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>        <span class="n">current_region</span> <span class="o">=</span> <span class="n">sorted_regions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a>        <span class="c1"># Fetch sorted regions</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>        <span class="k">for</span> <span class="n">region</span> <span class="ow">in</span> <span class="n">sorted_regions</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>            <span class="c1"># If current region overlap next region, merge both</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a>            <span class="k">if</span> <span class="n">current_region</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">region</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">current_region</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">region</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a>                <span class="n">current_region</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a>                    <span class="n">current_region</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a>                    <span class="n">current_region</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a>                    <span class="nb">max</span><span class="p">(</span><span class="n">current_region</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">region</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a>                <span class="p">)</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a>            <span class="c1"># Else, add current region to merged regions list, and next region</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a>                <span class="n">merged_regions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_region</span><span class="p">)</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a>                <span class="n">current_region</span> <span class="o">=</span> <span class="n">region</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>        <span class="c1"># Add last region to merged regions list</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a>        <span class="n">merged_regions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_region</span><span class="p">)</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a>    <span class="k">return</span> <span class="n">merged_regions</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a><span class="k">def</span> <span class="nf">create_where_clause</span><span class="p">(</span><span class="n">merged_regions</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;variants&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a><span class="sd">    It takes a list of merged regions and returns a SQL WHERE clause that can be used to filter variants</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a><span class="sd">    in a SQL table</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a><span class="sd">    :param merged_regions: a list of tuples representing the merged regions with the values of the</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a><span class="sd">    chrom, start and end columns</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a><span class="sd">    :param table: The name of the table to query, defaults to variants (optional)</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a><span class="sd">    :return: A dictionary with the chromosome as key and the where clause as value.</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a>    <span class="n">where_clause</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a>    <span class="n">where_clause_chrom</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">region</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">merged_regions</span><span class="p">):</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a>        <span class="n">chrom</span> <span class="o">=</span> <span class="n">region</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">region</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a>        <span class="n">stop</span> <span class="o">=</span> <span class="n">region</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a>        <span class="k">if</span> <span class="n">chrom</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">where_clause_chrom</span><span class="p">:</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a>            <span class="n">where_clause_chrom</span><span class="p">[</span><span class="n">chrom</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>            <span class="n">where_clause_chrom_sep</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a>            <span class="n">where_clause_chrom_sep</span> <span class="o">=</span> <span class="s2">&quot; OR &quot;</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a>        <span class="n">where_clause_chrom</span><span class="p">[</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>            <span class="n">chrom</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a>        <span class="p">]</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">where_clause_chrom_sep</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.POS &gt;= </span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2"> AND </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.POS &lt;= </span><span class="si">{</span><span class="n">stop</span><span class="si">}</span><span class="s2">) &quot;</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>    <span class="n">nb_chrom</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a>    <span class="n">where_clause_sep</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a>    <span class="k">for</span> <span class="n">chrom</span> <span class="ow">in</span> <span class="n">where_clause_chrom</span><span class="p">:</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a>        <span class="n">nb_chrom</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a>        <span class="k">if</span> <span class="n">nb_chrom</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a>            <span class="n">where_clause_sep</span> <span class="o">=</span> <span class="s2">&quot; OR &quot;</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a>        <span class="n">where_clause</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">where_clause_sep</span><span class="si">}</span><span class="s2"> ( </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.</span><span class="se">\&quot;</span><span class="s2">#CHROM</span><span class="se">\&quot;</span><span class="s2"> = &#39;</span><span class="si">{</span><span class="n">chrom</span><span class="si">}</span><span class="s2">&#39; AND ( </span><span class="si">{</span><span class="n">where_clause_chrom</span><span class="p">[</span><span class="n">chrom</span><span class="p">]</span><span class="si">}</span><span class="s2"> ) ) &quot;</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a>    <span class="k">return</span> <span class="n">where_clause</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a><span class="k">def</span> <span class="nf">command</span><span class="p">(</span><span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a><span class="sd">    It runs a command in the shell and waits for it to finish</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a><span class="sd">    :param command: The command to run</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a><span class="sd">    :return: The return value is the exit status of the process.</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a>    <span class="k">return</span> <span class="n">output</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a><span class="k">def</span> <span class="nf">run_parallel_commands</span><span class="p">(</span><span class="n">commands</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a><span class="sd">    It takes a list of commands and a number of threads, and runs the commands in parallel</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a><span class="sd">    :param commands: a list of commands to run</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a><span class="sd">    :param threads: The number of threads to use</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a><span class="sd">    :return: A list of results from the commands.</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a>    <span class="n">pool</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Pool</span><span class="p">(</span><span class="n">threads</span><span class="p">)</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a>    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a>    <span class="k">for</span> <span class="n">cmd</span> <span class="ow">in</span> <span class="n">commands</span><span class="p">:</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a>        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a>            <span class="n">pool</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">cmd</span><span class="p">,),</span> <span class="n">error_callback</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a>        <span class="p">)</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a>    <span class="n">pool</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>    <span class="n">pool</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>    <span class="k">return</span> <span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a><span class="k">def</span> <span class="nf">run_parallel_functions</span><span class="p">(</span><span class="n">functions</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a><span class="sd">    It takes a list of functions and a number of threads, and runs the functions in parallel using the</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a><span class="sd">    number of threads specified</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a><span class="sd">    :param functions: a list of functions to run in parallel</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a><span class="sd">    :param threads: The number of threads to use</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a><span class="sd">    :return: A list of multiprocessing.pool.ApplyResult objects.</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a>    <span class="n">pool</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Pool</span><span class="p">(</span><span class="n">threads</span><span class="p">)</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a>    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a>    <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">functions</span><span class="p">:</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a>        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a>            <span class="n">pool</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;hello&quot;</span><span class="p">),</span> <span class="n">error_callback</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a>        <span class="p">)</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a>    <span class="n">pool</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a>    <span class="n">pool</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>    <span class="k">return</span> <span class="n">results</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a><span class="k">def</span> <span class="nf">example_function</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a><span class="sd">    `example_function` takes in a number and a word and returns a list of the number and the word</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a><span class="sd">    :param num: a number</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a><span class="sd">    :param word: a string</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a><span class="sd">    :return: [num, word]</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a>    <span class="k">return</span> <span class="p">[</span><span class="n">num</span><span class="p">,</span> <span class="n">word</span><span class="p">]</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a><span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a><span class="sd">    It recursively walks the directory tree starting at the given path, and returns the first file it</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a><span class="sd">    finds with the given name</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a><span class="sd">    :param name: The name of the file you&#39;re looking for</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a><span class="sd">    :param path: The path to search for the file</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a><span class="sd">    :return: The path to the file.</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a>    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a>            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a>    <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a><span class="k">def</span> <span class="nf">find_all</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a><span class="sd">    &quot;Walk the directory tree starting at path, and for each regular file with the name name, append its</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a><span class="sd">    full path to the result list.&quot;</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a><span class="sd">    The os.walk function is a generator that yields a 3-tuple containing the name of a directory, a list</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a><span class="sd">    of its subdirectories, and a list of the files in that directory. The name of the directory is a</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a><span class="sd">    string, and the lists of subdirectories and files are lists of strings</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a><span class="sd">    :param name: The name of the file you&#39;re looking for</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a><span class="sd">    :param path: The path to search in</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a><span class="sd">    :return: A list of all the files in the directory that have the name &quot;name&quot;</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a>    <span class="c1"># result</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>    <span class="c1"># Full path</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>    <span class="n">path</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a>    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a>        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">filename</span><span class="p">)):</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">filename</span><span class="p">))</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a>    <span class="k">return</span> <span class="n">result</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a><span class="k">def</span> <span class="nf">find_genome</span><span class="p">(</span><span class="n">genome_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">assembly</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a><span class="sd">    The `find_genome` function checks if a genome file exists at the specified path, and if not, it</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a><span class="sd">    tries to find it using the provided assembly name or file name.</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a><span class="sd">    :param genome_path: The path to the genome file</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a><span class="sd">    :type genome_path: str</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a><span class="sd">    :param assembly: The `assembly` parameter is a string that represents the name of the genome</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a><span class="sd">    assembly. It is used to search for the genome file with the specified assembly name in the</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a><span class="sd">    `genome_dir` directory. If a genome file with the assembly name is found, its path is returned</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a><span class="sd">    :type assembly: str</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a><span class="sd">    :param file: The `file` parameter is the name of the genome file that you want to find</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a><span class="sd">    :type file: str</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a><span class="sd">    :return: the path to the genome file.</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a>    <span class="c1"># Full path</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>    <span class="n">genome_path</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">genome_path</span><span class="p">)</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a>    <span class="c1"># check genome</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">genome_path</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">genome_path</span><span class="p">):</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a>        <span class="k">return</span> <span class="n">genome_path</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a>        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Genome warning: Try to find genome in &#39;</span><span class="si">{</span><span class="n">genome_path</span><span class="si">}</span><span class="s2">&#39;...&quot;</span><span class="p">)</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a>        <span class="n">genome_dir</span> <span class="o">=</span> <span class="n">genome_path</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a>        <span class="n">genome_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a>        <span class="c1"># Try to find genome</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a>        <span class="k">if</span> <span class="n">file</span> <span class="ow">and</span> <span class="n">find_all</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">genome_dir</span><span class="p">):</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a>            <span class="n">genome_path</span> <span class="o">=</span> <span class="n">find_all</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">genome_dir</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a>        <span class="k">elif</span> <span class="n">assembly</span> <span class="ow">and</span> <span class="n">find_all</span><span class="p">(</span><span class="n">assembly</span> <span class="o">+</span> <span class="s2">&quot;.fa&quot;</span><span class="p">,</span> <span class="n">genome_dir</span><span class="p">):</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a>            <span class="n">genome_path</span> <span class="o">=</span> <span class="n">find_all</span><span class="p">(</span><span class="n">assembly</span> <span class="o">+</span> <span class="s2">&quot;.fa&quot;</span><span class="p">,</span> <span class="n">genome_dir</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a>    <span class="k">return</span> <span class="n">genome_path</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a><span class="k">def</span> <span class="nf">find_file_prefix</span><span class="p">(</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a>    <span class="n">input_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">assembly</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a><span class="sd">    The function `find_file_prefix` is used to find a specific file based on input parameters such as</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a><span class="sd">    input file, folder, and assembly.</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a><span class="sd">    :param input_file: The input file is the file that you want to find the prefix for. It can be a file</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a><span class="sd">    path or just the file name if it is in the current directory</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a><span class="sd">    :type input_file: str</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a><span class="sd">    :param folder: The `folder` parameter is a string that represents the directory where the file is</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a><span class="sd">    located</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a><span class="sd">    :type folder: str</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a><span class="sd">    :param assembly: The &quot;assembly&quot; parameter is a string that represents the assembly version of the</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a><span class="sd">    file you are looking for. It is used to search for files with the specific assembly version in their</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a><span class="sd">    filename</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a><span class="sd">    :type assembly: str</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a><span class="sd">    :return: the path of the output file.</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>    <span class="c1"># Output</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>    <span class="n">output_file</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>    <span class="c1"># Full path</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a>    <span class="n">input_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a>    <span class="n">folder</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a>    <span class="k">if</span> <span class="n">input_file</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">input_file</span><span class="p">):</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>        <span class="n">output_file</span> <span class="o">=</span> <span class="n">input_file</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>        <span class="c1"># Find in specific assembly folder</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a>        <span class="k">if</span> <span class="n">find_all</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">assembly</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>            <span class="n">output_file</span> <span class="o">=</span> <span class="n">find_all</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">assembly</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a>        <span class="c1"># Find with assembly in filename</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a>        <span class="k">elif</span> <span class="n">find_all</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">assembly</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span> <span class="n">folder</span><span class="p">):</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a>            <span class="n">output_file</span> <span class="o">=</span> <span class="n">find_all</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">assembly</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span> <span class="n">folder</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>        <span class="c1"># Find within the entire folder</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a>        <span class="k">elif</span> <span class="n">find_all</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span> <span class="n">folder</span><span class="p">):</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a>            <span class="n">output_file</span> <span class="o">=</span> <span class="n">find_all</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span> <span class="n">folder</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>    <span class="k">return</span> <span class="n">output_file</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a><span class="k">def</span> <span class="nf">find_nomen</span><span class="p">(</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a>    <span class="n">hgvs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a>    <span class="n">transcript</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a>    <span class="n">transcripts</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a>    <span class="n">transcripts_source_order</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a>    <span class="n">pattern</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a>    <span class="n">transcripts_len</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a><span class="sd">    The function `find_nomen` takes a HGVS string and a list of transcripts, parses the HGVS string, and</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a><span class="sd">    returns a dictionary with the best NOMEN based on specified patterns.</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a><span class="sd">    :param hgvs: The `hgvs` parameter is a DataFrame containing the HGVS strings to parse. It seems like</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a><span class="sd">    the function is designed to process multiple HGVS strings at once. You can pass this DataFrame to</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a><span class="sd">    the function for processing. If you have a specific DataFrame that you would like to use, please</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a><span class="sd">    provide it</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a><span class="sd">    :type hgvs: pd.DataFrame</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a><span class="sd">    :param transcript: The `transcript` parameter in the `find_nomen` function is used to specify a</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a><span class="sd">    single transcript to use for ranking. It is a string that represents the transcript. If provided,</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a><span class="sd">    this transcript will be used along with the transcripts from the `transcripts` list to determine the</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a><span class="sd">    best NOMEN</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a><span class="sd">    :type transcript: str</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a><span class="sd">    :param transcripts: Transcripts are a list of transcripts to use for ranking in the `find_nomen`</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a><span class="sd">    function. You can provide a list of transcripts that you want to consider when constructing the</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a><span class="sd">    NOMEN for a given HGVS string</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a><span class="sd">    :type transcripts: list</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a><span class="sd">    :param transcripts_source_order: The `transcripts_source_order` parameter is a list that specifies</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a><span class="sd">    the order in which different sources of transcripts should be considered. In the provided function,</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a><span class="sd">    the default order is `[&quot;column&quot;, &quot;file&quot;]`, which means that transcripts from a column in the input</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a><span class="sd">    data will be considered first, followed by</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a><span class="sd">    :type transcripts_source_order: list</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a><span class="sd">    :param pattern: The `pattern` parameter in the `find_nomen` function is used to specify the format</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a><span class="sd">    in which the NOMEN should be constructed. By default, the pattern is set to</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a><span class="sd">    &quot;GNOMEN:TNOMEN:ENOMEN:CNOMEN:RNOMEN:NNOMEN</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a><span class="sd">    :return: The function `find_nomen` returns a dictionary containing the following keys:</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a><span class="sd">    - NOMEN</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a><span class="sd">    - CNOMEN</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a><span class="sd">    - RNOMEN</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a><span class="sd">    - NNOMEN</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a><span class="sd">    - PNOMEN</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a><span class="sd">    - TVNOMEN</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a><span class="sd">    - TNOMEN</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a><span class="sd">    - TPVNOMEN</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a><span class="sd">    - TPNOMEN</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a><span class="sd">    - VNOMEN</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a><span class="sd">    - ENOMEN</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a><span class="sd">    - GNOMEN</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>    <span class="c1"># Result structure</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>    <span class="n">empty_nomen_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>        <span class="s2">&quot;NOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>        <span class="s2">&quot;CNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a>        <span class="s2">&quot;RNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a>        <span class="s2">&quot;NNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a>        <span class="s2">&quot;PNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a>        <span class="s2">&quot;TVNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>        <span class="s2">&quot;TNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a>        <span class="s2">&quot;TPVNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>        <span class="s2">&quot;TPNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>        <span class="s2">&quot;VNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>        <span class="s2">&quot;ENOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a>        <span class="s2">&quot;GNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a>    <span class="p">}</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>    <span class="n">nomen_dict</span> <span class="o">=</span> <span class="n">empty_nomen_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>    <span class="c1"># Transcripts list</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>    <span class="n">transcripts_list</span> <span class="o">=</span> <span class="n">transcripts</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a>    <span class="c1"># Transcript as a list (create dict with rank, slow)</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">transcripts_list</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a>        <span class="n">transcripts_list_tmp</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a>        <span class="k">for</span> <span class="n">rank</span><span class="p">,</span> <span class="n">source</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">transcripts_list</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a>            <span class="n">transcripts_list_tmp</span><span class="p">[</span><span class="n">source</span><span class="p">]</span> <span class="o">=</span> <span class="n">rank</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>        <span class="n">transcripts_list</span> <span class="o">=</span> <span class="n">transcripts_list_tmp</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>    <span class="c1"># Pattern</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>    <span class="k">if</span> <span class="n">pattern</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a>        <span class="n">pattern</span> <span class="o">=</span> <span class="s2">&quot;GNOMEN:TNOMEN:ENOMEN:CNOMEN:RNOMEN:NNOMEN:PNOMEN&quot;</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>    <span class="c1"># Transcripts source order and rank</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>    <span class="k">if</span> <span class="n">transcripts_source_order</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>        <span class="n">transcripts_source_order</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;column&quot;</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">]</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>    <span class="n">transcripts_source_order_rank</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>    <span class="k">for</span> <span class="n">rank</span><span class="p">,</span> <span class="n">source</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">transcripts_source_order</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>        <span class="n">transcripts_source_order_rank</span><span class="p">[</span><span class="n">source</span><span class="p">]</span> <span class="o">=</span> <span class="n">rank</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>    <span class="c1"># Transcripts file length</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a>    <span class="k">if</span> <span class="n">transcripts_len</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a>        <span class="n">transcripts_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">transcripts_list</span><span class="p">)</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a>    <span class="c1"># Check if transcript in column transcript, and add to transcripts list/rank</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a>    <span class="n">transcript_shift</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a>    <span class="k">if</span> <span class="n">transcript</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">transcript</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;nan&quot;</span><span class="p">:</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a>        <span class="n">transcript_list</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">transcript</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a>        <span class="k">if</span> <span class="n">transcripts_source_order_rank</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a>            <span class="s2">&quot;column&quot;</span><span class="p">,</span> <span class="mi">0</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a>        <span class="p">)</span> <span class="o">&lt;</span> <span class="n">transcripts_source_order_rank</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>            <span class="n">transcript_shift</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">transcript_list</span><span class="p">)</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a>        <span class="k">for</span> <span class="n">rank</span><span class="p">,</span> <span class="n">transcript</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">transcript_list</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a>            <span class="k">if</span> <span class="n">transcripts_source_order_rank</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a>                <span class="s2">&quot;column&quot;</span><span class="p">,</span> <span class="mi">0</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a>            <span class="p">)</span> <span class="o">&lt;</span> <span class="n">transcripts_source_order_rank</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a>                <span class="n">transcripts_list</span><span class="p">[</span><span class="n">transcript</span><span class="p">]</span> <span class="o">=</span> <span class="n">rank</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">transcript_list</span><span class="p">)</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a>            <span class="k">elif</span> <span class="n">transcript</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">transcripts</span><span class="p">:</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a>                <span class="n">transcripts_list</span><span class="p">[</span><span class="n">transcript</span><span class="p">]</span> <span class="o">=</span> <span class="n">rank</span> <span class="o">+</span> <span class="n">transcripts_len</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a>    <span class="c1"># If hgvs not empty</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a>    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">hgvs</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;nan&quot;</span><span class="p">:</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a>        <span class="n">hgvs_split</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">hgvs</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>        <span class="n">nomen_score_max</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a>        <span class="k">for</span> <span class="n">one_hgvs</span> <span class="ow">in</span> <span class="n">hgvs_split</span><span class="p">:</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a>            <span class="n">one_hgvs_split</span> <span class="o">=</span> <span class="n">one_hgvs</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>            <span class="n">one_nomen_score</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>            <span class="n">one_nomen_dict</span> <span class="o">=</span> <span class="n">empty_nomen_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>            <span class="k">for</span> <span class="n">one_hgvs_infos</span> <span class="ow">in</span> <span class="n">one_hgvs_split</span><span class="p">:</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>                <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[NX][MR]_(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">):</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>                    <span class="c1"># Transcript with version</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TVNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a>                    <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a>                    <span class="c1"># Split transcript</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>                    <span class="n">one_hgvs_infos_split</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a>                    <span class="c1"># Transcript</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos_split</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a>                    <span class="c1"># Transcript version</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">one_hgvs_infos_split</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>                        <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;VNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos_split</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a>                    <span class="c1"># NOMEN Score</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a>                    <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^NM_(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">)</span> <span class="ow">or</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a>                        <span class="sa">r</span><span class="s2">&quot;^NM_(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a>                    <span class="p">):</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a>                        <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">2</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a>                    <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^NR_(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">):</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a>                        <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a>                    <span class="c1"># NOMEN with default transcript</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a>                    <span class="k">if</span> <span class="p">(</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>                        <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TVNOMEN&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">transcripts_list</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a>                        <span class="ow">or</span> <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TNOMEN&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">transcripts_list</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a>                    <span class="p">):</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>                        <span class="n">rank</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a>                            <span class="nb">max</span><span class="p">(</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a>                                <span class="n">transcripts_list</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>                                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TVNOMEN&quot;</span><span class="p">],</span> <span class="o">-</span><span class="n">transcript_shift</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>                                <span class="p">),</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a>                                <span class="n">transcripts_list</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a>                                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TNOMEN&quot;</span><span class="p">],</span> <span class="o">-</span><span class="n">transcript_shift</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a>                                <span class="p">),</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>                            <span class="p">)</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>                            <span class="o">+</span> <span class="n">transcript_shift</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>                        <span class="p">)</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>                        <span class="k">if</span> <span class="n">rank</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>                            <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">transcripts_list</span><span class="p">)</span> <span class="o">-</span> <span class="n">rank</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a>                <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[NX]P_(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">):</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>                    <span class="c1"># Transcript Protein with version</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TPVNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>                    <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>                    <span class="c1"># Split transcript</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>                    <span class="n">one_hgvs_infos_split</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>                    <span class="c1"># Transcript Protein</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TPNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos_split</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>                <span class="k">elif</span> <span class="p">(</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>                    <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^c\.(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">)</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>                    <span class="ow">or</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^g\.(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">)</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>                    <span class="ow">or</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^m\.(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">)</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>                <span class="p">):</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;CNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>                    <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>                <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^n\.(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">):</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;NNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>                    <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>                <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^r\.(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">):</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;RNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>                    <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>                <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^p\.(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">):</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;PNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>                    <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a>                <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^exon(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">):</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;ENOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>                    <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;GNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>            <span class="k">if</span> <span class="n">one_nomen_score</span> <span class="o">&gt;</span> <span class="n">nomen_score_max</span><span class="p">:</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>                <span class="n">nomen_dict</span> <span class="o">=</span> <span class="n">one_nomen_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a>                <span class="n">nomen_score_max</span> <span class="o">=</span> <span class="n">one_nomen_score</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a>        <span class="c1"># Contruct NOMEN from pattern</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a>        <span class="n">nomen</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a>        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">pattern</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">):</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a>            <span class="k">if</span> <span class="n">nomen_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a>                <span class="n">nomen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nomen_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>        <span class="n">nomen_dict</span><span class="p">[</span><span class="s2">&quot;NOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;:&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">nomen</span><span class="p">)</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a>    <span class="k">return</span> <span class="n">nomen_dict</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a><span class="k">def</span> <span class="nf">explode_annotation_format</span><span class="p">(</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>    <span class="n">annotation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>    <span class="n">uniquify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>    <span class="n">output_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;fields&quot;</span><span class="p">,</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>    <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ANN_&quot;</span><span class="p">,</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a>    <span class="n">header</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>        <span class="s2">&quot;Allele&quot;</span><span class="p">,</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a>        <span class="s2">&quot;Annotation&quot;</span><span class="p">,</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a>        <span class="s2">&quot;Annotation_Impact&quot;</span><span class="p">,</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a>        <span class="s2">&quot;Gene_Name&quot;</span><span class="p">,</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>        <span class="s2">&quot;Gene_ID&quot;</span><span class="p">,</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a>        <span class="s2">&quot;Feature_Type&quot;</span><span class="p">,</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>        <span class="s2">&quot;Feature_ID&quot;</span><span class="p">,</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>        <span class="s2">&quot;Transcript_BioType&quot;</span><span class="p">,</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>        <span class="s2">&quot;Rank&quot;</span><span class="p">,</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>        <span class="s2">&quot;HGVS.c&quot;</span><span class="p">,</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>        <span class="s2">&quot;HGVS.p&quot;</span><span class="p">,</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>        <span class="s2">&quot;cDNA.pos / cDNA.length&quot;</span><span class="p">,</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a>        <span class="s2">&quot;CDS.pos / CDS.length&quot;</span><span class="p">,</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>        <span class="s2">&quot;AA.pos / AA.length&quot;</span><span class="p">,</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>        <span class="s2">&quot;Distance&quot;</span><span class="p">,</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>        <span class="s2">&quot;ERRORS / WARNINGS / INFO&quot;</span><span class="p">,</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>    <span class="p">],</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a><span class="sd">    The `explode_annotation_format` function takes an annotation string and formats it into a specified</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a><span class="sd">    output format with optional customization parameters.</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a><span class="sd">    :param annotation: The `annotation` parameter is a string containing multiple annotations separated</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a><span class="sd">    by commas and pipe symbols. Each annotation consists of different fields separated by pipe symbols.</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a><span class="sd">    For example, an annotation string could look like this: &quot;A|B|C,D|E|F&quot;</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a><span class="sd">    :type annotation: str</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a><span class="sd">    :param uniquify: The `uniquify` parameter in the `explode_annotation_format` function is a boolean</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a><span class="sd">    flag that determines whether to keep only unique values for each annotation field. If set to `True`,</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a><span class="sd">    only unique values will be retained for each field before joining them together. If set to `False`,</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a><span class="sd">    all values, defaults to False</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a><span class="sd">    :type uniquify: bool (optional)</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a><span class="sd">    :param output_format: The `output_format` parameter specifies the format in which you want the</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a><span class="sd">    output to be generated. The function supports two output formats: &quot;fields&quot; and &quot;JSON&quot;. If you choose</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a><span class="sd">    &quot;fields&quot;, the output will be a string with annotations separated by semicolons. If you choose</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a><span class="sd">    &quot;JSON&quot;, the, defaults to fields</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a><span class="sd">    :type output_format: str (optional)</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a><span class="sd">    :param prefix: The `prefix` parameter in the `explode_annotation_format` function is used to specify</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a><span class="sd">    the prefix that will be added to each annotation field when generating the exploded annotation</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a><span class="sd">    string. In the provided function, the default prefix value is set to &quot;ANN_&quot;. You can customize this</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a><span class="sd">    prefix value to suit your specific, defaults to ANN_</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a><span class="sd">    :type prefix: str (optional)</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a><span class="sd">    :param header: The `header` parameter in the `explode_annotation_format` function is a list of</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a><span class="sd">    column names that will be used to create a DataFrame from the input annotation string. Each element</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a><span class="sd">    in the `header` list corresponds to a specific field in the annotation data</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a><span class="sd">    :type header: list</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a><span class="sd">    :return: The function `explode_annotation_format` returns a string that contains the exploded and</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a><span class="sd">    formatted annotation information based on the input parameters provided. The format of the returned</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a><span class="sd">    string depends on the `output_format` parameter. If `output_format` is set to &quot;JSON&quot;, the function</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a><span class="sd">    returns a JSON-formatted string. Otherwise, it returns a string with annotations formatted based on</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a><span class="sd">    the other parameters such as `uniquify</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a>    <span class="c1"># Split annotation ann values</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a>    <span class="n">annotation_infos</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">annotation</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)]</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>    <span class="c1"># Create dictionary</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>    <span class="n">annotation_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">header</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">))}</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>    <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">annotation_infos</span><span class="p">:</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">)):</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>            <span class="n">annotation_dict</span><span class="p">[</span><span class="n">header</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>    <span class="c1"># Fetch each annotations</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>    <span class="k">if</span> <span class="n">output_format</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;JSON&quot;</span><span class="p">:</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a>        <span class="c1"># Transpose dict</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a>        <span class="n">annotation_explode</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a>            <span class="n">i</span><span class="p">:</span> <span class="p">{</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">annotation_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">annotation_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()))))</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a>        <span class="p">}</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a>        <span class="n">ann_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">annotation_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a>            <span class="k">if</span> <span class="n">uniquify</span><span class="p">:</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a>                <span class="n">values</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a>            <span class="n">ann_list_infos</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a>            <span class="k">if</span> <span class="n">ann_list_infos</span><span class="p">:</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a>                <span class="n">header_clean</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">char</span> <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">key</span> <span class="k">if</span> <span class="n">char</span><span class="o">.</span><span class="n">isalnum</span><span class="p">())</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a>                <span class="n">ann_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">header_clean</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">ann_list_infos</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a>        <span class="c1"># join list</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a>        <span class="n">annotation_explode</span> <span class="o">=</span> <span class="s2">&quot;;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ann_list</span><span class="p">)</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>    <span class="k">return</span> <span class="n">annotation_explode</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a><span class="k">def</span> <span class="nf">extract_snpeff_hgvs</span><span class="p">(</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a>    <span class="n">snpeff</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a>    <span class="n">header</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>        <span class="s2">&quot;Allele&quot;</span><span class="p">,</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a>        <span class="s2">&quot;Annotation&quot;</span><span class="p">,</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a>        <span class="s2">&quot;Annotation_Impact&quot;</span><span class="p">,</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>        <span class="s2">&quot;Gene_Name&quot;</span><span class="p">,</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>        <span class="s2">&quot;Gene_ID&quot;</span><span class="p">,</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>        <span class="s2">&quot;Feature_Type&quot;</span><span class="p">,</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>        <span class="s2">&quot;Feature_ID&quot;</span><span class="p">,</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>        <span class="s2">&quot;Transcript_BioType&quot;</span><span class="p">,</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>        <span class="s2">&quot;Rank&quot;</span><span class="p">,</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>        <span class="s2">&quot;HGVS.c&quot;</span><span class="p">,</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>        <span class="s2">&quot;HGVS.p&quot;</span><span class="p">,</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>        <span class="s2">&quot;cDNA.pos / cDNA.length&quot;</span><span class="p">,</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>        <span class="s2">&quot;CDS.pos / CDS.length&quot;</span><span class="p">,</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>        <span class="s2">&quot;AA.pos / AA.length&quot;</span><span class="p">,</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>        <span class="s2">&quot;Distance&quot;</span><span class="p">,</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>        <span class="s2">&quot;ERRORS / WARNINGS / INFO&quot;</span><span class="p">,</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a>    <span class="p">],</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a><span class="sd">    This function extracts HGVS annotations from a given snpEff annotation string and returns them as a</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a><span class="sd">    comma-separated string.</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a><span class="sd">    :param snpeff: The `snpeff` parameter is a string that contains annotations for genetic variants in</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a><span class="sd">    a specific format. It is used as input to extract HGVS notation for the variants</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a><span class="sd">    :type snpeff: str</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a><span class="sd">    :param header: The header parameter is a list of column names that will be used to create a pandas</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a><span class="sd">    DataFrame from the snpeff string input. It is used to extract specific information from the snpeff</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a><span class="sd">    annotations</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a><span class="sd">    :type header: str</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a><span class="sd">    :return: a string that contains the HGVS annotations extracted from the input SNPEff annotation</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a><span class="sd">    string.</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>    <span class="c1"># Split snpeff ann values</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>    <span class="n">snpeff_infos</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">snpeff</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)]</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a>    <span class="c1"># Create Dataframe</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>    <span class="n">snpeff_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">)):</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>        <span class="n">snpeff_dict</span><span class="p">[</span><span class="n">header</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">snpeff_infos</span><span class="p">]</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">snpeff_dict</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a>    <span class="c1"># Fetch each annotations</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a>    <span class="n">hgvs_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a>        <span class="c1"># Catch values</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a>        <span class="n">gene_id</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Gene_ID&quot;</span><span class="p">]</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a>        <span class="n">feature_id</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Feature_ID&quot;</span><span class="p">]</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a>        <span class="n">rank</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Rank&quot;</span><span class="p">]</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a>        <span class="n">hgvs_c</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;HGVS.c&quot;</span><span class="p">]</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>        <span class="n">hgvs_p</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;HGVS.p&quot;</span><span class="p">]</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a>        <span class="c1"># Concatenate with &quot;:&quot; if not empty</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>        <span class="k">if</span> <span class="n">gene_id</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gene_id</span><span class="p">)</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>        <span class="k">if</span> <span class="n">feature_id</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature_id</span><span class="p">)</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>        <span class="k">if</span> <span class="n">rank</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;exon&quot;</span> <span class="o">+</span> <span class="n">rank</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a>        <span class="k">if</span> <span class="n">hgvs_c</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a>            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hgvs_c</span><span class="p">)</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>        <span class="k">if</span> <span class="n">hgvs_p</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a>            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hgvs_p</span><span class="p">)</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>        <span class="n">hgvs</span> <span class="o">=</span> <span class="s2">&quot;:&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a>        <span class="c1"># Add to list</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>        <span class="n">hgvs_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hgvs</span><span class="p">)</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>    <span class="c1"># join list</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>    <span class="n">snpeff_hgvs</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">hgvs_list</span><span class="p">)</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>    <span class="k">return</span> <span class="n">snpeff_hgvs</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a><span class="k">def</span> <span class="nf">explode_snpeff_ann</span><span class="p">(</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>    <span class="n">snpeff</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>    <span class="n">uniquify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>    <span class="n">output_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;fields&quot;</span><span class="p">,</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>    <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ANN_&quot;</span><span class="p">,</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>    <span class="n">header</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>        <span class="s2">&quot;Allele&quot;</span><span class="p">,</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>        <span class="s2">&quot;Annotation&quot;</span><span class="p">,</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>        <span class="s2">&quot;Annotation_Impact&quot;</span><span class="p">,</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>        <span class="s2">&quot;Gene_Name&quot;</span><span class="p">,</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>        <span class="s2">&quot;Gene_ID&quot;</span><span class="p">,</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a>        <span class="s2">&quot;Feature_Type&quot;</span><span class="p">,</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a>        <span class="s2">&quot;Feature_ID&quot;</span><span class="p">,</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>        <span class="s2">&quot;Transcript_BioType&quot;</span><span class="p">,</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a>        <span class="s2">&quot;Rank&quot;</span><span class="p">,</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>        <span class="s2">&quot;HGVS.c&quot;</span><span class="p">,</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>        <span class="s2">&quot;HGVS.p&quot;</span><span class="p">,</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>        <span class="s2">&quot;cDNA.pos / cDNA.length&quot;</span><span class="p">,</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>        <span class="s2">&quot;CDS.pos / CDS.length&quot;</span><span class="p">,</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>        <span class="s2">&quot;AA.pos / AA.length&quot;</span><span class="p">,</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>        <span class="s2">&quot;Distance&quot;</span><span class="p">,</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a>        <span class="s2">&quot;ERRORS / WARNINGS / INFO&quot;</span><span class="p">,</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a>    <span class="p">],</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a><span class="sd">    The `explode_snpeff_ann` function takes a string of SNPEff annotations, splits and processes them</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a><span class="sd">    based on specified parameters, and returns the processed annotations in a specified output format.</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a><span class="sd">    :param snpeff: The `snpeff` parameter is a string containing annotations separated by commas. Each</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a><span class="sd">    annotation is further divided into different fields separated by pipes (|)</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a><span class="sd">    :type snpeff: str</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a><span class="sd">    :param uniquify: The `uniquify` parameter in the `explode_snpeff_ann` function is a boolean flag</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a><span class="sd">    that determines whether to keep only unique values for each annotation field or not. If `uniquify`</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a><span class="sd">    is set to `True`, only unique values will be kept for each annotation field. If, defaults to False</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a><span class="sd">    :type uniquify: bool (optional)</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a><span class="sd">    :param output_format: The `output_format` parameter in the `explode_snpeff_ann` function specifies</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a><span class="sd">    the format in which the output will be generated. The function supports two output formats: &quot;fields&quot;</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a><span class="sd">    and &quot;JSON&quot;, defaults to fields</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a><span class="sd">    :type output_format: str (optional)</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a><span class="sd">    :param prefix: The `prefix` parameter in the `explode_snpeff_ann` function is used to specify the</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a><span class="sd">    prefix that will be added to each annotation field in the output. For example, if the prefix is set</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a><span class="sd">    to &quot;ANN_&quot;, then the output annotations will be formatted as &quot;ANN_Annotation=example_annotation,</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a><span class="sd">    defaults to ANN_</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a><span class="sd">    :type prefix: str (optional)</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a><span class="sd">    :param header: The `header` parameter in the `explode_snpeff_ann` function is a list of strings that</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a><span class="sd">    represent the column names or fields for the output data. These strings include information such as</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a><span class="sd">    allele, annotation, gene name, gene ID, feature type, transcript biotype, and various other details</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a><span class="sd">    related</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a><span class="sd">    :type header: list</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a><span class="sd">    :return: The function `explode_snpeff_ann` returns a string that contains the exploded and formatted</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a><span class="sd">    SNPEff annotations based on the input parameters provided. The specific format of the returned</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a><span class="sd">    string depends on the `output_format`, `uniquify`, and other parameters specified in the function.</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>    <span class="c1"># Split snpeff ann values</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a>    <span class="n">snpeff_infos</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">snpeff</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)]</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>    <span class="c1"># Create Dataframe</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>    <span class="n">snpeff_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">)):</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>        <span class="k">if</span> <span class="n">output_format</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;JSON&quot;</span><span class="p">]:</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>            <span class="n">header_clean</span> <span class="o">=</span> <span class="n">header</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>            <span class="n">header_clean</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">char</span> <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">header</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">char</span><span class="o">.</span><span class="n">isalnum</span><span class="p">())</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>        <span class="n">snpeff_dict</span><span class="p">[</span><span class="n">header_clean</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">snpeff_infos</span><span class="p">]</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">snpeff_dict</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a>    <span class="c1"># Fetch each annotations</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a>    <span class="k">if</span> <span class="n">output_format</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;JSON&quot;</span><span class="p">]:</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>        <span class="n">snpeff_ann_explode</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>        <span class="n">ann_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>        <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="n">df</span><span class="p">:</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>            <span class="k">if</span> <span class="n">uniquify</span><span class="p">:</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>                <span class="n">ann_list_infos</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">annotation</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a>                <span class="n">ann_list_infos</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">annotation</span><span class="p">])</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>            <span class="k">if</span> <span class="n">ann_list_infos</span><span class="p">:</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a>                <span class="n">ann_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">annotation</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">ann_list_infos</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>        <span class="c1"># join list</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>        <span class="n">snpeff_ann_explode</span> <span class="o">=</span> <span class="s2">&quot;;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ann_list</span><span class="p">)</span>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a>    <span class="k">return</span> <span class="n">snpeff_ann_explode</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a><span class="k">def</span> <span class="nf">get_index</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a><span class="sd">    The function returns the index of a given value in a list, or -1 if the value is not in the list.</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a><span class="sd">    :param value: The value to search for in the list</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a><span class="sd">    :param values: The parameter &quot;values&quot; is a list of values in which we want to find the index of a</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a><span class="sd">    specific value. It is an optional parameter with a default value of an empty list</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a><span class="sd">    :type values: list</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a><span class="sd">    :return: The function `get_index` returns the index of the first occurrence of the `value` parameter</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a><span class="sd">    in the `values` list. If the `value` parameter is not found in the `values` list, the function</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a><span class="sd">    returns -1.</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>        <span class="k">return</span> <span class="n">values</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>        <span class="c1"># If element does not exist, return -1</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a><span class="k">def</span> <span class="nf">get_file_format</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a><span class="sd">    It takes a filename and returns the file format</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a><span class="sd">    :param filename: the name of the file you want to get the format of</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a><span class="sd">    :type filename: str</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a><span class="sd">    :return: The file format of the file.</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>        <span class="n">filename_name</span><span class="p">,</span> <span class="n">filename_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>        <span class="n">filename_format</span> <span class="o">=</span> <span class="n">filename_extension</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a>        <span class="k">if</span> <span class="n">filename_format</span> <span class="ow">in</span> <span class="n">file_compressed_format</span><span class="p">:</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a>            <span class="n">_</span><span class="p">,</span> <span class="n">filename_name_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename_name</span><span class="p">)</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a>            <span class="n">filename_format</span> <span class="o">=</span> <span class="n">filename_name_extension</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a>        <span class="n">filename_format</span> <span class="o">=</span> <span class="s2">&quot;unknown&quot;</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a>    <span class="k">return</span> <span class="n">filename_format</span>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a><span class="k">def</span> <span class="nf">findbypipeline</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]):</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a><span class="sd">    This function takes a dataframe and a list of samples, and returns the number of pipelines found in</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a><span class="sd">    the samples that have a non-null GT value.</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a><span class="sd">    :param df: The input dataframe containing genetic variant information</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a><span class="sd">    :param samples: The `samples` parameter is a list of strings representing the names of the</span>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a><span class="sd">    samples/pipelines to be searched for in the input dataframe `df`</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a><span class="sd">    :type samples: list</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a><span class="sd">    :return: a string in the format of &quot;nb_pipeline_find/nb_pipeline&quot;, where nb_pipeline_find is the</span>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a><span class="sd">    number of pipelines in the input list samples that have a non-null GT value in the input dataframe</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a><span class="sd">    df, and nb_pipeline is the total number of pipelines in the input list samples. If the input list</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a><span class="sd">    samples is empty, the function returns &quot;0/0&quot;.</span>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a>    <span class="c1"># format</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a>    <span class="n">format_fields</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;FORMAT&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>    <span class="c1"># no sample/pipeline</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a>        <span class="k">return</span> <span class="s2">&quot;0/0&quot;</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a>    <span class="c1"># init</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>    <span class="n">nb_pipeline</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a>    <span class="n">nb_pipeline_find</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>    <span class="c1"># For each sample/pipeline</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a>    <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a>        <span class="c1"># Split snpeff ann values</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a>        <span class="n">sample_infos</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sample</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>        <span class="c1"># Create Dataframe</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>        <span class="n">sample_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">format_fields</span><span class="p">)):</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_infos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a>                <span class="n">sample_dict</span><span class="p">[</span><span class="n">format_fields</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">sample_infos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>        <span class="c1"># Check if GT not null</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a>        <span class="k">if</span> <span class="n">sample_dict</span><span class="p">[</span><span class="s2">&quot;GT&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;./.&quot;</span><span class="p">,</span> <span class="s2">&quot;.|.&quot;</span><span class="p">]:</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>            <span class="n">nb_pipeline_find</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">nb_pipeline_find</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">nb_pipeline</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a><span class="k">def</span> <span class="nf">genotypeconcordance</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]):</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a><span class="sd">    The function checks the genotype concordance of a given list of samples in a dataframe.</span>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a><span class="sd">    :param df: The input dataframe containing genetic variant information, including genotype</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a><span class="sd">    information for each sample/pipeline</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a><span class="sd">    :param samples: The parameter &quot;samples&quot; is a list of sample/pipeline names that are present in the</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a><span class="sd">    input dataframe &quot;df&quot;. These samples/pipelines have genotype information that will be used to</span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a><span class="sd">    calculate genotype concordance</span>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a><span class="sd">    :type samples: list</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a><span class="sd">    :return: a string that indicates whether the genotypes of the specified samples in the input</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a><span class="sd">    dataframe are concordant or not. The string is either &quot;TRUE&quot; or &quot;FALSE&quot;, depending on whether all</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a><span class="sd">    the specified samples have the same genotype or not.</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a>    <span class="c1"># format</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>    <span class="n">format_fields</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;FORMAT&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a>    <span class="c1"># no sample/pipeline</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>        <span class="k">return</span> <span class="s2">&quot;0/0&quot;</span>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>    <span class="c1"># init</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>    <span class="n">genotype_list</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>    <span class="c1"># For each sample/pipeline</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a>    <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>        <span class="k">if</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">df</span><span class="p">:</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>            <span class="c1"># Split snpeff ann values</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>            <span class="n">sample_infos</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sample</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a>            <span class="c1"># Create Dataframe</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a>            <span class="n">sample_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">format_fields</span><span class="p">)):</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_infos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>                    <span class="n">sample_dict</span><span class="p">[</span><span class="n">format_fields</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">sample_infos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a>            <span class="c1"># Check if GT not null</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>            <span class="c1"># genotype_list[sample_dict[&quot;GT&quot;]] = 1</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>            <span class="k">if</span> <span class="n">sample_dict</span><span class="p">[</span><span class="s2">&quot;GT&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;./.&quot;</span><span class="p">,</span> <span class="s2">&quot;.|.&quot;</span><span class="p">]:</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>                <span class="n">genotype_list</span><span class="p">[</span><span class="n">sample_dict</span><span class="p">[</span><span class="s2">&quot;GT&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">genotype_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a><span class="k">def</span> <span class="nf">genotype_compression</span><span class="p">(</span><span class="n">genotype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a><span class="sd">    The function takes a genotype string, replaces dots with zeros, removes non-digit characters, sorts</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a><span class="sd">    and removes duplicates, and returns the compressed genotype string.</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a><span class="sd">    :param genotype: The input genotype as a string. It is a DNA sequence that contains genetic</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a><span class="sd">    information</span>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a><span class="sd">    :type genotype: str</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a><span class="sd">    :return: The function `genotype_compression` returns a compressed version of the input genotype</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a><span class="sd">    string. The compressed string has all dots replaced with 0s, all non-digit characters removed, and</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a><span class="sd">    duplicates removed and sorted. The compressed string is returned as a string.</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>    <span class="n">genotype_compressed</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>        <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\D&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">genotype</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">))))</span>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a>    <span class="p">)</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a>    <span class="k">return</span> <span class="n">genotype_compressed</span>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a><span class="k">def</span> <span class="nf">genotype_barcode</span><span class="p">(</span><span class="n">genotype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a><span class="sd">    This function takes a genotype string and compresses it, then returns a barcode string based on the</span>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a><span class="sd">    length and content of the compressed genotype.</span>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a><span class="sd">    :param genotype: The genotype parameter is a string that represents a genetic sequence or code</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a><span class="sd">    :type genotype: str</span>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a><span class="sd">    :return: The function `genotype_barcode` returns a string representing the barcode for a given</span>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a><span class="sd">    genotype. The barcode can be &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, or &quot;?&quot; depending on the length and content of the</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a><span class="sd">    compressed genotype string.</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a>    <span class="n">genotype_compressed</span> <span class="o">=</span> <span class="n">genotype_compression</span><span class="p">(</span><span class="n">genotype</span><span class="p">)</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">genotype_compressed</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a>        <span class="k">if</span> <span class="n">genotype_compressed</span> <span class="o">==</span> <span class="s2">&quot;0&quot;</span><span class="p">:</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a>            <span class="n">barcode</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a>            <span class="n">barcode</span> <span class="o">=</span> <span class="s2">&quot;2&quot;</span>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a>    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">genotype_compressed</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a>        <span class="n">barcode</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a>        <span class="n">barcode</span> <span class="o">=</span> <span class="s2">&quot;?&quot;</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a>    <span class="k">return</span> <span class="n">barcode</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a><span class="k">def</span> <span class="nf">barcode</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]):</span>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a><span class="sd">    Generates a barcode based on the genotype of the specified samples.</span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a><span class="sd">    :param df: A pandas DataFrame containing the genetic data.</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a><span class="sd">    :type df: pandas.DataFrame</span>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a><span class="sd">    :param samples: A list of sample names to use for generating the barcode.</span>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a><span class="sd">    :type samples: list(str)</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a><span class="sd">    :return: A barcode string based on the genotype of the specified samples.</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a><span class="sd">    :rtype: str</span>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a>    <span class="c1"># format</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>    <span class="n">format_fields</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;FORMAT&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a>    <span class="c1"># no sample/pipeline</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a>    <span class="c1"># init</span>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>    <span class="n">barcode</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a>    <span class="c1"># For each sample/pipeline</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a>    <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>        <span class="k">if</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">df</span><span class="p">:</span>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a>            <span class="c1"># Split snpeff ann values</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a>            <span class="n">sample_infos</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sample</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a>            <span class="c1"># Create Dataframe</span>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>            <span class="n">sample_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">format_fields</span><span class="p">)):</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_infos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>                    <span class="n">sample_dict</span><span class="p">[</span><span class="n">format_fields</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">sample_infos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a>            <span class="c1"># generate barcode</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>            <span class="n">barcode</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">genotype_barcode</span><span class="p">(</span><span class="n">sample_dict</span><span class="p">[</span><span class="s2">&quot;GT&quot;</span><span class="p">]))</span>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">barcode</span><span class="p">)</span>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a><span class="k">def</span> <span class="nf">trio</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]):</span>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a><span class="sd">    The function trio(df, samples:list = []) determines the type of variant (denovo, dominant, or</span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a><span class="sd">    recessive) in a trio based on the barcode generated from the samples.</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a><span class="sd">    :param df: The input dataframe containing genetic variant information</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a><span class="sd">    :param samples: A list of sample IDs to be used in the analysis</span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a><span class="sd">    :type samples: list</span>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a><span class="sd">    :return: The function `trio` returns a string that represents the type of variant in a trio</span>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a><span class="sd">    analysis, which can be &quot;denovo&quot;, &quot;dominant&quot;, &quot;recessive&quot;, or &quot;unknown&quot;.</span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a>    <span class="c1"># no sample/pipeline</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a>    <span class="c1"># init</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>    <span class="n">trio_barcode</span> <span class="o">=</span> <span class="n">barcode</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">samples</span><span class="p">)</span>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a>    <span class="c1"># switcher</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a>    <span class="n">switcher</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>        <span class="s2">&quot;001&quot;</span><span class="p">:</span> <span class="s2">&quot;denovo&quot;</span><span class="p">,</span>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a>        <span class="p">(</span><span class="s2">&quot;011&quot;</span><span class="p">,</span> <span class="s2">&quot;101&quot;</span><span class="p">,</span> <span class="s2">&quot;111&quot;</span><span class="p">,</span> <span class="s2">&quot;021&quot;</span><span class="p">,</span> <span class="s2">&quot;201&quot;</span><span class="p">,</span> <span class="s2">&quot;121&quot;</span><span class="p">,</span> <span class="s2">&quot;211&quot;</span><span class="p">):</span> <span class="s2">&quot;dominant&quot;</span><span class="p">,</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a>        <span class="p">(</span><span class="s2">&quot;112&quot;</span><span class="p">,</span> <span class="s2">&quot;212&quot;</span><span class="p">,</span> <span class="s2">&quot;122&quot;</span><span class="p">,</span> <span class="s2">&quot;222&quot;</span><span class="p">):</span> <span class="s2">&quot;recessive&quot;</span><span class="p">,</span>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a>    <span class="p">}</span>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a>    <span class="n">trio_variant_type</span> <span class="o">=</span> <span class="s2">&quot;unknown&quot;</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a>    <span class="k">for</span> <span class="n">case</span> <span class="ow">in</span> <span class="n">switcher</span><span class="p">:</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a>        <span class="k">if</span> <span class="n">trio_barcode</span> <span class="ow">in</span> <span class="n">case</span><span class="p">:</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a>            <span class="n">trio_variant_type</span> <span class="o">=</span> <span class="n">switcher</span><span class="p">[</span><span class="n">case</span><span class="p">]</span>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a>            <span class="k">break</span>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a>    <span class="k">return</span> <span class="n">trio_variant_type</span>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a><span class="k">def</span> <span class="nf">vaf_normalization</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">sample</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a><span class="sd">    This function takes in a row of data and a sample name, extracts the genotype information for that</span>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a><span class="sd">    sample, calculates the variant allele frequency (VAF) from the genotype information, and adds the</span>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a><span class="sd">    VAF to the genotype information before returning it.</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a><span class="sd">    :param row: The input row of a pandas DataFrame containing information about a genetic variant</span>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a><span class="sd">    :param sample: The parameter &quot;sample&quot; is a string representing the name of the sample for which we</span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a><span class="sd">    want to calculate the VAF (Variant Allele Frequency). It is used to extract the genotype information</span>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a><span class="sd">    for that particular sample from the input row</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a><span class="sd">    :type sample: str</span>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a><span class="sd">    :return: a string that represents the genotype information for a given sample with an added &quot;VAF&quot;</span>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a><span class="sd">    field that represents the variant allele frequency.</span>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a>    <span class="c1"># format</span>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a>    <span class="n">format_fields</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;FORMAT&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a>    <span class="c1"># Sample genotype</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a>    <span class="n">sample_genotype</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">sample</span><span class="p">]</span>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a>    <span class="c1"># No genotype</span>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">sample_genotype</span><span class="p">:</span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a>        <span class="n">sample_genotype</span> <span class="o">=</span> <span class="s2">&quot;./.&quot;</span>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a>    <span class="c1"># Split samples values values</span>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a>    <span class="n">sample_genotype_infos</span> <span class="o">=</span> <span class="n">sample_genotype</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a>    <span class="c1"># Create Dataframe</span>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a>    <span class="n">sample_genotype_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">format_fields</span><span class="p">)):</span>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_genotype_infos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a>            <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="n">format_fields</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">sample_genotype_infos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a>            <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="n">format_fields</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a>
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a>    <span class="c1"># Find VAF</span>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a>    <span class="c1"># Default VAF</span>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a>    <span class="n">vaf</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a>    <span class="c1"># VAF from FREQ</span>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a>    <span class="k">if</span> <span class="s2">&quot;FREQ&quot;</span> <span class="ow">in</span> <span class="n">sample_genotype_dict</span><span class="p">:</span>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a>        <span class="k">if</span> <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="s2">&quot;FREQ&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;.&quot;</span><span class="p">:</span>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a>            <span class="n">vaf_freq</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a>                <span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="s2">&quot;FREQ&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">))</span>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a>            <span class="p">)</span>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a>            <span class="k">if</span> <span class="n">vaf_freq</span><span class="p">:</span>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a>                <span class="n">vaf</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">vaf_freq</span> <span class="o">/</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a>    <span class="c1"># VAF from DP4</span>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a>    <span class="k">elif</span> <span class="s2">&quot;DP4&quot;</span> <span class="ow">in</span> <span class="n">sample_genotype_dict</span><span class="p">:</span>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a>        <span class="k">if</span> <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="s2">&quot;DP4&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;.&quot;</span><span class="p">:</span>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a>            <span class="n">dp4_split</span> <span class="o">=</span> <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="s2">&quot;DP4&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a>            <span class="k">if</span> <span class="n">dp4_split</span> <span class="o">!=</span> <span class="p">[</span><span class="s2">&quot;.&quot;</span><span class="p">]:</span>
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a>                <span class="n">dp4_dp</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">dp4_split</span><span class="p">))</span>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a>                <span class="n">pd4_alt</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">dp4_split</span><span class="p">[</span><span class="mi">2</span><span class="p">:]))</span>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a>                <span class="n">vaf</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">pd4_alt</span> <span class="o">/</span> <span class="n">dp4_dp</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="k">if</span> <span class="n">dp4_dp</span> <span class="k">else</span> <span class="s2">&quot;.&quot;</span>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a>    <span class="c1"># VAF from AD</span>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a>    <span class="k">elif</span> <span class="s2">&quot;AD&quot;</span> <span class="ow">in</span> <span class="n">sample_genotype_dict</span><span class="p">:</span>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a>        <span class="k">if</span> <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="s2">&quot;AD&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;.&quot;</span><span class="p">:</span>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a>            <span class="n">ad_split</span> <span class="o">=</span> <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="s2">&quot;AD&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a>            <span class="k">if</span> <span class="n">ad_split</span> <span class="o">!=</span> <span class="p">[</span><span class="s2">&quot;.&quot;</span><span class="p">]:</span>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a>                <span class="n">ad_dp</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">ad_split</span><span class="p">))</span>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a>                <span class="n">ad_alt</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">ad_split</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a>                <span class="n">vaf</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">ad_alt</span> <span class="o">/</span> <span class="n">ad_dp</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="k">if</span> <span class="n">ad_dp</span> <span class="k">else</span> <span class="s2">&quot;.&quot;</span>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a>
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a>    <span class="c1"># add vaf into genotype</span>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a>    <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="s2">&quot;VAF&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vaf</span>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a>    <span class="c1"># Create new genotype info</span>
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a>    <span class="n">genotype_with_vaf</span> <span class="o">=</span> <span class="s2">&quot;:&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">sample_genotype_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a>    <span class="k">return</span> <span class="n">genotype_with_vaf</span>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a><span class="k">def</span> <span class="nf">genotype_stats</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;VAF&quot;</span><span class="p">):</span>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a><span class="sd">    This function computes statistics on a specified information field (e.g. VAF) for a given set of</span>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a><span class="sd">    samples in a pandas dataframe.</span>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a>
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a><span class="sd">    :param df: The input dataframe containing variant information</span>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a><span class="sd">    :param samples: The list of sample/pipeline names for which to compute the genotype statistics. If</span>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a><span class="sd">    empty, the function will return an empty dictionary</span>
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a><span class="sd">    :type samples: list</span>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a><span class="sd">    :param info: The parameter &quot;info&quot; is a string that represents the type of information being analyzed</span>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a><span class="sd">    in the function. In this case, it is used to compute statistics on the Variant Allele Frequency</span>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a><span class="sd">    (VAF) of genetic variants, defaults to VAF</span>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a><span class="sd">    :type info: str (optional)</span>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a><span class="sd">    :return: a dictionary containing statistics related to a specified information field (default is</span>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a><span class="sd">    &quot;VAF&quot;) for a given set of samples in a pandas DataFrame. The statistics include the number of</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a><span class="sd">    values, a list of values, minimum value, maximum value, mean, median, and standard deviation. If no</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a><span class="sd">    samples are specified, an empty dictionary is returned.</span>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a>    <span class="c1"># format</span>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a>    <span class="n">format_fields</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;FORMAT&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a>    <span class="c1"># init</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a>    <span class="n">vaf_stats</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a>        <span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_nb&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a>        <span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_list&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a>        <span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_min&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a>        <span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_max&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a>        <span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_mean&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a>        <span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_mediane&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a>        <span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_stdev&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a>    <span class="p">}</span>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a>    <span class="c1"># no sample/pipeline</span>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a>        <span class="k">return</span> <span class="n">vaf_stats</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a>    <span class="c1"># init</span>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a>    <span class="n">vaf_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a>    <span class="c1"># For each sample/pipeline</span>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a>    <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a>        <span class="c1"># Split snpeff ann values</span>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a>        <span class="n">sample_infos</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sample</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a>
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a>        <span class="c1"># Create Dataframe</span>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a>        <span class="n">sample_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">format_fields</span><span class="p">)):</span>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_infos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a>                <span class="n">sample_dict</span><span class="p">[</span><span class="n">format_fields</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">sample_infos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a>        <span class="c1"># Check if GT not null</span>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a>        <span class="k">if</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">sample_dict</span><span class="p">:</span>
</span><span id="L-1352"><a href="#L-1352"><span class="linenos">1352</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="L-1353"><a href="#L-1353"><span class="linenos">1353</span></a>                <span class="n">vaf_float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">sample_dict</span><span class="p">[</span><span class="n">info</span><span class="p">])</span>
</span><span id="L-1354"><a href="#L-1354"><span class="linenos">1354</span></a>            <span class="k">except</span><span class="p">:</span>
</span><span id="L-1355"><a href="#L-1355"><span class="linenos">1355</span></a>                <span class="n">vaf_float</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1356"><a href="#L-1356"><span class="linenos">1356</span></a>            <span class="k">if</span> <span class="n">vaf_float</span><span class="p">:</span>
</span><span id="L-1357"><a href="#L-1357"><span class="linenos">1357</span></a>                <span class="n">vaf_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vaf_float</span><span class="p">)</span>
</span><span id="L-1358"><a href="#L-1358"><span class="linenos">1358</span></a>
</span><span id="L-1359"><a href="#L-1359"><span class="linenos">1359</span></a>    <span class="n">vaf_stats</span><span class="p">[</span><span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_nb&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vaf_list</span><span class="p">)</span>
</span><span id="L-1360"><a href="#L-1360"><span class="linenos">1360</span></a>    <span class="k">if</span> <span class="n">vaf_list</span><span class="p">:</span>
</span><span id="L-1361"><a href="#L-1361"><span class="linenos">1361</span></a>        <span class="n">vaf_stats</span><span class="p">[</span><span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_list&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;:&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vaf_list</span><span class="p">])</span>
</span><span id="L-1362"><a href="#L-1362"><span class="linenos">1362</span></a>
</span><span id="L-1363"><a href="#L-1363"><span class="linenos">1363</span></a>    <span class="c1"># Compute min, max, mean and median only if the list is not empty</span>
</span><span id="L-1364"><a href="#L-1364"><span class="linenos">1364</span></a>    <span class="k">if</span> <span class="n">vaf_list</span><span class="p">:</span>
</span><span id="L-1365"><a href="#L-1365"><span class="linenos">1365</span></a>        <span class="n">vaf_stats</span><span class="p">[</span><span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_min&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">vaf_list</span><span class="p">)</span>
</span><span id="L-1366"><a href="#L-1366"><span class="linenos">1366</span></a>        <span class="n">vaf_stats</span><span class="p">[</span><span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_max&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">vaf_list</span><span class="p">)</span>
</span><span id="L-1367"><a href="#L-1367"><span class="linenos">1367</span></a>        <span class="n">vaf_stats</span><span class="p">[</span><span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_mean&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">statistics</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">vaf_list</span><span class="p">)</span>
</span><span id="L-1368"><a href="#L-1368"><span class="linenos">1368</span></a>        <span class="n">vaf_stats</span><span class="p">[</span><span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_mediane&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">statistics</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">vaf_list</span><span class="p">)</span>
</span><span id="L-1369"><a href="#L-1369"><span class="linenos">1369</span></a>
</span><span id="L-1370"><a href="#L-1370"><span class="linenos">1370</span></a>    <span class="c1"># Check if there are at least 2 values in the list before computing variance or stdev</span>
</span><span id="L-1371"><a href="#L-1371"><span class="linenos">1371</span></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vaf_list</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-1372"><a href="#L-1372"><span class="linenos">1372</span></a>        <span class="n">vaf_stats</span><span class="p">[</span><span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_stdev&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">statistics</span><span class="o">.</span><span class="n">stdev</span><span class="p">(</span><span class="n">vaf_list</span><span class="p">)</span>
</span><span id="L-1373"><a href="#L-1373"><span class="linenos">1373</span></a>
</span><span id="L-1374"><a href="#L-1374"><span class="linenos">1374</span></a>    <span class="k">return</span> <span class="n">vaf_stats</span>
</span><span id="L-1375"><a href="#L-1375"><span class="linenos">1375</span></a>
</span><span id="L-1376"><a href="#L-1376"><span class="linenos">1376</span></a>
</span><span id="L-1377"><a href="#L-1377"><span class="linenos">1377</span></a><span class="k">def</span> <span class="nf">extract_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-1378"><a href="#L-1378"><span class="linenos">1378</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1379"><a href="#L-1379"><span class="linenos">1379</span></a><span class="sd">    The function extracts a compressed file in .zip or .gz format based on the file path provided.</span>
</span><span id="L-1380"><a href="#L-1380"><span class="linenos">1380</span></a>
</span><span id="L-1381"><a href="#L-1381"><span class="linenos">1381</span></a><span class="sd">    :param file_path: The file path parameter is a string that represents the path to a file that needs</span>
</span><span id="L-1382"><a href="#L-1382"><span class="linenos">1382</span></a><span class="sd">    to be extracted. The function checks if the file has a &quot;.zip&quot; or &quot;.gz&quot; extension and extracts it</span>
</span><span id="L-1383"><a href="#L-1383"><span class="linenos">1383</span></a><span class="sd">    accordingly</span>
</span><span id="L-1384"><a href="#L-1384"><span class="linenos">1384</span></a><span class="sd">    :type file_path: str</span>
</span><span id="L-1385"><a href="#L-1385"><span class="linenos">1385</span></a><span class="sd">    :param path: The `path` parameter is an optional string that represents the directory where the</span>
</span><span id="L-1386"><a href="#L-1386"><span class="linenos">1386</span></a><span class="sd">    extracted files will be saved. If no `path` is provided, the function will use the directory of the</span>
</span><span id="L-1387"><a href="#L-1387"><span class="linenos">1387</span></a><span class="sd">    `file_path` as the extraction destination</span>
</span><span id="L-1388"><a href="#L-1388"><span class="linenos">1388</span></a><span class="sd">    :type path: str</span>
</span><span id="L-1389"><a href="#L-1389"><span class="linenos">1389</span></a><span class="sd">    :param threads: The `threads` parameter is an optional parameter that specifies the number of</span>
</span><span id="L-1390"><a href="#L-1390"><span class="linenos">1390</span></a><span class="sd">    threads to use for extraction. By default, it is set to 1, meaning the extraction will be done using</span>
</span><span id="L-1391"><a href="#L-1391"><span class="linenos">1391</span></a><span class="sd">    a single thread, defaults to 1</span>
</span><span id="L-1392"><a href="#L-1392"><span class="linenos">1392</span></a><span class="sd">    :type threads: int (optional)</span>
</span><span id="L-1393"><a href="#L-1393"><span class="linenos">1393</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1394"><a href="#L-1394"><span class="linenos">1394</span></a>
</span><span id="L-1395"><a href="#L-1395"><span class="linenos">1395</span></a>    <span class="k">if</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.zip&quot;</span><span class="p">):</span>
</span><span id="L-1396"><a href="#L-1396"><span class="linenos">1396</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
</span><span id="L-1397"><a href="#L-1397"><span class="linenos">1397</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="L-1398"><a href="#L-1398"><span class="linenos">1398</span></a>        <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zip_ref</span><span class="p">:</span>
</span><span id="L-1399"><a href="#L-1399"><span class="linenos">1399</span></a>            <span class="n">zip_ref</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="L-1400"><a href="#L-1400"><span class="linenos">1400</span></a>    <span class="k">elif</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.gz&quot;</span><span class="p">):</span>
</span><span id="L-1401"><a href="#L-1401"><span class="linenos">1401</span></a>        <span class="n">concat_and_compress_files</span><span class="p">(</span>
</span><span id="L-1402"><a href="#L-1402"><span class="linenos">1402</span></a>            <span class="n">input_files</span><span class="o">=</span><span class="p">[</span><span class="n">file_path</span><span class="p">],</span>
</span><span id="L-1403"><a href="#L-1403"><span class="linenos">1403</span></a>            <span class="n">output_file</span><span class="o">=</span><span class="n">file_path</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">],</span>
</span><span id="L-1404"><a href="#L-1404"><span class="linenos">1404</span></a>            <span class="n">compression_type</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
</span><span id="L-1405"><a href="#L-1405"><span class="linenos">1405</span></a>            <span class="n">threads</span><span class="o">=</span><span class="n">threads</span><span class="p">,</span>
</span><span id="L-1406"><a href="#L-1406"><span class="linenos">1406</span></a>        <span class="p">)</span>
</span><span id="L-1407"><a href="#L-1407"><span class="linenos">1407</span></a>
</span><span id="L-1408"><a href="#L-1408"><span class="linenos">1408</span></a>
</span><span id="L-1409"><a href="#L-1409"><span class="linenos">1409</span></a><span class="k">def</span> <span class="nf">download_file</span><span class="p">(</span>
</span><span id="L-1410"><a href="#L-1410"><span class="linenos">1410</span></a>    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-1411"><a href="#L-1411"><span class="linenos">1411</span></a>    <span class="n">dest_file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-1412"><a href="#L-1412"><span class="linenos">1412</span></a>    <span class="n">chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">,</span>
</span><span id="L-1413"><a href="#L-1413"><span class="linenos">1413</span></a>    <span class="n">try_aria</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1414"><a href="#L-1414"><span class="linenos">1414</span></a>    <span class="n">aria_async_dns</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-1415"><a href="#L-1415"><span class="linenos">1415</span></a>    <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="L-1416"><a href="#L-1416"><span class="linenos">1416</span></a>    <span class="n">quiet</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1417"><a href="#L-1417"><span class="linenos">1417</span></a><span class="p">):</span>
</span><span id="L-1418"><a href="#L-1418"><span class="linenos">1418</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1419"><a href="#L-1419"><span class="linenos">1419</span></a><span class="sd">    The `download_file` function is a Python function that downloads a file from a given URL and saves</span>
</span><span id="L-1420"><a href="#L-1420"><span class="linenos">1420</span></a><span class="sd">    it to a specified destination file path in chunks.</span>
</span><span id="L-1421"><a href="#L-1421"><span class="linenos">1421</span></a>
</span><span id="L-1422"><a href="#L-1422"><span class="linenos">1422</span></a><span class="sd">    :param url: The `url` parameter is the URL of the file you want to download. It should be a string</span>
</span><span id="L-1423"><a href="#L-1423"><span class="linenos">1423</span></a><span class="sd">    that represents the complete URL, including the protocol (e.g., &quot;http://example.com/file.txt&quot;)</span>
</span><span id="L-1424"><a href="#L-1424"><span class="linenos">1424</span></a><span class="sd">    :type url: str</span>
</span><span id="L-1425"><a href="#L-1425"><span class="linenos">1425</span></a><span class="sd">    :param dest_file_path: The `dest_file_path` parameter is the path where the downloaded file will be</span>
</span><span id="L-1426"><a href="#L-1426"><span class="linenos">1426</span></a><span class="sd">    saved. It should be a string representing the file path, including the file name and extension. For</span>
</span><span id="L-1427"><a href="#L-1427"><span class="linenos">1427</span></a><span class="sd">    example, if you want to save the file as &quot;myfile.txt&quot; in the current directory, you can set `dest</span>
</span><span id="L-1428"><a href="#L-1428"><span class="linenos">1428</span></a><span class="sd">    :type dest_file_path: str</span>
</span><span id="L-1429"><a href="#L-1429"><span class="linenos">1429</span></a><span class="sd">    :param chunk_size: The `chunk_size` parameter determines the size of each chunk of data that is</span>
</span><span id="L-1430"><a href="#L-1430"><span class="linenos">1430</span></a><span class="sd">    downloaded at a time. In this case, the default value is set to 1 MB, which means that the file will</span>
</span><span id="L-1431"><a href="#L-1431"><span class="linenos">1431</span></a><span class="sd">    be downloaded in chunks of 1 MB at a time. This parameter can be adjusted according to</span>
</span><span id="L-1432"><a href="#L-1432"><span class="linenos">1432</span></a><span class="sd">    :type chunk_size: int</span>
</span><span id="L-1433"><a href="#L-1433"><span class="linenos">1433</span></a><span class="sd">    :param try_aria: The `try_aria` parameter is a boolean value that determines whether to use the</span>
</span><span id="L-1434"><a href="#L-1434"><span class="linenos">1434</span></a><span class="sd">    Aria2c command-line tool for downloading the file. If set to `True`, the function will attempt to</span>
</span><span id="L-1435"><a href="#L-1435"><span class="linenos">1435</span></a><span class="sd">    download the file using Aria2c. If set to `False`, the function will use the, defaults to True</span>
</span><span id="L-1436"><a href="#L-1436"><span class="linenos">1436</span></a><span class="sd">    :type try_aria: bool (optional)</span>
</span><span id="L-1437"><a href="#L-1437"><span class="linenos">1437</span></a><span class="sd">    :param aria_async_dns: The `aria_async_dns` parameter is a boolean value that determines whether to</span>
</span><span id="L-1438"><a href="#L-1438"><span class="linenos">1438</span></a><span class="sd">    use asynchronous DNS resolution with Aria2c. If set to `True`, Aria2c will use asynchronous DNS</span>
</span><span id="L-1439"><a href="#L-1439"><span class="linenos">1439</span></a><span class="sd">    resolution, which can improve download performance. If set to `False`, Aria2c will use synchronous,</span>
</span><span id="L-1440"><a href="#L-1440"><span class="linenos">1440</span></a><span class="sd">    defaults to False</span>
</span><span id="L-1441"><a href="#L-1441"><span class="linenos">1441</span></a><span class="sd">    :type aria_async_dns: bool (optional)</span>
</span><span id="L-1442"><a href="#L-1442"><span class="linenos">1442</span></a><span class="sd">    :param threads: The `threads` parameter specifies the number of threads to be used for downloading</span>
</span><span id="L-1443"><a href="#L-1443"><span class="linenos">1443</span></a><span class="sd">    the file. It determines the number of simultaneous connections that will be made to download the</span>
</span><span id="L-1444"><a href="#L-1444"><span class="linenos">1444</span></a><span class="sd">    file. By default, it is set to 1, which means that only one connection will be made at a time.</span>
</span><span id="L-1445"><a href="#L-1445"><span class="linenos">1445</span></a><span class="sd">    Increasing the value, defaults to 1</span>
</span><span id="L-1446"><a href="#L-1446"><span class="linenos">1446</span></a><span class="sd">    :type threads: int (optional)</span>
</span><span id="L-1447"><a href="#L-1447"><span class="linenos">1447</span></a><span class="sd">    :param quiet: The `quiet` parameter is a boolean value that determines whether to suppress the</span>
</span><span id="L-1448"><a href="#L-1448"><span class="linenos">1448</span></a><span class="sd">    output of the download process. If set to `True`, the output will be suppressed. If set to `False`,</span>
</span><span id="L-1449"><a href="#L-1449"><span class="linenos">1449</span></a><span class="sd">    the output will be displayed. By default, it is set to `True`, defaults to True</span>
</span><span id="L-1450"><a href="#L-1450"><span class="linenos">1450</span></a><span class="sd">    :type quiet: bool (optional)</span>
</span><span id="L-1451"><a href="#L-1451"><span class="linenos">1451</span></a><span class="sd">    :return: a boolean value indicating whether the file was successfully downloaded and saved to the</span>
</span><span id="L-1452"><a href="#L-1452"><span class="linenos">1452</span></a><span class="sd">    specified destination file path.</span>
</span><span id="L-1453"><a href="#L-1453"><span class="linenos">1453</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1454"><a href="#L-1454"><span class="linenos">1454</span></a>
</span><span id="L-1455"><a href="#L-1455"><span class="linenos">1455</span></a>    <span class="c1"># Full path</span>
</span><span id="L-1456"><a href="#L-1456"><span class="linenos">1456</span></a>    <span class="n">dest_file_path</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">)</span>
</span><span id="L-1457"><a href="#L-1457"><span class="linenos">1457</span></a>
</span><span id="L-1458"><a href="#L-1458"><span class="linenos">1458</span></a>    <span class="c1"># Create folder if not exists</span>
</span><span id="L-1459"><a href="#L-1459"><span class="linenos">1459</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">)):</span>
</span><span id="L-1460"><a href="#L-1460"><span class="linenos">1460</span></a>        <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">))</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-1461"><a href="#L-1461"><span class="linenos">1461</span></a>
</span><span id="L-1462"><a href="#L-1462"><span class="linenos">1462</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1463"><a href="#L-1463"><span class="linenos">1463</span></a>
</span><span id="L-1464"><a href="#L-1464"><span class="linenos">1464</span></a>        <span class="k">if</span> <span class="n">try_aria</span><span class="p">:</span>
</span><span id="L-1465"><a href="#L-1465"><span class="linenos">1465</span></a>
</span><span id="L-1466"><a href="#L-1466"><span class="linenos">1466</span></a>            <span class="c1"># Aria options</span>
</span><span id="L-1467"><a href="#L-1467"><span class="linenos">1467</span></a>            <span class="n">aria_async_dns_option</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">aria_async_dns</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="L-1468"><a href="#L-1468"><span class="linenos">1468</span></a>            <span class="k">if</span> <span class="n">quiet</span> <span class="ow">and</span> <span class="n">log</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">level</span> <span class="o">&gt;=</span> <span class="mi">20</span><span class="p">:</span>
</span><span id="L-1469"><a href="#L-1469"><span class="linenos">1469</span></a>                <span class="n">aria_quiet_option</span> <span class="o">=</span> <span class="s2">&quot; --quiet &quot;</span>
</span><span id="L-1470"><a href="#L-1470"><span class="linenos">1470</span></a>                <span class="n">aria_redirect_option</span> <span class="o">=</span> <span class="s2">&quot; 2&gt;/dev/null &quot;</span>
</span><span id="L-1471"><a href="#L-1471"><span class="linenos">1471</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1472"><a href="#L-1472"><span class="linenos">1472</span></a>                <span class="n">aria_quiet_option</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-1473"><a href="#L-1473"><span class="linenos">1473</span></a>                <span class="n">aria_redirect_option</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-1474"><a href="#L-1474"><span class="linenos">1474</span></a>
</span><span id="L-1475"><a href="#L-1475"><span class="linenos">1475</span></a>            <span class="c1"># Aria command</span>
</span><span id="L-1476"><a href="#L-1476"><span class="linenos">1476</span></a>            <span class="n">aria_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;aria2c -c -s </span><span class="si">{</span><span class="n">threads</span><span class="si">}</span><span class="s2"> -x </span><span class="si">{</span><span class="n">threads</span><span class="si">}</span><span class="s2"> -j 1 </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> -d </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">)</span><span class="si">}</span><span class="s2"> -o </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">aria_quiet_option</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1477"><a href="#L-1477"><span class="linenos">1477</span></a>
</span><span id="L-1478"><a href="#L-1478"><span class="linenos">1478</span></a>            <span class="c1"># Launch command</span>
</span><span id="L-1479"><a href="#L-1479"><span class="linenos">1479</span></a>            <span class="c1"># Try with --async-dns option</span>
</span><span id="L-1480"><a href="#L-1480"><span class="linenos">1480</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="L-1481"><a href="#L-1481"><span class="linenos">1481</span></a>                <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span>
</span><span id="L-1482"><a href="#L-1482"><span class="linenos">1482</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">aria_command</span><span class="si">}</span><span class="s2"> --async-dns=</span><span class="si">{</span><span class="n">aria_async_dns_option</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">aria_redirect_option</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1483"><a href="#L-1483"><span class="linenos">1483</span></a>                <span class="p">)</span>
</span><span id="L-1484"><a href="#L-1484"><span class="linenos">1484</span></a>                <span class="k">if</span> <span class="n">output</span><span class="p">:</span>
</span><span id="L-1485"><a href="#L-1485"><span class="linenos">1485</span></a>                    <span class="k">assert</span> <span class="kc">False</span>
</span><span id="L-1486"><a href="#L-1486"><span class="linenos">1486</span></a>            <span class="k">except</span><span class="p">:</span>
</span><span id="L-1487"><a href="#L-1487"><span class="linenos">1487</span></a>                <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">aria_command</span><span class="p">)</span>
</span><span id="L-1488"><a href="#L-1488"><span class="linenos">1488</span></a>
</span><span id="L-1489"><a href="#L-1489"><span class="linenos">1489</span></a>            <span class="c1"># Test output file</span>
</span><span id="L-1490"><a href="#L-1490"><span class="linenos">1490</span></a>            <span class="k">if</span> <span class="n">output</span> <span class="ow">or</span> <span class="ow">not</span> <span class="p">(</span>
</span><span id="L-1491"><a href="#L-1491"><span class="linenos">1491</span></a>                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">)</span><span class="o">.</span><span class="n">st_size</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="L-1492"><a href="#L-1492"><span class="linenos">1492</span></a>            <span class="p">):</span>
</span><span id="L-1493"><a href="#L-1493"><span class="linenos">1493</span></a>                <span class="k">assert</span> <span class="kc">False</span>
</span><span id="L-1494"><a href="#L-1494"><span class="linenos">1494</span></a>
</span><span id="L-1495"><a href="#L-1495"><span class="linenos">1495</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1496"><a href="#L-1496"><span class="linenos">1496</span></a>
</span><span id="L-1497"><a href="#L-1497"><span class="linenos">1497</span></a>            <span class="k">assert</span> <span class="kc">False</span>
</span><span id="L-1498"><a href="#L-1498"><span class="linenos">1498</span></a>
</span><span id="L-1499"><a href="#L-1499"><span class="linenos">1499</span></a>    <span class="k">except</span><span class="p">:</span>
</span><span id="L-1500"><a href="#L-1500"><span class="linenos">1500</span></a>
</span><span id="L-1501"><a href="#L-1501"><span class="linenos">1501</span></a>        <span class="c1"># Request</span>
</span><span id="L-1502"><a href="#L-1502"><span class="linenos">1502</span></a>        <span class="k">with</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">r</span><span class="p">:</span>
</span><span id="L-1503"><a href="#L-1503"><span class="linenos">1503</span></a>            <span class="n">r</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
</span><span id="L-1504"><a href="#L-1504"><span class="linenos">1504</span></a>
</span><span id="L-1505"><a href="#L-1505"><span class="linenos">1505</span></a>            <span class="c1"># Create a temporary file</span>
</span><span id="L-1506"><a href="#L-1506"><span class="linenos">1506</span></a>            <span class="n">tmp_file_path</span> <span class="o">=</span> <span class="n">dest_file_path</span> <span class="o">+</span> <span class="s2">&quot;.tmp&quot;</span>
</span><span id="L-1507"><a href="#L-1507"><span class="linenos">1507</span></a>
</span><span id="L-1508"><a href="#L-1508"><span class="linenos">1508</span></a>            <span class="c1"># Open the temporary file for writing in binary mode</span>
</span><span id="L-1509"><a href="#L-1509"><span class="linenos">1509</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tmp_file_path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-1510"><a href="#L-1510"><span class="linenos">1510</span></a>
</span><span id="L-1511"><a href="#L-1511"><span class="linenos">1511</span></a>                <span class="c1"># Download the file by chunks</span>
</span><span id="L-1512"><a href="#L-1512"><span class="linenos">1512</span></a>                <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="n">chunk_size</span><span class="p">):</span>
</span><span id="L-1513"><a href="#L-1513"><span class="linenos">1513</span></a>
</span><span id="L-1514"><a href="#L-1514"><span class="linenos">1514</span></a>                    <span class="c1"># Write the chunk to the temporary file</span>
</span><span id="L-1515"><a href="#L-1515"><span class="linenos">1515</span></a>                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</span><span id="L-1516"><a href="#L-1516"><span class="linenos">1516</span></a>
</span><span id="L-1517"><a href="#L-1517"><span class="linenos">1517</span></a>        <span class="c1"># Move the temporary file to the final destination</span>
</span><span id="L-1518"><a href="#L-1518"><span class="linenos">1518</span></a>        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">tmp_file_path</span><span class="p">,</span> <span class="n">dest_file_path</span><span class="p">)</span>
</span><span id="L-1519"><a href="#L-1519"><span class="linenos">1519</span></a>
</span><span id="L-1520"><a href="#L-1520"><span class="linenos">1520</span></a>    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">)</span>
</span><span id="L-1521"><a href="#L-1521"><span class="linenos">1521</span></a>
</span><span id="L-1522"><a href="#L-1522"><span class="linenos">1522</span></a>
</span><span id="L-1523"><a href="#L-1523"><span class="linenos">1523</span></a><span class="k">def</span> <span class="nf">whereis_bin</span><span class="p">(</span><span class="n">bin_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1524"><a href="#L-1524"><span class="linenos">1524</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot; &quot;&quot;&quot;</span>
</span><span id="L-1525"><a href="#L-1525"><span class="linenos">1525</span></a>
</span><span id="L-1526"><a href="#L-1526"><span class="linenos">1526</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bin_file</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-1527"><a href="#L-1527"><span class="linenos">1527</span></a>        <span class="n">whereis_bin</span> <span class="o">=</span> <span class="n">bin_file</span>
</span><span id="L-1528"><a href="#L-1528"><span class="linenos">1528</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1529"><a href="#L-1529"><span class="linenos">1529</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1530"><a href="#L-1530"><span class="linenos">1530</span></a>
</span><span id="L-1531"><a href="#L-1531"><span class="linenos">1531</span></a>    <span class="c1"># Switch to which</span>
</span><span id="L-1532"><a href="#L-1532"><span class="linenos">1532</span></a>    <span class="k">if</span> <span class="n">whereis_bin</span> <span class="ow">and</span> <span class="n">which</span><span class="p">(</span><span class="n">whereis_bin</span><span class="p">):</span>
</span><span id="L-1533"><a href="#L-1533"><span class="linenos">1533</span></a>        <span class="n">whereis_bin</span> <span class="o">=</span> <span class="n">which</span><span class="p">(</span><span class="n">whereis_bin</span><span class="p">)</span>
</span><span id="L-1534"><a href="#L-1534"><span class="linenos">1534</span></a>
</span><span id="L-1535"><a href="#L-1535"><span class="linenos">1535</span></a>    <span class="c1"># Full path</span>
</span><span id="L-1536"><a href="#L-1536"><span class="linenos">1536</span></a>    <span class="n">whereis_bin</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">whereis_bin</span><span class="p">)</span>
</span><span id="L-1537"><a href="#L-1537"><span class="linenos">1537</span></a>
</span><span id="L-1538"><a href="#L-1538"><span class="linenos">1538</span></a>    <span class="k">if</span> <span class="n">whereis_bin</span> <span class="ow">and</span> <span class="p">(</span>
</span><span id="L-1539"><a href="#L-1539"><span class="linenos">1539</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">whereis_bin</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">whereis_bin</span> <span class="ow">and</span> <span class="n">which</span><span class="p">(</span><span class="n">whereis_bin</span><span class="p">))</span>
</span><span id="L-1540"><a href="#L-1540"><span class="linenos">1540</span></a>    <span class="p">):</span>
</span><span id="L-1541"><a href="#L-1541"><span class="linenos">1541</span></a>        <span class="k">return</span> <span class="n">whereis_bin</span>
</span><span id="L-1542"><a href="#L-1542"><span class="linenos">1542</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1543"><a href="#L-1543"><span class="linenos">1543</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1544"><a href="#L-1544"><span class="linenos">1544</span></a>
</span><span id="L-1545"><a href="#L-1545"><span class="linenos">1545</span></a>
</span><span id="L-1546"><a href="#L-1546"><span class="linenos">1546</span></a><span class="k">def</span> <span class="nf">get_bin</span><span class="p">(</span>
</span><span id="L-1547"><a href="#L-1547"><span class="linenos">1547</span></a>    <span class="nb">bin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1548"><a href="#L-1548"><span class="linenos">1548</span></a>    <span class="n">tool</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1549"><a href="#L-1549"><span class="linenos">1549</span></a>    <span class="n">bin_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bin&quot;</span><span class="p">,</span>
</span><span id="L-1550"><a href="#L-1550"><span class="linenos">1550</span></a>    <span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-1551"><a href="#L-1551"><span class="linenos">1551</span></a>    <span class="n">default_folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT_TOOLS_FOLDER</span><span class="p">,</span>
</span><span id="L-1552"><a href="#L-1552"><span class="linenos">1552</span></a>    <span class="n">output_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bin&quot;</span><span class="p">,</span>
</span><span id="L-1553"><a href="#L-1553"><span class="linenos">1553</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1554"><a href="#L-1554"><span class="linenos">1554</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1555"><a href="#L-1555"><span class="linenos">1555</span></a><span class="sd">    The `get_bin` function retrieves the path to a specified binary file from a configuration dictionary</span>
</span><span id="L-1556"><a href="#L-1556"><span class="linenos">1556</span></a><span class="sd">    or searches for it in the file system if it is not specified in the configuration.</span>
</span><span id="L-1557"><a href="#L-1557"><span class="linenos">1557</span></a>
</span><span id="L-1558"><a href="#L-1558"><span class="linenos">1558</span></a><span class="sd">    :param bin: The `bin` parameter is a string or a pattern that represents the name of the binary file (e.g.,</span>
</span><span id="L-1559"><a href="#L-1559"><span class="linenos">1559</span></a><span class="sd">    `snpEff.jar`, `exomiser-cli*.jar`) that you want to retrieve the path for</span>
</span><span id="L-1560"><a href="#L-1560"><span class="linenos">1560</span></a><span class="sd">    :type bin: str</span>
</span><span id="L-1561"><a href="#L-1561"><span class="linenos">1561</span></a><span class="sd">    :param tool: The `tool` parameter is a string that represents the name of the tool. It is used to</span>
</span><span id="L-1562"><a href="#L-1562"><span class="linenos">1562</span></a><span class="sd">    retrieve the path to the tool&#39;s binary file</span>
</span><span id="L-1563"><a href="#L-1563"><span class="linenos">1563</span></a><span class="sd">    :type tool: str</span>
</span><span id="L-1564"><a href="#L-1564"><span class="linenos">1564</span></a><span class="sd">    :param bin_type: The `bin_type` parameter is a string that specifies the type of binary file to</span>
</span><span id="L-1565"><a href="#L-1565"><span class="linenos">1565</span></a><span class="sd">    search for in the config dict (e.g., `jar`, `bin`). In this case, the default value is &quot;bin&quot;. A value &quot;jar&quot; indicates that the function is searching</span>
</span><span id="L-1566"><a href="#L-1566"><span class="linenos">1566</span></a><span class="sd">    for a JAR file. Defaults to bin</span>
</span><span id="L-1567"><a href="#L-1567"><span class="linenos">1567</span></a><span class="sd">    :type bin_type: str (optional)</span>
</span><span id="L-1568"><a href="#L-1568"><span class="linenos">1568</span></a><span class="sd">    :param config: A dictionary containing configuration information for the snpEff tool, including the</span>
</span><span id="L-1569"><a href="#L-1569"><span class="linenos">1569</span></a><span class="sd">    path to the snpEff jar file. If no configuration is provided, an empty dictionary is used</span>
</span><span id="L-1570"><a href="#L-1570"><span class="linenos">1570</span></a><span class="sd">    :type config: dict</span>
</span><span id="L-1571"><a href="#L-1571"><span class="linenos">1571</span></a><span class="sd">    :param default_folder: The `default_folder` parameter is a string that represents the default folder</span>
</span><span id="L-1572"><a href="#L-1572"><span class="linenos">1572</span></a><span class="sd">    where the tool binaries are located. If the `bin_file` is not found in the configuration dictionary</span>
</span><span id="L-1573"><a href="#L-1573"><span class="linenos">1573</span></a><span class="sd">    or in the file system, the function will search for it in this default folder</span>
</span><span id="L-1574"><a href="#L-1574"><span class="linenos">1574</span></a><span class="sd">    :type default_folder: str</span>
</span><span id="L-1575"><a href="#L-1575"><span class="linenos">1575</span></a><span class="sd">    :return: the path to the snpEff.jar file. If the file is not found, it returns None.</span>
</span><span id="L-1576"><a href="#L-1576"><span class="linenos">1576</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1577"><a href="#L-1577"><span class="linenos">1577</span></a>
</span><span id="L-1578"><a href="#L-1578"><span class="linenos">1578</span></a>    <span class="c1"># Full path</span>
</span><span id="L-1579"><a href="#L-1579"><span class="linenos">1579</span></a>    <span class="n">default_folder</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">default_folder</span><span class="p">)</span>
</span><span id="L-1580"><a href="#L-1580"><span class="linenos">1580</span></a>    <span class="c1"># log.debug(f&quot;default_folder={default_folder}&quot;)</span>
</span><span id="L-1581"><a href="#L-1581"><span class="linenos">1581</span></a>
</span><span id="L-1582"><a href="#L-1582"><span class="linenos">1582</span></a>    <span class="c1"># Config</span>
</span><span id="L-1583"><a href="#L-1583"><span class="linenos">1583</span></a>    <span class="n">config_tool</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tools&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tool</span><span class="p">)</span>
</span><span id="L-1584"><a href="#L-1584"><span class="linenos">1584</span></a>
</span><span id="L-1585"><a href="#L-1585"><span class="linenos">1585</span></a>    <span class="c1"># Allowed dict conf</span>
</span><span id="L-1586"><a href="#L-1586"><span class="linenos">1586</span></a>    <span class="n">tool_dict_conf_type_allowed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;jar&quot;</span><span class="p">,</span> <span class="s2">&quot;java&quot;</span><span class="p">,</span> <span class="s2">&quot;docker&quot;</span><span class="p">]</span>
</span><span id="L-1587"><a href="#L-1587"><span class="linenos">1587</span></a>
</span><span id="L-1588"><a href="#L-1588"><span class="linenos">1588</span></a>    <span class="c1"># Find bin_file</span>
</span><span id="L-1589"><a href="#L-1589"><span class="linenos">1589</span></a>    <span class="n">bin_file</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1590"><a href="#L-1590"><span class="linenos">1590</span></a>    <span class="n">bin_file_type</span> <span class="o">=</span> <span class="n">bin_type</span>
</span><span id="L-1591"><a href="#L-1591"><span class="linenos">1591</span></a>
</span><span id="L-1592"><a href="#L-1592"><span class="linenos">1592</span></a>    <span class="c1"># For input config for tool and default config (if not provided)</span>
</span><span id="L-1593"><a href="#L-1593"><span class="linenos">1593</span></a>    <span class="k">for</span> <span class="n">conf</span> <span class="ow">in</span> <span class="p">[</span><span class="n">config_tool</span><span class="p">,</span> <span class="n">DEFAULT_TOOLS_BIN</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="p">{})]:</span>
</span><span id="L-1594"><a href="#L-1594"><span class="linenos">1594</span></a>
</span><span id="L-1595"><a href="#L-1595"><span class="linenos">1595</span></a>        <span class="c1"># If config not empty and bin_file not already found</span>
</span><span id="L-1596"><a href="#L-1596"><span class="linenos">1596</span></a>        <span class="k">if</span> <span class="n">conf</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">bin_file</span><span class="p">:</span>
</span><span id="L-1597"><a href="#L-1597"><span class="linenos">1597</span></a>
</span><span id="L-1598"><a href="#L-1598"><span class="linenos">1598</span></a>            <span class="c1"># If tool config is a dict (simple dict with type of more complex such as docker)</span>
</span><span id="L-1599"><a href="#L-1599"><span class="linenos">1599</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="n">bin_type</span><span class="p">:</span>
</span><span id="L-1600"><a href="#L-1600"><span class="linenos">1600</span></a>
</span><span id="L-1601"><a href="#L-1601"><span class="linenos">1601</span></a>                <span class="c1"># If type found in dict (simple dict such as</span>
</span><span id="L-1602"><a href="#L-1602"><span class="linenos">1602</span></a>                <span class="c1"># {&#39;bin&#39;: &#39;/path/to/tool&#39;})</span>
</span><span id="L-1603"><a href="#L-1603"><span class="linenos">1603</span></a>                <span class="c1"># {&#39;jar&#39;: &#39;/path/to/tool.jar&#39;})</span>
</span><span id="L-1604"><a href="#L-1604"><span class="linenos">1604</span></a>                <span class="k">if</span> <span class="n">bin_type</span> <span class="ow">in</span> <span class="n">conf</span><span class="p">:</span>
</span><span id="L-1605"><a href="#L-1605"><span class="linenos">1605</span></a>                    <span class="n">bin_file_new</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">bin_type</span><span class="p">)</span>
</span><span id="L-1606"><a href="#L-1606"><span class="linenos">1606</span></a>                    <span class="c1"># If bin is a env binary or a existing file (see whereis function)</span>
</span><span id="L-1607"><a href="#L-1607"><span class="linenos">1607</span></a>                    <span class="k">if</span> <span class="n">whereis_bin</span><span class="p">(</span><span class="n">bin_file_new</span><span class="p">):</span>
</span><span id="L-1608"><a href="#L-1608"><span class="linenos">1608</span></a>                        <span class="n">bin_file</span> <span class="o">=</span> <span class="n">whereis_bin</span><span class="p">(</span><span class="n">bin_file_new</span><span class="p">)</span>
</span><span id="L-1609"><a href="#L-1609"><span class="linenos">1609</span></a>                    <span class="c1"># If specific bin type is asked (e.g. docker, which is a dict not a string)</span>
</span><span id="L-1610"><a href="#L-1610"><span class="linenos">1610</span></a>                    <span class="k">elif</span> <span class="n">bin_type</span> <span class="ow">in</span> <span class="n">tool_dict_conf_type_allowed</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="L-1611"><a href="#L-1611"><span class="linenos">1611</span></a>                        <span class="n">bin_file_new</span><span class="p">,</span> <span class="nb">dict</span>
</span><span id="L-1612"><a href="#L-1612"><span class="linenos">1612</span></a>                    <span class="p">):</span>
</span><span id="L-1613"><a href="#L-1613"><span class="linenos">1613</span></a>                        <span class="k">if</span> <span class="n">output_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;bin&quot;</span><span class="p">,</span> <span class="s2">&quot;dict&quot;</span><span class="p">]:</span>
</span><span id="L-1614"><a href="#L-1614"><span class="linenos">1614</span></a>                            <span class="k">return</span> <span class="n">bin_file_new</span>
</span><span id="L-1615"><a href="#L-1615"><span class="linenos">1615</span></a>                        <span class="k">elif</span> <span class="n">output_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]:</span>
</span><span id="L-1616"><a href="#L-1616"><span class="linenos">1616</span></a>                            <span class="k">return</span> <span class="n">bin_type</span>
</span><span id="L-1617"><a href="#L-1617"><span class="linenos">1617</span></a>
</span><span id="L-1618"><a href="#L-1618"><span class="linenos">1618</span></a>                <span class="c1"># If bin not found as a specific input type</span>
</span><span id="L-1619"><a href="#L-1619"><span class="linenos">1619</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">bin_file</span><span class="p">:</span>
</span><span id="L-1620"><a href="#L-1620"><span class="linenos">1620</span></a>
</span><span id="L-1621"><a href="#L-1621"><span class="linenos">1621</span></a>                    <span class="c1"># For each other type in conf (if any)</span>
</span><span id="L-1622"><a href="#L-1622"><span class="linenos">1622</span></a>                    <span class="k">for</span> <span class="n">bin_type_conf</span> <span class="ow">in</span> <span class="n">conf</span><span class="p">:</span>
</span><span id="L-1623"><a href="#L-1623"><span class="linenos">1623</span></a>
</span><span id="L-1624"><a href="#L-1624"><span class="linenos">1624</span></a>                        <span class="c1"># Bin file/config and bin type</span>
</span><span id="L-1625"><a href="#L-1625"><span class="linenos">1625</span></a>                        <span class="n">bin_file</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">bin_type_conf</span><span class="p">)</span>
</span><span id="L-1626"><a href="#L-1626"><span class="linenos">1626</span></a>                        <span class="n">bin_file_type</span> <span class="o">=</span> <span class="n">bin_type_conf</span>
</span><span id="L-1627"><a href="#L-1627"><span class="linenos">1627</span></a>
</span><span id="L-1628"><a href="#L-1628"><span class="linenos">1628</span></a>                        <span class="c1"># If type is allowed to be return (e.g. &#39;docker&#39;, &#39;java&#39;)</span>
</span><span id="L-1629"><a href="#L-1629"><span class="linenos">1629</span></a>                        <span class="k">if</span> <span class="n">bin_file_type</span> <span class="ow">in</span> <span class="n">tool_dict_conf_type_allowed</span><span class="p">:</span>
</span><span id="L-1630"><a href="#L-1630"><span class="linenos">1630</span></a>
</span><span id="L-1631"><a href="#L-1631"><span class="linenos">1631</span></a>                            <span class="c1"># return if output type is for a dict (for futher configuration, e.g. for &#39;docker&#39;, &#39;java&#39;)</span>
</span><span id="L-1632"><a href="#L-1632"><span class="linenos">1632</span></a>                            <span class="k">if</span> <span class="n">output_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;dict&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bin_file</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-1633"><a href="#L-1633"><span class="linenos">1633</span></a>                                <span class="k">return</span> <span class="n">bin_file</span>
</span><span id="L-1634"><a href="#L-1634"><span class="linenos">1634</span></a>                            <span class="c1"># else:</span>
</span><span id="L-1635"><a href="#L-1635"><span class="linenos">1635</span></a>                            <span class="c1">#     return None</span>
</span><span id="L-1636"><a href="#L-1636"><span class="linenos">1636</span></a>
</span><span id="L-1637"><a href="#L-1637"><span class="linenos">1637</span></a>            <span class="c1"># If config is a path to binary/file as a string</span>
</span><span id="L-1638"><a href="#L-1638"><span class="linenos">1638</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-1639"><a href="#L-1639"><span class="linenos">1639</span></a>                <span class="n">bin_file</span> <span class="o">=</span> <span class="n">conf</span>
</span><span id="L-1640"><a href="#L-1640"><span class="linenos">1640</span></a>
</span><span id="L-1641"><a href="#L-1641"><span class="linenos">1641</span></a>    <span class="c1"># Return not &quot;bin&quot;</span>
</span><span id="L-1642"><a href="#L-1642"><span class="linenos">1642</span></a>    <span class="k">if</span> <span class="n">output_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]:</span>
</span><span id="L-1643"><a href="#L-1643"><span class="linenos">1643</span></a>        <span class="k">return</span> <span class="n">bin_file_type</span>
</span><span id="L-1644"><a href="#L-1644"><span class="linenos">1644</span></a>    <span class="k">elif</span> <span class="n">output_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;dict&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bin_file</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-1645"><a href="#L-1645"><span class="linenos">1645</span></a>        <span class="k">return</span> <span class="n">bin_file</span>
</span><span id="L-1646"><a href="#L-1646"><span class="linenos">1646</span></a>
</span><span id="L-1647"><a href="#L-1647"><span class="linenos">1647</span></a>    <span class="c1"># Check bin_file validation</span>
</span><span id="L-1648"><a href="#L-1648"><span class="linenos">1648</span></a>    <span class="n">bin_file</span> <span class="o">=</span> <span class="n">whereis_bin</span><span class="p">(</span><span class="n">bin_file</span><span class="p">)</span>
</span><span id="L-1649"><a href="#L-1649"><span class="linenos">1649</span></a>
</span><span id="L-1650"><a href="#L-1650"><span class="linenos">1650</span></a>    <span class="c1"># Config - check tools</span>
</span><span id="L-1651"><a href="#L-1651"><span class="linenos">1651</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">bin_file</span><span class="p">:</span>
</span><span id="L-1652"><a href="#L-1652"><span class="linenos">1652</span></a>
</span><span id="L-1653"><a href="#L-1653"><span class="linenos">1653</span></a>        <span class="c1"># Try to find bin file</span>
</span><span id="L-1654"><a href="#L-1654"><span class="linenos">1654</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-1655"><a href="#L-1655"><span class="linenos">1655</span></a>            <span class="n">bin_file</span> <span class="o">=</span> <span class="n">find_all</span><span class="p">(</span><span class="nb">bin</span><span class="p">,</span> <span class="n">default_folder</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1656"><a href="#L-1656"><span class="linenos">1656</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="L-1657"><a href="#L-1657"><span class="linenos">1657</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1658"><a href="#L-1658"><span class="linenos">1658</span></a>
</span><span id="L-1659"><a href="#L-1659"><span class="linenos">1659</span></a>        <span class="c1"># Full path</span>
</span><span id="L-1660"><a href="#L-1660"><span class="linenos">1660</span></a>        <span class="n">bin_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">bin_file</span><span class="p">)</span>
</span><span id="L-1661"><a href="#L-1661"><span class="linenos">1661</span></a>
</span><span id="L-1662"><a href="#L-1662"><span class="linenos">1662</span></a>        <span class="c1"># Check if found</span>
</span><span id="L-1663"><a href="#L-1663"><span class="linenos">1663</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">bin_file</span><span class="p">):</span>
</span><span id="L-1664"><a href="#L-1664"><span class="linenos">1664</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-1665"><a href="#L-1665"><span class="linenos">1665</span></a>
</span><span id="L-1666"><a href="#L-1666"><span class="linenos">1666</span></a>    <span class="k">return</span> <span class="n">bin_file</span>
</span><span id="L-1667"><a href="#L-1667"><span class="linenos">1667</span></a>
</span><span id="L-1668"><a href="#L-1668"><span class="linenos">1668</span></a>
</span><span id="L-1669"><a href="#L-1669"><span class="linenos">1669</span></a><span class="k">def</span> <span class="nf">get_bin_command</span><span class="p">(</span>
</span><span id="L-1670"><a href="#L-1670"><span class="linenos">1670</span></a>    <span class="nb">bin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1671"><a href="#L-1671"><span class="linenos">1671</span></a>    <span class="n">tool</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1672"><a href="#L-1672"><span class="linenos">1672</span></a>    <span class="n">bin_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bin&quot;</span><span class="p">,</span>
</span><span id="L-1673"><a href="#L-1673"><span class="linenos">1673</span></a>    <span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-1674"><a href="#L-1674"><span class="linenos">1674</span></a>    <span class="n">param</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-1675"><a href="#L-1675"><span class="linenos">1675</span></a>    <span class="n">default_folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT_TOOLS_FOLDER</span><span class="p">,</span>
</span><span id="L-1676"><a href="#L-1676"><span class="linenos">1676</span></a>    <span class="n">add_options</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1677"><a href="#L-1677"><span class="linenos">1677</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1678"><a href="#L-1678"><span class="linenos">1678</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1679"><a href="#L-1679"><span class="linenos">1679</span></a><span class="sd">    The function `get_bin_command` generates a command based on the tool type (jar, java, docker) and</span>
</span><span id="L-1680"><a href="#L-1680"><span class="linenos">1680</span></a><span class="sd">    specified parameters.</span>
</span><span id="L-1681"><a href="#L-1681"><span class="linenos">1681</span></a>
</span><span id="L-1682"><a href="#L-1682"><span class="linenos">1682</span></a><span class="sd">    :param bin: The `bin` parameter in the `get_bin_command` function is used to specify the binary</span>
</span><span id="L-1683"><a href="#L-1683"><span class="linenos">1683</span></a><span class="sd">    executable file that you want to run. It is a string that represents the path or name of the binary</span>
</span><span id="L-1684"><a href="#L-1684"><span class="linenos">1684</span></a><span class="sd">    file. If you provide this parameter, the function will attempt to locate the binary file based on</span>
</span><span id="L-1685"><a href="#L-1685"><span class="linenos">1685</span></a><span class="sd">    the</span>
</span><span id="L-1686"><a href="#L-1686"><span class="linenos">1686</span></a><span class="sd">    :type bin: str</span>
</span><span id="L-1687"><a href="#L-1687"><span class="linenos">1687</span></a><span class="sd">    :param tool: The `tool` parameter in the `get_bin_command` function represents the name of the tool</span>
</span><span id="L-1688"><a href="#L-1688"><span class="linenos">1688</span></a><span class="sd">    for which you want to retrieve the command. It is used to identify the specific tool for which the</span>
</span><span id="L-1689"><a href="#L-1689"><span class="linenos">1689</span></a><span class="sd">    command is being generated</span>
</span><span id="L-1690"><a href="#L-1690"><span class="linenos">1690</span></a><span class="sd">    :type tool: str</span>
</span><span id="L-1691"><a href="#L-1691"><span class="linenos">1691</span></a><span class="sd">    :param bin_type: The `bin_type` parameter in the `get_bin_command` function specifies the type of</span>
</span><span id="L-1692"><a href="#L-1692"><span class="linenos">1692</span></a><span class="sd">    binary executable that the tool uses. It can have values like &quot;bin&quot;, &quot;jar&quot;, &quot;java&quot;, &quot;docker&quot;, etc.,</span>
</span><span id="L-1693"><a href="#L-1693"><span class="linenos">1693</span></a><span class="sd">    depending on the type of tool being executed. The function uses this parameter to determine,</span>
</span><span id="L-1694"><a href="#L-1694"><span class="linenos">1694</span></a><span class="sd">    defaults to bin</span>
</span><span id="L-1695"><a href="#L-1695"><span class="linenos">1695</span></a><span class="sd">    :type bin_type: str (optional)</span>
</span><span id="L-1696"><a href="#L-1696"><span class="linenos">1696</span></a><span class="sd">    :param config: The `config` parameter in the `get_bin_command` function is a dictionary that holds</span>
</span><span id="L-1697"><a href="#L-1697"><span class="linenos">1697</span></a><span class="sd">    configuration settings for the tool being used. It can include various settings such as paths,</span>
</span><span id="L-1698"><a href="#L-1698"><span class="linenos">1698</span></a><span class="sd">    environment variables, or any other configuration options needed for the tool to run properly</span>
</span><span id="L-1699"><a href="#L-1699"><span class="linenos">1699</span></a><span class="sd">    :type config: dict</span>
</span><span id="L-1700"><a href="#L-1700"><span class="linenos">1700</span></a><span class="sd">    :param param: The `param` parameter in the `get_bin_command` function is a dictionary that contains</span>
</span><span id="L-1701"><a href="#L-1701"><span class="linenos">1701</span></a><span class="sd">    additional parameters or configurations for the tool being executed. These parameters can be used to</span>
</span><span id="L-1702"><a href="#L-1702"><span class="linenos">1702</span></a><span class="sd">    customize the behavior or settings of the tool when generating the command for execution. The</span>
</span><span id="L-1703"><a href="#L-1703"><span class="linenos">1703</span></a><span class="sd">    function uses the `param` dictionary along with the</span>
</span><span id="L-1704"><a href="#L-1704"><span class="linenos">1704</span></a><span class="sd">    :type param: dict</span>
</span><span id="L-1705"><a href="#L-1705"><span class="linenos">1705</span></a><span class="sd">    :param default_folder: The `default_folder` parameter in the `get_bin_command` function is used to</span>
</span><span id="L-1706"><a href="#L-1706"><span class="linenos">1706</span></a><span class="sd">    specify the default folder where the tools are located. If a specific folder is not provided when</span>
</span><span id="L-1707"><a href="#L-1707"><span class="linenos">1707</span></a><span class="sd">    calling the function, it will default to the value of `DEFAULT_TOOLS_FOLDER`</span>
</span><span id="L-1708"><a href="#L-1708"><span class="linenos">1708</span></a><span class="sd">    :type default_folder: str</span>
</span><span id="L-1709"><a href="#L-1709"><span class="linenos">1709</span></a><span class="sd">    :param add_options: The `add_options` parameter in the `get_bin_command` function allows you to pass</span>
</span><span id="L-1710"><a href="#L-1710"><span class="linenos">1710</span></a><span class="sd">    additional options or arguments to the command being constructed based on the tool type. These</span>
</span><span id="L-1711"><a href="#L-1711"><span class="linenos">1711</span></a><span class="sd">    additional options can be specific configurations, flags, or any other parameters that you want to</span>
</span><span id="L-1712"><a href="#L-1712"><span class="linenos">1712</span></a><span class="sd">    include in the final command. When provided,</span>
</span><span id="L-1713"><a href="#L-1713"><span class="linenos">1713</span></a><span class="sd">    :type add_options: str</span>
</span><span id="L-1714"><a href="#L-1714"><span class="linenos">1714</span></a><span class="sd">    :return: The `get_bin_command` function returns a string representing the command to execute a</span>
</span><span id="L-1715"><a href="#L-1715"><span class="linenos">1715</span></a><span class="sd">    specific tool based on the provided parameters. The returned command can be either a Java command</span>
</span><span id="L-1716"><a href="#L-1716"><span class="linenos">1716</span></a><span class="sd">    for running a JAR file or a Docker command for running a Docker image/container. If the tool type is</span>
</span><span id="L-1717"><a href="#L-1717"><span class="linenos">1717</span></a><span class="sd">    not Java or Docker, it returns the default tool bin.</span>
</span><span id="L-1718"><a href="#L-1718"><span class="linenos">1718</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1719"><a href="#L-1719"><span class="linenos">1719</span></a>
</span><span id="L-1720"><a href="#L-1720"><span class="linenos">1720</span></a>    <span class="c1"># Tool bin and type</span>
</span><span id="L-1721"><a href="#L-1721"><span class="linenos">1721</span></a>    <span class="n">tool_bin</span> <span class="o">=</span> <span class="n">get_bin</span><span class="p">(</span>
</span><span id="L-1722"><a href="#L-1722"><span class="linenos">1722</span></a>        <span class="nb">bin</span><span class="o">=</span><span class="nb">bin</span><span class="p">,</span>
</span><span id="L-1723"><a href="#L-1723"><span class="linenos">1723</span></a>        <span class="n">tool</span><span class="o">=</span><span class="n">tool</span><span class="p">,</span>
</span><span id="L-1724"><a href="#L-1724"><span class="linenos">1724</span></a>        <span class="n">bin_type</span><span class="o">=</span><span class="n">bin_type</span><span class="p">,</span>
</span><span id="L-1725"><a href="#L-1725"><span class="linenos">1725</span></a>        <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
</span><span id="L-1726"><a href="#L-1726"><span class="linenos">1726</span></a>        <span class="n">default_folder</span><span class="o">=</span><span class="n">default_folder</span><span class="p">,</span>
</span><span id="L-1727"><a href="#L-1727"><span class="linenos">1727</span></a>    <span class="p">)</span>
</span><span id="L-1728"><a href="#L-1728"><span class="linenos">1728</span></a>    <span class="n">tool_bin_type</span> <span class="o">=</span> <span class="n">get_bin</span><span class="p">(</span>
</span><span id="L-1729"><a href="#L-1729"><span class="linenos">1729</span></a>        <span class="nb">bin</span><span class="o">=</span><span class="nb">bin</span><span class="p">,</span>
</span><span id="L-1730"><a href="#L-1730"><span class="linenos">1730</span></a>        <span class="n">tool</span><span class="o">=</span><span class="n">tool</span><span class="p">,</span>
</span><span id="L-1731"><a href="#L-1731"><span class="linenos">1731</span></a>        <span class="n">bin_type</span><span class="o">=</span><span class="n">bin_type</span><span class="p">,</span>
</span><span id="L-1732"><a href="#L-1732"><span class="linenos">1732</span></a>        <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
</span><span id="L-1733"><a href="#L-1733"><span class="linenos">1733</span></a>        <span class="n">output_type</span><span class="o">=</span><span class="s2">&quot;type&quot;</span><span class="p">,</span>
</span><span id="L-1734"><a href="#L-1734"><span class="linenos">1734</span></a>        <span class="n">default_folder</span><span class="o">=</span><span class="n">default_folder</span><span class="p">,</span>
</span><span id="L-1735"><a href="#L-1735"><span class="linenos">1735</span></a>    <span class="p">)</span>
</span><span id="L-1736"><a href="#L-1736"><span class="linenos">1736</span></a>
</span><span id="L-1737"><a href="#L-1737"><span class="linenos">1737</span></a>    <span class="c1"># Threads and memory</span>
</span><span id="L-1738"><a href="#L-1738"><span class="linenos">1738</span></a>    <span class="n">threads</span> <span class="o">=</span> <span class="n">get_threads</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="n">param</span><span class="p">)</span>
</span><span id="L-1739"><a href="#L-1739"><span class="linenos">1739</span></a>    <span class="n">memory</span> <span class="o">=</span> <span class="n">extract_memory_in_go</span><span class="p">(</span><span class="n">get_memory</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="n">param</span><span class="p">))</span>
</span><span id="L-1740"><a href="#L-1740"><span class="linenos">1740</span></a>    <span class="n">tmp</span> <span class="o">=</span> <span class="n">get_tmp</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="n">param</span><span class="p">)</span>
</span><span id="L-1741"><a href="#L-1741"><span class="linenos">1741</span></a>    <span class="c1"># Java and jar command</span>
</span><span id="L-1742"><a href="#L-1742"><span class="linenos">1742</span></a>    <span class="k">if</span> <span class="n">tool_bin_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;jar&quot;</span><span class="p">,</span> <span class="s2">&quot;java&quot;</span><span class="p">]:</span>
</span><span id="L-1743"><a href="#L-1743"><span class="linenos">1743</span></a>
</span><span id="L-1744"><a href="#L-1744"><span class="linenos">1744</span></a>        <span class="c1"># Find java bin</span>
</span><span id="L-1745"><a href="#L-1745"><span class="linenos">1745</span></a>        <span class="n">java_bin</span> <span class="o">=</span> <span class="n">get_bin</span><span class="p">(</span><span class="n">tool</span><span class="o">=</span><span class="s2">&quot;java&quot;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="L-1746"><a href="#L-1746"><span class="linenos">1746</span></a>
</span><span id="L-1747"><a href="#L-1747"><span class="linenos">1747</span></a>        <span class="c1"># Java options</span>
</span><span id="L-1748"><a href="#L-1748"><span class="linenos">1748</span></a>        <span class="n">java_options</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-1749"><a href="#L-1749"><span class="linenos">1749</span></a>
</span><span id="L-1750"><a href="#L-1750"><span class="linenos">1750</span></a>        <span class="c1"># Threads</span>
</span><span id="L-1751"><a href="#L-1751"><span class="linenos">1751</span></a>        <span class="k">if</span> <span class="n">threads</span><span class="p">:</span>
</span><span id="L-1752"><a href="#L-1752"><span class="linenos">1752</span></a>            <span class="n">java_options</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; -XX:ParallelGCThreads=</span><span class="si">{</span><span class="n">threads</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="L-1753"><a href="#L-1753"><span class="linenos">1753</span></a>
</span><span id="L-1754"><a href="#L-1754"><span class="linenos">1754</span></a>        <span class="c1"># Memory</span>
</span><span id="L-1755"><a href="#L-1755"><span class="linenos">1755</span></a>        <span class="k">if</span> <span class="n">memory</span><span class="p">:</span>
</span><span id="L-1756"><a href="#L-1756"><span class="linenos">1756</span></a>            <span class="n">java_options</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; -XX:MaxHeapSize=</span><span class="si">{</span><span class="n">memory</span><span class="si">}</span><span class="s2">G &quot;</span>
</span><span id="L-1757"><a href="#L-1757"><span class="linenos">1757</span></a>
</span><span id="L-1758"><a href="#L-1758"><span class="linenos">1758</span></a>        <span class="c1"># Additional options</span>
</span><span id="L-1759"><a href="#L-1759"><span class="linenos">1759</span></a>        <span class="k">if</span> <span class="n">add_options</span><span class="p">:</span>
</span><span id="L-1760"><a href="#L-1760"><span class="linenos">1760</span></a>            <span class="n">java_options</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">add_options</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="L-1761"><a href="#L-1761"><span class="linenos">1761</span></a>
</span><span id="L-1762"><a href="#L-1762"><span class="linenos">1762</span></a>        <span class="c1"># Java Command for tool</span>
</span><span id="L-1763"><a href="#L-1763"><span class="linenos">1763</span></a>        <span class="n">tool_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">java_bin</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">java_options</span><span class="si">}</span><span class="s2"> -jar </span><span class="si">{</span><span class="n">tool_bin</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1764"><a href="#L-1764"><span class="linenos">1764</span></a>        <span class="c1"># Return tool java command</span>
</span><span id="L-1765"><a href="#L-1765"><span class="linenos">1765</span></a>        <span class="k">return</span> <span class="n">tool_command</span>
</span><span id="L-1766"><a href="#L-1766"><span class="linenos">1766</span></a>
</span><span id="L-1767"><a href="#L-1767"><span class="linenos">1767</span></a>    <span class="c1"># Docker command</span>
</span><span id="L-1768"><a href="#L-1768"><span class="linenos">1768</span></a>    <span class="k">elif</span> <span class="n">tool_bin_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;docker&quot;</span><span class="p">]:</span>
</span><span id="L-1769"><a href="#L-1769"><span class="linenos">1769</span></a>
</span><span id="L-1770"><a href="#L-1770"><span class="linenos">1770</span></a>        <span class="c1"># Find docker bin</span>
</span><span id="L-1771"><a href="#L-1771"><span class="linenos">1771</span></a>        <span class="n">docker_bin</span> <span class="o">=</span> <span class="n">get_bin</span><span class="p">(</span><span class="n">tool</span><span class="o">=</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="L-1772"><a href="#L-1772"><span class="linenos">1772</span></a>
</span><span id="L-1773"><a href="#L-1773"><span class="linenos">1773</span></a>        <span class="c1"># Docker param for tool</span>
</span><span id="L-1774"><a href="#L-1774"><span class="linenos">1774</span></a>        <span class="n">tool_bin_dict</span> <span class="o">=</span> <span class="n">get_bin</span><span class="p">(</span>
</span><span id="L-1775"><a href="#L-1775"><span class="linenos">1775</span></a>            <span class="n">tool</span><span class="o">=</span><span class="n">tool</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">bin_type</span><span class="o">=</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="n">output_type</span><span class="o">=</span><span class="s2">&quot;dict&quot;</span>
</span><span id="L-1776"><a href="#L-1776"><span class="linenos">1776</span></a>        <span class="p">)</span>
</span><span id="L-1777"><a href="#L-1777"><span class="linenos">1777</span></a>        <span class="n">tool_bin_docker_image</span> <span class="o">=</span> <span class="n">tool_bin_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-1778"><a href="#L-1778"><span class="linenos">1778</span></a>        <span class="n">tool_bin_docker_entrypoint</span> <span class="o">=</span> <span class="n">tool_bin_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entrypoint&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-1779"><a href="#L-1779"><span class="linenos">1779</span></a>        <span class="n">tool_bin_docker_command</span> <span class="o">=</span> <span class="n">tool_bin_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-1780"><a href="#L-1780"><span class="linenos">1780</span></a>        <span class="n">tool_bin_docker_options</span> <span class="o">=</span> <span class="n">tool_bin_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;options&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-1781"><a href="#L-1781"><span class="linenos">1781</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">tool_bin_docker_image</span><span class="p">:</span>
</span><span id="L-1782"><a href="#L-1782"><span class="linenos">1782</span></a>            <span class="n">msg_error</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Error in Docker command for tool &#39;</span><span class="si">{</span><span class="n">tool</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
</span><span id="L-1783"><a href="#L-1783"><span class="linenos">1783</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg_error</span><span class="p">)</span>
</span><span id="L-1784"><a href="#L-1784"><span class="linenos">1784</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg_error</span><span class="p">)</span>
</span><span id="L-1785"><a href="#L-1785"><span class="linenos">1785</span></a>
</span><span id="L-1786"><a href="#L-1786"><span class="linenos">1786</span></a>        <span class="c1"># Create default param</span>
</span><span id="L-1787"><a href="#L-1787"><span class="linenos">1787</span></a>        <span class="n">tool_bin_docker_params</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-1788"><a href="#L-1788"><span class="linenos">1788</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1789"><a href="#L-1789"><span class="linenos">1789</span></a>            <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tools&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1790"><a href="#L-1790"><span class="linenos">1790</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1791"><a href="#L-1791"><span class="linenos">1791</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1792"><a href="#L-1792"><span class="linenos">1792</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1793"><a href="#L-1793"><span class="linenos">1793</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;notremove&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-1794"><a href="#L-1794"><span class="linenos">1794</span></a>            <span class="ow">is</span> <span class="kc">True</span>
</span><span id="L-1795"><a href="#L-1795"><span class="linenos">1795</span></a>        <span class="p">):</span>
</span><span id="L-1796"><a href="#L-1796"><span class="linenos">1796</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-1797"><a href="#L-1797"><span class="linenos">1797</span></a>        <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;notremove&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-1798"><a href="#L-1798"><span class="linenos">1798</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-1799"><a href="#L-1799"><span class="linenos">1799</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1800"><a href="#L-1800"><span class="linenos">1800</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="s2">&quot; --rm &quot;</span>
</span><span id="L-1801"><a href="#L-1801"><span class="linenos">1801</span></a>
</span><span id="L-1802"><a href="#L-1802"><span class="linenos">1802</span></a>        <span class="c1"># Temp folder by default</span>
</span><span id="L-1803"><a href="#L-1803"><span class="linenos">1803</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1804"><a href="#L-1804"><span class="linenos">1804</span></a>            <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tools&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1805"><a href="#L-1805"><span class="linenos">1805</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1806"><a href="#L-1806"><span class="linenos">1806</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1807"><a href="#L-1807"><span class="linenos">1807</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1808"><a href="#L-1808"><span class="linenos">1808</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-1809"><a href="#L-1809"><span class="linenos">1809</span></a>            <span class="ow">is</span> <span class="kc">True</span>
</span><span id="L-1810"><a href="#L-1810"><span class="linenos">1810</span></a>        <span class="p">):</span>
</span><span id="L-1811"><a href="#L-1811"><span class="linenos">1811</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; -v </span><span class="si">{</span><span class="n">tmp</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">tmp</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="L-1812"><a href="#L-1812"><span class="linenos">1812</span></a>        <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-1813"><a href="#L-1813"><span class="linenos">1813</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; -v </span><span class="si">{</span><span class="n">tmp</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">tmp</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="L-1814"><a href="#L-1814"><span class="linenos">1814</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1815"><a href="#L-1815"><span class="linenos">1815</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-1816"><a href="#L-1816"><span class="linenos">1816</span></a>
</span><span id="L-1817"><a href="#L-1817"><span class="linenos">1817</span></a>        <span class="c1"># Threads</span>
</span><span id="L-1818"><a href="#L-1818"><span class="linenos">1818</span></a>        <span class="k">if</span> <span class="n">threads</span><span class="p">:</span>
</span><span id="L-1819"><a href="#L-1819"><span class="linenos">1819</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; --cpus=</span><span class="si">{</span><span class="n">threads</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="L-1820"><a href="#L-1820"><span class="linenos">1820</span></a>
</span><span id="L-1821"><a href="#L-1821"><span class="linenos">1821</span></a>        <span class="c1"># Memory</span>
</span><span id="L-1822"><a href="#L-1822"><span class="linenos">1822</span></a>        <span class="k">if</span> <span class="n">memory</span><span class="p">:</span>
</span><span id="L-1823"><a href="#L-1823"><span class="linenos">1823</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; --memory=</span><span class="si">{</span><span class="n">memory</span><span class="si">}</span><span class="s2">g &quot;</span>
</span><span id="L-1824"><a href="#L-1824"><span class="linenos">1824</span></a>
</span><span id="L-1825"><a href="#L-1825"><span class="linenos">1825</span></a>        <span class="k">def</span> <span class="nf">mount_folder</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
</span><span id="L-1826"><a href="#L-1826"><span class="linenos">1826</span></a>            <span class="n">add_options</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-1827"><a href="#L-1827"><span class="linenos">1827</span></a>            <span class="k">for</span> <span class="n">databases</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="p">(</span>
</span><span id="L-1828"><a href="#L-1828"><span class="linenos">1828</span></a>                <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;folders&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;databases&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="L-1829"><a href="#L-1829"><span class="linenos">1829</span></a>            <span class="p">):</span>
</span><span id="L-1830"><a href="#L-1830"><span class="linenos">1830</span></a>                <span class="k">if</span> <span class="n">path</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-1831"><a href="#L-1831"><span class="linenos">1831</span></a>                    <span class="n">add_options</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; -v </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">:ro&quot;</span>
</span><span id="L-1832"><a href="#L-1832"><span class="linenos">1832</span></a>                <span class="k">elif</span> <span class="n">path</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-1833"><a href="#L-1833"><span class="linenos">1833</span></a>                    <span class="k">for</span> <span class="n">pathlist</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
</span><span id="L-1834"><a href="#L-1834"><span class="linenos">1834</span></a>                        <span class="n">add_options</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; -v </span><span class="si">{</span><span class="n">pathlist</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">pathlist</span><span class="si">}</span><span class="s2">:ro&quot;</span>
</span><span id="L-1835"><a href="#L-1835"><span class="linenos">1835</span></a>            <span class="k">return</span> <span class="n">add_options</span>
</span><span id="L-1836"><a href="#L-1836"><span class="linenos">1836</span></a>
</span><span id="L-1837"><a href="#L-1837"><span class="linenos">1837</span></a>        <span class="c1"># Init docker param</span>
</span><span id="L-1838"><a href="#L-1838"><span class="linenos">1838</span></a>        <span class="k">if</span> <span class="n">tool_bin_docker_options</span><span class="p">:</span>
</span><span id="L-1839"><a href="#L-1839"><span class="linenos">1839</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">tool_bin_docker_options</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="L-1840"><a href="#L-1840"><span class="linenos">1840</span></a>
</span><span id="L-1841"><a href="#L-1841"><span class="linenos">1841</span></a>        <span class="c1"># Mount folder only</span>
</span><span id="L-1842"><a href="#L-1842"><span class="linenos">1842</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1843"><a href="#L-1843"><span class="linenos">1843</span></a>            <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tools&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1844"><a href="#L-1844"><span class="linenos">1844</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1845"><a href="#L-1845"><span class="linenos">1845</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1846"><a href="#L-1846"><span class="linenos">1846</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1847"><a href="#L-1847"><span class="linenos">1847</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;automount&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-1848"><a href="#L-1848"><span class="linenos">1848</span></a>            <span class="ow">is</span> <span class="kc">False</span>
</span><span id="L-1849"><a href="#L-1849"><span class="linenos">1849</span></a>        <span class="p">):</span>
</span><span id="L-1850"><a href="#L-1850"><span class="linenos">1850</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="n">mount_folder</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="L-1851"><a href="#L-1851"><span class="linenos">1851</span></a>        <span class="k">elif</span> <span class="p">(</span>
</span><span id="L-1852"><a href="#L-1852"><span class="linenos">1852</span></a>            <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tools&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1853"><a href="#L-1853"><span class="linenos">1853</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1854"><a href="#L-1854"><span class="linenos">1854</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1855"><a href="#L-1855"><span class="linenos">1855</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1856"><a href="#L-1856"><span class="linenos">1856</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;automount&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-1857"><a href="#L-1857"><span class="linenos">1857</span></a>            <span class="ow">is</span> <span class="kc">True</span>
</span><span id="L-1858"><a href="#L-1858"><span class="linenos">1858</span></a>        <span class="p">):</span>
</span><span id="L-1859"><a href="#L-1859"><span class="linenos">1859</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="n">docker_automount</span><span class="p">()</span>
</span><span id="L-1860"><a href="#L-1860"><span class="linenos">1860</span></a>        <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;automount&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-1861"><a href="#L-1861"><span class="linenos">1861</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="n">mount_folder</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="L-1862"><a href="#L-1862"><span class="linenos">1862</span></a>        <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;automount&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-1863"><a href="#L-1863"><span class="linenos">1863</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="n">docker_automount</span><span class="p">()</span>
</span><span id="L-1864"><a href="#L-1864"><span class="linenos">1864</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1865"><a href="#L-1865"><span class="linenos">1865</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="n">mount_folder</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="L-1866"><a href="#L-1866"><span class="linenos">1866</span></a>
</span><span id="L-1867"><a href="#L-1867"><span class="linenos">1867</span></a>        <span class="c1"># Entrypoint</span>
</span><span id="L-1868"><a href="#L-1868"><span class="linenos">1868</span></a>        <span class="k">if</span> <span class="n">tool_bin_docker_entrypoint</span><span class="p">:</span>
</span><span id="L-1869"><a href="#L-1869"><span class="linenos">1869</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; --entrypoint=&#39;</span><span class="si">{</span><span class="n">tool_bin_docker_entrypoint</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
</span><span id="L-1870"><a href="#L-1870"><span class="linenos">1870</span></a>
</span><span id="L-1871"><a href="#L-1871"><span class="linenos">1871</span></a>        <span class="c1"># Additional options</span>
</span><span id="L-1872"><a href="#L-1872"><span class="linenos">1872</span></a>        <span class="k">if</span> <span class="n">add_options</span><span class="p">:</span>
</span><span id="L-1873"><a href="#L-1873"><span class="linenos">1873</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">add_options</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="L-1874"><a href="#L-1874"><span class="linenos">1874</span></a>
</span><span id="L-1875"><a href="#L-1875"><span class="linenos">1875</span></a>        <span class="c1"># Additioanl command</span>
</span><span id="L-1876"><a href="#L-1876"><span class="linenos">1876</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">tool_bin_docker_command</span><span class="p">:</span>
</span><span id="L-1877"><a href="#L-1877"><span class="linenos">1877</span></a>            <span class="n">tool_bin_docker_command</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-1878"><a href="#L-1878"><span class="linenos">1878</span></a>
</span><span id="L-1879"><a href="#L-1879"><span class="linenos">1879</span></a>        <span class="c1"># Docker command</span>
</span><span id="L-1880"><a href="#L-1880"><span class="linenos">1880</span></a>        <span class="n">tool_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">docker_bin</span><span class="si">}</span><span class="s2"> run </span><span class="si">{</span><span class="n">tool_bin_docker_params</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">tool_bin_docker_image</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">tool_bin_docker_command</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1881"><a href="#L-1881"><span class="linenos">1881</span></a>
</span><span id="L-1882"><a href="#L-1882"><span class="linenos">1882</span></a>        <span class="c1"># Return tool docker command</span>
</span><span id="L-1883"><a href="#L-1883"><span class="linenos">1883</span></a>        <span class="k">return</span> <span class="n">tool_command</span>
</span><span id="L-1884"><a href="#L-1884"><span class="linenos">1884</span></a>
</span><span id="L-1885"><a href="#L-1885"><span class="linenos">1885</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1886"><a href="#L-1886"><span class="linenos">1886</span></a>        <span class="k">return</span> <span class="n">tool_bin</span>
</span><span id="L-1887"><a href="#L-1887"><span class="linenos">1887</span></a>
</span><span id="L-1888"><a href="#L-1888"><span class="linenos">1888</span></a>
</span><span id="L-1889"><a href="#L-1889"><span class="linenos">1889</span></a><span class="k">def</span> <span class="nf">get_tmp</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">param</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">default_tmp</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;/tmp&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1890"><a href="#L-1890"><span class="linenos">1890</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1891"><a href="#L-1891"><span class="linenos">1891</span></a><span class="sd">    The `get_tmp` function returns the value of the &quot;tmp&quot; parameter from either the `param` dictionary,</span>
</span><span id="L-1892"><a href="#L-1892"><span class="linenos">1892</span></a><span class="sd">    `config` dictionary, or a default value &quot;/tmp&quot;.</span>
</span><span id="L-1893"><a href="#L-1893"><span class="linenos">1893</span></a>
</span><span id="L-1894"><a href="#L-1894"><span class="linenos">1894</span></a><span class="sd">    :param config: Config is a dictionary that contains configuration settings for the function. It is</span>
</span><span id="L-1895"><a href="#L-1895"><span class="linenos">1895</span></a><span class="sd">    an optional parameter with a default value of an empty dictionary. It can be used to provide</span>
</span><span id="L-1896"><a href="#L-1896"><span class="linenos">1896</span></a><span class="sd">    additional configuration settings to the function `get_tmp`</span>
</span><span id="L-1897"><a href="#L-1897"><span class="linenos">1897</span></a><span class="sd">    :type config: dict</span>
</span><span id="L-1898"><a href="#L-1898"><span class="linenos">1898</span></a><span class="sd">    :param param: The `param` parameter is a dictionary containing parameters that can be passed to the</span>
</span><span id="L-1899"><a href="#L-1899"><span class="linenos">1899</span></a><span class="sd">    function `get_tmp`. It can include various key-value pairs, but in this context, the function</span>
</span><span id="L-1900"><a href="#L-1900"><span class="linenos">1900</span></a><span class="sd">    specifically looks for the key &quot;tmp&quot; within the `param` dictionary to determine the temporary path</span>
</span><span id="L-1901"><a href="#L-1901"><span class="linenos">1901</span></a><span class="sd">    value. If the &quot;</span>
</span><span id="L-1902"><a href="#L-1902"><span class="linenos">1902</span></a><span class="sd">    :type param: dict</span>
</span><span id="L-1903"><a href="#L-1903"><span class="linenos">1903</span></a><span class="sd">    :param default_tmp: The `default_tmp` parameter in the `get_tmp` function is a string that</span>
</span><span id="L-1904"><a href="#L-1904"><span class="linenos">1904</span></a><span class="sd">    represents the default path for temporary files. If the &quot;tmp&quot; key is not found in the `param`</span>
</span><span id="L-1905"><a href="#L-1905"><span class="linenos">1905</span></a><span class="sd">    dictionary or the `config` dictionary, the function will return this `default_tmp` value, which is,</span>
</span><span id="L-1906"><a href="#L-1906"><span class="linenos">1906</span></a><span class="sd">    defaults to /tmp</span>
</span><span id="L-1907"><a href="#L-1907"><span class="linenos">1907</span></a><span class="sd">    :type default_tmp: str (optional)</span>
</span><span id="L-1908"><a href="#L-1908"><span class="linenos">1908</span></a><span class="sd">    :return: The function `get_tmp` returns the value of the &quot;tmp&quot; key from the `param` dictionary if it</span>
</span><span id="L-1909"><a href="#L-1909"><span class="linenos">1909</span></a><span class="sd">    exists. If the &quot;tmp&quot; key is not found in the `param` dictionary, it returns the value of the &quot;tmp&quot;</span>
</span><span id="L-1910"><a href="#L-1910"><span class="linenos">1910</span></a><span class="sd">    key from the `config` dictionary. If neither key is found in `param` or `config`, it returns the</span>
</span><span id="L-1911"><a href="#L-1911"><span class="linenos">1911</span></a><span class="sd">    default value &quot;/tmp&quot;.</span>
</span><span id="L-1912"><a href="#L-1912"><span class="linenos">1912</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1913"><a href="#L-1913"><span class="linenos">1913</span></a>
</span><span id="L-1914"><a href="#L-1914"><span class="linenos">1914</span></a>    <span class="c1"># Tmp in param or config</span>
</span><span id="L-1915"><a href="#L-1915"><span class="linenos">1915</span></a>    <span class="n">tmp_param</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="n">default_tmp</span><span class="p">))</span>
</span><span id="L-1916"><a href="#L-1916"><span class="linenos">1916</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">tmp_param</span><span class="p">:</span>
</span><span id="L-1917"><a href="#L-1917"><span class="linenos">1917</span></a>        <span class="n">tmp_param</span> <span class="o">=</span> <span class="n">default_tmp</span>
</span><span id="L-1918"><a href="#L-1918"><span class="linenos">1918</span></a>
</span><span id="L-1919"><a href="#L-1919"><span class="linenos">1919</span></a>    <span class="c1"># Return tmp</span>
</span><span id="L-1920"><a href="#L-1920"><span class="linenos">1920</span></a>    <span class="k">return</span> <span class="n">tmp_param</span>
</span><span id="L-1921"><a href="#L-1921"><span class="linenos">1921</span></a>
</span><span id="L-1922"><a href="#L-1922"><span class="linenos">1922</span></a>
</span><span id="L-1923"><a href="#L-1923"><span class="linenos">1923</span></a><span class="k">def</span> <span class="nf">get_threads</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">param</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-1924"><a href="#L-1924"><span class="linenos">1924</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1925"><a href="#L-1925"><span class="linenos">1925</span></a><span class="sd">    This Python function retrieves the number of threads to use based on input parameters and system</span>
</span><span id="L-1926"><a href="#L-1926"><span class="linenos">1926</span></a><span class="sd">    configuration.</span>
</span><span id="L-1927"><a href="#L-1927"><span class="linenos">1927</span></a>
</span><span id="L-1928"><a href="#L-1928"><span class="linenos">1928</span></a><span class="sd">    :param config: The `config` parameter is a dictionary that contains configuration settings for the</span>
</span><span id="L-1929"><a href="#L-1929"><span class="linenos">1929</span></a><span class="sd">    function `get_threads`. It can be used to provide default values for the number of threads to use in</span>
</span><span id="L-1930"><a href="#L-1930"><span class="linenos">1930</span></a><span class="sd">    the function</span>
</span><span id="L-1931"><a href="#L-1931"><span class="linenos">1931</span></a><span class="sd">    :type config: dict</span>
</span><span id="L-1932"><a href="#L-1932"><span class="linenos">1932</span></a><span class="sd">    :param param: The `param` parameter is a dictionary that may contain the key &quot;threads&quot; which</span>
</span><span id="L-1933"><a href="#L-1933"><span class="linenos">1933</span></a><span class="sd">    specifies the number of threads to use. If the &quot;threads&quot; key is not present in the `param`</span>
</span><span id="L-1934"><a href="#L-1934"><span class="linenos">1934</span></a><span class="sd">    dictionary, the function will look for the &quot;threads&quot; key in the `config` dictionary. If neither</span>
</span><span id="L-1935"><a href="#L-1935"><span class="linenos">1935</span></a><span class="sd">    :type param: dict</span>
</span><span id="L-1936"><a href="#L-1936"><span class="linenos">1936</span></a><span class="sd">    :return: The function `get_threads` returns the number of threads to be used based on the input</span>
</span><span id="L-1937"><a href="#L-1937"><span class="linenos">1937</span></a><span class="sd">    parameters.</span>
</span><span id="L-1938"><a href="#L-1938"><span class="linenos">1938</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1939"><a href="#L-1939"><span class="linenos">1939</span></a>
</span><span id="L-1940"><a href="#L-1940"><span class="linenos">1940</span></a>    <span class="c1"># Config</span>
</span><span id="L-1941"><a href="#L-1941"><span class="linenos">1941</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="p">:</span>
</span><span id="L-1942"><a href="#L-1942"><span class="linenos">1942</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1943"><a href="#L-1943"><span class="linenos">1943</span></a>
</span><span id="L-1944"><a href="#L-1944"><span class="linenos">1944</span></a>    <span class="c1"># Param</span>
</span><span id="L-1945"><a href="#L-1945"><span class="linenos">1945</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">param</span><span class="p">:</span>
</span><span id="L-1946"><a href="#L-1946"><span class="linenos">1946</span></a>        <span class="n">param</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1947"><a href="#L-1947"><span class="linenos">1947</span></a>
</span><span id="L-1948"><a href="#L-1948"><span class="linenos">1948</span></a>    <span class="c1"># Threads system</span>
</span><span id="L-1949"><a href="#L-1949"><span class="linenos">1949</span></a>    <span class="n">nb_threads</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()</span>
</span><span id="L-1950"><a href="#L-1950"><span class="linenos">1950</span></a>
</span><span id="L-1951"><a href="#L-1951"><span class="linenos">1951</span></a>    <span class="c1"># Threads in param or config</span>
</span><span id="L-1952"><a href="#L-1952"><span class="linenos">1952</span></a>    <span class="n">threads_param</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;threads&quot;</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;threads&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
</span><span id="L-1953"><a href="#L-1953"><span class="linenos">1953</span></a>
</span><span id="L-1954"><a href="#L-1954"><span class="linenos">1954</span></a>    <span class="c1"># Check threads in params</span>
</span><span id="L-1955"><a href="#L-1955"><span class="linenos">1955</span></a>    <span class="k">if</span> <span class="n">threads_param</span><span class="p">:</span>
</span><span id="L-1956"><a href="#L-1956"><span class="linenos">1956</span></a>        <span class="n">input_thread</span> <span class="o">=</span> <span class="n">threads_param</span>
</span><span id="L-1957"><a href="#L-1957"><span class="linenos">1957</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1958"><a href="#L-1958"><span class="linenos">1958</span></a>        <span class="n">input_thread</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1959"><a href="#L-1959"><span class="linenos">1959</span></a>
</span><span id="L-1960"><a href="#L-1960"><span class="linenos">1960</span></a>    <span class="c1"># Check threads value</span>
</span><span id="L-1961"><a href="#L-1961"><span class="linenos">1961</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">threads_param</span> <span class="ow">or</span> <span class="nb">int</span><span class="p">(</span><span class="n">threads_param</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1962"><a href="#L-1962"><span class="linenos">1962</span></a>        <span class="n">threads</span> <span class="o">=</span> <span class="n">nb_threads</span>
</span><span id="L-1963"><a href="#L-1963"><span class="linenos">1963</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1964"><a href="#L-1964"><span class="linenos">1964</span></a>        <span class="n">threads</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">input_thread</span><span class="p">)</span>
</span><span id="L-1965"><a href="#L-1965"><span class="linenos">1965</span></a>
</span><span id="L-1966"><a href="#L-1966"><span class="linenos">1966</span></a>    <span class="c1"># Return threads</span>
</span><span id="L-1967"><a href="#L-1967"><span class="linenos">1967</span></a>    <span class="k">return</span> <span class="n">threads</span>
</span><span id="L-1968"><a href="#L-1968"><span class="linenos">1968</span></a>
</span><span id="L-1969"><a href="#L-1969"><span class="linenos">1969</span></a>
</span><span id="L-1970"><a href="#L-1970"><span class="linenos">1970</span></a><span class="k">def</span> <span class="nf">get_memory</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">param</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1971"><a href="#L-1971"><span class="linenos">1971</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1972"><a href="#L-1972"><span class="linenos">1972</span></a><span class="sd">    The `get_memory` function retrieves memory information using psutil and calculates a default memory</span>
</span><span id="L-1973"><a href="#L-1973"><span class="linenos">1973</span></a><span class="sd">    value based on total memory, with the option to specify a custom memory value.</span>
</span><span id="L-1974"><a href="#L-1974"><span class="linenos">1974</span></a>
</span><span id="L-1975"><a href="#L-1975"><span class="linenos">1975</span></a><span class="sd">    :param config: The `config` parameter is a dictionary that may contain configuration settings for</span>
</span><span id="L-1976"><a href="#L-1976"><span class="linenos">1976</span></a><span class="sd">    the function `get_memory`. It is used to provide default values or settings for the function</span>
</span><span id="L-1977"><a href="#L-1977"><span class="linenos">1977</span></a><span class="sd">    :type config: dict</span>
</span><span id="L-1978"><a href="#L-1978"><span class="linenos">1978</span></a><span class="sd">    :param param: The `param` parameter is a dictionary that may contain a key &quot;memory&quot; which represents</span>
</span><span id="L-1979"><a href="#L-1979"><span class="linenos">1979</span></a><span class="sd">    the amount of memory to be used. If the &quot;memory&quot; key is not present in the `param` dictionary, the</span>
</span><span id="L-1980"><a href="#L-1980"><span class="linenos">1980</span></a><span class="sd">    function will try to retrieve the value from the `config` dictionary using the key &quot;</span>
</span><span id="L-1981"><a href="#L-1981"><span class="linenos">1981</span></a><span class="sd">    :type param: dict</span>
</span><span id="L-1982"><a href="#L-1982"><span class="linenos">1982</span></a><span class="sd">    :return: The function `get_memory` returns a string representing the amount of memory to be used.</span>
</span><span id="L-1983"><a href="#L-1983"><span class="linenos">1983</span></a><span class="sd">    This memory value is calculated based on the total memory available on the system, with a default</span>
</span><span id="L-1984"><a href="#L-1984"><span class="linenos">1984</span></a><span class="sd">    value set to 80% of the total memory. The function first checks if a specific memory value is</span>
</span><span id="L-1985"><a href="#L-1985"><span class="linenos">1985</span></a><span class="sd">    provided in the `param` dictionary, and if not, it looks for a default value in the `config`</span>
</span><span id="L-1986"><a href="#L-1986"><span class="linenos">1986</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1987"><a href="#L-1987"><span class="linenos">1987</span></a>
</span><span id="L-1988"><a href="#L-1988"><span class="linenos">1988</span></a>    <span class="kn">import</span> <span class="nn">psutil</span>
</span><span id="L-1989"><a href="#L-1989"><span class="linenos">1989</span></a>
</span><span id="L-1990"><a href="#L-1990"><span class="linenos">1990</span></a>    <span class="c1"># Memory system</span>
</span><span id="L-1991"><a href="#L-1991"><span class="linenos">1991</span></a>    <span class="n">mem</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span>
</span><span id="L-1992"><a href="#L-1992"><span class="linenos">1992</span></a>    <span class="n">mem_total</span> <span class="o">=</span> <span class="n">mem</span><span class="o">.</span><span class="n">total</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span>
</span><span id="L-1993"><a href="#L-1993"><span class="linenos">1993</span></a>    <span class="n">mem_default</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">mem_total</span> <span class="o">*</span> <span class="mf">0.8</span><span class="p">)</span>
</span><span id="L-1994"><a href="#L-1994"><span class="linenos">1994</span></a>
</span><span id="L-1995"><a href="#L-1995"><span class="linenos">1995</span></a>    <span class="c1"># Threads in param or config</span>
</span><span id="L-1996"><a href="#L-1996"><span class="linenos">1996</span></a>    <span class="k">if</span> <span class="n">config</span><span class="p">:</span>
</span><span id="L-1997"><a href="#L-1997"><span class="linenos">1997</span></a>        <span class="n">memory_config</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;memory&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-1998"><a href="#L-1998"><span class="linenos">1998</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1999"><a href="#L-1999"><span class="linenos">1999</span></a>        <span class="n">memory_config</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-2000"><a href="#L-2000"><span class="linenos">2000</span></a>    <span class="k">if</span> <span class="n">param</span><span class="p">:</span>
</span><span id="L-2001"><a href="#L-2001"><span class="linenos">2001</span></a>        <span class="n">memory_param</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;memory&quot;</span><span class="p">,</span> <span class="n">memory_config</span><span class="p">)</span>
</span><span id="L-2002"><a href="#L-2002"><span class="linenos">2002</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2003"><a href="#L-2003"><span class="linenos">2003</span></a>        <span class="n">memory_param</span> <span class="o">=</span> <span class="n">memory_config</span>
</span><span id="L-2004"><a href="#L-2004"><span class="linenos">2004</span></a>
</span><span id="L-2005"><a href="#L-2005"><span class="linenos">2005</span></a>    <span class="c1"># Check memory value</span>
</span><span id="L-2006"><a href="#L-2006"><span class="linenos">2006</span></a>    <span class="k">if</span> <span class="n">mem_default</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-2007"><a href="#L-2007"><span class="linenos">2007</span></a>        <span class="n">mem_default</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-2008"><a href="#L-2008"><span class="linenos">2008</span></a>    <span class="k">if</span> <span class="n">memory_param</span><span class="p">:</span>
</span><span id="L-2009"><a href="#L-2009"><span class="linenos">2009</span></a>        <span class="n">memory</span> <span class="o">=</span> <span class="n">memory_param</span>
</span><span id="L-2010"><a href="#L-2010"><span class="linenos">2010</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2011"><a href="#L-2011"><span class="linenos">2011</span></a>        <span class="n">memory</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">mem_default</span><span class="si">}</span><span class="s2">G&quot;</span>
</span><span id="L-2012"><a href="#L-2012"><span class="linenos">2012</span></a>
</span><span id="L-2013"><a href="#L-2013"><span class="linenos">2013</span></a>    <span class="k">return</span> <span class="n">memory</span>
</span><span id="L-2014"><a href="#L-2014"><span class="linenos">2014</span></a>
</span><span id="L-2015"><a href="#L-2015"><span class="linenos">2015</span></a>
</span><span id="L-2016"><a href="#L-2016"><span class="linenos">2016</span></a><span class="k">def</span> <span class="nf">extract_float_from_str</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-2017"><a href="#L-2017"><span class="linenos">2017</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2018"><a href="#L-2018"><span class="linenos">2018</span></a><span class="sd">    The function `extract_float_from_str` extracts a float value from a given string input.</span>
</span><span id="L-2019"><a href="#L-2019"><span class="linenos">2019</span></a>
</span><span id="L-2020"><a href="#L-2020"><span class="linenos">2020</span></a><span class="sd">    :param text: The `extract_float_from_str` function is designed to extract a floating-point number</span>
</span><span id="L-2021"><a href="#L-2021"><span class="linenos">2021</span></a><span class="sd">    from a given string input. The function uses a regular expression to find the first occurrence of a</span>
</span><span id="L-2022"><a href="#L-2022"><span class="linenos">2022</span></a><span class="sd">    floating-point number in the input string and returns it as a float</span>
</span><span id="L-2023"><a href="#L-2023"><span class="linenos">2023</span></a><span class="sd">    :type text: str</span>
</span><span id="L-2024"><a href="#L-2024"><span class="linenos">2024</span></a><span class="sd">    :return: The function `extract_float_from_str` returns a float value extracted from the input text</span>
</span><span id="L-2025"><a href="#L-2025"><span class="linenos">2025</span></a><span class="sd">    string. If a float value is found in the text, it is returned as a float. If no float value is</span>
</span><span id="L-2026"><a href="#L-2026"><span class="linenos">2026</span></a><span class="sd">    found, it returns `None`.</span>
</span><span id="L-2027"><a href="#L-2027"><span class="linenos">2027</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2028"><a href="#L-2028"><span class="linenos">2028</span></a>
</span><span id="L-2029"><a href="#L-2029"><span class="linenos">2029</span></a>    <span class="n">value_in_float</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[-+]?\d*\.*\d+&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
</span><span id="L-2030"><a href="#L-2030"><span class="linenos">2030</span></a>
</span><span id="L-2031"><a href="#L-2031"><span class="linenos">2031</span></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value_in_float</span><span class="p">):</span>
</span><span id="L-2032"><a href="#L-2032"><span class="linenos">2032</span></a>        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">value_in_float</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-2033"><a href="#L-2033"><span class="linenos">2033</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2034"><a href="#L-2034"><span class="linenos">2034</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-2035"><a href="#L-2035"><span class="linenos">2035</span></a>
</span><span id="L-2036"><a href="#L-2036"><span class="linenos">2036</span></a>
</span><span id="L-2037"><a href="#L-2037"><span class="linenos">2037</span></a><span class="k">def</span> <span class="nf">extract_memory_in_go</span><span class="p">(</span>
</span><span id="L-2038"><a href="#L-2038"><span class="linenos">2038</span></a>    <span class="n">memory_str</span><span class="p">,</span> <span class="n">default_value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">default_unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;G&quot;</span>
</span><span id="L-2039"><a href="#L-2039"><span class="linenos">2039</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-2040"><a href="#L-2040"><span class="linenos">2040</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2041"><a href="#L-2041"><span class="linenos">2041</span></a><span class="sd">    The `extract_memory_in_go` function converts a memory size string in the format FLOAT[kMG] to an</span>
</span><span id="L-2042"><a href="#L-2042"><span class="linenos">2042</span></a><span class="sd">    integer value in Go memory units.</span>
</span><span id="L-2043"><a href="#L-2043"><span class="linenos">2043</span></a>
</span><span id="L-2044"><a href="#L-2044"><span class="linenos">2044</span></a><span class="sd">    :param memory_str: The `memory_str` parameter should be a string representing a memory value with a</span>
</span><span id="L-2045"><a href="#L-2045"><span class="linenos">2045</span></a><span class="sd">    unit suffix in the format FLOAT[kMG]. For example, it could be &quot;1G&quot;, &quot;512M&quot;, or &quot;2k&quot;</span>
</span><span id="L-2046"><a href="#L-2046"><span class="linenos">2046</span></a><span class="sd">    :param default: The `default` parameter in the `extract_memory_in_go` function is used to specify a</span>
</span><span id="L-2047"><a href="#L-2047"><span class="linenos">2047</span></a><span class="sd">    default integer value if the conversion of the memory size string fails or if the value cannot be</span>
</span><span id="L-2048"><a href="#L-2048"><span class="linenos">2048</span></a><span class="sd">    extracted from the input string. If no valid value can be extracted from the input string, the</span>
</span><span id="L-2049"><a href="#L-2049"><span class="linenos">2049</span></a><span class="sd">    function will return the, defaults to 1</span>
</span><span id="L-2050"><a href="#L-2050"><span class="linenos">2050</span></a><span class="sd">    :type default: int (optional)</span>
</span><span id="L-2051"><a href="#L-2051"><span class="linenos">2051</span></a><span class="sd">    :return: The `extract_memory_in_go` function is returning an integer value representing the memory</span>
</span><span id="L-2052"><a href="#L-2052"><span class="linenos">2052</span></a><span class="sd">    size in Go units based on the input memory string provided.</span>
</span><span id="L-2053"><a href="#L-2053"><span class="linenos">2053</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2054"><a href="#L-2054"><span class="linenos">2054</span></a>
</span><span id="L-2055"><a href="#L-2055"><span class="linenos">2055</span></a>    <span class="c1"># Convert in upper ccase</span>
</span><span id="L-2056"><a href="#L-2056"><span class="linenos">2056</span></a>    <span class="n">memory_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">memory_str</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span><span id="L-2057"><a href="#L-2057"><span class="linenos">2057</span></a>
</span><span id="L-2058"><a href="#L-2058"><span class="linenos">2058</span></a>    <span class="c1"># Coefficient</span>
</span><span id="L-2059"><a href="#L-2059"><span class="linenos">2059</span></a>    <span class="n">coefficient</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-2060"><a href="#L-2060"><span class="linenos">2060</span></a>        <span class="s2">&quot;K&quot;</span><span class="p">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">),</span>
</span><span id="L-2061"><a href="#L-2061"><span class="linenos">2061</span></a>        <span class="s2">&quot;M&quot;</span><span class="p">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">,</span>
</span><span id="L-2062"><a href="#L-2062"><span class="linenos">2062</span></a>        <span class="s2">&quot;G&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="L-2063"><a href="#L-2063"><span class="linenos">2063</span></a>    <span class="p">}</span>
</span><span id="L-2064"><a href="#L-2064"><span class="linenos">2064</span></a>
</span><span id="L-2065"><a href="#L-2065"><span class="linenos">2065</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-2066"><a href="#L-2066"><span class="linenos">2066</span></a>        <span class="c1"># Extract in float</span>
</span><span id="L-2067"><a href="#L-2067"><span class="linenos">2067</span></a>        <span class="n">value</span> <span class="o">=</span> <span class="n">extract_float_from_str</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">memory_str</span><span class="p">)</span>
</span><span id="L-2068"><a href="#L-2068"><span class="linenos">2068</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
</span><span id="L-2069"><a href="#L-2069"><span class="linenos">2069</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">default_value</span>
</span><span id="L-2070"><a href="#L-2070"><span class="linenos">2070</span></a>
</span><span id="L-2071"><a href="#L-2071"><span class="linenos">2071</span></a>        <span class="c1"># Extract unit</span>
</span><span id="L-2072"><a href="#L-2072"><span class="linenos">2072</span></a>        <span class="n">unit</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[?([A-Za-z]+&quot;</span><span class="p">,</span> <span class="n">memory_str</span><span class="p">)</span>
</span><span id="L-2073"><a href="#L-2073"><span class="linenos">2073</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">unit</span><span class="p">:</span>
</span><span id="L-2074"><a href="#L-2074"><span class="linenos">2074</span></a>            <span class="n">unit</span> <span class="o">=</span> <span class="n">default_unit</span>
</span><span id="L-2075"><a href="#L-2075"><span class="linenos">2075</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2076"><a href="#L-2076"><span class="linenos">2076</span></a>            <span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2077"><a href="#L-2077"><span class="linenos">2077</span></a>
</span><span id="L-2078"><a href="#L-2078"><span class="linenos">2078</span></a>        <span class="c1"># Convert in int Go</span>
</span><span id="L-2079"><a href="#L-2079"><span class="linenos">2079</span></a>        <span class="k">if</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">coefficient</span><span class="p">:</span>
</span><span id="L-2080"><a href="#L-2080"><span class="linenos">2080</span></a>            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span> <span class="o">*</span> <span class="n">coefficient</span><span class="p">[</span><span class="n">unit</span><span class="p">])</span>
</span><span id="L-2081"><a href="#L-2081"><span class="linenos">2081</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2082"><a href="#L-2082"><span class="linenos">2082</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-2083"><a href="#L-2083"><span class="linenos">2083</span></a>                <span class="sa">f</span><span class="s2">&quot;Invalid unit &#39;</span><span class="si">{</span><span class="n">unit</span><span class="si">}</span><span class="s2">&#39;. Use &#39;k&#39;, &#39;m&#39; ou &#39;g&#39; i upper or lower case.&quot;</span>
</span><span id="L-2084"><a href="#L-2084"><span class="linenos">2084</span></a>            <span class="p">)</span>
</span><span id="L-2085"><a href="#L-2085"><span class="linenos">2085</span></a>    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="L-2086"><a href="#L-2086"><span class="linenos">2086</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-2087"><a href="#L-2087"><span class="linenos">2087</span></a>            <span class="sa">f</span><span class="s2">&quot;Invalid memory format &#39;</span><span class="si">{</span><span class="n">memory_str</span><span class="si">}</span><span class="s2">&#39;. Use format FLOAT[kMG].&quot;</span>
</span><span id="L-2088"><a href="#L-2088"><span class="linenos">2088</span></a>        <span class="p">)</span>
</span><span id="L-2089"><a href="#L-2089"><span class="linenos">2089</span></a>
</span><span id="L-2090"><a href="#L-2090"><span class="linenos">2090</span></a>
</span><span id="L-2091"><a href="#L-2091"><span class="linenos">2091</span></a><span class="k">def</span> <span class="nf">concat_file</span><span class="p">(</span><span class="n">input_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">output_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-2092"><a href="#L-2092"><span class="linenos">2092</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2093"><a href="#L-2093"><span class="linenos">2093</span></a><span class="sd">    This function concatenates multiple input files into a single output file.</span>
</span><span id="L-2094"><a href="#L-2094"><span class="linenos">2094</span></a>
</span><span id="L-2095"><a href="#L-2095"><span class="linenos">2095</span></a><span class="sd">    :param input_files: A list of file paths to the input files that need to be concatenated</span>
</span><span id="L-2096"><a href="#L-2096"><span class="linenos">2096</span></a><span class="sd">    :type input_files: list</span>
</span><span id="L-2097"><a href="#L-2097"><span class="linenos">2097</span></a><span class="sd">    :param output_file: The parameter &quot;output_file&quot; is a string that represents the name of the file</span>
</span><span id="L-2098"><a href="#L-2098"><span class="linenos">2098</span></a><span class="sd">    that will be created by the function and will contain the concatenated content of all the input</span>
</span><span id="L-2099"><a href="#L-2099"><span class="linenos">2099</span></a><span class="sd">    files</span>
</span><span id="L-2100"><a href="#L-2100"><span class="linenos">2100</span></a><span class="sd">    :type output_file: str</span>
</span><span id="L-2101"><a href="#L-2101"><span class="linenos">2101</span></a><span class="sd">    :return: a boolean value indicating whether the output file was successfully created or not. It</span>
</span><span id="L-2102"><a href="#L-2102"><span class="linenos">2102</span></a><span class="sd">    checks if the output file exists using the `os.path.exists()` function and returns `True` if it</span>
</span><span id="L-2103"><a href="#L-2103"><span class="linenos">2103</span></a><span class="sd">    exists and `False` otherwise.</span>
</span><span id="L-2104"><a href="#L-2104"><span class="linenos">2104</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2105"><a href="#L-2105"><span class="linenos">2105</span></a>
</span><span id="L-2106"><a href="#L-2106"><span class="linenos">2106</span></a>    <span class="c1"># Full path</span>
</span><span id="L-2107"><a href="#L-2107"><span class="linenos">2107</span></a>    <span class="n">output_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</span><span id="L-2108"><a href="#L-2108"><span class="linenos">2108</span></a>
</span><span id="L-2109"><a href="#L-2109"><span class="linenos">2109</span></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
</span><span id="L-2110"><a href="#L-2110"><span class="linenos">2110</span></a>        <span class="k">for</span> <span class="n">input_file</span> <span class="ow">in</span> <span class="n">input_files</span><span class="p">:</span>
</span><span id="L-2111"><a href="#L-2111"><span class="linenos">2111</span></a>            <span class="n">input_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>
</span><span id="L-2112"><a href="#L-2112"><span class="linenos">2112</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
</span><span id="L-2113"><a href="#L-2113"><span class="linenos">2113</span></a>                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">infile</span><span class="p">:</span>
</span><span id="L-2114"><a href="#L-2114"><span class="linenos">2114</span></a>                    <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="L-2115"><a href="#L-2115"><span class="linenos">2115</span></a>
</span><span id="L-2116"><a href="#L-2116"><span class="linenos">2116</span></a>    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</span><span id="L-2117"><a href="#L-2117"><span class="linenos">2117</span></a>
</span><span id="L-2118"><a href="#L-2118"><span class="linenos">2118</span></a>
</span><span id="L-2119"><a href="#L-2119"><span class="linenos">2119</span></a><span class="k">def</span> <span class="nf">compress_file</span><span class="p">(</span><span class="n">input_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">output_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-2120"><a href="#L-2120"><span class="linenos">2120</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2121"><a href="#L-2121"><span class="linenos">2121</span></a><span class="sd">    This function compresses a file using the BGZF compression algorithm.</span>
</span><span id="L-2122"><a href="#L-2122"><span class="linenos">2122</span></a>
</span><span id="L-2123"><a href="#L-2123"><span class="linenos">2123</span></a><span class="sd">    :param input_file: The path and name of the input file that needs to be compressed</span>
</span><span id="L-2124"><a href="#L-2124"><span class="linenos">2124</span></a><span class="sd">    :type input_file: str</span>
</span><span id="L-2125"><a href="#L-2125"><span class="linenos">2125</span></a><span class="sd">    :param output_file: The output_file parameter is a string that represents the name and path of</span>
</span><span id="L-2126"><a href="#L-2126"><span class="linenos">2126</span></a><span class="sd">    the file where the compressed data will be written</span>
</span><span id="L-2127"><a href="#L-2127"><span class="linenos">2127</span></a><span class="sd">    :type output_file: str</span>
</span><span id="L-2128"><a href="#L-2128"><span class="linenos">2128</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2129"><a href="#L-2129"><span class="linenos">2129</span></a>
</span><span id="L-2130"><a href="#L-2130"><span class="linenos">2130</span></a>    <span class="c1"># Full path</span>
</span><span id="L-2131"><a href="#L-2131"><span class="linenos">2131</span></a>    <span class="n">output_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</span><span id="L-2132"><a href="#L-2132"><span class="linenos">2132</span></a>
</span><span id="L-2133"><a href="#L-2133"><span class="linenos">2133</span></a>    <span class="c1"># Concat and compress</span>
</span><span id="L-2134"><a href="#L-2134"><span class="linenos">2134</span></a>    <span class="n">concat_and_compress_files</span><span class="p">(</span><span class="n">input_files</span><span class="o">=</span><span class="p">[</span><span class="n">input_file</span><span class="p">],</span> <span class="n">output_file</span><span class="o">=</span><span class="n">output_file</span><span class="p">)</span>
</span><span id="L-2135"><a href="#L-2135"><span class="linenos">2135</span></a>
</span><span id="L-2136"><a href="#L-2136"><span class="linenos">2136</span></a>    <span class="c1"># Return</span>
</span><span id="L-2137"><a href="#L-2137"><span class="linenos">2137</span></a>    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</span><span id="L-2138"><a href="#L-2138"><span class="linenos">2138</span></a>
</span><span id="L-2139"><a href="#L-2139"><span class="linenos">2139</span></a>
</span><span id="L-2140"><a href="#L-2140"><span class="linenos">2140</span></a><span class="k">def</span> <span class="nf">get_compression_type</span><span class="p">(</span><span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-2141"><a href="#L-2141"><span class="linenos">2141</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2142"><a href="#L-2142"><span class="linenos">2142</span></a><span class="sd">    The function `get_compression_type` determines the compression type of a file based on its first few</span>
</span><span id="L-2143"><a href="#L-2143"><span class="linenos">2143</span></a><span class="sd">    bytes.</span>
</span><span id="L-2144"><a href="#L-2144"><span class="linenos">2144</span></a>
</span><span id="L-2145"><a href="#L-2145"><span class="linenos">2145</span></a><span class="sd">    :param filepath: The `filepath` parameter is a string that represents the path to the file for which</span>
</span><span id="L-2146"><a href="#L-2146"><span class="linenos">2146</span></a><span class="sd">    we want to determine the compression type</span>
</span><span id="L-2147"><a href="#L-2147"><span class="linenos">2147</span></a><span class="sd">    :type filepath: str</span>
</span><span id="L-2148"><a href="#L-2148"><span class="linenos">2148</span></a><span class="sd">    :return: The function `get_compression_type` returns a string indicating the compression type of the</span>
</span><span id="L-2149"><a href="#L-2149"><span class="linenos">2149</span></a><span class="sd">    file specified by the `filepath` parameter. The possible return values are &quot;gzip&quot; if the file is</span>
</span><span id="L-2150"><a href="#L-2150"><span class="linenos">2150</span></a><span class="sd">    compressed using gzip, &quot;bgzip&quot; if the file is compressed using bgzip, &quot;unknown&quot; if the compression</span>
</span><span id="L-2151"><a href="#L-2151"><span class="linenos">2151</span></a><span class="sd">    type is unknown, and &quot;none&quot; if the file is not compressed.</span>
</span><span id="L-2152"><a href="#L-2152"><span class="linenos">2152</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2153"><a href="#L-2153"><span class="linenos">2153</span></a>
</span><span id="L-2154"><a href="#L-2154"><span class="linenos">2154</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-2155"><a href="#L-2155"><span class="linenos">2155</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">test_f</span><span class="p">:</span>
</span><span id="L-2156"><a href="#L-2156"><span class="linenos">2156</span></a>            <span class="c1"># Firsts bits</span>
</span><span id="L-2157"><a href="#L-2157"><span class="linenos">2157</span></a>            <span class="n">bit_1</span> <span class="o">=</span> <span class="n">test_f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2158"><a href="#L-2158"><span class="linenos">2158</span></a>            <span class="n">bit_2</span> <span class="o">=</span> <span class="n">test_f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2159"><a href="#L-2159"><span class="linenos">2159</span></a>            <span class="n">bit_3</span> <span class="o">=</span> <span class="n">test_f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2160"><a href="#L-2160"><span class="linenos">2160</span></a>            <span class="n">bit_4</span> <span class="o">=</span> <span class="n">test_f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2161"><a href="#L-2161"><span class="linenos">2161</span></a>            <span class="c1"># If bit is compress</span>
</span><span id="L-2162"><a href="#L-2162"><span class="linenos">2162</span></a>            <span class="k">if</span> <span class="n">bit_1</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x1f</span><span class="s2">&quot;</span> <span class="ow">and</span> <span class="n">bit_2</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x8b</span><span class="s2">&quot;</span> <span class="ow">and</span> <span class="n">bit_3</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x08</span><span class="s2">&quot;</span><span class="p">:</span>
</span><span id="L-2163"><a href="#L-2163"><span class="linenos">2163</span></a>                <span class="c1"># If bit 4 == x04 is compress &#39;bgzip&#39; type</span>
</span><span id="L-2164"><a href="#L-2164"><span class="linenos">2164</span></a>                <span class="k">if</span> <span class="n">bit_4</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x04</span><span class="s2">&quot;</span><span class="p">:</span>
</span><span id="L-2165"><a href="#L-2165"><span class="linenos">2165</span></a>                    <span class="k">return</span> <span class="s2">&quot;bgzip&quot;</span>
</span><span id="L-2166"><a href="#L-2166"><span class="linenos">2166</span></a>                <span class="c1"># else is compress &#39;gzip&#39; type</span>
</span><span id="L-2167"><a href="#L-2167"><span class="linenos">2167</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2168"><a href="#L-2168"><span class="linenos">2168</span></a>                    <span class="k">return</span> <span class="s2">&quot;gzip&quot;</span>
</span><span id="L-2169"><a href="#L-2169"><span class="linenos">2169</span></a>            <span class="c1"># If no compress type</span>
</span><span id="L-2170"><a href="#L-2170"><span class="linenos">2170</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2171"><a href="#L-2171"><span class="linenos">2171</span></a>                <span class="k">return</span> <span class="s2">&quot;none&quot;</span>
</span><span id="L-2172"><a href="#L-2172"><span class="linenos">2172</span></a>    <span class="k">except</span><span class="p">:</span>
</span><span id="L-2173"><a href="#L-2173"><span class="linenos">2173</span></a>        <span class="k">return</span> <span class="s2">&quot;unknown&quot;</span>
</span><span id="L-2174"><a href="#L-2174"><span class="linenos">2174</span></a>
</span><span id="L-2175"><a href="#L-2175"><span class="linenos">2175</span></a>
</span><span id="L-2176"><a href="#L-2176"><span class="linenos">2176</span></a><span class="k">def</span> <span class="nf">get_file_compressed</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-2177"><a href="#L-2177"><span class="linenos">2177</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2178"><a href="#L-2178"><span class="linenos">2178</span></a><span class="sd">    This function takes a filename as input and returns True if the file is compressed (in bgzip) and False if it</span>
</span><span id="L-2179"><a href="#L-2179"><span class="linenos">2179</span></a><span class="sd">    is not</span>
</span><span id="L-2180"><a href="#L-2180"><span class="linenos">2180</span></a>
</span><span id="L-2181"><a href="#L-2181"><span class="linenos">2181</span></a><span class="sd">    :param filename: the name of the file to be checked</span>
</span><span id="L-2182"><a href="#L-2182"><span class="linenos">2182</span></a><span class="sd">    :type filename: str</span>
</span><span id="L-2183"><a href="#L-2183"><span class="linenos">2183</span></a><span class="sd">    :return: A boolean value.</span>
</span><span id="L-2184"><a href="#L-2184"><span class="linenos">2184</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2185"><a href="#L-2185"><span class="linenos">2185</span></a>
</span><span id="L-2186"><a href="#L-2186"><span class="linenos">2186</span></a>    <span class="c1"># Full path</span>
</span><span id="L-2187"><a href="#L-2187"><span class="linenos">2187</span></a>    <span class="n">filename</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="L-2188"><a href="#L-2188"><span class="linenos">2188</span></a>
</span><span id="L-2189"><a href="#L-2189"><span class="linenos">2189</span></a>    <span class="n">compression_type</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-2190"><a href="#L-2190"><span class="linenos">2190</span></a>    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
</span><span id="L-2191"><a href="#L-2191"><span class="linenos">2191</span></a>        <span class="c1"># If filename exists, try to detect compression within content (first bits)</span>
</span><span id="L-2192"><a href="#L-2192"><span class="linenos">2192</span></a>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
</span><span id="L-2193"><a href="#L-2193"><span class="linenos">2193</span></a>            <span class="n">compression_type</span> <span class="o">=</span> <span class="n">get_compression_type</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="L-2194"><a href="#L-2194"><span class="linenos">2194</span></a>        <span class="c1"># If filename does not exists, use extension to determine if it is compressed</span>
</span><span id="L-2195"><a href="#L-2195"><span class="linenos">2195</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2196"><a href="#L-2196"><span class="linenos">2196</span></a>            <span class="n">filename_name</span><span class="p">,</span> <span class="n">filename_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="L-2197"><a href="#L-2197"><span class="linenos">2197</span></a>            <span class="n">compress_format</span> <span class="o">=</span> <span class="n">filename_extension</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-2198"><a href="#L-2198"><span class="linenos">2198</span></a>            <span class="k">if</span> <span class="n">compress_format</span> <span class="ow">in</span> <span class="n">file_compressed_format</span><span class="p">:</span>
</span><span id="L-2199"><a href="#L-2199"><span class="linenos">2199</span></a>                <span class="n">compression_type</span> <span class="o">=</span> <span class="s2">&quot;bgzip&quot;</span>
</span><span id="L-2200"><a href="#L-2200"><span class="linenos">2200</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2201"><a href="#L-2201"><span class="linenos">2201</span></a>                <span class="n">compression_type</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
</span><span id="L-2202"><a href="#L-2202"><span class="linenos">2202</span></a>    <span class="k">return</span> <span class="n">compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;gzip&quot;</span><span class="p">,</span> <span class="s2">&quot;bgzip&quot;</span><span class="p">]</span>
</span><span id="L-2203"><a href="#L-2203"><span class="linenos">2203</span></a>
</span><span id="L-2204"><a href="#L-2204"><span class="linenos">2204</span></a>
</span><span id="L-2205"><a href="#L-2205"><span class="linenos">2205</span></a><span class="k">def</span> <span class="nf">concat_into_infile</span><span class="p">(</span>
</span><span id="L-2206"><a href="#L-2206"><span class="linenos">2206</span></a>    <span class="n">input_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
</span><span id="L-2207"><a href="#L-2207"><span class="linenos">2207</span></a>    <span class="n">compressed_file</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
</span><span id="L-2208"><a href="#L-2208"><span class="linenos">2208</span></a>    <span class="n">compression_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
</span><span id="L-2209"><a href="#L-2209"><span class="linenos">2209</span></a>    <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="L-2210"><a href="#L-2210"><span class="linenos">2210</span></a>    <span class="n">block</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span>
</span><span id="L-2211"><a href="#L-2211"><span class="linenos">2211</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-2212"><a href="#L-2212"><span class="linenos">2212</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2213"><a href="#L-2213"><span class="linenos">2213</span></a><span class="sd">    The function `concat_into_infile` concatenates multiple input files into a compressed output file,</span>
</span><span id="L-2214"><a href="#L-2214"><span class="linenos">2214</span></a><span class="sd">    with support for different compression types and multi-threading.</span>
</span><span id="L-2215"><a href="#L-2215"><span class="linenos">2215</span></a>
</span><span id="L-2216"><a href="#L-2216"><span class="linenos">2216</span></a><span class="sd">    :param input_files: A list of input file paths that need to be concatenated into the compressed file</span>
</span><span id="L-2217"><a href="#L-2217"><span class="linenos">2217</span></a><span class="sd">    :type input_files: list</span>
</span><span id="L-2218"><a href="#L-2218"><span class="linenos">2218</span></a><span class="sd">    :param compressed_file: The `compressed_file` parameter is an object that represents the file where</span>
</span><span id="L-2219"><a href="#L-2219"><span class="linenos">2219</span></a><span class="sd">    the concatenated contents of the input files will be written. It is expected to be a file object</span>
</span><span id="L-2220"><a href="#L-2220"><span class="linenos">2220</span></a><span class="sd">    that has write capabilities</span>
</span><span id="L-2221"><a href="#L-2221"><span class="linenos">2221</span></a><span class="sd">    :type compressed_file: object</span>
</span><span id="L-2222"><a href="#L-2222"><span class="linenos">2222</span></a><span class="sd">    :param compression_type: The `compression_type` parameter specifies the type of compression to be</span>
</span><span id="L-2223"><a href="#L-2223"><span class="linenos">2223</span></a><span class="sd">    used for the output file. The default value is &quot;none&quot;, which means no compression will be applied.</span>
</span><span id="L-2224"><a href="#L-2224"><span class="linenos">2224</span></a><span class="sd">    Other possible values include &quot;bgzip&quot; and &quot;gzip&quot;, which indicate that the output file should be</span>
</span><span id="L-2225"><a href="#L-2225"><span class="linenos">2225</span></a><span class="sd">    compressed using the bgzip and, defaults to none</span>
</span><span id="L-2226"><a href="#L-2226"><span class="linenos">2226</span></a><span class="sd">    :type compression_type: str (optional)</span>
</span><span id="L-2227"><a href="#L-2227"><span class="linenos">2227</span></a><span class="sd">    :param threads: The &quot;threads&quot; parameter specifies the number of threads to use for compression or</span>
</span><span id="L-2228"><a href="#L-2228"><span class="linenos">2228</span></a><span class="sd">    decompression. It determines how many parallel processes can be executed simultaneously, which can</span>
</span><span id="L-2229"><a href="#L-2229"><span class="linenos">2229</span></a><span class="sd">    help improve performance when dealing with large files or multiple files, defaults to 1</span>
</span><span id="L-2230"><a href="#L-2230"><span class="linenos">2230</span></a><span class="sd">    :type threads: int (optional)</span>
</span><span id="L-2231"><a href="#L-2231"><span class="linenos">2231</span></a><span class="sd">    :param block: The `block` parameter is used to specify the size of the block when reading the input</span>
</span><span id="L-2232"><a href="#L-2232"><span class="linenos">2232</span></a><span class="sd">    files. It is set to `10 ** 6`, which means 1 million bytes. This parameter determines how much data</span>
</span><span id="L-2233"><a href="#L-2233"><span class="linenos">2233</span></a><span class="sd">    is read from the input files at a time</span>
</span><span id="L-2234"><a href="#L-2234"><span class="linenos">2234</span></a><span class="sd">    :type block: int</span>
</span><span id="L-2235"><a href="#L-2235"><span class="linenos">2235</span></a><span class="sd">    :return: a boolean value, specifically `True`.</span>
</span><span id="L-2236"><a href="#L-2236"><span class="linenos">2236</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2237"><a href="#L-2237"><span class="linenos">2237</span></a>
</span><span id="L-2238"><a href="#L-2238"><span class="linenos">2238</span></a>    <span class="c1"># Output file compressions type</span>
</span><span id="L-2239"><a href="#L-2239"><span class="linenos">2239</span></a>    <span class="k">if</span> <span class="n">compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;none&quot;</span><span class="p">]:</span>
</span><span id="L-2240"><a href="#L-2240"><span class="linenos">2240</span></a>        <span class="n">open_type</span> <span class="o">=</span> <span class="s2">&quot;t&quot;</span>
</span><span id="L-2241"><a href="#L-2241"><span class="linenos">2241</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2242"><a href="#L-2242"><span class="linenos">2242</span></a>        <span class="n">open_type</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span>
</span><span id="L-2243"><a href="#L-2243"><span class="linenos">2243</span></a>
</span><span id="L-2244"><a href="#L-2244"><span class="linenos">2244</span></a>    <span class="c1"># Open input files</span>
</span><span id="L-2245"><a href="#L-2245"><span class="linenos">2245</span></a>    <span class="k">for</span> <span class="n">input_file</span> <span class="ow">in</span> <span class="n">input_files</span><span class="p">:</span>
</span><span id="L-2246"><a href="#L-2246"><span class="linenos">2246</span></a>
</span><span id="L-2247"><a href="#L-2247"><span class="linenos">2247</span></a>        <span class="c1"># Full path</span>
</span><span id="L-2248"><a href="#L-2248"><span class="linenos">2248</span></a>        <span class="n">input_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>
</span><span id="L-2249"><a href="#L-2249"><span class="linenos">2249</span></a>
</span><span id="L-2250"><a href="#L-2250"><span class="linenos">2250</span></a>        <span class="c1"># Input file compression type</span>
</span><span id="L-2251"><a href="#L-2251"><span class="linenos">2251</span></a>        <span class="n">input_compression_type</span> <span class="o">=</span> <span class="n">get_compression_type</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>
</span><span id="L-2252"><a href="#L-2252"><span class="linenos">2252</span></a>        <span class="k">if</span> <span class="n">input_compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;bgzip&quot;</span><span class="p">]:</span>
</span><span id="L-2253"><a href="#L-2253"><span class="linenos">2253</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">raw</span><span class="p">:</span>
</span><span id="L-2254"><a href="#L-2254"><span class="linenos">2254</span></a>                <span class="k">with</span> <span class="n">bgzip</span><span class="o">.</span><span class="n">BGZipReader</span><span class="p">(</span>
</span><span id="L-2255"><a href="#L-2255"><span class="linenos">2255</span></a>                    <span class="n">raw</span><span class="p">,</span> <span class="n">num_threads</span><span class="o">=</span><span class="n">threads</span><span class="p">,</span> <span class="n">raw_read_chunk_size</span><span class="o">=</span><span class="n">block</span>
</span><span id="L-2256"><a href="#L-2256"><span class="linenos">2256</span></a>                <span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
</span><span id="L-2257"><a href="#L-2257"><span class="linenos">2257</span></a>                    <span class="k">if</span> <span class="n">open_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;t&quot;</span><span class="p">]:</span>
</span><span id="L-2258"><a href="#L-2258"><span class="linenos">2258</span></a>                        <span class="n">compressed_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">infile</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
</span><span id="L-2259"><a href="#L-2259"><span class="linenos">2259</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2260"><a href="#L-2260"><span class="linenos">2260</span></a>                        <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="n">compressed_file</span><span class="p">)</span>
</span><span id="L-2261"><a href="#L-2261"><span class="linenos">2261</span></a>        <span class="k">elif</span> <span class="n">input_compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;gzip&quot;</span><span class="p">]:</span>
</span><span id="L-2262"><a href="#L-2262"><span class="linenos">2262</span></a>            <span class="c1"># See https://pypi.org/project/mgzip/</span>
</span><span id="L-2263"><a href="#L-2263"><span class="linenos">2263</span></a>            <span class="k">with</span> <span class="n">mgzip</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span> <span class="o">+</span> <span class="n">open_type</span><span class="p">,</span> <span class="n">thread</span><span class="o">=</span><span class="n">threads</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
</span><span id="L-2264"><a href="#L-2264"><span class="linenos">2264</span></a>                <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="n">compressed_file</span><span class="p">)</span>
</span><span id="L-2265"><a href="#L-2265"><span class="linenos">2265</span></a>        <span class="k">elif</span> <span class="n">input_compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;none&quot;</span><span class="p">]:</span>
</span><span id="L-2266"><a href="#L-2266"><span class="linenos">2266</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span> <span class="o">+</span> <span class="n">open_type</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
</span><span id="L-2267"><a href="#L-2267"><span class="linenos">2267</span></a>                <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="n">compressed_file</span><span class="p">)</span>
</span><span id="L-2268"><a href="#L-2268"><span class="linenos">2268</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2269"><a href="#L-2269"><span class="linenos">2269</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input file compression type unknown: </span><span class="si">{</span><span class="n">input_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-2270"><a href="#L-2270"><span class="linenos">2270</span></a>
</span><span id="L-2271"><a href="#L-2271"><span class="linenos">2271</span></a>    <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-2272"><a href="#L-2272"><span class="linenos">2272</span></a>
</span><span id="L-2273"><a href="#L-2273"><span class="linenos">2273</span></a>
</span><span id="L-2274"><a href="#L-2274"><span class="linenos">2274</span></a><span class="k">def</span> <span class="nf">concat_and_compress_files</span><span class="p">(</span>
</span><span id="L-2275"><a href="#L-2275"><span class="linenos">2275</span></a>    <span class="n">input_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
</span><span id="L-2276"><a href="#L-2276"><span class="linenos">2276</span></a>    <span class="n">output_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-2277"><a href="#L-2277"><span class="linenos">2277</span></a>    <span class="n">compression_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bgzip&quot;</span><span class="p">,</span>
</span><span id="L-2278"><a href="#L-2278"><span class="linenos">2278</span></a>    <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="L-2279"><a href="#L-2279"><span class="linenos">2279</span></a>    <span class="n">memory</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="L-2280"><a href="#L-2280"><span class="linenos">2280</span></a>    <span class="n">block</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span>
</span><span id="L-2281"><a href="#L-2281"><span class="linenos">2281</span></a>    <span class="n">compression_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
</span><span id="L-2282"><a href="#L-2282"><span class="linenos">2282</span></a>    <span class="n">sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-2283"><a href="#L-2283"><span class="linenos">2283</span></a>    <span class="n">index</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-2284"><a href="#L-2284"><span class="linenos">2284</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-2285"><a href="#L-2285"><span class="linenos">2285</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2286"><a href="#L-2286"><span class="linenos">2286</span></a><span class="sd">    The function `concat_and_compress_files` takes a list of input files, an output file name, and</span>
</span><span id="L-2287"><a href="#L-2287"><span class="linenos">2287</span></a><span class="sd">    optional parameters for compression type, number of threads, block size, compression level, sorting,</span>
</span><span id="L-2288"><a href="#L-2288"><span class="linenos">2288</span></a><span class="sd">    and indexing, and concatenates and compresses the input files into the output file.</span>
</span><span id="L-2289"><a href="#L-2289"><span class="linenos">2289</span></a>
</span><span id="L-2290"><a href="#L-2290"><span class="linenos">2290</span></a><span class="sd">    :param input_files: A list of input file paths that need to be concatenated and compressed</span>
</span><span id="L-2291"><a href="#L-2291"><span class="linenos">2291</span></a><span class="sd">    :type input_files: list</span>
</span><span id="L-2292"><a href="#L-2292"><span class="linenos">2292</span></a><span class="sd">    :param output_file: The `output_file` parameter is a string that specifies the path and name of the</span>
</span><span id="L-2293"><a href="#L-2293"><span class="linenos">2293</span></a><span class="sd">    output file that will be created after concatenating and compressing the input files</span>
</span><span id="L-2294"><a href="#L-2294"><span class="linenos">2294</span></a><span class="sd">    :type output_file: str</span>
</span><span id="L-2295"><a href="#L-2295"><span class="linenos">2295</span></a><span class="sd">    :param compression_type: The `compression_type` parameter specifies the type of compression to be</span>
</span><span id="L-2296"><a href="#L-2296"><span class="linenos">2296</span></a><span class="sd">    applied to the output file. It can take one of three values: &quot;bgzip&quot;, &quot;gzip&quot;, or &quot;none&quot;, defaults to</span>
</span><span id="L-2297"><a href="#L-2297"><span class="linenos">2297</span></a><span class="sd">    bgzip</span>
</span><span id="L-2298"><a href="#L-2298"><span class="linenos">2298</span></a><span class="sd">    :type compression_type: str (optional)</span>
</span><span id="L-2299"><a href="#L-2299"><span class="linenos">2299</span></a><span class="sd">    :param threads: The `threads` parameter specifies the number of threads to use for compression and</span>
</span><span id="L-2300"><a href="#L-2300"><span class="linenos">2300</span></a><span class="sd">    decompression. It determines the level of parallelism in the compression process, allowing for</span>
</span><span id="L-2301"><a href="#L-2301"><span class="linenos">2301</span></a><span class="sd">    faster execution when multiple threads are used, defaults to 1</span>
</span><span id="L-2302"><a href="#L-2302"><span class="linenos">2302</span></a><span class="sd">    :type threads: int (optional)</span>
</span><span id="L-2303"><a href="#L-2303"><span class="linenos">2303</span></a><span class="sd">    :param memory: The `memory` parameter specifies the amount of max memory (in Gb) to use for sorting.</span>
</span><span id="L-2304"><a href="#L-2304"><span class="linenos">2304</span></a><span class="sd">    defaults to 1</span>
</span><span id="L-2305"><a href="#L-2305"><span class="linenos">2305</span></a><span class="sd">    :type memory: int (optional)</span>
</span><span id="L-2306"><a href="#L-2306"><span class="linenos">2306</span></a><span class="sd">    :param block: The `block` parameter specifies the size of the block used for reading and writing</span>
</span><span id="L-2307"><a href="#L-2307"><span class="linenos">2307</span></a><span class="sd">    data during compression. It is set to a default value of 10^6 (1 million) bytes</span>
</span><span id="L-2308"><a href="#L-2308"><span class="linenos">2308</span></a><span class="sd">    :type block: int</span>
</span><span id="L-2309"><a href="#L-2309"><span class="linenos">2309</span></a><span class="sd">    :param compression_level: The `compression_level` parameter determines the level of compression to</span>
</span><span id="L-2310"><a href="#L-2310"><span class="linenos">2310</span></a><span class="sd">    be used when compressing the output file. It is an integer value ranging from 0 to 9, where 0</span>
</span><span id="L-2311"><a href="#L-2311"><span class="linenos">2311</span></a><span class="sd">    indicates no compression and 9 indicates maximum compression. The higher the compression level, the</span>
</span><span id="L-2312"><a href="#L-2312"><span class="linenos">2312</span></a><span class="sd">    smaller the resulting compressed file size, defaults to 6</span>
</span><span id="L-2313"><a href="#L-2313"><span class="linenos">2313</span></a><span class="sd">    :type compression_level: int (optional)</span>
</span><span id="L-2314"><a href="#L-2314"><span class="linenos">2314</span></a><span class="sd">    :param sort: The `sort` parameter is a boolean flag that determines whether the output file should</span>
</span><span id="L-2315"><a href="#L-2315"><span class="linenos">2315</span></a><span class="sd">    be sorted or not. If `sort` is set to `True`, the output file will be sorted using</span>
</span><span id="L-2316"><a href="#L-2316"><span class="linenos">2316</span></a><span class="sd">    `pysam.bcftools.sort` before renaming it. If `sort` is set to `False, defaults to False</span>
</span><span id="L-2317"><a href="#L-2317"><span class="linenos">2317</span></a><span class="sd">    :type sort: bool (optional)</span>
</span><span id="L-2318"><a href="#L-2318"><span class="linenos">2318</span></a><span class="sd">    :param index: The `index` parameter is a boolean flag that determines whether or not to index the</span>
</span><span id="L-2319"><a href="#L-2319"><span class="linenos">2319</span></a><span class="sd">    output file after concatenation and compression. If `index` is set to `True`, the output file will</span>
</span><span id="L-2320"><a href="#L-2320"><span class="linenos">2320</span></a><span class="sd">    be indexed using the `pysam.tabix_index` function with the preset &quot;vcf&quot;. Make sure VCF is sorted.</span>
</span><span id="L-2321"><a href="#L-2321"><span class="linenos">2321</span></a><span class="sd">    Defaults to False</span>
</span><span id="L-2322"><a href="#L-2322"><span class="linenos">2322</span></a><span class="sd">    :type index: bool (optional)</span>
</span><span id="L-2323"><a href="#L-2323"><span class="linenos">2323</span></a><span class="sd">    :return: a boolean value indicating whether the output file exists or not.</span>
</span><span id="L-2324"><a href="#L-2324"><span class="linenos">2324</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2325"><a href="#L-2325"><span class="linenos">2325</span></a>
</span><span id="L-2326"><a href="#L-2326"><span class="linenos">2326</span></a>    <span class="c1"># Prevent compression type not available</span>
</span><span id="L-2327"><a href="#L-2327"><span class="linenos">2327</span></a>    <span class="k">if</span> <span class="n">compression_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;bgzip&quot;</span><span class="p">,</span> <span class="s2">&quot;gzip&quot;</span><span class="p">,</span> <span class="s2">&quot;none&quot;</span><span class="p">]:</span>
</span><span id="L-2328"><a href="#L-2328"><span class="linenos">2328</span></a>        <span class="n">compression_type</span> <span class="o">=</span> <span class="s2">&quot;bgzip&quot;</span>
</span><span id="L-2329"><a href="#L-2329"><span class="linenos">2329</span></a>
</span><span id="L-2330"><a href="#L-2330"><span class="linenos">2330</span></a>    <span class="c1"># Output file compressions type</span>
</span><span id="L-2331"><a href="#L-2331"><span class="linenos">2331</span></a>    <span class="k">if</span> <span class="n">compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;none&quot;</span><span class="p">]:</span>
</span><span id="L-2332"><a href="#L-2332"><span class="linenos">2332</span></a>        <span class="n">open_type</span> <span class="o">=</span> <span class="s2">&quot;t&quot;</span>
</span><span id="L-2333"><a href="#L-2333"><span class="linenos">2333</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2334"><a href="#L-2334"><span class="linenos">2334</span></a>        <span class="n">open_type</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span>
</span><span id="L-2335"><a href="#L-2335"><span class="linenos">2335</span></a>
</span><span id="L-2336"><a href="#L-2336"><span class="linenos">2336</span></a>    <span class="c1"># Full path</span>
</span><span id="L-2337"><a href="#L-2337"><span class="linenos">2337</span></a>    <span class="n">output_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</span><span id="L-2338"><a href="#L-2338"><span class="linenos">2338</span></a>
</span><span id="L-2339"><a href="#L-2339"><span class="linenos">2339</span></a>    <span class="c1"># Tmp file</span>
</span><span id="L-2340"><a href="#L-2340"><span class="linenos">2340</span></a>    <span class="n">output_file_tmp</span> <span class="o">=</span> <span class="n">output_file</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;.tmp&quot;</span>
</span><span id="L-2341"><a href="#L-2341"><span class="linenos">2341</span></a>
</span><span id="L-2342"><a href="#L-2342"><span class="linenos">2342</span></a>    <span class="k">if</span> <span class="n">compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;gzip&quot;</span><span class="p">]:</span>
</span><span id="L-2343"><a href="#L-2343"><span class="linenos">2343</span></a>        <span class="c1"># See https://pypi.org/project/mgzip/</span>
</span><span id="L-2344"><a href="#L-2344"><span class="linenos">2344</span></a>        <span class="k">with</span> <span class="n">pgzip</span><span class="o">.</span><span class="n">open</span><span class="p">(</span>
</span><span id="L-2345"><a href="#L-2345"><span class="linenos">2345</span></a>            <span class="n">output_file_tmp</span><span class="p">,</span>
</span><span id="L-2346"><a href="#L-2346"><span class="linenos">2346</span></a>            <span class="s2">&quot;w&quot;</span> <span class="o">+</span> <span class="n">open_type</span><span class="p">,</span>
</span><span id="L-2347"><a href="#L-2347"><span class="linenos">2347</span></a>            <span class="n">thread</span><span class="o">=</span><span class="n">threads</span><span class="p">,</span>
</span><span id="L-2348"><a href="#L-2348"><span class="linenos">2348</span></a>            <span class="n">blocksize</span><span class="o">=</span><span class="n">threads</span> <span class="o">*</span> <span class="n">block</span><span class="p">,</span>
</span><span id="L-2349"><a href="#L-2349"><span class="linenos">2349</span></a>            <span class="n">compresslevel</span><span class="o">=</span><span class="n">compression_level</span><span class="p">,</span>
</span><span id="L-2350"><a href="#L-2350"><span class="linenos">2350</span></a>        <span class="p">)</span> <span class="k">as</span> <span class="n">compressed_file</span><span class="p">:</span>
</span><span id="L-2351"><a href="#L-2351"><span class="linenos">2351</span></a>            <span class="n">concat_into_infile</span><span class="p">(</span>
</span><span id="L-2352"><a href="#L-2352"><span class="linenos">2352</span></a>                <span class="n">input_files</span><span class="p">,</span>
</span><span id="L-2353"><a href="#L-2353"><span class="linenos">2353</span></a>                <span class="n">compressed_file</span><span class="p">,</span>
</span><span id="L-2354"><a href="#L-2354"><span class="linenos">2354</span></a>                <span class="n">compression_type</span><span class="o">=</span><span class="n">compression_type</span><span class="p">,</span>
</span><span id="L-2355"><a href="#L-2355"><span class="linenos">2355</span></a>                <span class="n">threads</span><span class="o">=</span><span class="n">threads</span><span class="p">,</span>
</span><span id="L-2356"><a href="#L-2356"><span class="linenos">2356</span></a>                <span class="n">block</span><span class="o">=</span><span class="n">block</span><span class="p">,</span>
</span><span id="L-2357"><a href="#L-2357"><span class="linenos">2357</span></a>            <span class="p">)</span>
</span><span id="L-2358"><a href="#L-2358"><span class="linenos">2358</span></a>    <span class="k">elif</span> <span class="n">compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;bgzip&quot;</span><span class="p">]:</span>
</span><span id="L-2359"><a href="#L-2359"><span class="linenos">2359</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_file_tmp</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span> <span class="o">+</span> <span class="n">open_type</span><span class="p">)</span> <span class="k">as</span> <span class="n">compressed_file_raw</span><span class="p">:</span>
</span><span id="L-2360"><a href="#L-2360"><span class="linenos">2360</span></a>            <span class="k">with</span> <span class="n">bgzip</span><span class="o">.</span><span class="n">BGZipWriter</span><span class="p">(</span>
</span><span id="L-2361"><a href="#L-2361"><span class="linenos">2361</span></a>                <span class="n">compressed_file_raw</span><span class="p">,</span> <span class="n">num_threads</span><span class="o">=</span><span class="n">threads</span>
</span><span id="L-2362"><a href="#L-2362"><span class="linenos">2362</span></a>            <span class="p">)</span> <span class="k">as</span> <span class="n">compressed_file</span><span class="p">:</span>
</span><span id="L-2363"><a href="#L-2363"><span class="linenos">2363</span></a>                <span class="n">concat_into_infile</span><span class="p">(</span>
</span><span id="L-2364"><a href="#L-2364"><span class="linenos">2364</span></a>                    <span class="n">input_files</span><span class="p">,</span>
</span><span id="L-2365"><a href="#L-2365"><span class="linenos">2365</span></a>                    <span class="n">compressed_file</span><span class="p">,</span>
</span><span id="L-2366"><a href="#L-2366"><span class="linenos">2366</span></a>                    <span class="n">compression_type</span><span class="o">=</span><span class="n">compression_type</span><span class="p">,</span>
</span><span id="L-2367"><a href="#L-2367"><span class="linenos">2367</span></a>                    <span class="n">threads</span><span class="o">=</span><span class="n">threads</span><span class="p">,</span>
</span><span id="L-2368"><a href="#L-2368"><span class="linenos">2368</span></a>                    <span class="n">block</span><span class="o">=</span><span class="n">block</span><span class="p">,</span>
</span><span id="L-2369"><a href="#L-2369"><span class="linenos">2369</span></a>                <span class="p">)</span>
</span><span id="L-2370"><a href="#L-2370"><span class="linenos">2370</span></a>    <span class="k">elif</span> <span class="n">compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;none&quot;</span><span class="p">]:</span>
</span><span id="L-2371"><a href="#L-2371"><span class="linenos">2371</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_file_tmp</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span> <span class="o">+</span> <span class="n">open_type</span><span class="p">)</span> <span class="k">as</span> <span class="n">compressed_file</span><span class="p">:</span>
</span><span id="L-2372"><a href="#L-2372"><span class="linenos">2372</span></a>            <span class="n">concat_into_infile</span><span class="p">(</span>
</span><span id="L-2373"><a href="#L-2373"><span class="linenos">2373</span></a>                <span class="n">input_files</span><span class="p">,</span>
</span><span id="L-2374"><a href="#L-2374"><span class="linenos">2374</span></a>                <span class="n">compressed_file</span><span class="p">,</span>
</span><span id="L-2375"><a href="#L-2375"><span class="linenos">2375</span></a>                <span class="n">compression_type</span><span class="o">=</span><span class="n">compression_type</span><span class="p">,</span>
</span><span id="L-2376"><a href="#L-2376"><span class="linenos">2376</span></a>                <span class="n">threads</span><span class="o">=</span><span class="n">threads</span><span class="p">,</span>
</span><span id="L-2377"><a href="#L-2377"><span class="linenos">2377</span></a>                <span class="n">block</span><span class="o">=</span><span class="n">block</span><span class="p">,</span>
</span><span id="L-2378"><a href="#L-2378"><span class="linenos">2378</span></a>            <span class="p">)</span>
</span><span id="L-2379"><a href="#L-2379"><span class="linenos">2379</span></a>
</span><span id="L-2380"><a href="#L-2380"><span class="linenos">2380</span></a>    <span class="c1"># Output file</span>
</span><span id="L-2381"><a href="#L-2381"><span class="linenos">2381</span></a>    <span class="k">if</span> <span class="n">sort</span><span class="p">:</span>
</span><span id="L-2382"><a href="#L-2382"><span class="linenos">2382</span></a>        <span class="c1"># Sort with pysam</span>
</span><span id="L-2383"><a href="#L-2383"><span class="linenos">2383</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-2384"><a href="#L-2384"><span class="linenos">2384</span></a>            <span class="n">pysam</span><span class="o">.</span><span class="n">bcftools</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span>
</span><span id="L-2385"><a href="#L-2385"><span class="linenos">2385</span></a>                <span class="sa">f</span><span class="s2">&quot;-Oz</span><span class="si">{</span><span class="n">compression_level</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-2386"><a href="#L-2386"><span class="linenos">2386</span></a>                <span class="s2">&quot;-o&quot;</span><span class="p">,</span>
</span><span id="L-2387"><a href="#L-2387"><span class="linenos">2387</span></a>                <span class="n">output_file</span><span class="p">,</span>
</span><span id="L-2388"><a href="#L-2388"><span class="linenos">2388</span></a>                <span class="s2">&quot;-T&quot;</span><span class="p">,</span>
</span><span id="L-2389"><a href="#L-2389"><span class="linenos">2389</span></a>                <span class="n">output_file_tmp</span><span class="p">,</span>
</span><span id="L-2390"><a href="#L-2390"><span class="linenos">2390</span></a>                <span class="n">output_file_tmp</span><span class="p">,</span>
</span><span id="L-2391"><a href="#L-2391"><span class="linenos">2391</span></a>                <span class="s2">&quot;-m&quot;</span><span class="p">,</span>
</span><span id="L-2392"><a href="#L-2392"><span class="linenos">2392</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">memory</span><span class="si">}</span><span class="s2">G&quot;</span><span class="p">,</span>
</span><span id="L-2393"><a href="#L-2393"><span class="linenos">2393</span></a>                <span class="n">threads</span><span class="o">=</span><span class="n">threads</span><span class="p">,</span>
</span><span id="L-2394"><a href="#L-2394"><span class="linenos">2394</span></a>                <span class="n">catch_stdout</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-2395"><a href="#L-2395"><span class="linenos">2395</span></a>            <span class="p">)</span>
</span><span id="L-2396"><a href="#L-2396"><span class="linenos">2396</span></a>            <span class="c1"># Remove tmp file</span>
</span><span id="L-2397"><a href="#L-2397"><span class="linenos">2397</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">output_file_tmp</span><span class="p">)</span>
</span><span id="L-2398"><a href="#L-2398"><span class="linenos">2398</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="L-2399"><a href="#L-2399"><span class="linenos">2399</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Output file sorting failed: </span><span class="si">{</span><span class="n">output_file_tmp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-2400"><a href="#L-2400"><span class="linenos">2400</span></a>
</span><span id="L-2401"><a href="#L-2401"><span class="linenos">2401</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2402"><a href="#L-2402"><span class="linenos">2402</span></a>        <span class="c1"># Rename tmp file</span>
</span><span id="L-2403"><a href="#L-2403"><span class="linenos">2403</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">output_file_tmp</span><span class="p">,</span> <span class="n">output_file</span><span class="p">)</span>
</span><span id="L-2404"><a href="#L-2404"><span class="linenos">2404</span></a>
</span><span id="L-2405"><a href="#L-2405"><span class="linenos">2405</span></a>    <span class="c1"># Index file</span>
</span><span id="L-2406"><a href="#L-2406"><span class="linenos">2406</span></a>    <span class="k">if</span> <span class="n">index</span><span class="p">:</span>
</span><span id="L-2407"><a href="#L-2407"><span class="linenos">2407</span></a>        <span class="c1"># Index file with tabix</span>
</span><span id="L-2408"><a href="#L-2408"><span class="linenos">2408</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-2409"><a href="#L-2409"><span class="linenos">2409</span></a>            <span class="n">pysam</span><span class="o">.</span><span class="n">tabix_index</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="n">preset</span><span class="o">=</span><span class="s2">&quot;vcf&quot;</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-2410"><a href="#L-2410"><span class="linenos">2410</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="L-2411"><a href="#L-2411"><span class="linenos">2411</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Output file indexing failed: </span><span class="si">{</span><span class="n">output_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-2412"><a href="#L-2412"><span class="linenos">2412</span></a>
</span><span id="L-2413"><a href="#L-2413"><span class="linenos">2413</span></a>    <span class="c1"># Return output file</span>
</span><span id="L-2414"><a href="#L-2414"><span class="linenos">2414</span></a>    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</span><span id="L-2415"><a href="#L-2415"><span class="linenos">2415</span></a>
</span><span id="L-2416"><a href="#L-2416"><span class="linenos">2416</span></a>
</span><span id="L-2417"><a href="#L-2417"><span class="linenos">2417</span></a><span class="k">def</span> <span class="nf">get_plateform_name_from_duckdb</span><span class="p">(</span><span class="n">conn</span><span class="p">:</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-2418"><a href="#L-2418"><span class="linenos">2418</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2419"><a href="#L-2419"><span class="linenos">2419</span></a><span class="sd">    The function `get_plateform_name_from_duckdb` returns the platform information from a DuckDB connection.</span>
</span><span id="L-2420"><a href="#L-2420"><span class="linenos">2420</span></a>
</span><span id="L-2421"><a href="#L-2421"><span class="linenos">2421</span></a><span class="sd">    :param conn: The `conn` parameter is an instance of the `DuckDBPyConnection` class from the `duckdb`</span>
</span><span id="L-2422"><a href="#L-2422"><span class="linenos">2422</span></a><span class="sd">    module. It represents a connection to a DuckDB database</span>
</span><span id="L-2423"><a href="#L-2423"><span class="linenos">2423</span></a><span class="sd">    :type conn: duckdb.DuckDBPyConnection</span>
</span><span id="L-2424"><a href="#L-2424"><span class="linenos">2424</span></a><span class="sd">    :return: the platform information from the DuckDB connection.</span>
</span><span id="L-2425"><a href="#L-2425"><span class="linenos">2425</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2426"><a href="#L-2426"><span class="linenos">2426</span></a>
</span><span id="L-2427"><a href="#L-2427"><span class="linenos">2427</span></a>    <span class="k">return</span> <span class="n">conn</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;PRAGMA platform&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">df</span><span class="p">()[</span><span class="s2">&quot;platform&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2428"><a href="#L-2428"><span class="linenos">2428</span></a>
</span><span id="L-2429"><a href="#L-2429"><span class="linenos">2429</span></a>
</span><span id="L-2430"><a href="#L-2430"><span class="linenos">2430</span></a><span class="k">def</span> <span class="nf">get_duckdb_extension_file</span><span class="p">(</span>
</span><span id="L-2431"><a href="#L-2431"><span class="linenos">2431</span></a>    <span class="n">extension_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">conn</span><span class="p">:</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span><span class="p">,</span> <span class="n">download</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-2432"><a href="#L-2432"><span class="linenos">2432</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-2433"><a href="#L-2433"><span class="linenos">2433</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2434"><a href="#L-2434"><span class="linenos">2434</span></a><span class="sd">    This function returns the file path of a DuckDB extension based on the extension name and platform.</span>
</span><span id="L-2435"><a href="#L-2435"><span class="linenos">2435</span></a>
</span><span id="L-2436"><a href="#L-2436"><span class="linenos">2436</span></a><span class="sd">    :param extension_name: The name of the DuckDB extension file that is being requested</span>
</span><span id="L-2437"><a href="#L-2437"><span class="linenos">2437</span></a><span class="sd">    :type extension_name: str</span>
</span><span id="L-2438"><a href="#L-2438"><span class="linenos">2438</span></a><span class="sd">    :return: a string that represents the file path of a DuckDB extension file. The file path is</span>
</span><span id="L-2439"><a href="#L-2439"><span class="linenos">2439</span></a><span class="sd">    constructed using the constant `DUCKDB_EXTENSION`, the platform name obtained from the</span>
</span><span id="L-2440"><a href="#L-2440"><span class="linenos">2440</span></a><span class="sd">    `get_plateform_name_from_duckdb()` function, and the extension name passed as an argument to the function.</span>
</span><span id="L-2441"><a href="#L-2441"><span class="linenos">2441</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2442"><a href="#L-2442"><span class="linenos">2442</span></a>
</span><span id="L-2443"><a href="#L-2443"><span class="linenos">2443</span></a>    <span class="c1"># Init</span>
</span><span id="L-2444"><a href="#L-2444"><span class="linenos">2444</span></a>    <span class="n">release_version_number</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">__version__</span>
</span><span id="L-2445"><a href="#L-2445"><span class="linenos">2445</span></a>    <span class="n">platform_name</span> <span class="o">=</span> <span class="n">get_plateform_name_from_duckdb</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</span><span id="L-2446"><a href="#L-2446"><span class="linenos">2446</span></a>
</span><span id="L-2447"><a href="#L-2447"><span class="linenos">2447</span></a>    <span class="c1"># File</span>
</span><span id="L-2448"><a href="#L-2448"><span class="linenos">2448</span></a>    <span class="n">extension_file_path</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-2449"><a href="#L-2449"><span class="linenos">2449</span></a>        <span class="sa">f</span><span class="s2">&quot;v</span><span class="si">{</span><span class="n">release_version_number</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">platform_name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">extension_name</span><span class="si">}</span><span class="s2">.duckdb_extension&quot;</span>
</span><span id="L-2450"><a href="#L-2450"><span class="linenos">2450</span></a>    <span class="p">)</span>
</span><span id="L-2451"><a href="#L-2451"><span class="linenos">2451</span></a>    <span class="n">extension_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DUCKDB_EXTENSION</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">extension_file_path</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-2452"><a href="#L-2452"><span class="linenos">2452</span></a>    <span class="n">extension_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">extension_file</span><span class="p">)</span>
</span><span id="L-2453"><a href="#L-2453"><span class="linenos">2453</span></a>    <span class="n">extension_file_gz</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">extension_file</span><span class="si">}</span><span class="s2">.gz&quot;</span>
</span><span id="L-2454"><a href="#L-2454"><span class="linenos">2454</span></a>    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;http://extensions.duckdb.org/</span><span class="si">{</span><span class="n">extension_file_path</span><span class="si">}</span><span class="s2">.gz&quot;</span>
</span><span id="L-2455"><a href="#L-2455"><span class="linenos">2455</span></a>
</span><span id="L-2456"><a href="#L-2456"><span class="linenos">2456</span></a>    <span class="c1"># Download and extract if not exists</span>
</span><span id="L-2457"><a href="#L-2457"><span class="linenos">2457</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">extension_file</span><span class="p">)</span> <span class="ow">and</span> <span class="n">download</span><span class="p">:</span>
</span><span id="L-2458"><a href="#L-2458"><span class="linenos">2458</span></a>        <span class="c1"># Create folder if not exists</span>
</span><span id="L-2459"><a href="#L-2459"><span class="linenos">2459</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">extension_file</span><span class="p">)):</span>
</span><span id="L-2460"><a href="#L-2460"><span class="linenos">2460</span></a>            <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">extension_file</span><span class="p">))</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-2461"><a href="#L-2461"><span class="linenos">2461</span></a>        <span class="c1"># Download extension if not exists</span>
</span><span id="L-2462"><a href="#L-2462"><span class="linenos">2462</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">extension_file_gz</span><span class="p">):</span>
</span><span id="L-2463"><a href="#L-2463"><span class="linenos">2463</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="L-2464"><a href="#L-2464"><span class="linenos">2464</span></a>                <span class="n">download_file</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">extension_file_gz</span><span class="p">)</span>
</span><span id="L-2465"><a href="#L-2465"><span class="linenos">2465</span></a>            <span class="k">except</span><span class="p">:</span>
</span><span id="L-2466"><a href="#L-2466"><span class="linenos">2466</span></a>                <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fail download &#39;</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-2467"><a href="#L-2467"><span class="linenos">2467</span></a>        <span class="c1"># Uncompress extention file</span>
</span><span id="L-2468"><a href="#L-2468"><span class="linenos">2468</span></a>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">extension_file_gz</span><span class="p">):</span>
</span><span id="L-2469"><a href="#L-2469"><span class="linenos">2469</span></a>            <span class="k">with</span> <span class="n">mgzip</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">extension_file_gz</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
</span><span id="L-2470"><a href="#L-2470"><span class="linenos">2470</span></a>                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">extension_file</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">compressed_file</span><span class="p">:</span>
</span><span id="L-2471"><a href="#L-2471"><span class="linenos">2471</span></a>                    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="n">compressed_file</span><span class="p">)</span>
</span><span id="L-2472"><a href="#L-2472"><span class="linenos">2472</span></a>
</span><span id="L-2473"><a href="#L-2473"><span class="linenos">2473</span></a>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">extension_file</span><span class="p">):</span>
</span><span id="L-2474"><a href="#L-2474"><span class="linenos">2474</span></a>        <span class="k">return</span> <span class="n">extension_file</span>
</span><span id="L-2475"><a href="#L-2475"><span class="linenos">2475</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2476"><a href="#L-2476"><span class="linenos">2476</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-2477"><a href="#L-2477"><span class="linenos">2477</span></a>
</span><span id="L-2478"><a href="#L-2478"><span class="linenos">2478</span></a>
</span><span id="L-2479"><a href="#L-2479"><span class="linenos">2479</span></a><span class="k">def</span> <span class="nf">load_duckdb_extension</span><span class="p">(</span>
</span><span id="L-2480"><a href="#L-2480"><span class="linenos">2480</span></a>    <span class="n">conn</span><span class="p">:</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span><span class="p">,</span> <span class="n">duckdb_extensions</span><span class="p">:</span> <span class="nb">list</span>
</span><span id="L-2481"><a href="#L-2481"><span class="linenos">2481</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-2482"><a href="#L-2482"><span class="linenos">2482</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2483"><a href="#L-2483"><span class="linenos">2483</span></a><span class="sd">    This function loads DuckDB extensions into a connection object and returns a boolean indicating</span>
</span><span id="L-2484"><a href="#L-2484"><span class="linenos">2484</span></a><span class="sd">    whether all extensions were successfully loaded.</span>
</span><span id="L-2485"><a href="#L-2485"><span class="linenos">2485</span></a>
</span><span id="L-2486"><a href="#L-2486"><span class="linenos">2486</span></a><span class="sd">    :param conn: duckdb.DuckDBPyConnection object representing a connection to a DuckDB database</span>
</span><span id="L-2487"><a href="#L-2487"><span class="linenos">2487</span></a><span class="sd">    :type conn: duckdb.DuckDBPyConnection</span>
</span><span id="L-2488"><a href="#L-2488"><span class="linenos">2488</span></a><span class="sd">    :param duckdb_extensions: A list of strings representing the names of the DuckDB extensions to be</span>
</span><span id="L-2489"><a href="#L-2489"><span class="linenos">2489</span></a><span class="sd">    loaded</span>
</span><span id="L-2490"><a href="#L-2490"><span class="linenos">2490</span></a><span class="sd">    :type duckdb_extensions: list</span>
</span><span id="L-2491"><a href="#L-2491"><span class="linenos">2491</span></a><span class="sd">    :return: a boolean value indicating whether all the specified DuckDB extensions were successfully</span>
</span><span id="L-2492"><a href="#L-2492"><span class="linenos">2492</span></a><span class="sd">    loaded or not.</span>
</span><span id="L-2493"><a href="#L-2493"><span class="linenos">2493</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2494"><a href="#L-2494"><span class="linenos">2494</span></a>
</span><span id="L-2495"><a href="#L-2495"><span class="linenos">2495</span></a>    <span class="n">loaded</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-2496"><a href="#L-2496"><span class="linenos">2496</span></a>
</span><span id="L-2497"><a href="#L-2497"><span class="linenos">2497</span></a>    <span class="k">for</span> <span class="n">extension_name</span> <span class="ow">in</span> <span class="n">duckdb_extensions</span><span class="p">:</span>
</span><span id="L-2498"><a href="#L-2498"><span class="linenos">2498</span></a>        <span class="n">duckdb_extension_file</span> <span class="o">=</span> <span class="n">get_duckdb_extension_file</span><span class="p">(</span>
</span><span id="L-2499"><a href="#L-2499"><span class="linenos">2499</span></a>            <span class="n">extension_name</span><span class="p">,</span> <span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">True</span>
</span><span id="L-2500"><a href="#L-2500"><span class="linenos">2500</span></a>        <span class="p">)</span>
</span><span id="L-2501"><a href="#L-2501"><span class="linenos">2501</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-2502"><a href="#L-2502"><span class="linenos">2502</span></a>            <span class="k">if</span> <span class="n">duckdb_extension_file</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">duckdb_extension_file</span><span class="p">):</span>
</span><span id="L-2503"><a href="#L-2503"><span class="linenos">2503</span></a>                <span class="c1"># Try loading extension by file</span>
</span><span id="L-2504"><a href="#L-2504"><span class="linenos">2504</span></a>                <span class="n">conn</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
</span><span id="L-2505"><a href="#L-2505"><span class="linenos">2505</span></a>                    <span class="sa">f</span><span class="s2">&quot;INSTALL &#39;</span><span class="si">{</span><span class="n">duckdb_extension_file</span><span class="si">}</span><span class="s2">&#39;; LOAD </span><span class="si">{</span><span class="n">extension_name</span><span class="si">}</span><span class="s2">; &quot;</span>
</span><span id="L-2506"><a href="#L-2506"><span class="linenos">2506</span></a>                <span class="p">)</span>
</span><span id="L-2507"><a href="#L-2507"><span class="linenos">2507</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2508"><a href="#L-2508"><span class="linenos">2508</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="L-2509"><a href="#L-2509"><span class="linenos">2509</span></a>                    <span class="k">with</span> <span class="n">time_limit</span><span class="p">(</span><span class="mi">60</span><span class="p">):</span>
</span><span id="L-2510"><a href="#L-2510"><span class="linenos">2510</span></a>                        <span class="c1"># Try loading extension by name</span>
</span><span id="L-2511"><a href="#L-2511"><span class="linenos">2511</span></a>                        <span class="n">conn</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
</span><span id="L-2512"><a href="#L-2512"><span class="linenos">2512</span></a>                            <span class="sa">f</span><span class="s2">&quot;INSTALL &#39;</span><span class="si">{</span><span class="n">extension_name</span><span class="si">}</span><span class="s2">&#39;; LOAD </span><span class="si">{</span><span class="n">extension_name</span><span class="si">}</span><span class="s2">; &quot;</span>
</span><span id="L-2513"><a href="#L-2513"><span class="linenos">2513</span></a>                        <span class="p">)</span>
</span><span id="L-2514"><a href="#L-2514"><span class="linenos">2514</span></a>                <span class="k">except</span><span class="p">:</span>
</span><span id="L-2515"><a href="#L-2515"><span class="linenos">2515</span></a>                    <span class="n">loaded</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-2516"><a href="#L-2516"><span class="linenos">2516</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="L-2517"><a href="#L-2517"><span class="linenos">2517</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="L-2518"><a href="#L-2518"><span class="linenos">2518</span></a>                <span class="k">with</span> <span class="n">time_limit</span><span class="p">(</span><span class="mi">60</span><span class="p">):</span>
</span><span id="L-2519"><a href="#L-2519"><span class="linenos">2519</span></a>                    <span class="c1"># Try loading extension by name</span>
</span><span id="L-2520"><a href="#L-2520"><span class="linenos">2520</span></a>                    <span class="n">conn</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;INSTALL &#39;</span><span class="si">{</span><span class="n">extension_name</span><span class="si">}</span><span class="s2">&#39;; LOAD </span><span class="si">{</span><span class="n">extension_name</span><span class="si">}</span><span class="s2">; &quot;</span><span class="p">)</span>
</span><span id="L-2521"><a href="#L-2521"><span class="linenos">2521</span></a>            <span class="k">except</span><span class="p">:</span>
</span><span id="L-2522"><a href="#L-2522"><span class="linenos">2522</span></a>                <span class="n">loaded</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-2523"><a href="#L-2523"><span class="linenos">2523</span></a>
</span><span id="L-2524"><a href="#L-2524"><span class="linenos">2524</span></a>    <span class="k">return</span> <span class="n">loaded</span>
</span><span id="L-2525"><a href="#L-2525"><span class="linenos">2525</span></a>
</span><span id="L-2526"><a href="#L-2526"><span class="linenos">2526</span></a>
</span><span id="L-2527"><a href="#L-2527"><span class="linenos">2527</span></a><span class="k">class</span> <span class="nc">TimeoutException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="L-2528"><a href="#L-2528"><span class="linenos">2528</span></a>    <span class="k">pass</span>
</span><span id="L-2529"><a href="#L-2529"><span class="linenos">2529</span></a>
</span><span id="L-2530"><a href="#L-2530"><span class="linenos">2530</span></a>
</span><span id="L-2531"><a href="#L-2531"><span class="linenos">2531</span></a><span class="k">def</span> <span class="nf">time_limit</span><span class="p">(</span><span class="n">seconds</span><span class="p">):</span>
</span><span id="L-2532"><a href="#L-2532"><span class="linenos">2532</span></a>    <span class="k">def</span> <span class="nf">signal_handler</span><span class="p">(</span><span class="n">signum</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
</span><span id="L-2533"><a href="#L-2533"><span class="linenos">2533</span></a>        <span class="k">raise</span> <span class="n">TimeoutException</span><span class="p">(</span><span class="s2">&quot;Timed out!&quot;</span><span class="p">)</span>
</span><span id="L-2534"><a href="#L-2534"><span class="linenos">2534</span></a>
</span><span id="L-2535"><a href="#L-2535"><span class="linenos">2535</span></a>    <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGALRM</span><span class="p">,</span> <span class="n">signal_handler</span><span class="p">)</span>
</span><span id="L-2536"><a href="#L-2536"><span class="linenos">2536</span></a>    <span class="n">signal</span><span class="o">.</span><span class="n">alarm</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
</span><span id="L-2537"><a href="#L-2537"><span class="linenos">2537</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-2538"><a href="#L-2538"><span class="linenos">2538</span></a>        <span class="k">yield</span>
</span><span id="L-2539"><a href="#L-2539"><span class="linenos">2539</span></a>    <span class="k">finally</span><span class="p">:</span>
</span><span id="L-2540"><a href="#L-2540"><span class="linenos">2540</span></a>        <span class="n">signal</span><span class="o">.</span><span class="n">alarm</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-2541"><a href="#L-2541"><span class="linenos">2541</span></a>
</span><span id="L-2542"><a href="#L-2542"><span class="linenos">2542</span></a>
</span><span id="L-2543"><a href="#L-2543"><span class="linenos">2543</span></a><span class="k">def</span> <span class="nf">duckdb_execute</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-2544"><a href="#L-2544"><span class="linenos">2544</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2545"><a href="#L-2545"><span class="linenos">2545</span></a><span class="sd">    The `duckdb_execute` function executes a query using the DuckDB database engine and returns a</span>
</span><span id="L-2546"><a href="#L-2546"><span class="linenos">2546</span></a><span class="sd">    boolean indicating whether the query was successful or not.</span>
</span><span id="L-2547"><a href="#L-2547"><span class="linenos">2547</span></a>
</span><span id="L-2548"><a href="#L-2548"><span class="linenos">2548</span></a><span class="sd">    :param query: The `query` parameter is a string that represents the SQL query you want to execute in</span>
</span><span id="L-2549"><a href="#L-2549"><span class="linenos">2549</span></a><span class="sd">    DuckDB. It can be any valid SQL statement, such as SELECT, INSERT, UPDATE, DELETE, etc</span>
</span><span id="L-2550"><a href="#L-2550"><span class="linenos">2550</span></a><span class="sd">    :type query: str</span>
</span><span id="L-2551"><a href="#L-2551"><span class="linenos">2551</span></a><span class="sd">    :param threads: The &quot;threads&quot; parameter specifies the number of threads to use for executing the</span>
</span><span id="L-2552"><a href="#L-2552"><span class="linenos">2552</span></a><span class="sd">    query. By default, it is set to 1, meaning that the query will be executed using a single thread,</span>
</span><span id="L-2553"><a href="#L-2553"><span class="linenos">2553</span></a><span class="sd">    defaults to 1</span>
</span><span id="L-2554"><a href="#L-2554"><span class="linenos">2554</span></a><span class="sd">    :type threads: int (optional)</span>
</span><span id="L-2555"><a href="#L-2555"><span class="linenos">2555</span></a><span class="sd">    :return: The function `duckdb_execute` returns a boolean value. It returns `True` if the query</span>
</span><span id="L-2556"><a href="#L-2556"><span class="linenos">2556</span></a><span class="sd">    execution is successful, and `False` if it is not successful.</span>
</span><span id="L-2557"><a href="#L-2557"><span class="linenos">2557</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2558"><a href="#L-2558"><span class="linenos">2558</span></a>
</span><span id="L-2559"><a href="#L-2559"><span class="linenos">2559</span></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;threads&quot;</span><span class="p">:</span> <span class="n">threads</span><span class="p">})</span>
</span><span id="L-2560"><a href="#L-2560"><span class="linenos">2560</span></a>    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SET max_expression_depth TO 10000&quot;</span><span class="p">)</span>
</span><span id="L-2561"><a href="#L-2561"><span class="linenos">2561</span></a>    <span class="k">if</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">):</span>
</span><span id="L-2562"><a href="#L-2562"><span class="linenos">2562</span></a>        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-2563"><a href="#L-2563"><span class="linenos">2563</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-2564"><a href="#L-2564"><span class="linenos">2564</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2565"><a href="#L-2565"><span class="linenos">2565</span></a>        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-2566"><a href="#L-2566"><span class="linenos">2566</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-2567"><a href="#L-2567"><span class="linenos">2567</span></a>
</span><span id="L-2568"><a href="#L-2568"><span class="linenos">2568</span></a>
</span><span id="L-2569"><a href="#L-2569"><span class="linenos">2569</span></a><span class="k">def</span> <span class="nf">genome_build_switch</span><span class="p">(</span><span class="n">assembly</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-2570"><a href="#L-2570"><span class="linenos">2570</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2571"><a href="#L-2571"><span class="linenos">2571</span></a><span class="sd">    The `genome_build_switch` function takes an assembly name as input and returns a new</span>
</span><span id="L-2572"><a href="#L-2572"><span class="linenos">2572</span></a><span class="sd">    assembly name if a different version of the same genome is available, otherwise it returns</span>
</span><span id="L-2573"><a href="#L-2573"><span class="linenos">2573</span></a><span class="sd">    None.</span>
</span><span id="L-2574"><a href="#L-2574"><span class="linenos">2574</span></a>
</span><span id="L-2575"><a href="#L-2575"><span class="linenos">2575</span></a><span class="sd">    :param assembly: The `assembly` parameter is a string that represents the name or identifier</span>
</span><span id="L-2576"><a href="#L-2576"><span class="linenos">2576</span></a><span class="sd">    of a genome assembly</span>
</span><span id="L-2577"><a href="#L-2577"><span class="linenos">2577</span></a><span class="sd">    :type assembly: str</span>
</span><span id="L-2578"><a href="#L-2578"><span class="linenos">2578</span></a><span class="sd">    :return: The function `genome_build_switch` returns a string.</span>
</span><span id="L-2579"><a href="#L-2579"><span class="linenos">2579</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2580"><a href="#L-2580"><span class="linenos">2580</span></a>
</span><span id="L-2581"><a href="#L-2581"><span class="linenos">2581</span></a>    <span class="kn">import</span> <span class="nn">genomepy</span>
</span><span id="L-2582"><a href="#L-2582"><span class="linenos">2582</span></a>
</span><span id="L-2583"><a href="#L-2583"><span class="linenos">2583</span></a>    <span class="n">genome_list</span> <span class="o">=</span> <span class="n">genomepy</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">assembly</span><span class="p">,</span> <span class="n">exact</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-2584"><a href="#L-2584"><span class="linenos">2584</span></a>
</span><span id="L-2585"><a href="#L-2585"><span class="linenos">2585</span></a>    <span class="k">if</span> <span class="n">genome_list</span><span class="p">:</span>
</span><span id="L-2586"><a href="#L-2586"><span class="linenos">2586</span></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">genome_list</span><span class="p">:</span>
</span><span id="L-2587"><a href="#L-2587"><span class="linenos">2587</span></a>            <span class="n">tax_id</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span><span id="L-2588"><a href="#L-2588"><span class="linenos">2588</span></a>            <span class="k">break</span>
</span><span id="L-2589"><a href="#L-2589"><span class="linenos">2589</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2590"><a href="#L-2590"><span class="linenos">2590</span></a>        <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Assembly &#39;</span><span class="si">{</span><span class="n">assembly</span><span class="si">}</span><span class="s2">&#39; NOT found&quot;</span><span class="p">)</span>
</span><span id="L-2591"><a href="#L-2591"><span class="linenos">2591</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-2592"><a href="#L-2592"><span class="linenos">2592</span></a>
</span><span id="L-2593"><a href="#L-2593"><span class="linenos">2593</span></a>    <span class="n">genome_list</span> <span class="o">=</span> <span class="n">genomepy</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">assembly</span><span class="p">,</span> <span class="n">exact</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-2594"><a href="#L-2594"><span class="linenos">2594</span></a>    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">genome_list</span><span class="p">:</span>
</span><span id="L-2595"><a href="#L-2595"><span class="linenos">2595</span></a>        <span class="n">new_assembly</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2596"><a href="#L-2596"><span class="linenos">2596</span></a>        <span class="n">new_tax_id</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span><span id="L-2597"><a href="#L-2597"><span class="linenos">2597</span></a>        <span class="k">if</span> <span class="n">new_assembly</span> <span class="o">!=</span> <span class="n">assembly</span> <span class="ow">and</span> <span class="n">tax_id</span> <span class="o">==</span> <span class="n">new_tax_id</span><span class="p">:</span>
</span><span id="L-2598"><a href="#L-2598"><span class="linenos">2598</span></a>            <span class="k">return</span> <span class="n">new_assembly</span>
</span><span id="L-2599"><a href="#L-2599"><span class="linenos">2599</span></a>
</span><span id="L-2600"><a href="#L-2600"><span class="linenos">2600</span></a>    <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-2601"><a href="#L-2601"><span class="linenos">2601</span></a>
</span><span id="L-2602"><a href="#L-2602"><span class="linenos">2602</span></a>
</span><span id="L-2603"><a href="#L-2603"><span class="linenos">2603</span></a><span class="c1"># get argument</span>
</span><span id="L-2604"><a href="#L-2604"><span class="linenos">2604</span></a><span class="k">def</span> <span class="nf">get_argument</span><span class="p">(</span>
</span><span id="L-2605"><a href="#L-2605"><span class="linenos">2605</span></a>    <span class="n">arguments</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-2606"><a href="#L-2606"><span class="linenos">2606</span></a>    <span class="n">arg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="L-2607"><a href="#L-2607"><span class="linenos">2607</span></a>    <span class="n">required</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-2608"><a href="#L-2608"><span class="linenos">2608</span></a>    <span class="n">remove_infos</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;gooey&quot;</span><span class="p">,</span> <span class="s2">&quot;extra&quot;</span><span class="p">],</span>
</span><span id="L-2609"><a href="#L-2609"><span class="linenos">2609</span></a>    <span class="n">add_metavar</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-2610"><a href="#L-2610"><span class="linenos">2610</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-2611"><a href="#L-2611"><span class="linenos">2611</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2612"><a href="#L-2612"><span class="linenos">2612</span></a><span class="sd">    The `get_argument` function retrieves information about a specific argument from a dictionary, and</span>
</span><span id="L-2613"><a href="#L-2613"><span class="linenos">2613</span></a><span class="sd">    can also set its &quot;required&quot; status.</span>
</span><span id="L-2614"><a href="#L-2614"><span class="linenos">2614</span></a>
</span><span id="L-2615"><a href="#L-2615"><span class="linenos">2615</span></a><span class="sd">    :param arguments: A dictionary containing information about the arguments passed to a function or</span>
</span><span id="L-2616"><a href="#L-2616"><span class="linenos">2616</span></a><span class="sd">    method</span>
</span><span id="L-2617"><a href="#L-2617"><span class="linenos">2617</span></a><span class="sd">    :type arguments: dict</span>
</span><span id="L-2618"><a href="#L-2618"><span class="linenos">2618</span></a><span class="sd">    :param arg: The `arg` parameter is a string that represents the name of the argument that you want</span>
</span><span id="L-2619"><a href="#L-2619"><span class="linenos">2619</span></a><span class="sd">    to retrieve information for</span>
</span><span id="L-2620"><a href="#L-2620"><span class="linenos">2620</span></a><span class="sd">    :type arg: str</span>
</span><span id="L-2621"><a href="#L-2621"><span class="linenos">2621</span></a><span class="sd">    :param required: The `required` parameter is a boolean value that determines whether the argument is</span>
</span><span id="L-2622"><a href="#L-2622"><span class="linenos">2622</span></a><span class="sd">    required or not. If set to True, the function will return an empty dictionary if the argument is not</span>
</span><span id="L-2623"><a href="#L-2623"><span class="linenos">2623</span></a><span class="sd">    found in the `arguments` dictionary. If set to False (default), the function will still return an</span>
</span><span id="L-2624"><a href="#L-2624"><span class="linenos">2624</span></a><span class="sd">    empty dictionary if, defaults to False</span>
</span><span id="L-2625"><a href="#L-2625"><span class="linenos">2625</span></a><span class="sd">    :type required: bool (optional)</span>
</span><span id="L-2626"><a href="#L-2626"><span class="linenos">2626</span></a><span class="sd">    :param remove_infos: The `remove_infos` parameter is a list that contains the names of specific</span>
</span><span id="L-2627"><a href="#L-2627"><span class="linenos">2627</span></a><span class="sd">    information that you want to remove from the argument dictionary. In the code, it is used to remove</span>
</span><span id="L-2628"><a href="#L-2628"><span class="linenos">2628</span></a><span class="sd">    specific argument information such as &quot;gooey&quot; from the `arg_infos` dictionary</span>
</span><span id="L-2629"><a href="#L-2629"><span class="linenos">2629</span></a><span class="sd">    :type remove_infos: list</span>
</span><span id="L-2630"><a href="#L-2630"><span class="linenos">2630</span></a><span class="sd">    :return: a dictionary containing information about a specific argument, specified by the `arg`</span>
</span><span id="L-2631"><a href="#L-2631"><span class="linenos">2631</span></a><span class="sd">    parameter. If the argument is found in the `arguments` dictionary, the function returns a dictionary</span>
</span><span id="L-2632"><a href="#L-2632"><span class="linenos">2632</span></a><span class="sd">    containing the information about that argument. If the argument is not found, an empty dictionary is</span>
</span><span id="L-2633"><a href="#L-2633"><span class="linenos">2633</span></a><span class="sd">    returned. The `required` parameter is used to specify whether the argument is required or not, and</span>
</span><span id="L-2634"><a href="#L-2634"><span class="linenos">2634</span></a><span class="sd">    this information is added to</span>
</span><span id="L-2635"><a href="#L-2635"><span class="linenos">2635</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2636"><a href="#L-2636"><span class="linenos">2636</span></a>
</span><span id="L-2637"><a href="#L-2637"><span class="linenos">2637</span></a>    <span class="k">if</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
</span><span id="L-2638"><a href="#L-2638"><span class="linenos">2638</span></a>        <span class="n">arg_infos</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-2639"><a href="#L-2639"><span class="linenos">2639</span></a>        <span class="k">for</span> <span class="n">arg_info</span> <span class="ow">in</span> <span class="n">remove_infos</span><span class="p">:</span>
</span><span id="L-2640"><a href="#L-2640"><span class="linenos">2640</span></a>            <span class="n">arg_infos</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">arg_info</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-2641"><a href="#L-2641"><span class="linenos">2641</span></a>        <span class="k">if</span> <span class="n">required</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2642"><a href="#L-2642"><span class="linenos">2642</span></a>            <span class="n">arg_infos</span><span class="p">[</span><span class="s2">&quot;required&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">required</span>
</span><span id="L-2643"><a href="#L-2643"><span class="linenos">2643</span></a>        <span class="k">if</span> <span class="n">add_metavar</span> <span class="ow">and</span> <span class="s2">&quot;metavar&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">arg_infos</span><span class="p">:</span>
</span><span id="L-2644"><a href="#L-2644"><span class="linenos">2644</span></a>            <span class="n">arg_infos</span><span class="p">[</span><span class="s2">&quot;metavar&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span id="L-2645"><a href="#L-2645"><span class="linenos">2645</span></a>        <span class="k">return</span> <span class="n">arg_infos</span>
</span><span id="L-2646"><a href="#L-2646"><span class="linenos">2646</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2647"><a href="#L-2647"><span class="linenos">2647</span></a>        <span class="k">return</span> <span class="p">{}</span>
</span><span id="L-2648"><a href="#L-2648"><span class="linenos">2648</span></a>
</span><span id="L-2649"><a href="#L-2649"><span class="linenos">2649</span></a>
</span><span id="L-2650"><a href="#L-2650"><span class="linenos">2650</span></a><span class="c1"># get_argument_gooey</span>
</span><span id="L-2651"><a href="#L-2651"><span class="linenos">2651</span></a><span class="k">def</span> <span class="nf">get_argument_gooey</span><span class="p">(</span><span class="n">arguments</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">arg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
</span><span id="L-2652"><a href="#L-2652"><span class="linenos">2652</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2653"><a href="#L-2653"><span class="linenos">2653</span></a><span class="sd">    The function `get_argument_gooey` takes an argument and returns the corresponding widget and options</span>
</span><span id="L-2654"><a href="#L-2654"><span class="linenos">2654</span></a><span class="sd">    for the Gooey library in Python.</span>
</span><span id="L-2655"><a href="#L-2655"><span class="linenos">2655</span></a>
</span><span id="L-2656"><a href="#L-2656"><span class="linenos">2656</span></a><span class="sd">    :param arg: The `arg` parameter is a string that represents the name of the argument you want to</span>
</span><span id="L-2657"><a href="#L-2657"><span class="linenos">2657</span></a><span class="sd">    retrieve information for</span>
</span><span id="L-2658"><a href="#L-2658"><span class="linenos">2658</span></a><span class="sd">    :type arg: str</span>
</span><span id="L-2659"><a href="#L-2659"><span class="linenos">2659</span></a><span class="sd">    :return: The function `get_argument_gooey` returns two values: `widget` and `options`.</span>
</span><span id="L-2660"><a href="#L-2660"><span class="linenos">2660</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2661"><a href="#L-2661"><span class="linenos">2661</span></a>
</span><span id="L-2662"><a href="#L-2662"><span class="linenos">2662</span></a>    <span class="c1"># Init</span>
</span><span id="L-2663"><a href="#L-2663"><span class="linenos">2663</span></a>    <span class="n">argument</span> <span class="o">=</span> <span class="n">get_argument</span><span class="p">(</span><span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="n">arg</span><span class="p">,</span> <span class="n">remove_infos</span><span class="o">=</span><span class="p">[])</span>
</span><span id="L-2664"><a href="#L-2664"><span class="linenos">2664</span></a>    <span class="n">argument_type</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-2665"><a href="#L-2665"><span class="linenos">2665</span></a>    <span class="n">gooey_argument</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;gooey&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-2666"><a href="#L-2666"><span class="linenos">2666</span></a>
</span><span id="L-2667"><a href="#L-2667"><span class="linenos">2667</span></a>    <span class="c1"># Widget</span>
</span><span id="L-2668"><a href="#L-2668"><span class="linenos">2668</span></a>    <span class="n">widget</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-2669"><a href="#L-2669"><span class="linenos">2669</span></a>    <span class="k">if</span> <span class="n">gooey_argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;widget&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-2670"><a href="#L-2670"><span class="linenos">2670</span></a>        <span class="n">widget</span> <span class="o">=</span> <span class="n">gooey_argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;widget&quot;</span><span class="p">)</span>
</span><span id="L-2671"><a href="#L-2671"><span class="linenos">2671</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2672"><a href="#L-2672"><span class="linenos">2672</span></a>        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">argument_type</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;FileType(&#39;r&#39;)&quot;</span><span class="p">:</span>
</span><span id="L-2673"><a href="#L-2673"><span class="linenos">2673</span></a>            <span class="n">widget</span> <span class="o">=</span> <span class="s2">&quot;FileChooser&quot;</span>
</span><span id="L-2674"><a href="#L-2674"><span class="linenos">2674</span></a>        <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">argument_type</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;FileType(&#39;w&#39;)&quot;</span><span class="p">:</span>
</span><span id="L-2675"><a href="#L-2675"><span class="linenos">2675</span></a>            <span class="n">widget</span> <span class="o">=</span> <span class="s2">&quot;FileSaver&quot;</span>
</span><span id="L-2676"><a href="#L-2676"><span class="linenos">2676</span></a>
</span><span id="L-2677"><a href="#L-2677"><span class="linenos">2677</span></a>    <span class="c1"># options</span>
</span><span id="L-2678"><a href="#L-2678"><span class="linenos">2678</span></a>    <span class="n">options</span> <span class="o">=</span> <span class="n">gooey_argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;options&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-2679"><a href="#L-2679"><span class="linenos">2679</span></a>
</span><span id="L-2680"><a href="#L-2680"><span class="linenos">2680</span></a>    <span class="c1"># Return</span>
</span><span id="L-2681"><a href="#L-2681"><span class="linenos">2681</span></a>    <span class="k">return</span> <span class="n">widget</span><span class="p">,</span> <span class="n">options</span>
</span><span id="L-2682"><a href="#L-2682"><span class="linenos">2682</span></a>
</span><span id="L-2683"><a href="#L-2683"><span class="linenos">2683</span></a>
</span><span id="L-2684"><a href="#L-2684"><span class="linenos">2684</span></a><span class="c1"># get argument</span>
</span><span id="L-2685"><a href="#L-2685"><span class="linenos">2685</span></a><span class="k">def</span> <span class="nf">get_argument_to_mk</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">argument</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mk&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-2686"><a href="#L-2686"><span class="linenos">2686</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2687"><a href="#L-2687"><span class="linenos">2687</span></a><span class="sd">    The function `get_argument_to_mk` generates a formatted string containing information about a</span>
</span><span id="L-2688"><a href="#L-2688"><span class="linenos">2688</span></a><span class="sd">    command line argument, which can be output in either Markdown or HTML format.</span>
</span><span id="L-2689"><a href="#L-2689"><span class="linenos">2689</span></a>
</span><span id="L-2690"><a href="#L-2690"><span class="linenos">2690</span></a><span class="sd">    :param arg: The `arg` parameter is a string that represents the name of the argument. It is used to</span>
</span><span id="L-2691"><a href="#L-2691"><span class="linenos">2691</span></a><span class="sd">    generate the header and text for the argument</span>
</span><span id="L-2692"><a href="#L-2692"><span class="linenos">2692</span></a><span class="sd">    :type arg: str</span>
</span><span id="L-2693"><a href="#L-2693"><span class="linenos">2693</span></a><span class="sd">    :param argument: The `argument` parameter is a dictionary that contains information about the</span>
</span><span id="L-2694"><a href="#L-2694"><span class="linenos">2694</span></a><span class="sd">    argument. It has the following keys:</span>
</span><span id="L-2695"><a href="#L-2695"><span class="linenos">2695</span></a><span class="sd">    :type argument: dict</span>
</span><span id="L-2696"><a href="#L-2696"><span class="linenos">2696</span></a><span class="sd">    :param mode: The `mode` parameter is used to specify the format of the output. It can have two</span>
</span><span id="L-2697"><a href="#L-2697"><span class="linenos">2697</span></a><span class="sd">    possible values: &quot;mk&quot; or &quot;html&quot;. If &quot;mk&quot; is specified, the output will be formatted using Markdown</span>
</span><span id="L-2698"><a href="#L-2698"><span class="linenos">2698</span></a><span class="sd">    syntax. If &quot;html&quot; is specified, the output will be formatted using HTML syntax, defaults to mk</span>
</span><span id="L-2699"><a href="#L-2699"><span class="linenos">2699</span></a><span class="sd">    :type mode: str (optional)</span>
</span><span id="L-2700"><a href="#L-2700"><span class="linenos">2700</span></a><span class="sd">    :return: a formatted string that provides information about a command line argument. The format of</span>
</span><span id="L-2701"><a href="#L-2701"><span class="linenos">2701</span></a><span class="sd">    the string depends on the value of the `mode` parameter. If `mode` is set to &quot;html&quot;, the string is</span>
</span><span id="L-2702"><a href="#L-2702"><span class="linenos">2702</span></a><span class="sd">    formatted as an HTML `&lt;pre&gt;` block. Otherwise, the string is formatted as a Markdown code block. The</span>
</span><span id="L-2703"><a href="#L-2703"><span class="linenos">2703</span></a><span class="sd">    string includes the argument name, metavariable, help text, required</span>
</span><span id="L-2704"><a href="#L-2704"><span class="linenos">2704</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2705"><a href="#L-2705"><span class="linenos">2705</span></a>
</span><span id="L-2706"><a href="#L-2706"><span class="linenos">2706</span></a>    <span class="kn">from</span> <span class="nn">html</span> <span class="kn">import</span> <span class="n">escape</span>
</span><span id="L-2707"><a href="#L-2707"><span class="linenos">2707</span></a>
</span><span id="L-2708"><a href="#L-2708"><span class="linenos">2708</span></a>    <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-2709"><a href="#L-2709"><span class="linenos">2709</span></a>
</span><span id="L-2710"><a href="#L-2710"><span class="linenos">2710</span></a>    <span class="c1"># Option info</span>
</span><span id="L-2711"><a href="#L-2711"><span class="linenos">2711</span></a>    <span class="n">metavar</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metavar&quot;</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="L-2712"><a href="#L-2712"><span class="linenos">2712</span></a>    <span class="n">help</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-2713"><a href="#L-2713"><span class="linenos">2713</span></a>    <span class="n">required</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;required&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-2714"><a href="#L-2714"><span class="linenos">2714</span></a>    <span class="n">choices</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;choices&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-2715"><a href="#L-2715"><span class="linenos">2715</span></a>    <span class="n">default</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-2716"><a href="#L-2716"><span class="linenos">2716</span></a>    <span class="n">action</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;action&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-2717"><a href="#L-2717"><span class="linenos">2717</span></a>
</span><span id="L-2718"><a href="#L-2718"><span class="linenos">2718</span></a>    <span class="c1"># header</span>
</span><span id="L-2719"><a href="#L-2719"><span class="linenos">2719</span></a>    <span class="n">text_header</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-2720"><a href="#L-2720"><span class="linenos">2720</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">action</span><span class="p">:</span>
</span><span id="L-2721"><a href="#L-2721"><span class="linenos">2721</span></a>        <span class="n">text_header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;=&lt;</span><span class="si">{</span><span class="n">metavar</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
</span><span id="L-2722"><a href="#L-2722"><span class="linenos">2722</span></a>    <span class="k">if</span> <span class="n">choices</span><span class="p">:</span>
</span><span id="L-2723"><a href="#L-2723"><span class="linenos">2723</span></a>        <span class="n">text_header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">choices</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-2724"><a href="#L-2724"><span class="linenos">2724</span></a>    <span class="k">if</span> <span class="n">default</span><span class="p">:</span>
</span><span id="L-2725"><a href="#L-2725"><span class="linenos">2725</span></a>        <span class="n">text_header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; (default: </span><span class="si">{</span><span class="n">default</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-2726"><a href="#L-2726"><span class="linenos">2726</span></a>    <span class="k">if</span> <span class="n">required</span><span class="p">:</span>
</span><span id="L-2727"><a href="#L-2727"><span class="linenos">2727</span></a>        <span class="n">text_header</span> <span class="o">+=</span> <span class="s2">&quot; | required&quot;</span>
</span><span id="L-2728"><a href="#L-2728"><span class="linenos">2728</span></a>
</span><span id="L-2729"><a href="#L-2729"><span class="linenos">2729</span></a>    <span class="c1"># text</span>
</span><span id="L-2730"><a href="#L-2730"><span class="linenos">2730</span></a>    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;html&quot;</span><span class="p">:</span>
</span><span id="L-2731"><a href="#L-2731"><span class="linenos">2731</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&lt;pre&gt;&quot;</span>
</span><span id="L-2732"><a href="#L-2732"><span class="linenos">2732</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="n">escape</span><span class="p">(</span><span class="n">text_header</span><span class="p">)</span>
</span><span id="L-2733"><a href="#L-2733"><span class="linenos">2733</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-2734"><a href="#L-2734"><span class="linenos">2734</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="n">escape</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">help</span><span class="p">))</span>
</span><span id="L-2735"><a href="#L-2735"><span class="linenos">2735</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="L-2736"><a href="#L-2736"><span class="linenos">2736</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&lt;/pre&gt;&quot;</span>
</span><span id="L-2737"><a href="#L-2737"><span class="linenos">2737</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2738"><a href="#L-2738"><span class="linenos">2738</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&lt;small&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-2739"><a href="#L-2739"><span class="linenos">2739</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&gt; ```</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-2740"><a href="#L-2740"><span class="linenos">2740</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&gt;     </span><span class="si">{</span><span class="n">text_header</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-2741"><a href="#L-2741"><span class="linenos">2741</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&gt; </span><span class="se">\n</span><span class="s2">&gt; &quot;</span>
</span><span id="L-2742"><a href="#L-2742"><span class="linenos">2742</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">help</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&gt; &quot;</span><span class="p">)</span>
</span><span id="L-2743"><a href="#L-2743"><span class="linenos">2743</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&gt; ```</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-2744"><a href="#L-2744"><span class="linenos">2744</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&lt;/small&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-2745"><a href="#L-2745"><span class="linenos">2745</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-2746"><a href="#L-2746"><span class="linenos">2746</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-2747"><a href="#L-2747"><span class="linenos">2747</span></a>
</span><span id="L-2748"><a href="#L-2748"><span class="linenos">2748</span></a>    <span class="k">return</span> <span class="n">text</span>
</span><span id="L-2749"><a href="#L-2749"><span class="linenos">2749</span></a>
</span><span id="L-2750"><a href="#L-2750"><span class="linenos">2750</span></a>
</span><span id="L-2751"><a href="#L-2751"><span class="linenos">2751</span></a><span class="k">def</span> <span class="nf">help_generation_from_dict</span><span class="p">(</span>
</span><span id="L-2752"><a href="#L-2752"><span class="linenos">2752</span></a>    <span class="n">element</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-2753"><a href="#L-2753"><span class="linenos">2753</span></a>    <span class="n">help_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="L-2754"><a href="#L-2754"><span class="linenos">2754</span></a>    <span class="n">previous</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="L-2755"><a href="#L-2755"><span class="linenos">2755</span></a>    <span class="n">output_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;markdown&quot;</span><span class="p">,</span>
</span><span id="L-2756"><a href="#L-2756"><span class="linenos">2756</span></a>    <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="L-2757"><a href="#L-2757"><span class="linenos">2757</span></a>    <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="L-2758"><a href="#L-2758"><span class="linenos">2758</span></a>    <span class="n">generate_table</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-2759"><a href="#L-2759"><span class="linenos">2759</span></a>    <span class="n">code_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="L-2760"><a href="#L-2760"><span class="linenos">2760</span></a>    <span class="n">auto_default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-2761"><a href="#L-2761"><span class="linenos">2761</span></a>    <span class="n">previous_sections</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-2762"><a href="#L-2762"><span class="linenos">2762</span></a><span class="p">):</span>
</span><span id="L-2763"><a href="#L-2763"><span class="linenos">2763</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2764"><a href="#L-2764"><span class="linenos">2764</span></a><span class="sd">    The `help_generation_from_dict` function generates help documentation from a dictionary input,</span>
</span><span id="L-2765"><a href="#L-2765"><span class="linenos">2765</span></a><span class="sd">    supporting markdown and HTML output formats with specific sections like &quot;__help&quot;, &quot;__format&quot;,</span>
</span><span id="L-2766"><a href="#L-2766"><span class="linenos">2766</span></a><span class="sd">    &quot;__default&quot;, &quot;__examples&quot;, &quot;__code&quot;, and &quot;__examples_code&quot;.</span>
</span><span id="L-2767"><a href="#L-2767"><span class="linenos">2767</span></a>
</span><span id="L-2768"><a href="#L-2768"><span class="linenos">2768</span></a><span class="sd">    :param element: The `element` parameter in the `help_generation_from_dict` function is a string that</span>
</span><span id="L-2769"><a href="#L-2769"><span class="linenos">2769</span></a><span class="sd">    represents the current element or key in the dictionary for which help documentation is being</span>
</span><span id="L-2770"><a href="#L-2770"><span class="linenos">2770</span></a><span class="sd">    generated. It is the specific key or element within the dictionary that you want to generate help</span>
</span><span id="L-2771"><a href="#L-2771"><span class="linenos">2771</span></a><span class="sd">    documentation for</span>
</span><span id="L-2772"><a href="#L-2772"><span class="linenos">2772</span></a><span class="sd">    :type element: str</span>
</span><span id="L-2773"><a href="#L-2773"><span class="linenos">2773</span></a><span class="sd">    :param help_dict: The `help_dict` parameter in the `help_generation_from_dict` function is a</span>
</span><span id="L-2774"><a href="#L-2774"><span class="linenos">2774</span></a><span class="sd">    dictionary that contains the help documentation for various elements or keys. This dictionary</span>
</span><span id="L-2775"><a href="#L-2775"><span class="linenos">2775</span></a><span class="sd">    structure allows for organizing and storing information related to each element, such as help text,</span>
</span><span id="L-2776"><a href="#L-2776"><span class="linenos">2776</span></a><span class="sd">    formatting details, default values, and examples. The function processes</span>
</span><span id="L-2777"><a href="#L-2777"><span class="linenos">2777</span></a><span class="sd">    :type help_dict: dict</span>
</span><span id="L-2778"><a href="#L-2778"><span class="linenos">2778</span></a><span class="sd">    :param previous: The `previous` parameter in the `help_generation_from_dict` function is used to</span>
</span><span id="L-2779"><a href="#L-2779"><span class="linenos">2779</span></a><span class="sd">    keep track of the previous elements in the hierarchy. It is a string that represents the path to the</span>
</span><span id="L-2780"><a href="#L-2780"><span class="linenos">2780</span></a><span class="sd">    current element being processed. This parameter helps in maintaining the correct hierarchy level</span>
</span><span id="L-2781"><a href="#L-2781"><span class="linenos">2781</span></a><span class="sd">    when generating help documentation for nested elements in a</span>
</span><span id="L-2782"><a href="#L-2782"><span class="linenos">2782</span></a><span class="sd">    :type previous: str</span>
</span><span id="L-2783"><a href="#L-2783"><span class="linenos">2783</span></a><span class="sd">    :param output_type: The `output_type` parameter in the `help_generation_from_dict` function</span>
</span><span id="L-2784"><a href="#L-2784"><span class="linenos">2784</span></a><span class="sd">    specifies the type of output format that you want the generated help documentation to be in. It can</span>
</span><span id="L-2785"><a href="#L-2785"><span class="linenos">2785</span></a><span class="sd">    take two possible values: &quot;markdown&quot; or &quot;html&quot;. By default, the output type is set to markdown,</span>
</span><span id="L-2786"><a href="#L-2786"><span class="linenos">2786</span></a><span class="sd">    defaults to markdown</span>
</span><span id="L-2787"><a href="#L-2787"><span class="linenos">2787</span></a><span class="sd">    :type output_type: str (optional)</span>
</span><span id="L-2788"><a href="#L-2788"><span class="linenos">2788</span></a><span class="sd">    :param level: The `level` parameter in the `help_generation_from_dict` function is used to keep</span>
</span><span id="L-2789"><a href="#L-2789"><span class="linenos">2789</span></a><span class="sd">    track of the depth or level of recursion in the generation process. It starts at 1 for the initial</span>
</span><span id="L-2790"><a href="#L-2790"><span class="linenos">2790</span></a><span class="sd">    call and increments by 1 for each level of recursion into sub-elements. This parameter helps in</span>
</span><span id="L-2791"><a href="#L-2791"><span class="linenos">2791</span></a><span class="sd">    formatting the, defaults to 1</span>
</span><span id="L-2792"><a href="#L-2792"><span class="linenos">2792</span></a><span class="sd">    :type level: int (optional)</span>
</span><span id="L-2793"><a href="#L-2793"><span class="linenos">2793</span></a><span class="sd">    :param table: The `table` parameter in the `help_generation_from_dict` function is used to store the</span>
</span><span id="L-2794"><a href="#L-2794"><span class="linenos">2794</span></a><span class="sd">    table of contents for the generated help documentation. It is a string that contains the formatted</span>
</span><span id="L-2795"><a href="#L-2795"><span class="linenos">2795</span></a><span class="sd">    table of contents with links to different sections or elements within the documentation. This table</span>
</span><span id="L-2796"><a href="#L-2796"><span class="linenos">2796</span></a><span class="sd">    helps users navigate through the documentation easily</span>
</span><span id="L-2797"><a href="#L-2797"><span class="linenos">2797</span></a><span class="sd">    :type table: str</span>
</span><span id="L-2798"><a href="#L-2798"><span class="linenos">2798</span></a><span class="sd">    :param generate_table: The `generate_table` parameter in the `help_generation_from_dict` function is</span>
</span><span id="L-2799"><a href="#L-2799"><span class="linenos">2799</span></a><span class="sd">    a boolean flag that determines whether the function should generate a table of contents for the help</span>
</span><span id="L-2800"><a href="#L-2800"><span class="linenos">2800</span></a><span class="sd">    documentation. When set to `True`, the function will include a table of contents in the output based</span>
</span><span id="L-2801"><a href="#L-2801"><span class="linenos">2801</span></a><span class="sd">    on the hierarchy of elements in the, defaults to False</span>
</span><span id="L-2802"><a href="#L-2802"><span class="linenos">2802</span></a><span class="sd">    :type generate_table: bool (optional)</span>
</span><span id="L-2803"><a href="#L-2803"><span class="linenos">2803</span></a><span class="sd">    :param code_type: The `code_type` parameter in the `help_generation_from_dict` function specifies</span>
</span><span id="L-2804"><a href="#L-2804"><span class="linenos">2804</span></a><span class="sd">    the type of code examples that will be included in the generated help documentation. It defaults to</span>
</span><span id="L-2805"><a href="#L-2805"><span class="linenos">2805</span></a><span class="sd">    &quot;json&quot;, meaning that the code examples provided in the &quot;__examples_code&quot; section of the dictionary</span>
</span><span id="L-2806"><a href="#L-2806"><span class="linenos">2806</span></a><span class="sd">    will be in JSON format</span>
</span><span id="L-2807"><a href="#L-2807"><span class="linenos">2807</span></a><span class="sd">    :type code_type: str</span>
</span><span id="L-2808"><a href="#L-2808"><span class="linenos">2808</span></a><span class="sd">    :param auto_default: The `auto_default` parameter in the `help_generation_from_dict` function is a</span>
</span><span id="L-2809"><a href="#L-2809"><span class="linenos">2809</span></a><span class="sd">    boolean flag that determines whether the function should automatically populate certain sections of</span>
</span><span id="L-2810"><a href="#L-2810"><span class="linenos">2810</span></a><span class="sd">    the help documentation based on the information available in the dictionary and the element&#39;s</span>
</span><span id="L-2811"><a href="#L-2811"><span class="linenos">2811</span></a><span class="sd">    arguments. When set to `True`, the function will automatically fill in sections, defaults to True</span>
</span><span id="L-2812"><a href="#L-2812"><span class="linenos">2812</span></a><span class="sd">    :type auto_default: bool (optional)</span>
</span><span id="L-2813"><a href="#L-2813"><span class="linenos">2813</span></a><span class="sd">    :param previous_sections: The `previous_sections` parameter in the `help_generation_from_dict`</span>
</span><span id="L-2814"><a href="#L-2814"><span class="linenos">2814</span></a><span class="sd">    function is a boolean flag that determines whether the function should include previous sections in</span>
</span><span id="L-2815"><a href="#L-2815"><span class="linenos">2815</span></a><span class="sd">    the hierarchy when generating help documentation for nested elements. When set to `True`, the</span>
</span><span id="L-2816"><a href="#L-2816"><span class="linenos">2816</span></a><span class="sd">    function will maintain the previous sections in the hierarchy path, helping to provide, defaults to</span>
</span><span id="L-2817"><a href="#L-2817"><span class="linenos">2817</span></a><span class="sd">    False</span>
</span><span id="L-2818"><a href="#L-2818"><span class="linenos">2818</span></a><span class="sd">    :type previous_sections: bool (optional)</span>
</span><span id="L-2819"><a href="#L-2819"><span class="linenos">2819</span></a><span class="sd">    :return: The `help_generation_from_dict` function returns the generated help documentation based on</span>
</span><span id="L-2820"><a href="#L-2820"><span class="linenos">2820</span></a><span class="sd">    the input `help_dict` dictionary. The output is formatted based on the specified `output_type`</span>
</span><span id="L-2821"><a href="#L-2821"><span class="linenos">2821</span></a><span class="sd">    (either &quot;markdown&quot; or &quot;html&quot;) and includes sections such as &quot;__help&quot;, &quot;__format&quot;, &quot;__default&quot;, and</span>
</span><span id="L-2822"><a href="#L-2822"><span class="linenos">2822</span></a><span class="sd">    &quot;__examples&quot; if they are present in the `help_dict`.</span>
</span><span id="L-2823"><a href="#L-2823"><span class="linenos">2823</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2824"><a href="#L-2824"><span class="linenos">2824</span></a>
</span><span id="L-2825"><a href="#L-2825"><span class="linenos">2825</span></a>    <span class="kn">from</span> <span class="nn">howard.tools.tools</span> <span class="kn">import</span> <span class="n">arguments</span>
</span><span id="L-2826"><a href="#L-2826"><span class="linenos">2826</span></a>
</span><span id="L-2827"><a href="#L-2827"><span class="linenos">2827</span></a>    <span class="n">element_argument_infos</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="L-2828"><a href="#L-2828"><span class="linenos">2828</span></a>        <span class="n">element</span><span class="p">,</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">),</span> <span class="p">{})</span>
</span><span id="L-2829"><a href="#L-2829"><span class="linenos">2829</span></a>    <span class="p">)</span>
</span><span id="L-2830"><a href="#L-2830"><span class="linenos">2830</span></a>
</span><span id="L-2831"><a href="#L-2831"><span class="linenos">2831</span></a>    <span class="c1"># Level marker</span>
</span><span id="L-2832"><a href="#L-2832"><span class="linenos">2832</span></a>    <span class="n">level_marker</span> <span class="o">=</span> <span class="s2">&quot;::&quot;</span>
</span><span id="L-2833"><a href="#L-2833"><span class="linenos">2833</span></a>
</span><span id="L-2834"><a href="#L-2834"><span class="linenos">2834</span></a>    <span class="c1"># Output</span>
</span><span id="L-2835"><a href="#L-2835"><span class="linenos">2835</span></a>    <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-2836"><a href="#L-2836"><span class="linenos">2836</span></a>    <span class="n">output_table</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-2837"><a href="#L-2837"><span class="linenos">2837</span></a>
</span><span id="L-2838"><a href="#L-2838"><span class="linenos">2838</span></a>    <span class="c1"># Specific help sections</span>
</span><span id="L-2839"><a href="#L-2839"><span class="linenos">2839</span></a>    <span class="n">section_list</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-2840"><a href="#L-2840"><span class="linenos">2840</span></a>        <span class="s2">&quot;__help&quot;</span><span class="p">,</span>
</span><span id="L-2841"><a href="#L-2841"><span class="linenos">2841</span></a>        <span class="s2">&quot;__type&quot;</span><span class="p">,</span>
</span><span id="L-2842"><a href="#L-2842"><span class="linenos">2842</span></a>        <span class="s2">&quot;__choices&quot;</span><span class="p">,</span>
</span><span id="L-2843"><a href="#L-2843"><span class="linenos">2843</span></a>        <span class="s2">&quot;__format&quot;</span><span class="p">,</span>
</span><span id="L-2844"><a href="#L-2844"><span class="linenos">2844</span></a>        <span class="s2">&quot;__default&quot;</span><span class="p">,</span>
</span><span id="L-2845"><a href="#L-2845"><span class="linenos">2845</span></a>        <span class="s2">&quot;__default_eval&quot;</span><span class="p">,</span>
</span><span id="L-2846"><a href="#L-2846"><span class="linenos">2846</span></a>        <span class="s2">&quot;__examples&quot;</span><span class="p">,</span>
</span><span id="L-2847"><a href="#L-2847"><span class="linenos">2847</span></a>        <span class="s2">&quot;__code&quot;</span><span class="p">,</span>
</span><span id="L-2848"><a href="#L-2848"><span class="linenos">2848</span></a>        <span class="s2">&quot;__examples_code&quot;</span><span class="p">,</span>
</span><span id="L-2849"><a href="#L-2849"><span class="linenos">2849</span></a>    <span class="p">]</span>
</span><span id="L-2850"><a href="#L-2850"><span class="linenos">2850</span></a>
</span><span id="L-2851"><a href="#L-2851"><span class="linenos">2851</span></a>    <span class="c1"># Previous level</span>
</span><span id="L-2852"><a href="#L-2852"><span class="linenos">2852</span></a>    <span class="k">if</span> <span class="n">previous</span> <span class="ow">and</span> <span class="n">previous_sections</span><span class="p">:</span>
</span><span id="L-2853"><a href="#L-2853"><span class="linenos">2853</span></a>        <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">previous</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-2854"><a href="#L-2854"><span class="linenos">2854</span></a>        <span class="n">previous</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">level_marker</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-2855"><a href="#L-2855"><span class="linenos">2855</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2856"><a href="#L-2856"><span class="linenos">2856</span></a>        <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">element</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-2857"><a href="#L-2857"><span class="linenos">2857</span></a>        <span class="n">previous</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-2858"><a href="#L-2858"><span class="linenos">2858</span></a>
</span><span id="L-2859"><a href="#L-2859"><span class="linenos">2859</span></a>    <span class="k">if</span> <span class="s2">&quot;__code_type&quot;</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="L-2860"><a href="#L-2860"><span class="linenos">2860</span></a>        <span class="n">code_type</span> <span class="o">=</span> <span class="n">help_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;__code_type&quot;</span><span class="p">,</span> <span class="n">code_type</span><span class="p">)</span>
</span><span id="L-2861"><a href="#L-2861"><span class="linenos">2861</span></a>
</span><span id="L-2862"><a href="#L-2862"><span class="linenos">2862</span></a>    <span class="k">if</span> <span class="s2">&quot;__auto&quot;</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="L-2863"><a href="#L-2863"><span class="linenos">2863</span></a>        <span class="n">auto_default</span> <span class="o">=</span> <span class="n">help_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;__auto&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="L-2864"><a href="#L-2864"><span class="linenos">2864</span></a>
</span><span id="L-2865"><a href="#L-2865"><span class="linenos">2865</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="L-2866"><a href="#L-2866"><span class="linenos">2866</span></a>        <span class="n">auto_default</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-2867"><a href="#L-2867"><span class="linenos">2867</span></a>
</span><span id="L-2868"><a href="#L-2868"><span class="linenos">2868</span></a>    <span class="k">if</span> <span class="n">auto_default</span> <span class="ow">and</span> <span class="n">level</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-2869"><a href="#L-2869"><span class="linenos">2869</span></a>
</span><span id="L-2870"><a href="#L-2870"><span class="linenos">2870</span></a>        <span class="c1"># default</span>
</span><span id="L-2871"><a href="#L-2871"><span class="linenos">2871</span></a>        <span class="k">if</span> <span class="s2">&quot;__help&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="L-2872"><a href="#L-2872"><span class="linenos">2872</span></a>            <span class="k">if</span> <span class="s2">&quot;help&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span><span class="p">:</span>
</span><span id="L-2873"><a href="#L-2873"><span class="linenos">2873</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>  <span class="c1">#</span>
</span><span id="L-2874"><a href="#L-2874"><span class="linenos">2874</span></a>                <span class="c1"># Clean help</span>
</span><span id="L-2875"><a href="#L-2875"><span class="linenos">2875</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_arg_help</span><span class="p">(</span><span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__help&quot;</span><span class="p">])</span>
</span><span id="L-2876"><a href="#L-2876"><span class="linenos">2876</span></a>
</span><span id="L-2877"><a href="#L-2877"><span class="linenos">2877</span></a>        <span class="c1"># default</span>
</span><span id="L-2878"><a href="#L-2878"><span class="linenos">2878</span></a>        <span class="k">if</span> <span class="s2">&quot;__default&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="L-2879"><a href="#L-2879"><span class="linenos">2879</span></a>            <span class="k">if</span> <span class="s2">&quot;default&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span><span class="p">:</span>
</span><span id="L-2880"><a href="#L-2880"><span class="linenos">2880</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-2881"><a href="#L-2881"><span class="linenos">2881</span></a>
</span><span id="L-2882"><a href="#L-2882"><span class="linenos">2882</span></a>        <span class="c1"># type</span>
</span><span id="L-2883"><a href="#L-2883"><span class="linenos">2883</span></a>        <span class="k">if</span> <span class="s2">&quot;__type&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="L-2884"><a href="#L-2884"><span class="linenos">2884</span></a>            <span class="k">if</span> <span class="s2">&quot;type&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span><span class="p">:</span>
</span><span id="L-2885"><a href="#L-2885"><span class="linenos">2885</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="L-2886"><a href="#L-2886"><span class="linenos">2886</span></a>
</span><span id="L-2887"><a href="#L-2887"><span class="linenos">2887</span></a>        <span class="c1"># format</span>
</span><span id="L-2888"><a href="#L-2888"><span class="linenos">2888</span></a>        <span class="k">if</span> <span class="s2">&quot;__format&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="L-2889"><a href="#L-2889"><span class="linenos">2889</span></a>            <span class="k">if</span> <span class="s2">&quot;format&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span><span class="p">:</span>
</span><span id="L-2890"><a href="#L-2890"><span class="linenos">2890</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__format&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-2891"><a href="#L-2891"><span class="linenos">2891</span></a>
</span><span id="L-2892"><a href="#L-2892"><span class="linenos">2892</span></a>        <span class="c1"># choices</span>
</span><span id="L-2893"><a href="#L-2893"><span class="linenos">2893</span></a>        <span class="k">if</span> <span class="s2">&quot;__choices&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="L-2894"><a href="#L-2894"><span class="linenos">2894</span></a>            <span class="k">if</span> <span class="s2">&quot;choices&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span><span class="p">:</span>
</span><span id="L-2895"><a href="#L-2895"><span class="linenos">2895</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__choices&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;choices&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-2896"><a href="#L-2896"><span class="linenos">2896</span></a>
</span><span id="L-2897"><a href="#L-2897"><span class="linenos">2897</span></a>        <span class="c1"># format</span>
</span><span id="L-2898"><a href="#L-2898"><span class="linenos">2898</span></a>        <span class="k">if</span> <span class="s2">&quot;__format&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="L-2899"><a href="#L-2899"><span class="linenos">2899</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-2900"><a href="#L-2900"><span class="linenos">2900</span></a>                <span class="s2">&quot;extra&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span>
</span><span id="L-2901"><a href="#L-2901"><span class="linenos">2901</span></a>                <span class="ow">and</span> <span class="s2">&quot;format&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;extra&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-2902"><a href="#L-2902"><span class="linenos">2902</span></a>            <span class="p">):</span>
</span><span id="L-2903"><a href="#L-2903"><span class="linenos">2903</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__format&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;extra&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="L-2904"><a href="#L-2904"><span class="linenos">2904</span></a>                    <span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="kc">None</span>
</span><span id="L-2905"><a href="#L-2905"><span class="linenos">2905</span></a>                <span class="p">)</span>
</span><span id="L-2906"><a href="#L-2906"><span class="linenos">2906</span></a>
</span><span id="L-2907"><a href="#L-2907"><span class="linenos">2907</span></a>        <span class="c1"># example (code)</span>
</span><span id="L-2908"><a href="#L-2908"><span class="linenos">2908</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="L-2909"><a href="#L-2909"><span class="linenos">2909</span></a>            <span class="s2">&quot;__examples&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span>
</span><span id="L-2910"><a href="#L-2910"><span class="linenos">2910</span></a>            <span class="ow">and</span> <span class="s2">&quot;__examples_code&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span>
</span><span id="L-2911"><a href="#L-2911"><span class="linenos">2911</span></a>            <span class="ow">and</span> <span class="s2">&quot;__code&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span>
</span><span id="L-2912"><a href="#L-2912"><span class="linenos">2912</span></a>        <span class="p">):</span>
</span><span id="L-2913"><a href="#L-2913"><span class="linenos">2913</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-2914"><a href="#L-2914"><span class="linenos">2914</span></a>                <span class="s2">&quot;extra&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span>
</span><span id="L-2915"><a href="#L-2915"><span class="linenos">2915</span></a>                <span class="ow">and</span> <span class="s2">&quot;examples&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;extra&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-2916"><a href="#L-2916"><span class="linenos">2916</span></a>            <span class="p">):</span>
</span><span id="L-2917"><a href="#L-2917"><span class="linenos">2917</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__examples&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;extra&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="L-2918"><a href="#L-2918"><span class="linenos">2918</span></a>                    <span class="s2">&quot;examples&quot;</span><span class="p">,</span> <span class="kc">None</span>
</span><span id="L-2919"><a href="#L-2919"><span class="linenos">2919</span></a>                <span class="p">)</span>
</span><span id="L-2920"><a href="#L-2920"><span class="linenos">2920</span></a>
</span><span id="L-2921"><a href="#L-2921"><span class="linenos">2921</span></a>    <span class="c1"># If no section &quot;__help&quot; (mandatory)</span>
</span><span id="L-2922"><a href="#L-2922"><span class="linenos">2922</span></a>    <span class="k">if</span> <span class="s2">&quot;__help&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="L-2923"><a href="#L-2923"><span class="linenos">2923</span></a>        <span class="k">return</span> <span class="n">output</span>
</span><span id="L-2924"><a href="#L-2924"><span class="linenos">2924</span></a>
</span><span id="L-2925"><a href="#L-2925"><span class="linenos">2925</span></a>    <span class="c1"># For each help section</span>
</span><span id="L-2926"><a href="#L-2926"><span class="linenos">2926</span></a>    <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">section_list</span><span class="p">:</span>
</span><span id="L-2927"><a href="#L-2927"><span class="linenos">2927</span></a>
</span><span id="L-2928"><a href="#L-2928"><span class="linenos">2928</span></a>        <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="L-2929"><a href="#L-2929"><span class="linenos">2929</span></a>
</span><span id="L-2930"><a href="#L-2930"><span class="linenos">2930</span></a>            <span class="c1"># If content not empty</span>
</span><span id="L-2931"><a href="#L-2931"><span class="linenos">2931</span></a>            <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="L-2932"><a href="#L-2932"><span class="linenos">2932</span></a>
</span><span id="L-2933"><a href="#L-2933"><span class="linenos">2933</span></a>                <span class="c1"># element content</span>
</span><span id="L-2934"><a href="#L-2934"><span class="linenos">2934</span></a>                <span class="n">help_dict_content</span> <span class="o">=</span> <span class="n">help_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-2935"><a href="#L-2935"><span class="linenos">2935</span></a>
</span><span id="L-2936"><a href="#L-2936"><span class="linenos">2936</span></a>                <span class="c1"># Break section</span>
</span><span id="L-2937"><a href="#L-2937"><span class="linenos">2937</span></a>                <span class="n">section_break</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-2938"><a href="#L-2938"><span class="linenos">2938</span></a>
</span><span id="L-2939"><a href="#L-2939"><span class="linenos">2939</span></a>                <span class="c1"># Output variables</span>
</span><span id="L-2940"><a href="#L-2940"><span class="linenos">2940</span></a>                <span class="n">output_header</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-2941"><a href="#L-2941"><span class="linenos">2941</span></a>                <span class="n">output_header_table</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-2942"><a href="#L-2942"><span class="linenos">2942</span></a>                <span class="n">output_content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-2943"><a href="#L-2943"><span class="linenos">2943</span></a>
</span><span id="L-2944"><a href="#L-2944"><span class="linenos">2944</span></a>                <span class="c1"># Markdown</span>
</span><span id="L-2945"><a href="#L-2945"><span class="linenos">2945</span></a>                <span class="k">if</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;markdown&quot;</span><span class="p">:</span>
</span><span id="L-2946"><a href="#L-2946"><span class="linenos">2946</span></a>
</span><span id="L-2947"><a href="#L-2947"><span class="linenos">2947</span></a>                    <span class="c1"># Level</span>
</span><span id="L-2948"><a href="#L-2948"><span class="linenos">2948</span></a>                    <span class="n">level_md</span> <span class="o">=</span> <span class="s2">&quot;#&quot;</span> <span class="o">*</span> <span class="n">level</span>
</span><span id="L-2949"><a href="#L-2949"><span class="linenos">2949</span></a>
</span><span id="L-2950"><a href="#L-2950"><span class="linenos">2950</span></a>                    <span class="c1"># line break</span>
</span><span id="L-2951"><a href="#L-2951"><span class="linenos">2951</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples_code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples&quot;</span><span class="p">]:</span>
</span><span id="L-2952"><a href="#L-2952"><span class="linenos">2952</span></a>                        <span class="n">line_break</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-2953"><a href="#L-2953"><span class="linenos">2953</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2954"><a href="#L-2954"><span class="linenos">2954</span></a>                        <span class="n">line_break</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="L-2955"><a href="#L-2955"><span class="linenos">2955</span></a>
</span><span id="L-2956"><a href="#L-2956"><span class="linenos">2956</span></a>                    <span class="c1"># Help content from type</span>
</span><span id="L-2957"><a href="#L-2957"><span class="linenos">2957</span></a>                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-2958"><a href="#L-2958"><span class="linenos">2958</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="n">help_dict_content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">line_break</span><span class="p">)</span>
</span><span id="L-2959"><a href="#L-2959"><span class="linenos">2959</span></a>                    <span class="c1"># elif isinstance(help_dict_content, list) and section not in [&quot;__choices&quot;]:</span>
</span><span id="L-2960"><a href="#L-2960"><span class="linenos">2960</span></a>                    <span class="k">elif</span> <span class="p">(</span>
</span><span id="L-2961"><a href="#L-2961"><span class="linenos">2961</span></a>                        <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
</span><span id="L-2962"><a href="#L-2962"><span class="linenos">2962</span></a>                        <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">,</span> <span class="nb">set</span><span class="p">)</span>
</span><span id="L-2963"><a href="#L-2963"><span class="linenos">2963</span></a>                    <span class="p">)</span> <span class="ow">and</span> <span class="n">section</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__choices&quot;</span><span class="p">]:</span>
</span><span id="L-2964"><a href="#L-2964"><span class="linenos">2964</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="n">line_break</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">)</span>
</span><span id="L-2965"><a href="#L-2965"><span class="linenos">2965</span></a>                        <span class="n">section_break</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-2966"><a href="#L-2966"><span class="linenos">2966</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2967"><a href="#L-2967"><span class="linenos">2967</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="n">help_dict_content</span>
</span><span id="L-2968"><a href="#L-2968"><span class="linenos">2968</span></a>
</span><span id="L-2969"><a href="#L-2969"><span class="linenos">2969</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples_code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples&quot;</span><span class="p">]:</span>
</span><span id="L-2970"><a href="#L-2970"><span class="linenos">2970</span></a>
</span><span id="L-2971"><a href="#L-2971"><span class="linenos">2971</span></a>                        <span class="c1"># Format help dict</span>
</span><span id="L-2972"><a href="#L-2972"><span class="linenos">2972</span></a>                        <span class="c1"># if isinstance(help_md, set):</span>
</span><span id="L-2973"><a href="#L-2973"><span class="linenos">2973</span></a>                        <span class="c1">#     help_md = list(help_md)</span>
</span><span id="L-2974"><a href="#L-2974"><span class="linenos">2974</span></a>                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_md</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-2975"><a href="#L-2975"><span class="linenos">2975</span></a>                            <span class="n">help_md_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-2976"><a href="#L-2976"><span class="linenos">2976</span></a>                            <span class="n">example_header</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-2977"><a href="#L-2977"><span class="linenos">2977</span></a>                            <span class="k">for</span> <span class="n">example_line</span> <span class="ow">in</span> <span class="n">help_md</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
</span><span id="L-2978"><a href="#L-2978"><span class="linenos">2978</span></a>                                <span class="k">if</span> <span class="n">example_line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">):</span>
</span><span id="L-2979"><a href="#L-2979"><span class="linenos">2979</span></a>                                    <span class="n">example_header</span> <span class="o">=</span> <span class="n">example_line</span>
</span><span id="L-2980"><a href="#L-2980"><span class="linenos">2980</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2981"><a href="#L-2981"><span class="linenos">2981</span></a>
</span><span id="L-2982"><a href="#L-2982"><span class="linenos">2982</span></a>                                    <span class="k">if</span> <span class="n">example_header</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_md_dict</span><span class="p">:</span>
</span><span id="L-2983"><a href="#L-2983"><span class="linenos">2983</span></a>                                        <span class="n">help_md_dict</span><span class="p">[</span><span class="n">example_header</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-2984"><a href="#L-2984"><span class="linenos">2984</span></a>                                        <span class="n">example_sep</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-2985"><a href="#L-2985"><span class="linenos">2985</span></a>                                    <span class="n">help_md_dict</span><span class="p">[</span><span class="n">example_header</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="L-2986"><a href="#L-2986"><span class="linenos">2986</span></a>                                        <span class="n">example_sep</span> <span class="o">+</span> <span class="n">example_line</span>
</span><span id="L-2987"><a href="#L-2987"><span class="linenos">2987</span></a>                                    <span class="p">)</span>
</span><span id="L-2988"><a href="#L-2988"><span class="linenos">2988</span></a>                                    <span class="n">example_sep</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-2989"><a href="#L-2989"><span class="linenos">2989</span></a>                        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_md</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-2990"><a href="#L-2990"><span class="linenos">2990</span></a>                            <span class="n">help_md_dict</span> <span class="o">=</span> <span class="n">help_md</span>
</span><span id="L-2991"><a href="#L-2991"><span class="linenos">2991</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2992"><a href="#L-2992"><span class="linenos">2992</span></a>                            <span class="n">help_md_dict</span> <span class="o">=</span> <span class="n">help_md</span>
</span><span id="L-2993"><a href="#L-2993"><span class="linenos">2993</span></a>
</span><span id="L-2994"><a href="#L-2994"><span class="linenos">2994</span></a>                        <span class="c1"># Format examples</span>
</span><span id="L-2995"><a href="#L-2995"><span class="linenos">2995</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-2996"><a href="#L-2996"><span class="linenos">2996</span></a>                        <span class="k">for</span> <span class="n">example</span> <span class="ow">in</span> <span class="n">help_md_dict</span><span class="p">:</span>
</span><span id="L-2997"><a href="#L-2997"><span class="linenos">2997</span></a>                            <span class="n">example_code</span> <span class="o">=</span> <span class="n">help_md_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">example</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-2998"><a href="#L-2998"><span class="linenos">2998</span></a>                            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">example_code</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-2999"><a href="#L-2999"><span class="linenos">2999</span></a>                                <span class="n">example_code</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">example_code</span><span class="p">)</span>
</span><span id="L-3000"><a href="#L-3000"><span class="linenos">3000</span></a>                            <span class="n">example</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^#*\s*&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">example</span><span class="p">)</span>
</span><span id="L-3001"><a href="#L-3001"><span class="linenos">3001</span></a>                            <span class="n">help_md</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="se">\n\n</span><span class="s2">&gt; </span><span class="si">{</span><span class="n">example</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="L-3002"><a href="#L-3002"><span class="linenos">3002</span></a>                            <span class="c1"># Clean example code</span>
</span><span id="L-3003"><a href="#L-3003"><span class="linenos">3003</span></a>                            <span class="k">if</span> <span class="p">(</span>
</span><span id="L-3004"><a href="#L-3004"><span class="linenos">3004</span></a>                                <span class="nb">len</span><span class="p">(</span><span class="n">example_code</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="L-3005"><a href="#L-3005"><span class="linenos">3005</span></a>                                <span class="ow">and</span> <span class="n">code_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;JSON&quot;</span>
</span><span id="L-3006"><a href="#L-3006"><span class="linenos">3006</span></a>                                <span class="ow">and</span> <span class="n">example_code</span><span class="o">.</span><span class="n">strip</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;{&quot;</span>
</span><span id="L-3007"><a href="#L-3007"><span class="linenos">3007</span></a>                            <span class="p">):</span>
</span><span id="L-3008"><a href="#L-3008"><span class="linenos">3008</span></a>                                <span class="n">example_code</span> <span class="o">=</span> <span class="n">example_code</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">   &quot;</span><span class="p">)</span>
</span><span id="L-3009"><a href="#L-3009"><span class="linenos">3009</span></a>                                <span class="n">example_code</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="se">{{\n</span><span class="s2">   </span><span class="si">{</span><span class="n">example_code</span><span class="si">}</span><span class="se">\n}}</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="L-3010"><a href="#L-3010"><span class="linenos">3010</span></a>                            <span class="n">example_code</span> <span class="o">=</span> <span class="n">example_code</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&gt; &quot;</span><span class="p">)</span>
</span><span id="L-3011"><a href="#L-3011"><span class="linenos">3011</span></a>                            <span class="c1"># Add example code</span>
</span><span id="L-3012"><a href="#L-3012"><span class="linenos">3012</span></a>                            <span class="n">help_md</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="L-3013"><a href="#L-3013"><span class="linenos">3013</span></a>                                <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="se">\n</span><span class="s2">&gt; ```</span><span class="si">{</span><span class="n">code_type</span><span class="si">}</span><span class="se">\n</span><span class="s2">&gt; </span><span class="si">{</span><span class="n">example_code</span><span class="si">}</span><span class="se">\n</span><span class="s2">&gt; ```&quot;&quot;&quot;</span>
</span><span id="L-3014"><a href="#L-3014"><span class="linenos">3014</span></a>                            <span class="p">)</span>
</span><span id="L-3015"><a href="#L-3015"><span class="linenos">3015</span></a>
</span><span id="L-3016"><a href="#L-3016"><span class="linenos">3016</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__default&quot;</span><span class="p">]:</span>
</span><span id="L-3017"><a href="#L-3017"><span class="linenos">3017</span></a>                        <span class="k">if</span> <span class="n">help_md</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]:</span>
</span><span id="L-3018"><a href="#L-3018"><span class="linenos">3018</span></a>                            <span class="n">help_md</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>
</span><span id="L-3019"><a href="#L-3019"><span class="linenos">3019</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;```</span><span class="si">{</span><span class="n">help_md</span><span class="si">}</span><span class="s2">```&quot;</span>
</span><span id="L-3020"><a href="#L-3020"><span class="linenos">3020</span></a>
</span><span id="L-3021"><a href="#L-3021"><span class="linenos">3021</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__default_eval&quot;</span><span class="p">]:</span>
</span><span id="L-3022"><a href="#L-3022"><span class="linenos">3022</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="s2">&quot;```&quot;</span> <span class="o">+</span> <span class="nb">eval</span><span class="p">(</span><span class="n">help_md</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;```&quot;</span>
</span><span id="L-3023"><a href="#L-3023"><span class="linenos">3023</span></a>
</span><span id="L-3024"><a href="#L-3024"><span class="linenos">3024</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__type&quot;</span><span class="p">]:</span>
</span><span id="L-3025"><a href="#L-3025"><span class="linenos">3025</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;```</span><span class="si">{</span><span class="n">help_md</span><span class="si">}</span><span class="s2">```&quot;</span>
</span><span id="L-3026"><a href="#L-3026"><span class="linenos">3026</span></a>
</span><span id="L-3027"><a href="#L-3027"><span class="linenos">3027</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__format&quot;</span><span class="p">]:</span>
</span><span id="L-3028"><a href="#L-3028"><span class="linenos">3028</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;```</span><span class="si">{</span><span class="n">help_md</span><span class="si">}</span><span class="s2">```&quot;</span>
</span><span id="L-3029"><a href="#L-3029"><span class="linenos">3029</span></a>
</span><span id="L-3030"><a href="#L-3030"><span class="linenos">3030</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__choices&quot;</span><span class="p">]:</span>
</span><span id="L-3031"><a href="#L-3031"><span class="linenos">3031</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;```</span><span class="si">{</span><span class="n">help_md</span><span class="si">}</span><span class="s2">```&quot;</span>
</span><span id="L-3032"><a href="#L-3032"><span class="linenos">3032</span></a>
</span><span id="L-3033"><a href="#L-3033"><span class="linenos">3033</span></a>                    <span class="c1"># Output variables</span>
</span><span id="L-3034"><a href="#L-3034"><span class="linenos">3034</span></a>                    <span class="n">output_header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">level_md</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="L-3035"><a href="#L-3035"><span class="linenos">3035</span></a>                    <span class="n">output_header_table</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="L-3036"><a href="#L-3036"><span class="linenos">3036</span></a>                        <span class="sa">f</span><span class="s2">&quot;#</span><span class="si">{</span><span class="n">level_md</span><span class="si">}</span><span class="s2"> Table of contents</span><span class="se">\n\n</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="L-3037"><a href="#L-3037"><span class="linenos">3037</span></a>                    <span class="p">)</span>
</span><span id="L-3038"><a href="#L-3038"><span class="linenos">3038</span></a>                    <span class="n">output_content</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">help_md</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="L-3039"><a href="#L-3039"><span class="linenos">3039</span></a>
</span><span id="L-3040"><a href="#L-3040"><span class="linenos">3040</span></a>                <span class="c1"># HTML</span>
</span><span id="L-3041"><a href="#L-3041"><span class="linenos">3041</span></a>                <span class="k">elif</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;html&quot;</span><span class="p">:</span>
</span><span id="L-3042"><a href="#L-3042"><span class="linenos">3042</span></a>
</span><span id="L-3043"><a href="#L-3043"><span class="linenos">3043</span></a>                    <span class="c1"># Level</span>
</span><span id="L-3044"><a href="#L-3044"><span class="linenos">3044</span></a>                    <span class="n">level_html</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;H</span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-3045"><a href="#L-3045"><span class="linenos">3045</span></a>
</span><span id="L-3046"><a href="#L-3046"><span class="linenos">3046</span></a>                    <span class="c1"># Help content from type</span>
</span><span id="L-3047"><a href="#L-3047"><span class="linenos">3047</span></a>                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-3048"><a href="#L-3048"><span class="linenos">3048</span></a>                        <span class="n">help_html</span> <span class="o">=</span> <span class="n">help_dict_content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
</span><span id="L-3049"><a href="#L-3049"><span class="linenos">3049</span></a>                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-3050"><a href="#L-3050"><span class="linenos">3050</span></a>                        <span class="n">help_dict_content</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">help_dict_content</span><span class="p">)</span>
</span><span id="L-3051"><a href="#L-3051"><span class="linenos">3051</span></a>                        <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples_code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples&quot;</span><span class="p">]:</span>
</span><span id="L-3052"><a href="#L-3052"><span class="linenos">3052</span></a>                            <span class="n">help_html</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">)</span>
</span><span id="L-3053"><a href="#L-3053"><span class="linenos">3053</span></a>                            <span class="n">section_break</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-3054"><a href="#L-3054"><span class="linenos">3054</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3055"><a href="#L-3055"><span class="linenos">3055</span></a>                            <span class="n">help_html</span> <span class="o">=</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">)</span>
</span><span id="L-3056"><a href="#L-3056"><span class="linenos">3056</span></a>                            <span class="n">section_break</span> <span class="o">=</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
</span><span id="L-3057"><a href="#L-3057"><span class="linenos">3057</span></a>                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-3058"><a href="#L-3058"><span class="linenos">3058</span></a>                        <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples_code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples&quot;</span><span class="p">]:</span>
</span><span id="L-3059"><a href="#L-3059"><span class="linenos">3059</span></a>                            <span class="k">for</span> <span class="n">example_header</span> <span class="ow">in</span> <span class="n">help_dict_content</span><span class="p">:</span>
</span><span id="L-3060"><a href="#L-3060"><span class="linenos">3060</span></a>                                <span class="n">help_html</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">example_header</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-3061"><a href="#L-3061"><span class="linenos">3061</span></a>                                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="L-3062"><a href="#L-3062"><span class="linenos">3062</span></a>                                    <span class="n">help_dict_content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">example_header</span><span class="p">,</span> <span class="p">[]),</span> <span class="nb">list</span>
</span><span id="L-3063"><a href="#L-3063"><span class="linenos">3063</span></a>                                <span class="p">):</span>
</span><span id="L-3064"><a href="#L-3064"><span class="linenos">3064</span></a>                                    <span class="n">help_html</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="L-3065"><a href="#L-3065"><span class="linenos">3065</span></a>                                        <span class="n">help_dict_content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">example_header</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="L-3066"><a href="#L-3066"><span class="linenos">3066</span></a>                                    <span class="p">)</span>
</span><span id="L-3067"><a href="#L-3067"><span class="linenos">3067</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="L-3068"><a href="#L-3068"><span class="linenos">3068</span></a>                                    <span class="n">help_html</span> <span class="o">+=</span> <span class="n">help_dict_content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="L-3069"><a href="#L-3069"><span class="linenos">3069</span></a>                                        <span class="n">example_header</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-3070"><a href="#L-3070"><span class="linenos">3070</span></a>                                    <span class="p">)</span>
</span><span id="L-3071"><a href="#L-3071"><span class="linenos">3071</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3072"><a href="#L-3072"><span class="linenos">3072</span></a>                        <span class="n">help_html</span> <span class="o">=</span> <span class="n">help_dict_content</span>
</span><span id="L-3073"><a href="#L-3073"><span class="linenos">3073</span></a>
</span><span id="L-3074"><a href="#L-3074"><span class="linenos">3074</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples_code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples&quot;</span><span class="p">]:</span>
</span><span id="L-3075"><a href="#L-3075"><span class="linenos">3075</span></a>                        <span class="n">help_html</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&lt;xmp&gt;</span><span class="si">{</span><span class="n">help_html</span><span class="si">}</span><span class="s2">&lt;/xmp&gt;&quot;</span>
</span><span id="L-3076"><a href="#L-3076"><span class="linenos">3076</span></a>
</span><span id="L-3077"><a href="#L-3077"><span class="linenos">3077</span></a>                    <span class="c1"># Output variables</span>
</span><span id="L-3078"><a href="#L-3078"><span class="linenos">3078</span></a>                    <span class="n">output_header</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="L-3079"><a href="#L-3079"><span class="linenos">3079</span></a>                        <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="n">level_html</span><span class="si">}</span><span class="s2"> id=&#39;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&#39;&gt;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&lt;/</span><span class="si">{</span><span class="n">level_html</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
</span><span id="L-3080"><a href="#L-3080"><span class="linenos">3080</span></a>                    <span class="p">)</span>
</span><span id="L-3081"><a href="#L-3081"><span class="linenos">3081</span></a>                    <span class="n">output_header_table</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="L-3082"><a href="#L-3082"><span class="linenos">3082</span></a><span class="s2">                    &lt;H</span><span class="si">{</span><span class="n">level</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&gt;Table of contents&lt;/</span><span class="si">{</span><span class="n">level_html</span><span class="si">}</span><span class="s2">&gt;</span>
</span><span id="L-3083"><a href="#L-3083"><span class="linenos">3083</span></a><span class="s2">                    </span><span class="si">{</span><span class="n">table</span><span class="si">}</span>
</span><span id="L-3084"><a href="#L-3084"><span class="linenos">3084</span></a><span class="s2">                    &lt;br&gt;</span>
</span><span id="L-3085"><a href="#L-3085"><span class="linenos">3085</span></a><span class="s2">                    &quot;&quot;&quot;</span>
</span><span id="L-3086"><a href="#L-3086"><span class="linenos">3086</span></a>                    <span class="n">output_content</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">help_html</span><span class="si">}</span><span class="s2">&lt;br&gt;&quot;</span>
</span><span id="L-3087"><a href="#L-3087"><span class="linenos">3087</span></a>
</span><span id="L-3088"><a href="#L-3088"><span class="linenos">3088</span></a>                <span class="c1"># Output section</span>
</span><span id="L-3089"><a href="#L-3089"><span class="linenos">3089</span></a>                <span class="n">output_section</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^__&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">section</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
</span><span id="L-3090"><a href="#L-3090"><span class="linenos">3090</span></a>
</span><span id="L-3091"><a href="#L-3091"><span class="linenos">3091</span></a>                <span class="c1"># Output construction</span>
</span><span id="L-3092"><a href="#L-3092"><span class="linenos">3092</span></a>                <span class="k">if</span> <span class="n">section</span> <span class="o">==</span> <span class="s2">&quot;__help&quot;</span><span class="p">:</span>
</span><span id="L-3093"><a href="#L-3093"><span class="linenos">3093</span></a>                    <span class="n">output</span> <span class="o">+=</span> <span class="n">output_header</span>
</span><span id="L-3094"><a href="#L-3094"><span class="linenos">3094</span></a>                    <span class="n">output</span> <span class="o">+=</span> <span class="n">output_content</span>
</span><span id="L-3095"><a href="#L-3095"><span class="linenos">3095</span></a>                    <span class="k">if</span> <span class="n">table</span> <span class="ow">and</span> <span class="n">level</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-3096"><a href="#L-3096"><span class="linenos">3096</span></a>                        <span class="n">output</span> <span class="o">+=</span> <span class="n">output_header_table</span>
</span><span id="L-3097"><a href="#L-3097"><span class="linenos">3097</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-3098"><a href="#L-3098"><span class="linenos">3098</span></a>                    <span class="n">output_section</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-3099"><a href="#L-3099"><span class="linenos">3099</span></a>                        <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^__&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">section</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
</span><span id="L-3100"><a href="#L-3100"><span class="linenos">3100</span></a>                    <span class="p">)</span>
</span><span id="L-3101"><a href="#L-3101"><span class="linenos">3101</span></a>                    <span class="n">output</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">output_section</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">section_break</span><span class="si">}{</span><span class="n">output_content</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-3102"><a href="#L-3102"><span class="linenos">3102</span></a>
</span><span id="L-3103"><a href="#L-3103"><span class="linenos">3103</span></a>    <span class="c1"># Output table construction</span>
</span><span id="L-3104"><a href="#L-3104"><span class="linenos">3104</span></a>    <span class="k">if</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;markdown&quot;</span><span class="p">:</span>
</span><span id="L-3105"><a href="#L-3105"><span class="linenos">3105</span></a>        <span class="n">output_table</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="L-3106"><a href="#L-3106"><span class="linenos">3106</span></a>            <span class="s2">&quot;   &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">level</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-3107"><a href="#L-3107"><span class="linenos">3107</span></a>            <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;- [</span><span class="si">{</span><span class="n">element</span><span class="si">}</span><span class="s2">](#</span><span class="si">{</span><span class="n">prefix</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-3108"><a href="#L-3108"><span class="linenos">3108</span></a>        <span class="p">)</span>
</span><span id="L-3109"><a href="#L-3109"><span class="linenos">3109</span></a>    <span class="k">elif</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;html&quot;</span><span class="p">:</span>
</span><span id="L-3110"><a href="#L-3110"><span class="linenos">3110</span></a>        <span class="n">output_table</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="L-3111"><a href="#L-3111"><span class="linenos">3111</span></a>            <span class="s2">&quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">level</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-3112"><a href="#L-3112"><span class="linenos">3112</span></a>            <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;- &lt;a href=&#39;#</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&#39;&gt;</span><span class="si">{</span><span class="n">element</span><span class="si">}</span><span class="s2">&lt;/a&gt;&lt;BR&gt;&quot;</span>
</span><span id="L-3113"><a href="#L-3113"><span class="linenos">3113</span></a>        <span class="p">)</span>
</span><span id="L-3114"><a href="#L-3114"><span class="linenos">3114</span></a>
</span><span id="L-3115"><a href="#L-3115"><span class="linenos">3115</span></a>    <span class="c1"># Recusivity to other sub-element</span>
</span><span id="L-3116"><a href="#L-3116"><span class="linenos">3116</span></a>    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="L-3117"><a href="#L-3117"><span class="linenos">3117</span></a>
</span><span id="L-3118"><a href="#L-3118"><span class="linenos">3118</span></a>        <span class="c1"># If element is a sub-element</span>
</span><span id="L-3119"><a href="#L-3119"><span class="linenos">3119</span></a>        <span class="k">if</span> <span class="n">element</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">section_list</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="L-3120"><a href="#L-3120"><span class="linenos">3120</span></a>            <span class="n">help_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="nb">dict</span>
</span><span id="L-3121"><a href="#L-3121"><span class="linenos">3121</span></a>        <span class="p">):</span>
</span><span id="L-3122"><a href="#L-3122"><span class="linenos">3122</span></a>
</span><span id="L-3123"><a href="#L-3123"><span class="linenos">3123</span></a>            <span class="c1"># output_tabl</span>
</span><span id="L-3124"><a href="#L-3124"><span class="linenos">3124</span></a>            <span class="n">output_table</span> <span class="o">+=</span> <span class="n">help_generation_from_dict</span><span class="p">(</span>
</span><span id="L-3125"><a href="#L-3125"><span class="linenos">3125</span></a>                <span class="n">element</span><span class="o">=</span><span class="n">element</span><span class="p">,</span>
</span><span id="L-3126"><a href="#L-3126"><span class="linenos">3126</span></a>                <span class="n">help_dict</span><span class="o">=</span><span class="n">help_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
</span><span id="L-3127"><a href="#L-3127"><span class="linenos">3127</span></a>                <span class="n">previous</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">previous</span><span class="si">}{</span><span class="n">element</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-3128"><a href="#L-3128"><span class="linenos">3128</span></a>                <span class="n">output_type</span><span class="o">=</span><span class="n">output_type</span><span class="p">,</span>
</span><span id="L-3129"><a href="#L-3129"><span class="linenos">3129</span></a>                <span class="n">level</span><span class="o">=</span><span class="n">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="L-3130"><a href="#L-3130"><span class="linenos">3130</span></a>                <span class="n">table</span><span class="o">=</span><span class="n">output_table</span><span class="p">,</span>
</span><span id="L-3131"><a href="#L-3131"><span class="linenos">3131</span></a>                <span class="n">generate_table</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3132"><a href="#L-3132"><span class="linenos">3132</span></a>                <span class="n">code_type</span><span class="o">=</span><span class="n">code_type</span><span class="p">,</span>
</span><span id="L-3133"><a href="#L-3133"><span class="linenos">3133</span></a>            <span class="p">)</span>
</span><span id="L-3134"><a href="#L-3134"><span class="linenos">3134</span></a>
</span><span id="L-3135"><a href="#L-3135"><span class="linenos">3135</span></a>            <span class="c1"># Add sub-element output</span>
</span><span id="L-3136"><a href="#L-3136"><span class="linenos">3136</span></a>            <span class="n">output</span> <span class="o">+=</span> <span class="n">help_generation_from_dict</span><span class="p">(</span>
</span><span id="L-3137"><a href="#L-3137"><span class="linenos">3137</span></a>                <span class="n">element</span><span class="o">=</span><span class="n">element</span><span class="p">,</span>
</span><span id="L-3138"><a href="#L-3138"><span class="linenos">3138</span></a>                <span class="n">help_dict</span><span class="o">=</span><span class="n">help_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
</span><span id="L-3139"><a href="#L-3139"><span class="linenos">3139</span></a>                <span class="n">previous</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">previous</span><span class="si">}{</span><span class="n">element</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-3140"><a href="#L-3140"><span class="linenos">3140</span></a>                <span class="n">output_type</span><span class="o">=</span><span class="n">output_type</span><span class="p">,</span>
</span><span id="L-3141"><a href="#L-3141"><span class="linenos">3141</span></a>                <span class="n">level</span><span class="o">=</span><span class="n">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="L-3142"><a href="#L-3142"><span class="linenos">3142</span></a>                <span class="n">table</span><span class="o">=</span><span class="n">output_table</span><span class="p">,</span>
</span><span id="L-3143"><a href="#L-3143"><span class="linenos">3143</span></a>                <span class="n">code_type</span><span class="o">=</span><span class="n">code_type</span><span class="p">,</span>
</span><span id="L-3144"><a href="#L-3144"><span class="linenos">3144</span></a>            <span class="p">)</span>
</span><span id="L-3145"><a href="#L-3145"><span class="linenos">3145</span></a>
</span><span id="L-3146"><a href="#L-3146"><span class="linenos">3146</span></a>    <span class="c1"># Return output</span>
</span><span id="L-3147"><a href="#L-3147"><span class="linenos">3147</span></a>    <span class="k">if</span> <span class="n">generate_table</span><span class="p">:</span>
</span><span id="L-3148"><a href="#L-3148"><span class="linenos">3148</span></a>        <span class="k">return</span> <span class="n">output_table</span>
</span><span id="L-3149"><a href="#L-3149"><span class="linenos">3149</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3150"><a href="#L-3150"><span class="linenos">3150</span></a>        <span class="k">return</span> <span class="n">output</span>
</span><span id="L-3151"><a href="#L-3151"><span class="linenos">3151</span></a>
</span><span id="L-3152"><a href="#L-3152"><span class="linenos">3152</span></a>
</span><span id="L-3153"><a href="#L-3153"><span class="linenos">3153</span></a><span class="k">def</span> <span class="nf">help_generation_from_json</span><span class="p">(</span>
</span><span id="L-3154"><a href="#L-3154"><span class="linenos">3154</span></a>    <span class="n">help_json_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-3155"><a href="#L-3155"><span class="linenos">3155</span></a>    <span class="n">output_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;markdown&quot;</span><span class="p">,</span>
</span><span id="L-3156"><a href="#L-3156"><span class="linenos">3156</span></a>    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Help&quot;</span><span class="p">,</span>
</span><span id="L-3157"><a href="#L-3157"><span class="linenos">3157</span></a>    <span class="n">code_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="L-3158"><a href="#L-3158"><span class="linenos">3158</span></a>    <span class="n">include_toc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-3159"><a href="#L-3159"><span class="linenos">3159</span></a><span class="p">):</span>
</span><span id="L-3160"><a href="#L-3160"><span class="linenos">3160</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3161"><a href="#L-3161"><span class="linenos">3161</span></a><span class="sd">    The `help_generation_from_json` function reads a JSON file containing help information, converts it</span>
</span><span id="L-3162"><a href="#L-3162"><span class="linenos">3162</span></a><span class="sd">    into a specified output format, and returns the generated help content.</span>
</span><span id="L-3163"><a href="#L-3163"><span class="linenos">3163</span></a>
</span><span id="L-3164"><a href="#L-3164"><span class="linenos">3164</span></a><span class="sd">    :param help_json_file: The `help_json_file` parameter is a string that should contain the file path</span>
</span><span id="L-3165"><a href="#L-3165"><span class="linenos">3165</span></a><span class="sd">    to the JSON file from which help information will be extracted. This JSON file likely contains</span>
</span><span id="L-3166"><a href="#L-3166"><span class="linenos">3166</span></a><span class="sd">    structured data that will be used to generate the help content</span>
</span><span id="L-3167"><a href="#L-3167"><span class="linenos">3167</span></a><span class="sd">    :type help_json_file: str</span>
</span><span id="L-3168"><a href="#L-3168"><span class="linenos">3168</span></a><span class="sd">    :param output_type: The `output_type` parameter in the `help_generation_from_json` function</span>
</span><span id="L-3169"><a href="#L-3169"><span class="linenos">3169</span></a><span class="sd">    specifies the format in which the generated help content will be output. By default, it is set to</span>
</span><span id="L-3170"><a href="#L-3170"><span class="linenos">3170</span></a><span class="sd">    &quot;markdown&quot;, which means the help content will be formatted using Markdown syntax. However, you can</span>
</span><span id="L-3171"><a href="#L-3171"><span class="linenos">3171</span></a><span class="sd">    also specify other output formats such, defaults to markdown</span>
</span><span id="L-3172"><a href="#L-3172"><span class="linenos">3172</span></a><span class="sd">    :type output_type: str (optional)</span>
</span><span id="L-3173"><a href="#L-3173"><span class="linenos">3173</span></a><span class="sd">    :param title: The `title` parameter in the `help_generation_from_json` function is a string that</span>
</span><span id="L-3174"><a href="#L-3174"><span class="linenos">3174</span></a><span class="sd">    represents the title of the help documentation that will be generated. It is used to provide a title</span>
</span><span id="L-3175"><a href="#L-3175"><span class="linenos">3175</span></a><span class="sd">    for the help content to make it more organized and informative. By default, the title is set to</span>
</span><span id="L-3176"><a href="#L-3176"><span class="linenos">3176</span></a><span class="sd">    &quot;Help&quot;, defaults to Help (optional)</span>
</span><span id="L-3177"><a href="#L-3177"><span class="linenos">3177</span></a><span class="sd">    :param code_type: The `code_type` parameter in the `help_generation_from_json` function is used to</span>
</span><span id="L-3178"><a href="#L-3178"><span class="linenos">3178</span></a><span class="sd">    specify the type of code examples that will be included in the generated help content. This</span>
</span><span id="L-3179"><a href="#L-3179"><span class="linenos">3179</span></a><span class="sd">    parameter allows you to define the format or language of the code examples to be displayed alongside</span>
</span><span id="L-3180"><a href="#L-3180"><span class="linenos">3180</span></a><span class="sd">    the help information extracted from the JSON</span>
</span><span id="L-3181"><a href="#L-3181"><span class="linenos">3181</span></a><span class="sd">    :type code_type: str</span>
</span><span id="L-3182"><a href="#L-3182"><span class="linenos">3182</span></a><span class="sd">    :param include_toc: The `include_toc` parameter in the `help_generation_from_json` function is a</span>
</span><span id="L-3183"><a href="#L-3183"><span class="linenos">3183</span></a><span class="sd">    boolean flag that determines whether a table of contents (TOC) should be included in the generated</span>
</span><span id="L-3184"><a href="#L-3184"><span class="linenos">3184</span></a><span class="sd">    help content. If `include_toc` is set to `True`, a table of contents will be generated based,</span>
</span><span id="L-3185"><a href="#L-3185"><span class="linenos">3185</span></a><span class="sd">    defaults to False</span>
</span><span id="L-3186"><a href="#L-3186"><span class="linenos">3186</span></a><span class="sd">    :type include_toc: bool (optional)</span>
</span><span id="L-3187"><a href="#L-3187"><span class="linenos">3187</span></a><span class="sd">    :return: The function `help_generation_from_json` returns the generated help content based on the</span>
</span><span id="L-3188"><a href="#L-3188"><span class="linenos">3188</span></a><span class="sd">    information stored in the JSON file provided as input.</span>
</span><span id="L-3189"><a href="#L-3189"><span class="linenos">3189</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-3190"><a href="#L-3190"><span class="linenos">3190</span></a>
</span><span id="L-3191"><a href="#L-3191"><span class="linenos">3191</span></a>    <span class="c1"># Read JSON file</span>
</span><span id="L-3192"><a href="#L-3192"><span class="linenos">3192</span></a>    <span class="n">help_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3193"><a href="#L-3193"><span class="linenos">3193</span></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">help_json_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-3194"><a href="#L-3194"><span class="linenos">3194</span></a>        <span class="n">help_dict</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span id="L-3195"><a href="#L-3195"><span class="linenos">3195</span></a>
</span><span id="L-3196"><a href="#L-3196"><span class="linenos">3196</span></a>    <span class="c1"># Generate help table of content</span>
</span><span id="L-3197"><a href="#L-3197"><span class="linenos">3197</span></a>    <span class="k">if</span> <span class="n">include_toc</span><span class="p">:</span>
</span><span id="L-3198"><a href="#L-3198"><span class="linenos">3198</span></a>        <span class="n">output_table</span> <span class="o">=</span> <span class="n">help_generation_from_dict</span><span class="p">(</span>
</span><span id="L-3199"><a href="#L-3199"><span class="linenos">3199</span></a>            <span class="n">element</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
</span><span id="L-3200"><a href="#L-3200"><span class="linenos">3200</span></a>            <span class="n">help_dict</span><span class="o">=</span><span class="n">help_dict</span><span class="p">,</span>
</span><span id="L-3201"><a href="#L-3201"><span class="linenos">3201</span></a>            <span class="n">previous</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="L-3202"><a href="#L-3202"><span class="linenos">3202</span></a>            <span class="n">output_type</span><span class="o">=</span><span class="n">output_type</span><span class="p">,</span>
</span><span id="L-3203"><a href="#L-3203"><span class="linenos">3203</span></a>            <span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="L-3204"><a href="#L-3204"><span class="linenos">3204</span></a>            <span class="n">generate_table</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3205"><a href="#L-3205"><span class="linenos">3205</span></a>            <span class="n">code_type</span><span class="o">=</span><span class="n">code_type</span><span class="p">,</span>
</span><span id="L-3206"><a href="#L-3206"><span class="linenos">3206</span></a>        <span class="p">)</span>
</span><span id="L-3207"><a href="#L-3207"><span class="linenos">3207</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3208"><a href="#L-3208"><span class="linenos">3208</span></a>        <span class="n">output_table</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-3209"><a href="#L-3209"><span class="linenos">3209</span></a>
</span><span id="L-3210"><a href="#L-3210"><span class="linenos">3210</span></a>    <span class="c1"># Generate help</span>
</span><span id="L-3211"><a href="#L-3211"><span class="linenos">3211</span></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">help_generation_from_dict</span><span class="p">(</span>
</span><span id="L-3212"><a href="#L-3212"><span class="linenos">3212</span></a>        <span class="n">element</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
</span><span id="L-3213"><a href="#L-3213"><span class="linenos">3213</span></a>        <span class="n">help_dict</span><span class="o">=</span><span class="n">help_dict</span><span class="p">,</span>
</span><span id="L-3214"><a href="#L-3214"><span class="linenos">3214</span></a>        <span class="n">previous</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="L-3215"><a href="#L-3215"><span class="linenos">3215</span></a>        <span class="n">output_type</span><span class="o">=</span><span class="n">output_type</span><span class="p">,</span>
</span><span id="L-3216"><a href="#L-3216"><span class="linenos">3216</span></a>        <span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="L-3217"><a href="#L-3217"><span class="linenos">3217</span></a>        <span class="n">table</span><span class="o">=</span><span class="n">output_table</span><span class="p">,</span>
</span><span id="L-3218"><a href="#L-3218"><span class="linenos">3218</span></a>        <span class="n">code_type</span><span class="o">=</span><span class="n">code_type</span><span class="p">,</span>
</span><span id="L-3219"><a href="#L-3219"><span class="linenos">3219</span></a>    <span class="p">)</span>
</span><span id="L-3220"><a href="#L-3220"><span class="linenos">3220</span></a>
</span><span id="L-3221"><a href="#L-3221"><span class="linenos">3221</span></a>    <span class="c1"># Return help</span>
</span><span id="L-3222"><a href="#L-3222"><span class="linenos">3222</span></a>    <span class="k">return</span> <span class="n">output</span>
</span><span id="L-3223"><a href="#L-3223"><span class="linenos">3223</span></a>
</span><span id="L-3224"><a href="#L-3224"><span class="linenos">3224</span></a>
</span><span id="L-3225"><a href="#L-3225"><span class="linenos">3225</span></a><span class="k">class</span> <span class="nc">RawTextArgumentDefaultsHelpFormatter</span><span class="p">(</span>
</span><span id="L-3226"><a href="#L-3226"><span class="linenos">3226</span></a>    <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentDefaultsHelpFormatter</span><span class="p">,</span> <span class="n">argparse</span><span class="o">.</span><span class="n">RawTextHelpFormatter</span>
</span><span id="L-3227"><a href="#L-3227"><span class="linenos">3227</span></a><span class="p">):</span>
</span><span id="L-3228"><a href="#L-3228"><span class="linenos">3228</span></a>    <span class="k">pass</span>
</span><span id="L-3229"><a href="#L-3229"><span class="linenos">3229</span></a>
</span><span id="L-3230"><a href="#L-3230"><span class="linenos">3230</span></a>
</span><span id="L-3231"><a href="#L-3231"><span class="linenos">3231</span></a><span class="k">def</span> <span class="nf">help_header</span><span class="p">(</span><span class="n">setup</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-3232"><a href="#L-3232"><span class="linenos">3232</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3233"><a href="#L-3233"><span class="linenos">3233</span></a><span class="sd">    The `help_header` function generates a header for the help documentation based on the metadata</span>
</span><span id="L-3234"><a href="#L-3234"><span class="linenos">3234</span></a><span class="sd">    information provided in the setup file.</span>
</span><span id="L-3235"><a href="#L-3235"><span class="linenos">3235</span></a>
</span><span id="L-3236"><a href="#L-3236"><span class="linenos">3236</span></a><span class="sd">    :param setup: The `setup` parameter is a string that represents the path to a configuration file.</span>
</span><span id="L-3237"><a href="#L-3237"><span class="linenos">3237</span></a><span class="sd">    This file contains metadata about the program, such as its name, version, description, and long</span>
</span><span id="L-3238"><a href="#L-3238"><span class="linenos">3238</span></a><span class="sd">    description content type</span>
</span><span id="L-3239"><a href="#L-3239"><span class="linenos">3239</span></a><span class="sd">    :type setup: str</span>
</span><span id="L-3240"><a href="#L-3240"><span class="linenos">3240</span></a><span class="sd">    :return: The function `help_header` returns a string that represents the header for the help</span>
</span><span id="L-3241"><a href="#L-3241"><span class="linenos">3241</span></a><span class="sd">    documentation. The header includes the program name, version, authors, and description.</span>
</span><span id="L-3242"><a href="#L-3242"><span class="linenos">3242</span></a>
</span><span id="L-3243"><a href="#L-3243"><span class="linenos">3243</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-3244"><a href="#L-3244"><span class="linenos">3244</span></a>
</span><span id="L-3245"><a href="#L-3245"><span class="linenos">3245</span></a>    <span class="c1"># Config Parser</span>
</span><span id="L-3246"><a href="#L-3246"><span class="linenos">3246</span></a>    <span class="c1"># setup = &quot;/tmp/config&quot;</span>
</span><span id="L-3247"><a href="#L-3247"><span class="linenos">3247</span></a>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">setup</span><span class="p">):</span>
</span><span id="L-3248"><a href="#L-3248"><span class="linenos">3248</span></a>        <span class="n">cf</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="p">()</span>
</span><span id="L-3249"><a href="#L-3249"><span class="linenos">3249</span></a>        <span class="n">cf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">setup</span><span class="p">)</span>
</span><span id="L-3250"><a href="#L-3250"><span class="linenos">3250</span></a>        <span class="n">prog_name</span> <span class="o">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="s2">&quot;Unknown Program&quot;</span><span class="p">)</span>
</span><span id="L-3251"><a href="#L-3251"><span class="linenos">3251</span></a>        <span class="n">prog_version</span> <span class="o">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="s2">&quot;0.0.0&quot;</span><span class="p">)</span>
</span><span id="L-3252"><a href="#L-3252"><span class="linenos">3252</span></a>        <span class="n">prog_authors</span> <span class="o">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="s2">&quot;0.0.0&quot;</span><span class="p">)</span>
</span><span id="L-3253"><a href="#L-3253"><span class="linenos">3253</span></a>        <span class="n">prog_description</span> <span class="o">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="L-3254"><a href="#L-3254"><span class="linenos">3254</span></a>            <span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="s2">&quot;No description available.&quot;</span>
</span><span id="L-3255"><a href="#L-3255"><span class="linenos">3255</span></a>        <span class="p">)</span>
</span><span id="L-3256"><a href="#L-3256"><span class="linenos">3256</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3257"><a href="#L-3257"><span class="linenos">3257</span></a>        <span class="c1"># meta</span>
</span><span id="L-3258"><a href="#L-3258"><span class="linenos">3258</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-3259"><a href="#L-3259"><span class="linenos">3259</span></a>            <span class="n">meta</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">(</span><span class="s2">&quot;howard-ann&quot;</span><span class="p">)</span>
</span><span id="L-3260"><a href="#L-3260"><span class="linenos">3260</span></a>            <span class="n">prog_name</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">)</span>
</span><span id="L-3261"><a href="#L-3261"><span class="linenos">3261</span></a>            <span class="n">prog_version</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Version&quot;</span><span class="p">)</span>
</span><span id="L-3262"><a href="#L-3262"><span class="linenos">3262</span></a>            <span class="n">prog_authors</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;author&quot;</span><span class="p">)</span>
</span><span id="L-3263"><a href="#L-3263"><span class="linenos">3263</span></a>            <span class="n">prog_description</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Summary&quot;</span><span class="p">)</span>
</span><span id="L-3264"><a href="#L-3264"><span class="linenos">3264</span></a>        <span class="c1"># Default</span>
</span><span id="L-3265"><a href="#L-3265"><span class="linenos">3265</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-3266"><a href="#L-3266"><span class="linenos">3266</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Erreur : </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-3267"><a href="#L-3267"><span class="linenos">3267</span></a>            <span class="n">prog_name</span> <span class="o">=</span> <span class="s2">&quot;HOWARD&quot;</span>
</span><span id="L-3268"><a href="#L-3268"><span class="linenos">3268</span></a>            <span class="n">prog_version</span> <span class="o">=</span> <span class="s2">&quot;0.0.0&quot;</span>
</span><span id="L-3269"><a href="#L-3269"><span class="linenos">3269</span></a>            <span class="n">prog_authors</span> <span class="o">=</span> <span class="s2">&quot;ALB&quot;</span>
</span><span id="L-3270"><a href="#L-3270"><span class="linenos">3270</span></a>            <span class="n">prog_description</span> <span class="o">=</span> <span class="s2">&quot;HOWARD - Highly Open Workflow for Annotation &amp; Ranking toward genomic variant Discovery&quot;</span>
</span><span id="L-3271"><a href="#L-3271"><span class="linenos">3271</span></a>
</span><span id="L-3272"><a href="#L-3272"><span class="linenos">3272</span></a>    <span class="c1"># Logo</span>
</span><span id="L-3273"><a href="#L-3273"><span class="linenos">3273</span></a>    <span class="kn">import</span> <span class="nn">pyfiglet</span>
</span><span id="L-3274"><a href="#L-3274"><span class="linenos">3274</span></a>
</span><span id="L-3275"><a href="#L-3275"><span class="linenos">3275</span></a>    <span class="n">ascii_logo</span> <span class="o">=</span> <span class="n">pyfiglet</span><span class="o">.</span><span class="n">figlet_format</span><span class="p">(</span>
</span><span id="L-3276"><a href="#L-3276"><span class="linenos">3276</span></a>        <span class="n">prog_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span><span id="L-3277"><a href="#L-3277"><span class="linenos">3277</span></a>    <span class="p">)</span>  <span class="c1"># , font=&quot;slant&quot;)</span>
</span><span id="L-3278"><a href="#L-3278"><span class="linenos">3278</span></a>
</span><span id="L-3279"><a href="#L-3279"><span class="linenos">3279</span></a>    <span class="c1"># Header</span>
</span><span id="L-3280"><a href="#L-3280"><span class="linenos">3280</span></a>    <span class="n">header</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">ascii_logo</span><span class="si">}{</span><span class="n">prog_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">::</span><span class="si">{</span><span class="n">prog_version</span><span class="si">}</span><span class="s2"> [</span><span class="si">{</span><span class="n">prog_authors</span><span class="si">}</span><span class="s2">]</span><span class="se">\n</span><span class="si">{</span><span class="n">prog_description</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="L-3281"><a href="#L-3281"><span class="linenos">3281</span></a>
</span><span id="L-3282"><a href="#L-3282"><span class="linenos">3282</span></a>    <span class="c1"># Return</span>
</span><span id="L-3283"><a href="#L-3283"><span class="linenos">3283</span></a>    <span class="k">return</span> <span class="n">header</span>
</span><span id="L-3284"><a href="#L-3284"><span class="linenos">3284</span></a>
</span><span id="L-3285"><a href="#L-3285"><span class="linenos">3285</span></a>
</span><span id="L-3286"><a href="#L-3286"><span class="linenos">3286</span></a><span class="k">def</span> <span class="nf">help_generation</span><span class="p">(</span>
</span><span id="L-3287"><a href="#L-3287"><span class="linenos">3287</span></a>    <span class="n">arguments_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-3288"><a href="#L-3288"><span class="linenos">3288</span></a>    <span class="n">parser</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-3289"><a href="#L-3289"><span class="linenos">3289</span></a>    <span class="n">output_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;parser&quot;</span><span class="p">,</span>
</span><span id="L-3290"><a href="#L-3290"><span class="linenos">3290</span></a><span class="p">):</span>
</span><span id="L-3291"><a href="#L-3291"><span class="linenos">3291</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3292"><a href="#L-3292"><span class="linenos">3292</span></a><span class="sd">    The `help_generation` function generates a parser object for command-line arguments, as well as</span>
</span><span id="L-3293"><a href="#L-3293"><span class="linenos">3293</span></a><span class="sd">    markdown or HTML help documentation for those arguments.</span>
</span><span id="L-3294"><a href="#L-3294"><span class="linenos">3294</span></a>
</span><span id="L-3295"><a href="#L-3295"><span class="linenos">3295</span></a><span class="sd">    :param arguments_dict: A dictionary containing the arguments for the function. It has three keys:</span>
</span><span id="L-3296"><a href="#L-3296"><span class="linenos">3296</span></a><span class="sd">    :type arguments_dict: dict</span>
</span><span id="L-3297"><a href="#L-3297"><span class="linenos">3297</span></a><span class="sd">    :param parser: The `parser` parameter is an instance of the `argparse.ArgumentParser` class. It is</span>
</span><span id="L-3298"><a href="#L-3298"><span class="linenos">3298</span></a><span class="sd">    used to define the command-line interface and parse the command-line arguments. If no `parser` is</span>
</span><span id="L-3299"><a href="#L-3299"><span class="linenos">3299</span></a><span class="sd">    provided, a new instance of `argparse.ArgumentParser` will be created</span>
</span><span id="L-3300"><a href="#L-3300"><span class="linenos">3300</span></a><span class="sd">    :param setup: The `setup` parameter is a string that represents the path to a configuration file.</span>
</span><span id="L-3301"><a href="#L-3301"><span class="linenos">3301</span></a><span class="sd">    This file contains metadata about the program, such as its name, version, description, and long</span>
</span><span id="L-3302"><a href="#L-3302"><span class="linenos">3302</span></a><span class="sd">    description content type</span>
</span><span id="L-3303"><a href="#L-3303"><span class="linenos">3303</span></a><span class="sd">    :type setup: str</span>
</span><span id="L-3304"><a href="#L-3304"><span class="linenos">3304</span></a><span class="sd">    :param output_type: The `output_type` parameter determines the format of the output. It can be one</span>
</span><span id="L-3305"><a href="#L-3305"><span class="linenos">3305</span></a><span class="sd">    of the following values:, defaults to parser</span>
</span><span id="L-3306"><a href="#L-3306"><span class="linenos">3306</span></a><span class="sd">    :type output_type: str (optional)</span>
</span><span id="L-3307"><a href="#L-3307"><span class="linenos">3307</span></a><span class="sd">    :return: The function `help_generation` returns different outputs based on the value of the</span>
</span><span id="L-3308"><a href="#L-3308"><span class="linenos">3308</span></a><span class="sd">    `output_type` parameter.</span>
</span><span id="L-3309"><a href="#L-3309"><span class="linenos">3309</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-3310"><a href="#L-3310"><span class="linenos">3310</span></a>
</span><span id="L-3311"><a href="#L-3311"><span class="linenos">3311</span></a>    <span class="c1"># Arguments</span>
</span><span id="L-3312"><a href="#L-3312"><span class="linenos">3312</span></a>    <span class="n">arguments</span> <span class="o">=</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;arguments&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-3313"><a href="#L-3313"><span class="linenos">3313</span></a>    <span class="n">commands_arguments</span> <span class="o">=</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;commands_arguments&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-3314"><a href="#L-3314"><span class="linenos">3314</span></a>    <span class="n">shared_arguments</span> <span class="o">=</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;shared_arguments&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-3315"><a href="#L-3315"><span class="linenos">3315</span></a>
</span><span id="L-3316"><a href="#L-3316"><span class="linenos">3316</span></a>    <span class="c1"># Parser default</span>
</span><span id="L-3317"><a href="#L-3317"><span class="linenos">3317</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">parser</span><span class="p">:</span>
</span><span id="L-3318"><a href="#L-3318"><span class="linenos">3318</span></a>        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
</span><span id="L-3319"><a href="#L-3319"><span class="linenos">3319</span></a>
</span><span id="L-3320"><a href="#L-3320"><span class="linenos">3320</span></a>    <span class="c1"># Parser information</span>
</span><span id="L-3321"><a href="#L-3321"><span class="linenos">3321</span></a>    <span class="n">parser</span><span class="o">.</span><span class="n">prog</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">(</span><span class="s2">&quot;howard-ann&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-3322"><a href="#L-3322"><span class="linenos">3322</span></a>    <span class="n">parser</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-3323"><a href="#L-3323"><span class="linenos">3323</span></a>    <span class="n">parser</span><span class="o">.</span><span class="n">epilog</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-3324"><a href="#L-3324"><span class="linenos">3324</span></a>        <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Usage examples:</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-3325"><a href="#L-3325"><span class="linenos">3325</span></a>        <span class="o">+</span> <span class="s2">&quot;&quot;&quot;   howard process --input=tests/data/example.vcf.gz --output=/tmp/example.annotated.vcf.gz --param=config/param.json </span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="L-3326"><a href="#L-3326"><span class="linenos">3326</span></a>        <span class="o">+</span> <span class="s2">&quot;&quot;&quot;   howard annotation --input=tests/data/example.vcf.gz --output=/tmp/example.howard.vcf.gz --annotations=&#39;tests/databases/annotations/current/hg19/dbnsfp42a.parquet,tests/databases/annotations/current/hg19/gnomad211_genome.parquet&#39; </span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="L-3327"><a href="#L-3327"><span class="linenos">3327</span></a>        <span class="o">+</span> <span class="s2">&quot;&quot;&quot;   howard calculation --input=tests/data/example.full.vcf --output=/tmp/example.calculation.tsv --calculations=&#39;vartype&#39; </span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="L-3328"><a href="#L-3328"><span class="linenos">3328</span></a>        <span class="o">+</span> <span class="s2">&quot;&quot;&quot;   howard prioritization --input=tests/data/example.vcf.gz --output=/tmp/example.prioritized.vcf.gz --prioritization_config=config/prioritization_profiles.json --prioritizations=&#39;default,GERMLINE&#39; </span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="L-3329"><a href="#L-3329"><span class="linenos">3329</span></a>        <span class="o">+</span> <span class="s2">&quot;&quot;&quot;   howard query --input=tests/data/example.vcf.gz --explode_infos --query=&#39;SELECT &quot;#CHROM&quot;, POS, REF, ALT, &quot;DP&quot;, &quot;CLNSIG&quot;, sample2, sample3 FROM variants WHERE &quot;DP&quot; &gt;= 50 OR &quot;CLNSIG&quot; NOT NULL ORDER BY &quot;CLNSIG&quot; DESC, &quot;DP&quot; DESC&#39; </span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="L-3330"><a href="#L-3330"><span class="linenos">3330</span></a>        <span class="o">+</span> <span class="s2">&quot;&quot;&quot;   howard stats --input=tests/data/example.vcf.gz </span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="L-3331"><a href="#L-3331"><span class="linenos">3331</span></a>        <span class="o">+</span> <span class="s2">&quot;&quot;&quot;   howard convert --input=tests/data/example.vcf.gz --output=/tmp/example.tsv --explode_infos &amp;&amp; cat /tmp/example.tsv </span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="L-3332"><a href="#L-3332"><span class="linenos">3332</span></a>    <span class="p">)</span>
</span><span id="L-3333"><a href="#L-3333"><span class="linenos">3333</span></a>    <span class="n">parser</span><span class="o">.</span><span class="n">formatter_class</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">RawTextHelpFormatter</span>
</span><span id="L-3334"><a href="#L-3334"><span class="linenos">3334</span></a>
</span><span id="L-3335"><a href="#L-3335"><span class="linenos">3335</span></a>    <span class="c1"># Optionals</span>
</span><span id="L-3336"><a href="#L-3336"><span class="linenos">3336</span></a>    <span class="n">parser</span><span class="o">.</span><span class="n">_optionals</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Shared arguments&quot;</span>
</span><span id="L-3337"><a href="#L-3337"><span class="linenos">3337</span></a>
</span><span id="L-3338"><a href="#L-3338"><span class="linenos">3338</span></a>    <span class="c1"># Sub parser</span>
</span><span id="L-3339"><a href="#L-3339"><span class="linenos">3339</span></a>    <span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Tools&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;command&quot;</span><span class="p">)</span>
</span><span id="L-3340"><a href="#L-3340"><span class="linenos">3340</span></a>
</span><span id="L-3341"><a href="#L-3341"><span class="linenos">3341</span></a>    <span class="c1"># Help options</span>
</span><span id="L-3342"><a href="#L-3342"><span class="linenos">3342</span></a>    <span class="n">options_md</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-3343"><a href="#L-3343"><span class="linenos">3343</span></a>    <span class="n">options_html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-3344"><a href="#L-3344"><span class="linenos">3344</span></a>
</span><span id="L-3345"><a href="#L-3345"><span class="linenos">3345</span></a>    <span class="c1"># Options for markdown</span>
</span><span id="L-3346"><a href="#L-3346"><span class="linenos">3346</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;# HOWARD Help&quot;</span>
</span><span id="L-3347"><a href="#L-3347"><span class="linenos">3347</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="L-3348"><a href="#L-3348"><span class="linenos">3348</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;## Introduction&quot;</span>
</span><span id="L-3349"><a href="#L-3349"><span class="linenos">3349</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="L-3350"><a href="#L-3350"><span class="linenos">3350</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;&lt;!--TOC--&gt;&quot;</span>
</span><span id="L-3351"><a href="#L-3351"><span class="linenos">3351</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="L-3352"><a href="#L-3352"><span class="linenos">3352</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="n">parser</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-3353"><a href="#L-3353"><span class="linenos">3353</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
</span><span id="L-3354"><a href="#L-3354"><span class="linenos">3354</span></a>        <span class="sa">r</span><span class="s2">&quot;&gt; $&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">epilog</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;   &quot;</span><span class="p">,</span> <span class="s2">&quot;&gt; &quot;</span><span class="p">)</span>
</span><span id="L-3355"><a href="#L-3355"><span class="linenos">3355</span></a>    <span class="p">)</span>
</span><span id="L-3356"><a href="#L-3356"><span class="linenos">3356</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="L-3357"><a href="#L-3357"><span class="linenos">3357</span></a>
</span><span id="L-3358"><a href="#L-3358"><span class="linenos">3358</span></a>    <span class="c1"># Options for HTML</span>
</span><span id="L-3359"><a href="#L-3359"><span class="linenos">3359</span></a>    <span class="n">options_html</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&lt;H1&gt;HOWARD Help&lt;/h1&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-3360"><a href="#L-3360"><span class="linenos">3360</span></a>    <span class="n">options_html</span> <span class="o">+=</span> <span class="s2">&quot;&lt;p&gt;&quot;</span> <span class="o">+</span> <span class="n">parser</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/p&gt;&quot;</span>
</span><span id="L-3361"><a href="#L-3361"><span class="linenos">3361</span></a>    <span class="n">options_html</span> <span class="o">+=</span> <span class="n">parser</span><span class="o">.</span><span class="n">epilog</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
</span><span id="L-3362"><a href="#L-3362"><span class="linenos">3362</span></a>        <span class="s2">&quot;   &quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;</span>
</span><span id="L-3363"><a href="#L-3363"><span class="linenos">3363</span></a>    <span class="p">)</span>
</span><span id="L-3364"><a href="#L-3364"><span class="linenos">3364</span></a>
</span><span id="L-3365"><a href="#L-3365"><span class="linenos">3365</span></a>    <span class="c1"># Create commands arguments</span>
</span><span id="L-3366"><a href="#L-3366"><span class="linenos">3366</span></a>    <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">commands_arguments</span><span class="p">:</span>
</span><span id="L-3367"><a href="#L-3367"><span class="linenos">3367</span></a>
</span><span id="L-3368"><a href="#L-3368"><span class="linenos">3368</span></a>        <span class="c1"># Command description</span>
</span><span id="L-3369"><a href="#L-3369"><span class="linenos">3369</span></a>        <span class="n">command_description</span> <span class="o">=</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-3370"><a href="#L-3370"><span class="linenos">3370</span></a>        <span class="n">command_help</span> <span class="o">=</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-3371"><a href="#L-3371"><span class="linenos">3371</span></a>        <span class="n">command_epilog</span> <span class="o">=</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;epilog&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-3372"><a href="#L-3372"><span class="linenos">3372</span></a>
</span><span id="L-3373"><a href="#L-3373"><span class="linenos">3373</span></a>        <span class="c1"># Command parser</span>
</span><span id="L-3374"><a href="#L-3374"><span class="linenos">3374</span></a>        <span class="n">command_parser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span>
</span><span id="L-3375"><a href="#L-3375"><span class="linenos">3375</span></a>            <span class="n">command</span><span class="p">,</span>
</span><span id="L-3376"><a href="#L-3376"><span class="linenos">3376</span></a>            <span class="n">description</span><span class="o">=</span><span class="n">command_description</span><span class="p">,</span>
</span><span id="L-3377"><a href="#L-3377"><span class="linenos">3377</span></a>            <span class="n">help</span><span class="o">=</span><span class="n">command_help</span><span class="p">,</span>
</span><span id="L-3378"><a href="#L-3378"><span class="linenos">3378</span></a>            <span class="n">epilog</span><span class="o">=</span><span class="n">command_epilog</span><span class="p">,</span>
</span><span id="L-3379"><a href="#L-3379"><span class="linenos">3379</span></a>            <span class="c1"># formatter_class=argparse.RawTextHelpFormatter</span>
</span><span id="L-3380"><a href="#L-3380"><span class="linenos">3380</span></a>            <span class="c1"># formatter_class=argparse.ArgumentDefaultsHelpFormatter</span>
</span><span id="L-3381"><a href="#L-3381"><span class="linenos">3381</span></a>            <span class="n">formatter_class</span><span class="o">=</span><span class="n">RawTextArgumentDefaultsHelpFormatter</span><span class="p">,</span>
</span><span id="L-3382"><a href="#L-3382"><span class="linenos">3382</span></a>        <span class="p">)</span>
</span><span id="L-3383"><a href="#L-3383"><span class="linenos">3383</span></a>
</span><span id="L-3384"><a href="#L-3384"><span class="linenos">3384</span></a>        <span class="c1"># Markdown</span>
</span><span id="L-3385"><a href="#L-3385"><span class="linenos">3385</span></a>        <span class="n">options_md</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">command</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2"> tool</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-3386"><a href="#L-3386"><span class="linenos">3386</span></a>        <span class="n">options_md</span> <span class="o">+=</span> <span class="n">command_description</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-3387"><a href="#L-3387"><span class="linenos">3387</span></a>        <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="L-3388"><a href="#L-3388"><span class="linenos">3388</span></a>        <span class="n">options_md</span> <span class="o">+=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
</span><span id="L-3389"><a href="#L-3389"><span class="linenos">3389</span></a>            <span class="sa">r</span><span class="s2">&quot;&gt; $&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">command_epilog</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;   &quot;</span><span class="p">,</span> <span class="s2">&quot;&gt; &quot;</span><span class="p">)</span>
</span><span id="L-3390"><a href="#L-3390"><span class="linenos">3390</span></a>        <span class="p">)</span>
</span><span id="L-3391"><a href="#L-3391"><span class="linenos">3391</span></a>        <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="L-3392"><a href="#L-3392"><span class="linenos">3392</span></a>
</span><span id="L-3393"><a href="#L-3393"><span class="linenos">3393</span></a>        <span class="c1"># HTML</span>
</span><span id="L-3394"><a href="#L-3394"><span class="linenos">3394</span></a>        <span class="n">options_html</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&lt;H2&gt;</span><span class="si">{</span><span class="n">command</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">&lt;/H2&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-3395"><a href="#L-3395"><span class="linenos">3395</span></a>        <span class="n">options_html</span> <span class="o">+=</span> <span class="s2">&quot;&lt;p&gt;&quot;</span> <span class="o">+</span> <span class="n">command_description</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/p&gt;&quot;</span>
</span><span id="L-3396"><a href="#L-3396"><span class="linenos">3396</span></a>        <span class="n">options_html</span> <span class="o">+=</span> <span class="n">command_epilog</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
</span><span id="L-3397"><a href="#L-3397"><span class="linenos">3397</span></a>            <span class="s2">&quot;   &quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;</span>
</span><span id="L-3398"><a href="#L-3398"><span class="linenos">3398</span></a>        <span class="p">)</span>
</span><span id="L-3399"><a href="#L-3399"><span class="linenos">3399</span></a>
</span><span id="L-3400"><a href="#L-3400"><span class="linenos">3400</span></a>        <span class="c1"># Gooey - add metavar</span>
</span><span id="L-3401"><a href="#L-3401"><span class="linenos">3401</span></a>        <span class="k">if</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;gooey&quot;</span><span class="p">:</span>
</span><span id="L-3402"><a href="#L-3402"><span class="linenos">3402</span></a>            <span class="n">add_metavar</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-3403"><a href="#L-3403"><span class="linenos">3403</span></a>            <span class="n">command_group_suffix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-3404"><a href="#L-3404"><span class="linenos">3404</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3405"><a href="#L-3405"><span class="linenos">3405</span></a>            <span class="n">add_metavar</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-3406"><a href="#L-3406"><span class="linenos">3406</span></a>            <span class="n">command_group_suffix</span> <span class="o">=</span> <span class="s2">&quot; options&quot;</span>
</span><span id="L-3407"><a href="#L-3407"><span class="linenos">3407</span></a>
</span><span id="L-3408"><a href="#L-3408"><span class="linenos">3408</span></a>        <span class="c1"># Main args</span>
</span><span id="L-3409"><a href="#L-3409"><span class="linenos">3409</span></a>        <span class="n">command_parser</span><span class="o">.</span><span class="n">_optionals</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Options&quot;</span>
</span><span id="L-3410"><a href="#L-3410"><span class="linenos">3410</span></a>        <span class="k">if</span> <span class="s2">&quot;main&quot;</span> <span class="ow">in</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">][</span><span class="s2">&quot;groups&quot;</span><span class="p">]:</span>
</span><span id="L-3411"><a href="#L-3411"><span class="linenos">3411</span></a>            <span class="n">group</span> <span class="o">=</span> <span class="s2">&quot;main&quot;</span>
</span><span id="L-3412"><a href="#L-3412"><span class="linenos">3412</span></a>            <span class="n">options_md</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;### Main options</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-3413"><a href="#L-3413"><span class="linenos">3413</span></a>            <span class="n">options_html</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&lt;H3&gt;Main options&lt;/H3&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-3414"><a href="#L-3414"><span class="linenos">3414</span></a>            <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">][</span><span class="s2">&quot;groups&quot;</span><span class="p">][</span><span class="n">group</span><span class="p">]:</span>
</span><span id="L-3415"><a href="#L-3415"><span class="linenos">3415</span></a>                <span class="n">required</span> <span class="o">=</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">][</span><span class="s2">&quot;groups&quot;</span><span class="p">][</span><span class="n">group</span><span class="p">][</span><span class="n">arg</span><span class="p">]</span>
</span><span id="L-3416"><a href="#L-3416"><span class="linenos">3416</span></a>                <span class="n">argument</span> <span class="o">=</span> <span class="n">get_argument</span><span class="p">(</span>
</span><span id="L-3417"><a href="#L-3417"><span class="linenos">3417</span></a>                    <span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="L-3418"><a href="#L-3418"><span class="linenos">3418</span></a>                    <span class="n">arg</span><span class="o">=</span><span class="n">arg</span><span class="p">,</span>
</span><span id="L-3419"><a href="#L-3419"><span class="linenos">3419</span></a>                    <span class="n">required</span><span class="o">=</span><span class="n">required</span><span class="p">,</span>
</span><span id="L-3420"><a href="#L-3420"><span class="linenos">3420</span></a>                    <span class="n">add_metavar</span><span class="o">=</span><span class="n">add_metavar</span><span class="p">,</span>
</span><span id="L-3421"><a href="#L-3421"><span class="linenos">3421</span></a>                <span class="p">)</span>
</span><span id="L-3422"><a href="#L-3422"><span class="linenos">3422</span></a>                <span class="k">if</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;gooey&quot;</span><span class="p">:</span>
</span><span id="L-3423"><a href="#L-3423"><span class="linenos">3423</span></a>                    <span class="n">widget</span><span class="p">,</span> <span class="n">options</span> <span class="o">=</span> <span class="n">get_argument_gooey</span><span class="p">(</span><span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-3424"><a href="#L-3424"><span class="linenos">3424</span></a>                    <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">widget</span>
</span><span id="L-3425"><a href="#L-3425"><span class="linenos">3425</span></a>                    <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;gooey_options&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="L-3426"><a href="#L-3426"><span class="linenos">3426</span></a>                    <span class="k">if</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;==SUPPRESS==&quot;</span><span class="p">]:</span>
</span><span id="L-3427"><a href="#L-3427"><span class="linenos">3427</span></a>                        <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span>
</span><span id="L-3428"><a href="#L-3428"><span class="linenos">3428</span></a>                    <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_arg_help</span><span class="p">(</span>
</span><span id="L-3429"><a href="#L-3429"><span class="linenos">3429</span></a>                        <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span><span id="L-3430"><a href="#L-3430"><span class="linenos">3430</span></a>                    <span class="p">)</span>
</span><span id="L-3431"><a href="#L-3431"><span class="linenos">3431</span></a>                <span class="n">command_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">argument</span><span class="p">)</span>
</span><span id="L-3432"><a href="#L-3432"><span class="linenos">3432</span></a>                <span class="n">options_md</span> <span class="o">+=</span> <span class="n">get_argument_to_mk</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span>
</span><span id="L-3433"><a href="#L-3433"><span class="linenos">3433</span></a>                <span class="n">options_html</span> <span class="o">+=</span> <span class="n">get_argument_to_mk</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">argument</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="p">)</span>
</span><span id="L-3434"><a href="#L-3434"><span class="linenos">3434</span></a>
</span><span id="L-3435"><a href="#L-3435"><span class="linenos">3435</span></a>        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">][</span><span class="s2">&quot;groups&quot;</span><span class="p">]:</span>
</span><span id="L-3436"><a href="#L-3436"><span class="linenos">3436</span></a>            <span class="k">if</span> <span class="n">group</span> <span class="o">!=</span> <span class="s2">&quot;main&quot;</span><span class="p">:</span>
</span><span id="L-3437"><a href="#L-3437"><span class="linenos">3437</span></a>                <span class="n">options_md</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;### </span><span class="si">{</span><span class="n">group</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-3438"><a href="#L-3438"><span class="linenos">3438</span></a>                <span class="n">options_html</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&lt;H3&gt;</span><span class="si">{</span><span class="n">group</span><span class="si">}</span><span class="s2">&lt;/H3&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-3439"><a href="#L-3439"><span class="linenos">3439</span></a>                <span class="n">command_group</span> <span class="o">=</span> <span class="n">command_parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span>
</span><span id="L-3440"><a href="#L-3440"><span class="linenos">3440</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">group</span><span class="si">}{</span><span class="n">command_group_suffix</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-3441"><a href="#L-3441"><span class="linenos">3441</span></a>                <span class="p">)</span>
</span><span id="L-3442"><a href="#L-3442"><span class="linenos">3442</span></a>                <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">][</span><span class="s2">&quot;groups&quot;</span><span class="p">][</span><span class="n">group</span><span class="p">]:</span>
</span><span id="L-3443"><a href="#L-3443"><span class="linenos">3443</span></a>                    <span class="n">required</span> <span class="o">=</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">][</span><span class="s2">&quot;groups&quot;</span><span class="p">][</span><span class="n">group</span><span class="p">][</span><span class="n">arg</span><span class="p">]</span>
</span><span id="L-3444"><a href="#L-3444"><span class="linenos">3444</span></a>                    <span class="n">argument</span> <span class="o">=</span> <span class="n">get_argument</span><span class="p">(</span>
</span><span id="L-3445"><a href="#L-3445"><span class="linenos">3445</span></a>                        <span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="L-3446"><a href="#L-3446"><span class="linenos">3446</span></a>                        <span class="n">arg</span><span class="o">=</span><span class="n">arg</span><span class="p">,</span>
</span><span id="L-3447"><a href="#L-3447"><span class="linenos">3447</span></a>                        <span class="n">required</span><span class="o">=</span><span class="n">required</span><span class="p">,</span>
</span><span id="L-3448"><a href="#L-3448"><span class="linenos">3448</span></a>                        <span class="n">add_metavar</span><span class="o">=</span><span class="n">add_metavar</span><span class="p">,</span>
</span><span id="L-3449"><a href="#L-3449"><span class="linenos">3449</span></a>                    <span class="p">)</span>
</span><span id="L-3450"><a href="#L-3450"><span class="linenos">3450</span></a>                    <span class="k">if</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;gooey&quot;</span><span class="p">:</span>
</span><span id="L-3451"><a href="#L-3451"><span class="linenos">3451</span></a>                        <span class="n">widget</span><span class="p">,</span> <span class="n">options</span> <span class="o">=</span> <span class="n">get_argument_gooey</span><span class="p">(</span>
</span><span id="L-3452"><a href="#L-3452"><span class="linenos">3452</span></a>                            <span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="n">arg</span>
</span><span id="L-3453"><a href="#L-3453"><span class="linenos">3453</span></a>                        <span class="p">)</span>
</span><span id="L-3454"><a href="#L-3454"><span class="linenos">3454</span></a>                        <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">widget</span>
</span><span id="L-3455"><a href="#L-3455"><span class="linenos">3455</span></a>                        <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;gooey_options&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="L-3456"><a href="#L-3456"><span class="linenos">3456</span></a>                        <span class="k">if</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;==SUPPRESS==&quot;</span><span class="p">]:</span>
</span><span id="L-3457"><a href="#L-3457"><span class="linenos">3457</span></a>                            <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span>
</span><span id="L-3458"><a href="#L-3458"><span class="linenos">3458</span></a>                        <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_arg_help</span><span class="p">(</span>
</span><span id="L-3459"><a href="#L-3459"><span class="linenos">3459</span></a>                            <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span><span id="L-3460"><a href="#L-3460"><span class="linenos">3460</span></a>                        <span class="p">)</span>
</span><span id="L-3461"><a href="#L-3461"><span class="linenos">3461</span></a>                    <span class="n">command_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">argument</span><span class="p">)</span>
</span><span id="L-3462"><a href="#L-3462"><span class="linenos">3462</span></a>                    <span class="n">options_md</span> <span class="o">+=</span> <span class="n">get_argument_to_mk</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span>
</span><span id="L-3463"><a href="#L-3463"><span class="linenos">3463</span></a>                    <span class="n">options_html</span> <span class="o">+=</span> <span class="n">get_argument_to_mk</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">argument</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="p">)</span>
</span><span id="L-3464"><a href="#L-3464"><span class="linenos">3464</span></a>
</span><span id="L-3465"><a href="#L-3465"><span class="linenos">3465</span></a>        <span class="c1"># Shared arguments</span>
</span><span id="L-3466"><a href="#L-3466"><span class="linenos">3466</span></a>        <span class="n">shared_group</span> <span class="o">=</span> <span class="n">command_parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s2">&quot;Shared options&quot;</span><span class="p">)</span>
</span><span id="L-3467"><a href="#L-3467"><span class="linenos">3467</span></a>        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">shared_arguments</span><span class="p">:</span>
</span><span id="L-3468"><a href="#L-3468"><span class="linenos">3468</span></a>            <span class="n">argument</span> <span class="o">=</span> <span class="n">get_argument</span><span class="p">(</span>
</span><span id="L-3469"><a href="#L-3469"><span class="linenos">3469</span></a>                <span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="n">arg</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_metavar</span><span class="o">=</span><span class="n">add_metavar</span>
</span><span id="L-3470"><a href="#L-3470"><span class="linenos">3470</span></a>            <span class="p">)</span>
</span><span id="L-3471"><a href="#L-3471"><span class="linenos">3471</span></a>            <span class="k">if</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;gooey&quot;</span><span class="p">:</span>
</span><span id="L-3472"><a href="#L-3472"><span class="linenos">3472</span></a>                <span class="n">widget</span><span class="p">,</span> <span class="n">options</span> <span class="o">=</span> <span class="n">get_argument_gooey</span><span class="p">(</span><span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-3473"><a href="#L-3473"><span class="linenos">3473</span></a>                <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">widget</span>
</span><span id="L-3474"><a href="#L-3474"><span class="linenos">3474</span></a>                <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;gooey_options&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="L-3475"><a href="#L-3475"><span class="linenos">3475</span></a>                <span class="k">if</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;==SUPPRESS==&quot;</span><span class="p">]:</span>
</span><span id="L-3476"><a href="#L-3476"><span class="linenos">3476</span></a>                    <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span>
</span><span id="L-3477"><a href="#L-3477"><span class="linenos">3477</span></a>                <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_arg_help</span><span class="p">(</span>
</span><span id="L-3478"><a href="#L-3478"><span class="linenos">3478</span></a>                    <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span><span id="L-3479"><a href="#L-3479"><span class="linenos">3479</span></a>                <span class="p">)</span>
</span><span id="L-3480"><a href="#L-3480"><span class="linenos">3480</span></a>            <span class="n">shared_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">argument</span><span class="p">)</span>
</span><span id="L-3481"><a href="#L-3481"><span class="linenos">3481</span></a>
</span><span id="L-3482"><a href="#L-3482"><span class="linenos">3482</span></a>        <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="L-3483"><a href="#L-3483"><span class="linenos">3483</span></a>
</span><span id="L-3484"><a href="#L-3484"><span class="linenos">3484</span></a>    <span class="c1"># Shared arguments for help files</span>
</span><span id="L-3485"><a href="#L-3485"><span class="linenos">3485</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;## Shared arguments</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-3486"><a href="#L-3486"><span class="linenos">3486</span></a>    <span class="n">options_html</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&lt;H2&gt;Shared arguments&lt;/H2&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span><span id="L-3487"><a href="#L-3487"><span class="linenos">3487</span></a>    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">shared_arguments</span><span class="p">:</span>
</span><span id="L-3488"><a href="#L-3488"><span class="linenos">3488</span></a>        <span class="n">required</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-3489"><a href="#L-3489"><span class="linenos">3489</span></a>        <span class="n">argument</span> <span class="o">=</span> <span class="n">get_argument</span><span class="p">(</span><span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">arg</span><span class="o">=</span><span class="n">arg</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="n">required</span><span class="p">)</span>
</span><span id="L-3490"><a href="#L-3490"><span class="linenos">3490</span></a>        <span class="n">options_md</span> <span class="o">+=</span> <span class="n">get_argument_to_mk</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span>
</span><span id="L-3491"><a href="#L-3491"><span class="linenos">3491</span></a>        <span class="n">options_html</span> <span class="o">+=</span> <span class="n">get_argument_to_mk</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">argument</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="p">)</span>
</span><span id="L-3492"><a href="#L-3492"><span class="linenos">3492</span></a>
</span><span id="L-3493"><a href="#L-3493"><span class="linenos">3493</span></a>    <span class="c1"># Output</span>
</span><span id="L-3494"><a href="#L-3494"><span class="linenos">3494</span></a>    <span class="k">if</span> <span class="n">output_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;parser&quot;</span><span class="p">,</span> <span class="s2">&quot;gooey&quot;</span><span class="p">]:</span>
</span><span id="L-3495"><a href="#L-3495"><span class="linenos">3495</span></a>        <span class="k">return</span> <span class="n">parser</span>
</span><span id="L-3496"><a href="#L-3496"><span class="linenos">3496</span></a>    <span class="k">elif</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;markdown&quot;</span><span class="p">:</span>
</span><span id="L-3497"><a href="#L-3497"><span class="linenos">3497</span></a>        <span class="k">return</span> <span class="n">options_md</span>
</span><span id="L-3498"><a href="#L-3498"><span class="linenos">3498</span></a>    <span class="k">elif</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;html&quot;</span><span class="p">:</span>
</span><span id="L-3499"><a href="#L-3499"><span class="linenos">3499</span></a>        <span class="k">return</span> <span class="n">options_html</span>
</span><span id="L-3500"><a href="#L-3500"><span class="linenos">3500</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3501"><a href="#L-3501"><span class="linenos">3501</span></a>        <span class="k">return</span> <span class="n">parser</span>
</span><span id="L-3502"><a href="#L-3502"><span class="linenos">3502</span></a>
</span><span id="L-3503"><a href="#L-3503"><span class="linenos">3503</span></a>
</span><span id="L-3504"><a href="#L-3504"><span class="linenos">3504</span></a><span class="k">def</span> <span class="nf">format_arg_help</span><span class="p">(</span><span class="n">help_message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default_value</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-3505"><a href="#L-3505"><span class="linenos">3505</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3506"><a href="#L-3506"><span class="linenos">3506</span></a><span class="sd">    The function `format_arg_help` formats a help message for a function argument, including a default</span>
</span><span id="L-3507"><a href="#L-3507"><span class="linenos">3507</span></a><span class="sd">    value if provided.</span>
</span><span id="L-3508"><a href="#L-3508"><span class="linenos">3508</span></a>
</span><span id="L-3509"><a href="#L-3509"><span class="linenos">3509</span></a><span class="sd">    :param help_message: The `help_message` parameter is a string that contains the description or help</span>
</span><span id="L-3510"><a href="#L-3510"><span class="linenos">3510</span></a><span class="sd">    message for a function or method argument. It provides information about the purpose or usage of the</span>
</span><span id="L-3511"><a href="#L-3511"><span class="linenos">3511</span></a><span class="sd">    argument</span>
</span><span id="L-3512"><a href="#L-3512"><span class="linenos">3512</span></a><span class="sd">    :type help_message: str</span>
</span><span id="L-3513"><a href="#L-3513"><span class="linenos">3513</span></a><span class="sd">    :param default_value: The `default_value` parameter in the `format_arg_help` function is an optional</span>
</span><span id="L-3514"><a href="#L-3514"><span class="linenos">3514</span></a><span class="sd">    parameter that specifies a default value for the argument being described in the help message. If a</span>
</span><span id="L-3515"><a href="#L-3515"><span class="linenos">3515</span></a><span class="sd">    default value is provided, it will be included in the formatted help message to indicate the default</span>
</span><span id="L-3516"><a href="#L-3516"><span class="linenos">3516</span></a><span class="sd">    value for that argument</span>
</span><span id="L-3517"><a href="#L-3517"><span class="linenos">3517</span></a><span class="sd">    :type default_value: object</span>
</span><span id="L-3518"><a href="#L-3518"><span class="linenos">3518</span></a><span class="sd">    :return: The function `format_arg_help` returns a formatted help message with a default value</span>
</span><span id="L-3519"><a href="#L-3519"><span class="linenos">3519</span></a><span class="sd">    appended at the end if provided.</span>
</span><span id="L-3520"><a href="#L-3520"><span class="linenos">3520</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-3521"><a href="#L-3521"><span class="linenos">3521</span></a>
</span><span id="L-3522"><a href="#L-3522"><span class="linenos">3522</span></a>    <span class="n">help_return</span> <span class="o">=</span> <span class="n">help_message</span>
</span><span id="L-3523"><a href="#L-3523"><span class="linenos">3523</span></a>
</span><span id="L-3524"><a href="#L-3524"><span class="linenos">3524</span></a>    <span class="n">random_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="L-3525"><a href="#L-3525"><span class="linenos">3525</span></a>        <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">ascii_uppercase</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">digits</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-3526"><a href="#L-3526"><span class="linenos">3526</span></a>    <span class="p">)</span>
</span><span id="L-3527"><a href="#L-3527"><span class="linenos">3527</span></a>    <span class="n">help_return</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-3528"><a href="#L-3528"><span class="linenos">3528</span></a>        <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\n\s*-&quot;</span><span class="p">,</span> <span class="n">random_string</span><span class="p">,</span> <span class="n">help_return</span><span class="p">)</span>
</span><span id="L-3529"><a href="#L-3529"><span class="linenos">3529</span></a>        <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span id="L-3530"><a href="#L-3530"><span class="linenos">3530</span></a>        <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">random_string</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">-&quot;</span><span class="p">)</span>
</span><span id="L-3531"><a href="#L-3531"><span class="linenos">3531</span></a>    <span class="p">)</span>
</span><span id="L-3532"><a href="#L-3532"><span class="linenos">3532</span></a>    <span class="k">if</span> <span class="n">default_value</span><span class="p">:</span>
</span><span id="L-3533"><a href="#L-3533"><span class="linenos">3533</span></a>        <span class="n">help_return</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">(default: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">default_value</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
</span><span id="L-3534"><a href="#L-3534"><span class="linenos">3534</span></a>
</span><span id="L-3535"><a href="#L-3535"><span class="linenos">3535</span></a>    <span class="k">return</span> <span class="n">help_return</span>
</span><span id="L-3536"><a href="#L-3536"><span class="linenos">3536</span></a>
</span><span id="L-3537"><a href="#L-3537"><span class="linenos">3537</span></a>
</span><span id="L-3538"><a href="#L-3538"><span class="linenos">3538</span></a><span class="k">def</span> <span class="nf">bed_sort</span><span class="p">(</span><span class="nb">input</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-3539"><a href="#L-3539"><span class="linenos">3539</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3540"><a href="#L-3540"><span class="linenos">3540</span></a><span class="sd">    The `bed_sort` function reads a tab-separated input file, sorts the data based on columns 0, 1, and</span>
</span><span id="L-3541"><a href="#L-3541"><span class="linenos">3541</span></a><span class="sd">    2 in ascending order, and writes the sorted data to a tab-separated output file.</span>
</span><span id="L-3542"><a href="#L-3542"><span class="linenos">3542</span></a>
</span><span id="L-3543"><a href="#L-3543"><span class="linenos">3543</span></a><span class="sd">    :param input: The `input` parameter is the path to the input file that contains the data to be</span>
</span><span id="L-3544"><a href="#L-3544"><span class="linenos">3544</span></a><span class="sd">    sorted. This file should be in a tab-separated format</span>
</span><span id="L-3545"><a href="#L-3545"><span class="linenos">3545</span></a><span class="sd">    :type input: str</span>
</span><span id="L-3546"><a href="#L-3546"><span class="linenos">3546</span></a><span class="sd">    :param output: The `output` parameter is a string that specifies the path and filename of the output</span>
</span><span id="L-3547"><a href="#L-3547"><span class="linenos">3547</span></a><span class="sd">    file where the sorted data will be saved</span>
</span><span id="L-3548"><a href="#L-3548"><span class="linenos">3548</span></a><span class="sd">    :type output: str</span>
</span><span id="L-3549"><a href="#L-3549"><span class="linenos">3549</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-3550"><a href="#L-3550"><span class="linenos">3550</span></a>
</span><span id="L-3551"><a href="#L-3551"><span class="linenos">3551</span></a>    <span class="c1"># Read input BED (uncompressed)</span>
</span><span id="L-3552"><a href="#L-3552"><span class="linenos">3552</span></a>    <span class="c1"># data = pd.read_csv(input, sep=&quot;\t&quot;, dtype={&quot;chr&quot;: &quot;string&quot;, &quot;start&quot;: &quot;int&quot;, &quot;end&quot;: &quot;int&quot;}, header=None)</span>
</span><span id="L-3553"><a href="#L-3553"><span class="linenos">3553</span></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-3554"><a href="#L-3554"><span class="linenos">3554</span></a>
</span><span id="L-3555"><a href="#L-3555"><span class="linenos">3555</span></a>    <span class="c1"># Sort BED regions</span>
</span><span id="L-3556"><a href="#L-3556"><span class="linenos">3556</span></a>    <span class="n">data_sorted</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span>
</span><span id="L-3557"><a href="#L-3557"><span class="linenos">3557</span></a>        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">na_position</span><span class="o">=</span><span class="s2">&quot;first&quot;</span>
</span><span id="L-3558"><a href="#L-3558"><span class="linenos">3558</span></a>    <span class="p">)</span>
</span><span id="L-3559"><a href="#L-3559"><span class="linenos">3559</span></a>
</span><span id="L-3560"><a href="#L-3560"><span class="linenos">3560</span></a>    <span class="c1"># Write output BED (uncompressed)</span>
</span><span id="L-3561"><a href="#L-3561"><span class="linenos">3561</span></a>    <span class="n">data_sorted</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-3562"><a href="#L-3562"><span class="linenos">3562</span></a>
</span><span id="L-3563"><a href="#L-3563"><span class="linenos">3563</span></a>
</span><span id="L-3564"><a href="#L-3564"><span class="linenos">3564</span></a><span class="k">def</span> <span class="nf">full_path</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-3565"><a href="#L-3565"><span class="linenos">3565</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3566"><a href="#L-3566"><span class="linenos">3566</span></a><span class="sd">    The function `full_path` takes a path string as input and returns the full expanded path.</span>
</span><span id="L-3567"><a href="#L-3567"><span class="linenos">3567</span></a>
</span><span id="L-3568"><a href="#L-3568"><span class="linenos">3568</span></a><span class="sd">    :param path: The `full_path` function takes a string `path` as input and returns the full path by</span>
</span><span id="L-3569"><a href="#L-3569"><span class="linenos">3569</span></a><span class="sd">    expanding the user&#39;s home directory in the path if it is not None</span>
</span><span id="L-3570"><a href="#L-3570"><span class="linenos">3570</span></a><span class="sd">    :type path: str</span>
</span><span id="L-3571"><a href="#L-3571"><span class="linenos">3571</span></a><span class="sd">    :return: The function `full_path` is returning the expanded version of the input `path` using</span>
</span><span id="L-3572"><a href="#L-3572"><span class="linenos">3572</span></a><span class="sd">    `os.path.expanduser(path)`. This function expands the `~` character in the path to the user&#39;s home</span>
</span><span id="L-3573"><a href="#L-3573"><span class="linenos">3573</span></a><span class="sd">    directory.</span>
</span><span id="L-3574"><a href="#L-3574"><span class="linenos">3574</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-3575"><a href="#L-3575"><span class="linenos">3575</span></a>
</span><span id="L-3576"><a href="#L-3576"><span class="linenos">3576</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-3577"><a href="#L-3577"><span class="linenos">3577</span></a>        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expandvars</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">path</span><span class="p">)))</span>
</span><span id="L-3578"><a href="#L-3578"><span class="linenos">3578</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3579"><a href="#L-3579"><span class="linenos">3579</span></a>        <span class="k">return</span> <span class="n">path</span>
</span><span id="L-3580"><a href="#L-3580"><span class="linenos">3580</span></a>
</span><span id="L-3581"><a href="#L-3581"><span class="linenos">3581</span></a>
</span><span id="L-3582"><a href="#L-3582"><span class="linenos">3582</span></a><span class="k">def</span> <span class="nf">get_default_argument</span><span class="p">(</span><span class="n">arguments_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">argument</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-3583"><a href="#L-3583"><span class="linenos">3583</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3584"><a href="#L-3584"><span class="linenos">3584</span></a><span class="sd">    The function `get_default_argument` retrieves the default value of a specified argument from a</span>
</span><span id="L-3585"><a href="#L-3585"><span class="linenos">3585</span></a><span class="sd">    dictionary of arguments.</span>
</span><span id="L-3586"><a href="#L-3586"><span class="linenos">3586</span></a>
</span><span id="L-3587"><a href="#L-3587"><span class="linenos">3587</span></a><span class="sd">    :param arguments_dict: The `arguments_dict` parameter is a dictionary that contains information</span>
</span><span id="L-3588"><a href="#L-3588"><span class="linenos">3588</span></a><span class="sd">    about arguments</span>
</span><span id="L-3589"><a href="#L-3589"><span class="linenos">3589</span></a><span class="sd">    :type arguments_dict: dict</span>
</span><span id="L-3590"><a href="#L-3590"><span class="linenos">3590</span></a><span class="sd">    :param argument: The `get_default_argument` function takes in two parameters:</span>
</span><span id="L-3591"><a href="#L-3591"><span class="linenos">3591</span></a><span class="sd">    :type argument: str</span>
</span><span id="L-3592"><a href="#L-3592"><span class="linenos">3592</span></a><span class="sd">    :return: The function is attempting to return the default value of a specific argument from a</span>
</span><span id="L-3593"><a href="#L-3593"><span class="linenos">3593</span></a><span class="sd">    dictionary of arguments. However, there is a mistake in the code. The correct key to access the</span>
</span><span id="L-3594"><a href="#L-3594"><span class="linenos">3594</span></a><span class="sd">    argument&#39;s default value should be &quot;argument&quot; instead of &quot;arguments&quot;. Therefore, the function will</span>
</span><span id="L-3595"><a href="#L-3595"><span class="linenos">3595</span></a><span class="sd">    return the default value of the specified argument if it exists, otherwise it will return None.</span>
</span><span id="L-3596"><a href="#L-3596"><span class="linenos">3596</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-3597"><a href="#L-3597"><span class="linenos">3597</span></a>
</span><span id="L-3598"><a href="#L-3598"><span class="linenos">3598</span></a>    <span class="k">return</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;arguments&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-3599"><a href="#L-3599"><span class="linenos">3599</span></a>
</span><span id="L-3600"><a href="#L-3600"><span class="linenos">3600</span></a>
</span><span id="L-3601"><a href="#L-3601"><span class="linenos">3601</span></a><span class="k">def</span> <span class="nf">set_param</span><span class="p">(</span>
</span><span id="L-3602"><a href="#L-3602"><span class="linenos">3602</span></a>    <span class="n">param</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="L-3603"><a href="#L-3603"><span class="linenos">3603</span></a>    <span class="n">args</span><span class="p">:</span> <span class="n">argparse</span><span class="p">,</span>
</span><span id="L-3604"><a href="#L-3604"><span class="linenos">3604</span></a>    <span class="n">arguments_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="L-3605"><a href="#L-3605"><span class="linenos">3605</span></a>    <span class="n">argument</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-3606"><a href="#L-3606"><span class="linenos">3606</span></a>    <span class="n">section</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-3607"><a href="#L-3607"><span class="linenos">3607</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-3608"><a href="#L-3608"><span class="linenos">3608</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3609"><a href="#L-3609"><span class="linenos">3609</span></a><span class="sd">    The function `set_param` takes input arguments and adds them to a dictionary based on certain</span>
</span><span id="L-3610"><a href="#L-3610"><span class="linenos">3610</span></a><span class="sd">    conditions.</span>
</span><span id="L-3611"><a href="#L-3611"><span class="linenos">3611</span></a>
</span><span id="L-3612"><a href="#L-3612"><span class="linenos">3612</span></a><span class="sd">    :param param: The `param` parameter is a dictionary that stores configuration parameters or</span>
</span><span id="L-3613"><a href="#L-3613"><span class="linenos">3613</span></a><span class="sd">    settings. It is used to collect and store various arguments and their values based on the conditions</span>
</span><span id="L-3614"><a href="#L-3614"><span class="linenos">3614</span></a><span class="sd">    specified in the `set_param` function</span>
</span><span id="L-3615"><a href="#L-3615"><span class="linenos">3615</span></a><span class="sd">    :type param: dict</span>
</span><span id="L-3616"><a href="#L-3616"><span class="linenos">3616</span></a><span class="sd">    :param args: The `args` parameter in the `set_param` function is likely an instance of the</span>
</span><span id="L-3617"><a href="#L-3617"><span class="linenos">3617</span></a><span class="sd">    `argparse.Namespace` class, which is typically used to store the command-line arguments parsed by</span>
</span><span id="L-3618"><a href="#L-3618"><span class="linenos">3618</span></a><span class="sd">    the `argparse` module in Python. It contains the values of the arguments provided by the user when</span>
</span><span id="L-3619"><a href="#L-3619"><span class="linenos">3619</span></a><span class="sd">    the script</span>
</span><span id="L-3620"><a href="#L-3620"><span class="linenos">3620</span></a><span class="sd">    :type args: argparse</span>
</span><span id="L-3621"><a href="#L-3621"><span class="linenos">3621</span></a><span class="sd">    :param arguments_dict: The `arguments_dict` parameter seems to be a dictionary that likely contains</span>
</span><span id="L-3622"><a href="#L-3622"><span class="linenos">3622</span></a><span class="sd">    information about arguments and their default values. This dictionary is used in the function</span>
</span><span id="L-3623"><a href="#L-3623"><span class="linenos">3623</span></a><span class="sd">    `set_param` to determine whether a specific argument should be included in the `param` dictionary</span>
</span><span id="L-3624"><a href="#L-3624"><span class="linenos">3624</span></a><span class="sd">    based on certain conditions</span>
</span><span id="L-3625"><a href="#L-3625"><span class="linenos">3625</span></a><span class="sd">    :type arguments_dict: dict</span>
</span><span id="L-3626"><a href="#L-3626"><span class="linenos">3626</span></a><span class="sd">    :param argument: The `argument` parameter in the `set_param` function represents the specific</span>
</span><span id="L-3627"><a href="#L-3627"><span class="linenos">3627</span></a><span class="sd">    argument that you want to set in the `param` dictionary. It is the key that will be used to store</span>
</span><span id="L-3628"><a href="#L-3628"><span class="linenos">3628</span></a><span class="sd">    the value in the dictionary</span>
</span><span id="L-3629"><a href="#L-3629"><span class="linenos">3629</span></a><span class="sd">    :type argument: str</span>
</span><span id="L-3630"><a href="#L-3630"><span class="linenos">3630</span></a><span class="sd">    :param section: The `section` parameter in the `set_param` function is used to specify a section</span>
</span><span id="L-3631"><a href="#L-3631"><span class="linenos">3631</span></a><span class="sd">    within the `param` dictionary where the argument value should be stored. If a `section` is provided,</span>
</span><span id="L-3632"><a href="#L-3632"><span class="linenos">3632</span></a><span class="sd">    the argument value will be stored under that section in the `param` dictionary. If no `section</span>
</span><span id="L-3633"><a href="#L-3633"><span class="linenos">3633</span></a><span class="sd">    :type section: str</span>
</span><span id="L-3634"><a href="#L-3634"><span class="linenos">3634</span></a><span class="sd">    :return: the updated `param` dictionary after setting the specified argument value based on the</span>
</span><span id="L-3635"><a href="#L-3635"><span class="linenos">3635</span></a><span class="sd">    conditions provided in the function.</span>
</span><span id="L-3636"><a href="#L-3636"><span class="linenos">3636</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-3637"><a href="#L-3637"><span class="linenos">3637</span></a>
</span><span id="L-3638"><a href="#L-3638"><span class="linenos">3638</span></a>    <span class="c1"># Argument value</span>
</span><span id="L-3639"><a href="#L-3639"><span class="linenos">3639</span></a>    <span class="n">value</span> <span class="o">=</span> <span class="nb">vars</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-3640"><a href="#L-3640"><span class="linenos">3640</span></a>
</span><span id="L-3641"><a href="#L-3641"><span class="linenos">3641</span></a>    <span class="c1"># Sections</span>
</span><span id="L-3642"><a href="#L-3642"><span class="linenos">3642</span></a>    <span class="k">if</span> <span class="n">section</span><span class="p">:</span>
</span><span id="L-3643"><a href="#L-3643"><span class="linenos">3643</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-3644"><a href="#L-3644"><span class="linenos">3644</span></a>            <span class="n">sections</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="L-3645"><a href="#L-3645"><span class="linenos">3645</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3646"><a href="#L-3646"><span class="linenos">3646</span></a>            <span class="n">sections</span> <span class="o">=</span> <span class="n">section</span>
</span><span id="L-3647"><a href="#L-3647"><span class="linenos">3647</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3648"><a href="#L-3648"><span class="linenos">3648</span></a>        <span class="n">sections</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-3649"><a href="#L-3649"><span class="linenos">3649</span></a>
</span><span id="L-3650"><a href="#L-3650"><span class="linenos">3650</span></a>    <span class="c1"># Check if to include in param</span>
</span><span id="L-3651"><a href="#L-3651"><span class="linenos">3651</span></a>    <span class="k">if</span> <span class="n">argument</span> <span class="ow">in</span> <span class="n">args</span> <span class="ow">and</span> <span class="p">(</span>
</span><span id="L-3652"><a href="#L-3652"><span class="linenos">3652</span></a>        <span class="ow">not</span> <span class="n">arguments_dict</span>
</span><span id="L-3653"><a href="#L-3653"><span class="linenos">3653</span></a>        <span class="ow">or</span> <span class="n">value</span>
</span><span id="L-3654"><a href="#L-3654"><span class="linenos">3654</span></a>        <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">get_default_argument</span><span class="p">(</span><span class="n">arguments_dict</span><span class="o">=</span><span class="n">arguments_dict</span><span class="p">,</span> <span class="n">argument</span><span class="o">=</span><span class="n">argument</span><span class="p">)]</span>
</span><span id="L-3655"><a href="#L-3655"><span class="linenos">3655</span></a>    <span class="p">):</span>
</span><span id="L-3656"><a href="#L-3656"><span class="linenos">3656</span></a>        <span class="n">sections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
</span><span id="L-3657"><a href="#L-3657"><span class="linenos">3657</span></a>        <span class="n">param</span> <span class="o">=</span> <span class="n">add_value_into_dict</span><span class="p">(</span><span class="n">dict_tree</span><span class="o">=</span><span class="n">param</span><span class="p">,</span> <span class="n">sections</span><span class="o">=</span><span class="n">sections</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-3658"><a href="#L-3658"><span class="linenos">3658</span></a>
</span><span id="L-3659"><a href="#L-3659"><span class="linenos">3659</span></a>    <span class="k">return</span> <span class="n">param</span>
</span><span id="L-3660"><a href="#L-3660"><span class="linenos">3660</span></a>
</span><span id="L-3661"><a href="#L-3661"><span class="linenos">3661</span></a>
</span><span id="L-3662"><a href="#L-3662"><span class="linenos">3662</span></a><span class="k">def</span> <span class="nf">add_value_into_dict</span><span class="p">(</span><span class="n">dict_tree</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">sections</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-3663"><a href="#L-3663"><span class="linenos">3663</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3664"><a href="#L-3664"><span class="linenos">3664</span></a><span class="sd">    The function `add_value_into_dict` adds a value into a dictionary tree based on the provided</span>
</span><span id="L-3665"><a href="#L-3665"><span class="linenos">3665</span></a><span class="sd">    sections.</span>
</span><span id="L-3666"><a href="#L-3666"><span class="linenos">3666</span></a>
</span><span id="L-3667"><a href="#L-3667"><span class="linenos">3667</span></a><span class="sd">    :param dict_tree: The `dict_tree` parameter is a dictionary representing a tree structure. It serves</span>
</span><span id="L-3668"><a href="#L-3668"><span class="linenos">3668</span></a><span class="sd">    as the starting point for adding a value based on the provided sections</span>
</span><span id="L-3669"><a href="#L-3669"><span class="linenos">3669</span></a><span class="sd">    :type dict_tree: dict</span>
</span><span id="L-3670"><a href="#L-3670"><span class="linenos">3670</span></a><span class="sd">    :param sections: The `sections` parameter in the `add_value_into_dict` function represents a list of</span>
</span><span id="L-3671"><a href="#L-3671"><span class="linenos">3671</span></a><span class="sd">    sections corresponding to successive keys in the dictionary. These sections are used to traverse the</span>
</span><span id="L-3672"><a href="#L-3672"><span class="linenos">3672</span></a><span class="sd">    dictionary tree and determine the location where the value should be added. Each element in the</span>
</span><span id="L-3673"><a href="#L-3673"><span class="linenos">3673</span></a><span class="sd">    `sections` list corresponds to a key in</span>
</span><span id="L-3674"><a href="#L-3674"><span class="linenos">3674</span></a><span class="sd">    :type sections: list</span>
</span><span id="L-3675"><a href="#L-3675"><span class="linenos">3675</span></a><span class="sd">    :param value: The `value` parameter in the `add_value_into_dict` function represents the value that</span>
</span><span id="L-3676"><a href="#L-3676"><span class="linenos">3676</span></a><span class="sd">    you want to add into the dictionary tree at the specified location determined by the `sections`</span>
</span><span id="L-3677"><a href="#L-3677"><span class="linenos">3677</span></a><span class="sd">    list. This value can be of any data type (e.g., int, str, list, dict, etc.)</span>
</span><span id="L-3678"><a href="#L-3678"><span class="linenos">3678</span></a><span class="sd">    :return: The function `add_value_into_dict` returns the updated dictionary tree after adding the</span>
</span><span id="L-3679"><a href="#L-3679"><span class="linenos">3679</span></a><span class="sd">    value based on the given sections.</span>
</span><span id="L-3680"><a href="#L-3680"><span class="linenos">3680</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-3681"><a href="#L-3681"><span class="linenos">3681</span></a>
</span><span id="L-3682"><a href="#L-3682"><span class="linenos">3682</span></a>    <span class="c1"># Pointer to traverse the tree</span>
</span><span id="L-3683"><a href="#L-3683"><span class="linenos">3683</span></a>    <span class="n">current_node</span> <span class="o">=</span> <span class="n">dict_tree</span>
</span><span id="L-3684"><a href="#L-3684"><span class="linenos">3684</span></a>
</span><span id="L-3685"><a href="#L-3685"><span class="linenos">3685</span></a>    <span class="c1"># If sections is empty, add the value to the root of the dictionary tree</span>
</span><span id="L-3686"><a href="#L-3686"><span class="linenos">3686</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">sections</span><span class="p">:</span>
</span><span id="L-3687"><a href="#L-3687"><span class="linenos">3687</span></a>        <span class="k">return</span> <span class="n">current_node</span>
</span><span id="L-3688"><a href="#L-3688"><span class="linenos">3688</span></a>
</span><span id="L-3689"><a href="#L-3689"><span class="linenos">3689</span></a>    <span class="c1"># Traverse the tree based on sections to find the appropriate location for the value</span>
</span><span id="L-3690"><a href="#L-3690"><span class="linenos">3690</span></a>    <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">sections</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="L-3691"><a href="#L-3691"><span class="linenos">3691</span></a>        <span class="c1"># If the section does not exist yet in the current dictionary, create it</span>
</span><span id="L-3692"><a href="#L-3692"><span class="linenos">3692</span></a>        <span class="k">if</span> <span class="n">section</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">current_node</span><span class="p">:</span>
</span><span id="L-3693"><a href="#L-3693"><span class="linenos">3693</span></a>            <span class="n">current_node</span><span class="p">[</span><span class="n">section</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3694"><a href="#L-3694"><span class="linenos">3694</span></a>        <span class="c1"># Move down the tree following the current section</span>
</span><span id="L-3695"><a href="#L-3695"><span class="linenos">3695</span></a>        <span class="n">current_node</span> <span class="o">=</span> <span class="n">current_node</span><span class="p">[</span><span class="n">section</span><span class="p">]</span>
</span><span id="L-3696"><a href="#L-3696"><span class="linenos">3696</span></a>
</span><span id="L-3697"><a href="#L-3697"><span class="linenos">3697</span></a>    <span class="c1"># Add the value to the last section</span>
</span><span id="L-3698"><a href="#L-3698"><span class="linenos">3698</span></a>    <span class="n">last_section</span> <span class="o">=</span> <span class="n">sections</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-3699"><a href="#L-3699"><span class="linenos">3699</span></a>    <span class="n">current_node</span><span class="p">[</span><span class="n">last_section</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-3700"><a href="#L-3700"><span class="linenos">3700</span></a>
</span><span id="L-3701"><a href="#L-3701"><span class="linenos">3701</span></a>    <span class="k">return</span> <span class="n">dict_tree</span>
</span><span id="L-3702"><a href="#L-3702"><span class="linenos">3702</span></a>
</span><span id="L-3703"><a href="#L-3703"><span class="linenos">3703</span></a>
</span><span id="L-3704"><a href="#L-3704"><span class="linenos">3704</span></a><span class="k">def</span> <span class="nf">load_param</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">argparse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-3705"><a href="#L-3705"><span class="linenos">3705</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3706"><a href="#L-3706"><span class="linenos">3706</span></a><span class="sd">    The function `load_param` takes command line arguments and returns a dictionary containing</span>
</span><span id="L-3707"><a href="#L-3707"><span class="linenos">3707</span></a><span class="sd">    parameters loaded from a file or as JSON.</span>
</span><span id="L-3708"><a href="#L-3708"><span class="linenos">3708</span></a>
</span><span id="L-3709"><a href="#L-3709"><span class="linenos">3709</span></a><span class="sd">    :param args: It seems like the code snippet you provided is a function named `load_param` that takes</span>
</span><span id="L-3710"><a href="#L-3710"><span class="linenos">3710</span></a><span class="sd">    an argument `args` of type `argparse` and returns a dictionary. The function is intended to load</span>
</span><span id="L-3711"><a href="#L-3711"><span class="linenos">3711</span></a><span class="sd">    parameters from a file or a string</span>
</span><span id="L-3712"><a href="#L-3712"><span class="linenos">3712</span></a><span class="sd">    :type args: argparse</span>
</span><span id="L-3713"><a href="#L-3713"><span class="linenos">3713</span></a><span class="sd">    :return: A dictionary containing the loaded parameters is being returned.</span>
</span><span id="L-3714"><a href="#L-3714"><span class="linenos">3714</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-3715"><a href="#L-3715"><span class="linenos">3715</span></a>
</span><span id="L-3716"><a href="#L-3716"><span class="linenos">3716</span></a>    <span class="n">param</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3717"><a href="#L-3717"><span class="linenos">3717</span></a>    <span class="k">if</span> <span class="s2">&quot;param&quot;</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span><span id="L-3718"><a href="#L-3718"><span class="linenos">3718</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">param</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">full_path</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">param</span><span class="p">)):</span>
</span><span id="L-3719"><a href="#L-3719"><span class="linenos">3719</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">full_path</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">param</span><span class="p">))</span> <span class="k">as</span> <span class="n">param_file</span><span class="p">:</span>
</span><span id="L-3720"><a href="#L-3720"><span class="linenos">3720</span></a>                <span class="n">param</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">param_file</span><span class="p">)</span>
</span><span id="L-3721"><a href="#L-3721"><span class="linenos">3721</span></a>
</span><span id="L-3722"><a href="#L-3722"><span class="linenos">3722</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3723"><a href="#L-3723"><span class="linenos">3723</span></a>            <span class="n">param</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">param</span><span class="p">)</span>
</span><span id="L-3724"><a href="#L-3724"><span class="linenos">3724</span></a>
</span><span id="L-3725"><a href="#L-3725"><span class="linenos">3725</span></a>    <span class="k">return</span> <span class="n">param</span>
</span><span id="L-3726"><a href="#L-3726"><span class="linenos">3726</span></a>
</span><span id="L-3727"><a href="#L-3727"><span class="linenos">3727</span></a>
</span><span id="L-3728"><a href="#L-3728"><span class="linenos">3728</span></a><span class="k">def</span> <span class="nf">load_config_args</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
</span><span id="L-3729"><a href="#L-3729"><span class="linenos">3729</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3730"><a href="#L-3730"><span class="linenos">3730</span></a><span class="sd">    The function `load_config_args` takes in arguments, extracts specific keys from them, and loads</span>
</span><span id="L-3731"><a href="#L-3731"><span class="linenos">3731</span></a><span class="sd">    parameters in JSON format.</span>
</span><span id="L-3732"><a href="#L-3732"><span class="linenos">3732</span></a>
</span><span id="L-3733"><a href="#L-3733"><span class="linenos">3733</span></a><span class="sd">    :param args: The `load_config_args` function takes in an `args` object as input. This `args` object</span>
</span><span id="L-3734"><a href="#L-3734"><span class="linenos">3734</span></a><span class="sd">    seems to contain various configuration parameters that the function will use to load and return</span>
</span><span id="L-3735"><a href="#L-3735"><span class="linenos">3735</span></a><span class="sd">    specific values</span>
</span><span id="L-3736"><a href="#L-3736"><span class="linenos">3736</span></a><span class="sd">    :return: The function `load_config_args` returns the variables `arguments_dict`, `setup_cfg`,</span>
</span><span id="L-3737"><a href="#L-3737"><span class="linenos">3737</span></a><span class="sd">    `config`, and `param`.</span>
</span><span id="L-3738"><a href="#L-3738"><span class="linenos">3738</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-3739"><a href="#L-3739"><span class="linenos">3739</span></a>
</span><span id="L-3740"><a href="#L-3740"><span class="linenos">3740</span></a>    <span class="c1"># Arguments dict</span>
</span><span id="L-3741"><a href="#L-3741"><span class="linenos">3741</span></a>    <span class="k">if</span> <span class="s2">&quot;arguments_dict&quot;</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span><span id="L-3742"><a href="#L-3742"><span class="linenos">3742</span></a>        <span class="n">arguments_dict</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">arguments_dict</span>
</span><span id="L-3743"><a href="#L-3743"><span class="linenos">3743</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3744"><a href="#L-3744"><span class="linenos">3744</span></a>        <span class="n">arguments_dict</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-3745"><a href="#L-3745"><span class="linenos">3745</span></a>
</span><span id="L-3746"><a href="#L-3746"><span class="linenos">3746</span></a>    <span class="c1"># Setup config</span>
</span><span id="L-3747"><a href="#L-3747"><span class="linenos">3747</span></a>    <span class="k">if</span> <span class="s2">&quot;setup_cfg&quot;</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span><span id="L-3748"><a href="#L-3748"><span class="linenos">3748</span></a>        <span class="n">setup_cfg</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">setup_cfg</span>
</span><span id="L-3749"><a href="#L-3749"><span class="linenos">3749</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3750"><a href="#L-3750"><span class="linenos">3750</span></a>        <span class="n">setup_cfg</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-3751"><a href="#L-3751"><span class="linenos">3751</span></a>
</span><span id="L-3752"><a href="#L-3752"><span class="linenos">3752</span></a>    <span class="c1"># Config</span>
</span><span id="L-3753"><a href="#L-3753"><span class="linenos">3753</span></a>    <span class="k">if</span> <span class="s2">&quot;config&quot;</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span><span id="L-3754"><a href="#L-3754"><span class="linenos">3754</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">config</span>
</span><span id="L-3755"><a href="#L-3755"><span class="linenos">3755</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3756"><a href="#L-3756"><span class="linenos">3756</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3757"><a href="#L-3757"><span class="linenos">3757</span></a>
</span><span id="L-3758"><a href="#L-3758"><span class="linenos">3758</span></a>    <span class="c1"># Load parameters in JSON format</span>
</span><span id="L-3759"><a href="#L-3759"><span class="linenos">3759</span></a>    <span class="n">param</span> <span class="o">=</span> <span class="n">load_param</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="L-3760"><a href="#L-3760"><span class="linenos">3760</span></a>
</span><span id="L-3761"><a href="#L-3761"><span class="linenos">3761</span></a>    <span class="k">return</span> <span class="n">arguments_dict</span><span class="p">,</span> <span class="n">setup_cfg</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">param</span>
</span><span id="L-3762"><a href="#L-3762"><span class="linenos">3762</span></a>
</span><span id="L-3763"><a href="#L-3763"><span class="linenos">3763</span></a>
</span><span id="L-3764"><a href="#L-3764"><span class="linenos">3764</span></a><span class="k">def</span> <span class="nf">load_args</span><span class="p">(</span>
</span><span id="L-3765"><a href="#L-3765"><span class="linenos">3765</span></a>    <span class="n">param</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="L-3766"><a href="#L-3766"><span class="linenos">3766</span></a>    <span class="n">args</span><span class="p">:</span> <span class="n">argparse</span><span class="p">,</span>
</span><span id="L-3767"><a href="#L-3767"><span class="linenos">3767</span></a>    <span class="n">arguments_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="L-3768"><a href="#L-3768"><span class="linenos">3768</span></a>    <span class="n">command</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-3769"><a href="#L-3769"><span class="linenos">3769</span></a>    <span class="n">arguments_list</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-3770"><a href="#L-3770"><span class="linenos">3770</span></a>    <span class="n">strict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-3771"><a href="#L-3771"><span class="linenos">3771</span></a>    <span class="n">section_prefix</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
</span><span id="L-3772"><a href="#L-3772"><span class="linenos">3772</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-3773"><a href="#L-3773"><span class="linenos">3773</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3774"><a href="#L-3774"><span class="linenos">3774</span></a><span class="sd">    The `load_args` function processes arguments based on specified parameters and conditions, raising</span>
</span><span id="L-3775"><a href="#L-3775"><span class="linenos">3775</span></a><span class="sd">    an error if a specified argument is not found.</span>
</span><span id="L-3776"><a href="#L-3776"><span class="linenos">3776</span></a>
</span><span id="L-3777"><a href="#L-3777"><span class="linenos">3777</span></a><span class="sd">    :param param: The `param` parameter in the `load_args` function is a dictionary that stores the</span>
</span><span id="L-3778"><a href="#L-3778"><span class="linenos">3778</span></a><span class="sd">    arguments and their values. It is used to keep track of the arguments that have been loaded or</span>
</span><span id="L-3779"><a href="#L-3779"><span class="linenos">3779</span></a><span class="sd">    processed during the argument parsing process</span>
</span><span id="L-3780"><a href="#L-3780"><span class="linenos">3780</span></a><span class="sd">    :type param: dict</span>
</span><span id="L-3781"><a href="#L-3781"><span class="linenos">3781</span></a><span class="sd">    :param args: The `args` parameter in the `load_args` function is an instance of the</span>
</span><span id="L-3782"><a href="#L-3782"><span class="linenos">3782</span></a><span class="sd">    `argparse.ArgumentParser` class from the `argparse` module in Python. This object is used to parse</span>
</span><span id="L-3783"><a href="#L-3783"><span class="linenos">3783</span></a><span class="sd">    command-line arguments and options. It contains information about the arguments passed to the script</span>
</span><span id="L-3784"><a href="#L-3784"><span class="linenos">3784</span></a><span class="sd">    when it was executed</span>
</span><span id="L-3785"><a href="#L-3785"><span class="linenos">3785</span></a><span class="sd">    :type args: argparse</span>
</span><span id="L-3786"><a href="#L-3786"><span class="linenos">3786</span></a><span class="sd">    :param arguments_dict: The `arguments_dict` parameter in the `load_args` function is a dictionary</span>
</span><span id="L-3787"><a href="#L-3787"><span class="linenos">3787</span></a><span class="sd">    that likely contains information about the arguments expected by the script. It may include details</span>
</span><span id="L-3788"><a href="#L-3788"><span class="linenos">3788</span></a><span class="sd">    such as the argument names, their corresponding sections, and any additional parameters related to</span>
</span><span id="L-3789"><a href="#L-3789"><span class="linenos">3789</span></a><span class="sd">    each argument. This dictionary is used within the `load_args</span>
</span><span id="L-3790"><a href="#L-3790"><span class="linenos">3790</span></a><span class="sd">    :type arguments_dict: dict</span>
</span><span id="L-3791"><a href="#L-3791"><span class="linenos">3791</span></a><span class="sd">    :param command: The `command` parameter in the `load_args` function is a string that represents a</span>
</span><span id="L-3792"><a href="#L-3792"><span class="linenos">3792</span></a><span class="sd">    specific command or action for which arguments need to be loaded. This parameter is used to identify</span>
</span><span id="L-3793"><a href="#L-3793"><span class="linenos">3793</span></a><span class="sd">    the command-specific arguments that should be processed during argument parsing</span>
</span><span id="L-3794"><a href="#L-3794"><span class="linenos">3794</span></a><span class="sd">    :type command: str</span>
</span><span id="L-3795"><a href="#L-3795"><span class="linenos">3795</span></a><span class="sd">    :param arguments_list: The `arguments_list` parameter in the `load_args` function is a dictionary</span>
</span><span id="L-3796"><a href="#L-3796"><span class="linenos">3796</span></a><span class="sd">    that contains the names of arguments that are expected to be present in the `args` object. This list</span>
</span><span id="L-3797"><a href="#L-3797"><span class="linenos">3797</span></a><span class="sd">    is used to specify which arguments should be processed by the function `load_args` during the</span>
</span><span id="L-3798"><a href="#L-3798"><span class="linenos">3798</span></a><span class="sd">    argument parsing process</span>
</span><span id="L-3799"><a href="#L-3799"><span class="linenos">3799</span></a><span class="sd">    :type arguments_list: dict</span>
</span><span id="L-3800"><a href="#L-3800"><span class="linenos">3800</span></a><span class="sd">    :param strict: The `strict` parameter in the `load_args` function is a boolean flag that determines</span>
</span><span id="L-3801"><a href="#L-3801"><span class="linenos">3801</span></a><span class="sd">    whether an error should be raised if an argument specified in the `arguments_list` list is not found</span>
</span><span id="L-3802"><a href="#L-3802"><span class="linenos">3802</span></a><span class="sd">    in the `args` object. If `strict` is set to `True`, an error will be raised, defaults to False</span>
</span><span id="L-3803"><a href="#L-3803"><span class="linenos">3803</span></a><span class="sd">    :type strict: bool (optional)</span>
</span><span id="L-3804"><a href="#L-3804"><span class="linenos">3804</span></a><span class="sd">    :return: The function `load_args` is returning a dictionary named `param` after processing the</span>
</span><span id="L-3805"><a href="#L-3805"><span class="linenos">3805</span></a><span class="sd">    arguments based on the input parameters and conditions specified in the function.</span>
</span><span id="L-3806"><a href="#L-3806"><span class="linenos">3806</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-3807"><a href="#L-3807"><span class="linenos">3807</span></a>
</span><span id="L-3808"><a href="#L-3808"><span class="linenos">3808</span></a>    <span class="c1"># Variables</span>
</span><span id="L-3809"><a href="#L-3809"><span class="linenos">3809</span></a>    <span class="n">arguments_list_to_load</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-3810"><a href="#L-3810"><span class="linenos">3810</span></a>    <span class="n">param_section_not_found</span> <span class="o">=</span> <span class="n">get_random</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
</span><span id="L-3811"><a href="#L-3811"><span class="linenos">3811</span></a>
</span><span id="L-3812"><a href="#L-3812"><span class="linenos">3812</span></a>    <span class="c1"># List from command</span>
</span><span id="L-3813"><a href="#L-3813"><span class="linenos">3813</span></a>    <span class="k">if</span> <span class="n">command</span><span class="p">:</span>
</span><span id="L-3814"><a href="#L-3814"><span class="linenos">3814</span></a>        <span class="n">command_infos</span> <span class="o">=</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;commands_arguments&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-3815"><a href="#L-3815"><span class="linenos">3815</span></a>        <span class="k">for</span> <span class="n">command_group</span> <span class="ow">in</span> <span class="n">command_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;groups&quot;</span><span class="p">,</span> <span class="p">{}):</span>
</span><span id="L-3816"><a href="#L-3816"><span class="linenos">3816</span></a>            <span class="k">for</span> <span class="n">command_argument</span> <span class="ow">in</span> <span class="n">command_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;groups&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">command_group</span><span class="p">):</span>
</span><span id="L-3817"><a href="#L-3817"><span class="linenos">3817</span></a>                <span class="n">command_group_clean</span> <span class="o">=</span> <span class="n">command_group</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="L-3818"><a href="#L-3818"><span class="linenos">3818</span></a>                <span class="k">if</span> <span class="n">command_group_clean</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;main&quot;</span><span class="p">]:</span>
</span><span id="L-3819"><a href="#L-3819"><span class="linenos">3819</span></a>                    <span class="n">command_group_clean</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-3820"><a href="#L-3820"><span class="linenos">3820</span></a>                <span class="n">command_argument</span> <span class="o">=</span> <span class="n">command_argument</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
</span><span id="L-3821"><a href="#L-3821"><span class="linenos">3821</span></a>                <span class="n">arguments_list_to_load</span><span class="p">[</span><span class="n">command_argument</span><span class="p">]</span> <span class="o">=</span> <span class="n">command_group_clean</span>
</span><span id="L-3822"><a href="#L-3822"><span class="linenos">3822</span></a>
</span><span id="L-3823"><a href="#L-3823"><span class="linenos">3823</span></a>    <span class="c1"># Add arguments from arguments</span>
</span><span id="L-3824"><a href="#L-3824"><span class="linenos">3824</span></a>    <span class="k">if</span> <span class="n">arguments_list</span><span class="p">:</span>
</span><span id="L-3825"><a href="#L-3825"><span class="linenos">3825</span></a>        <span class="k">for</span> <span class="n">argument</span> <span class="ow">in</span> <span class="n">arguments_list</span><span class="p">:</span>
</span><span id="L-3826"><a href="#L-3826"><span class="linenos">3826</span></a>            <span class="n">arguments_list_to_load</span><span class="p">[</span><span class="n">argument</span><span class="p">]</span> <span class="o">=</span> <span class="n">arguments_list</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
</span><span id="L-3827"><a href="#L-3827"><span class="linenos">3827</span></a>
</span><span id="L-3828"><a href="#L-3828"><span class="linenos">3828</span></a>    <span class="c1"># Load arguments</span>
</span><span id="L-3829"><a href="#L-3829"><span class="linenos">3829</span></a>    <span class="k">if</span> <span class="n">arguments_list_to_load</span><span class="p">:</span>
</span><span id="L-3830"><a href="#L-3830"><span class="linenos">3830</span></a>        <span class="k">for</span> <span class="n">argument</span> <span class="ow">in</span> <span class="n">arguments_list_to_load</span><span class="p">:</span>
</span><span id="L-3831"><a href="#L-3831"><span class="linenos">3831</span></a>            <span class="k">if</span> <span class="n">argument</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span><span id="L-3832"><a href="#L-3832"><span class="linenos">3832</span></a>                <span class="n">section</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-3833"><a href="#L-3833"><span class="linenos">3833</span></a>                    <span class="n">arguments_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;arguments&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-3834"><a href="#L-3834"><span class="linenos">3834</span></a>                    <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-3835"><a href="#L-3835"><span class="linenos">3835</span></a>                    <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;extra&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-3836"><a href="#L-3836"><span class="linenos">3836</span></a>                    <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;param_section&quot;</span><span class="p">,</span> <span class="n">param_section_not_found</span><span class="p">)</span>
</span><span id="L-3837"><a href="#L-3837"><span class="linenos">3837</span></a>                <span class="p">)</span>
</span><span id="L-3838"><a href="#L-3838"><span class="linenos">3838</span></a>                <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="n">param_section_not_found</span><span class="p">]:</span>
</span><span id="L-3839"><a href="#L-3839"><span class="linenos">3839</span></a>                    <span class="n">section</span> <span class="o">=</span> <span class="n">arguments_list_to_load</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-3840"><a href="#L-3840"><span class="linenos">3840</span></a>                <span class="c1"># section str to list</span>
</span><span id="L-3841"><a href="#L-3841"><span class="linenos">3841</span></a>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-3842"><a href="#L-3842"><span class="linenos">3842</span></a>                    <span class="n">section</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="L-3843"><a href="#L-3843"><span class="linenos">3843</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-3844"><a href="#L-3844"><span class="linenos">3844</span></a>                    <span class="n">section</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-3845"><a href="#L-3845"><span class="linenos">3845</span></a>                <span class="k">if</span> <span class="n">section_prefix</span><span class="p">:</span>
</span><span id="L-3846"><a href="#L-3846"><span class="linenos">3846</span></a>                    <span class="n">section</span> <span class="o">=</span> <span class="n">section_prefix</span> <span class="o">+</span> <span class="n">section</span>
</span><span id="L-3847"><a href="#L-3847"><span class="linenos">3847</span></a>                <span class="n">param</span> <span class="o">=</span> <span class="n">set_param</span><span class="p">(</span>
</span><span id="L-3848"><a href="#L-3848"><span class="linenos">3848</span></a>                    <span class="n">param</span><span class="o">=</span><span class="n">param</span><span class="p">,</span>
</span><span id="L-3849"><a href="#L-3849"><span class="linenos">3849</span></a>                    <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
</span><span id="L-3850"><a href="#L-3850"><span class="linenos">3850</span></a>                    <span class="n">arguments_dict</span><span class="o">=</span><span class="n">arguments_dict</span><span class="p">,</span>
</span><span id="L-3851"><a href="#L-3851"><span class="linenos">3851</span></a>                    <span class="n">section</span><span class="o">=</span><span class="n">section</span><span class="p">,</span>
</span><span id="L-3852"><a href="#L-3852"><span class="linenos">3852</span></a>                    <span class="n">argument</span><span class="o">=</span><span class="n">argument</span><span class="p">,</span>
</span><span id="L-3853"><a href="#L-3853"><span class="linenos">3853</span></a>                <span class="p">)</span>
</span><span id="L-3854"><a href="#L-3854"><span class="linenos">3854</span></a>
</span><span id="L-3855"><a href="#L-3855"><span class="linenos">3855</span></a>            <span class="k">elif</span> <span class="n">strict</span><span class="p">:</span>
</span><span id="L-3856"><a href="#L-3856"><span class="linenos">3856</span></a>                <span class="n">msg_error</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Argument &#39;</span><span class="si">{</span><span class="n">argument</span><span class="si">}</span><span class="s2">&#39; not found in list of aguments&quot;</span>
</span><span id="L-3857"><a href="#L-3857"><span class="linenos">3857</span></a>                <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg_error</span><span class="p">)</span>
</span><span id="L-3858"><a href="#L-3858"><span class="linenos">3858</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg_error</span><span class="p">)</span>
</span><span id="L-3859"><a href="#L-3859"><span class="linenos">3859</span></a>
</span><span id="L-3860"><a href="#L-3860"><span class="linenos">3860</span></a>    <span class="k">return</span> <span class="n">param</span>
</span><span id="L-3861"><a href="#L-3861"><span class="linenos">3861</span></a>
</span><span id="L-3862"><a href="#L-3862"><span class="linenos">3862</span></a>
</span><span id="L-3863"><a href="#L-3863"><span class="linenos">3863</span></a><span class="k">def</span> <span class="nf">get_random</span><span class="p">(</span><span class="n">N</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-3864"><a href="#L-3864"><span class="linenos">3864</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3865"><a href="#L-3865"><span class="linenos">3865</span></a><span class="sd">    The function `get_random` generates a random string of uppercase letters and digits with a default</span>
</span><span id="L-3866"><a href="#L-3866"><span class="linenos">3866</span></a><span class="sd">    length of 10.</span>
</span><span id="L-3867"><a href="#L-3867"><span class="linenos">3867</span></a>
</span><span id="L-3868"><a href="#L-3868"><span class="linenos">3868</span></a><span class="sd">    :param N: The parameter `N` in the `get_random` function represents the length of the random string</span>
</span><span id="L-3869"><a href="#L-3869"><span class="linenos">3869</span></a><span class="sd">    that will be generated. By default, if no value is provided for `N`, it will generate a random</span>
</span><span id="L-3870"><a href="#L-3870"><span class="linenos">3870</span></a><span class="sd">    string of length 10 consisting of uppercase letters and digits, defaults to 10</span>
</span><span id="L-3871"><a href="#L-3871"><span class="linenos">3871</span></a><span class="sd">    :type N: int (optional)</span>
</span><span id="L-3872"><a href="#L-3872"><span class="linenos">3872</span></a><span class="sd">    :return: A random string of length N consisting of uppercase letters and digits.</span>
</span><span id="L-3873"><a href="#L-3873"><span class="linenos">3873</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-3874"><a href="#L-3874"><span class="linenos">3874</span></a>
</span><span id="L-3875"><a href="#L-3875"><span class="linenos">3875</span></a>    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">ascii_uppercase</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">digits</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">N</span><span class="p">))</span>
</span><span id="L-3876"><a href="#L-3876"><span class="linenos">3876</span></a>
</span><span id="L-3877"><a href="#L-3877"><span class="linenos">3877</span></a>
</span><span id="L-3878"><a href="#L-3878"><span class="linenos">3878</span></a><span class="k">def</span> <span class="nf">transcripts_file_to_df</span><span class="p">(</span>
</span><span id="L-3879"><a href="#L-3879"><span class="linenos">3879</span></a>    <span class="n">transcripts_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">column_names</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;transcript&quot;</span><span class="p">,</span> <span class="s2">&quot;gene&quot;</span><span class="p">]</span>
</span><span id="L-3880"><a href="#L-3880"><span class="linenos">3880</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
</span><span id="L-3881"><a href="#L-3881"><span class="linenos">3881</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3882"><a href="#L-3882"><span class="linenos">3882</span></a><span class="sd">    This Python function reads a transcripts file into a pandas DataFrame, filtering out comment lines.</span>
</span><span id="L-3883"><a href="#L-3883"><span class="linenos">3883</span></a>
</span><span id="L-3884"><a href="#L-3884"><span class="linenos">3884</span></a><span class="sd">    :param transcripts_file: The `transcripts_file` parameter is a string that represents the file path</span>
</span><span id="L-3885"><a href="#L-3885"><span class="linenos">3885</span></a><span class="sd">    to a file containing transcript information. This function is designed to read the contents of this</span>
</span><span id="L-3886"><a href="#L-3886"><span class="linenos">3886</span></a><span class="sd">    file and convert it into a pandas DataFrame. The file is expected to be tab-separated with two</span>
</span><span id="L-3887"><a href="#L-3887"><span class="linenos">3887</span></a><span class="sd">    columns: &quot;transcript&quot; and &quot;gene</span>
</span><span id="L-3888"><a href="#L-3888"><span class="linenos">3888</span></a><span class="sd">    :type transcripts_file: str</span>
</span><span id="L-3889"><a href="#L-3889"><span class="linenos">3889</span></a><span class="sd">    :param column_names: The `column_names` parameter is a list that specifies the column names expected</span>
</span><span id="L-3890"><a href="#L-3890"><span class="linenos">3890</span></a><span class="sd">    in the transcripts file. By default, it is set to `[&quot;transcript&quot;, &quot;gene&quot;]`, indicating that the file</span>
</span><span id="L-3891"><a href="#L-3891"><span class="linenos">3891</span></a><span class="sd">    should have two columns named &quot;transcript&quot; and &quot;gene&quot;. If the actual column names in the</span>
</span><span id="L-3892"><a href="#L-3892"><span class="linenos">3892</span></a><span class="sd">    :type column_names: list</span>
</span><span id="L-3893"><a href="#L-3893"><span class="linenos">3893</span></a><span class="sd">    :return: A pandas DataFrame containing transcript and gene information read from the specified file</span>
</span><span id="L-3894"><a href="#L-3894"><span class="linenos">3894</span></a><span class="sd">    after filtering out comment lines is being returned.</span>
</span><span id="L-3895"><a href="#L-3895"><span class="linenos">3895</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-3896"><a href="#L-3896"><span class="linenos">3896</span></a>
</span><span id="L-3897"><a href="#L-3897"><span class="linenos">3897</span></a>    <span class="c1"># Full path</span>
</span><span id="L-3898"><a href="#L-3898"><span class="linenos">3898</span></a>    <span class="n">transcripts_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">transcripts_file</span><span class="p">)</span>
</span><span id="L-3899"><a href="#L-3899"><span class="linenos">3899</span></a>
</span><span id="L-3900"><a href="#L-3900"><span class="linenos">3900</span></a>    <span class="c1"># Transcript dataframe</span>
</span><span id="L-3901"><a href="#L-3901"><span class="linenos">3901</span></a>    <span class="n">transcripts_dataframe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">column_names</span><span class="p">)</span>
</span><span id="L-3902"><a href="#L-3902"><span class="linenos">3902</span></a>
</span><span id="L-3903"><a href="#L-3903"><span class="linenos">3903</span></a>    <span class="c1"># If file exists</span>
</span><span id="L-3904"><a href="#L-3904"><span class="linenos">3904</span></a>    <span class="k">if</span> <span class="n">transcripts_file</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">transcripts_file</span><span class="p">):</span>
</span><span id="L-3905"><a href="#L-3905"><span class="linenos">3905</span></a>
</span><span id="L-3906"><a href="#L-3906"><span class="linenos">3906</span></a>        <span class="c1"># Data</span>
</span><span id="L-3907"><a href="#L-3907"><span class="linenos">3907</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-3908"><a href="#L-3908"><span class="linenos">3908</span></a>
</span><span id="L-3909"><a href="#L-3909"><span class="linenos">3909</span></a>        <span class="c1"># Check column names length by reading all lines</span>
</span><span id="L-3910"><a href="#L-3910"><span class="linenos">3910</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">transcripts_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-3911"><a href="#L-3911"><span class="linenos">3911</span></a>            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-3912"><a href="#L-3912"><span class="linenos">3912</span></a>                <span class="c1"># Split line by tab</span>
</span><span id="L-3913"><a href="#L-3913"><span class="linenos">3913</span></a>                <span class="n">values</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-3914"><a href="#L-3914"><span class="linenos">3914</span></a>                <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="L-3915"><a href="#L-3915"><span class="linenos">3915</span></a>
</span><span id="L-3916"><a href="#L-3916"><span class="linenos">3916</span></a>        <span class="c1"># Convert into DataFrame</span>
</span><span id="L-3917"><a href="#L-3917"><span class="linenos">3917</span></a>        <span class="n">transcripts_dataframe_nb_columns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="L-3918"><a href="#L-3918"><span class="linenos">3918</span></a>
</span><span id="L-3919"><a href="#L-3919"><span class="linenos">3919</span></a>        <span class="c1"># If dataframe not with the same len than input name columns</span>
</span><span id="L-3920"><a href="#L-3920"><span class="linenos">3920</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">transcripts_dataframe_nb_columns</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">column_names</span><span class="p">):</span>
</span><span id="L-3921"><a href="#L-3921"><span class="linenos">3921</span></a>            <span class="n">column_names_new</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-3922"><a href="#L-3922"><span class="linenos">3922</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">transcripts_dataframe_nb_columns</span><span class="o">.</span><span class="n">columns</span><span class="p">)):</span>
</span><span id="L-3923"><a href="#L-3923"><span class="linenos">3923</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">column_names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>
</span><span id="L-3924"><a href="#L-3924"><span class="linenos">3924</span></a>                    <span class="n">column_names_new</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">column_names</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="L-3925"><a href="#L-3925"><span class="linenos">3925</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-3926"><a href="#L-3926"><span class="linenos">3926</span></a>                    <span class="n">column_names_new</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;column_</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-3927"><a href="#L-3927"><span class="linenos">3927</span></a>            <span class="n">column_names</span> <span class="o">=</span> <span class="n">column_names_new</span>
</span><span id="L-3928"><a href="#L-3928"><span class="linenos">3928</span></a>
</span><span id="L-3929"><a href="#L-3929"><span class="linenos">3929</span></a>        <span class="c1"># Create dataframe</span>
</span><span id="L-3930"><a href="#L-3930"><span class="linenos">3930</span></a>        <span class="n">transcripts_dataframe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
</span><span id="L-3931"><a href="#L-3931"><span class="linenos">3931</span></a>            <span class="n">transcripts_file</span><span class="p">,</span>
</span><span id="L-3932"><a href="#L-3932"><span class="linenos">3932</span></a>            <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="L-3933"><a href="#L-3933"><span class="linenos">3933</span></a>            <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-3934"><a href="#L-3934"><span class="linenos">3934</span></a>            <span class="n">names</span><span class="o">=</span><span class="n">column_names</span><span class="p">,</span>
</span><span id="L-3935"><a href="#L-3935"><span class="linenos">3935</span></a>            <span class="n">index_col</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-3936"><a href="#L-3936"><span class="linenos">3936</span></a>        <span class="p">)</span>
</span><span id="L-3937"><a href="#L-3937"><span class="linenos">3937</span></a>
</span><span id="L-3938"><a href="#L-3938"><span class="linenos">3938</span></a>        <span class="c1"># First column</span>
</span><span id="L-3939"><a href="#L-3939"><span class="linenos">3939</span></a>        <span class="n">first_column</span> <span class="o">=</span> <span class="n">column_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-3940"><a href="#L-3940"><span class="linenos">3940</span></a>
</span><span id="L-3941"><a href="#L-3941"><span class="linenos">3941</span></a>        <span class="c1"># Filter comment on lines</span>
</span><span id="L-3942"><a href="#L-3942"><span class="linenos">3942</span></a>        <span class="n">transcripts_dataframe</span> <span class="o">=</span> <span class="n">transcripts_dataframe</span><span class="p">[</span>
</span><span id="L-3943"><a href="#L-3943"><span class="linenos">3943</span></a>            <span class="n">transcripts_dataframe</span><span class="p">[</span><span class="n">first_column</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;^[^#]+&quot;</span><span class="p">)</span>
</span><span id="L-3944"><a href="#L-3944"><span class="linenos">3944</span></a>        <span class="p">]</span>
</span><span id="L-3945"><a href="#L-3945"><span class="linenos">3945</span></a>
</span><span id="L-3946"><a href="#L-3946"><span class="linenos">3946</span></a>    <span class="c1"># Return</span>
</span><span id="L-3947"><a href="#L-3947"><span class="linenos">3947</span></a>    <span class="k">return</span> <span class="n">transcripts_dataframe</span>
</span><span id="L-3948"><a href="#L-3948"><span class="linenos">3948</span></a>
</span><span id="L-3949"><a href="#L-3949"><span class="linenos">3949</span></a>
</span><span id="L-3950"><a href="#L-3950"><span class="linenos">3950</span></a><span class="k">def</span> <span class="nf">identical</span><span class="p">(</span>
</span><span id="L-3951"><a href="#L-3951"><span class="linenos">3951</span></a>    <span class="n">vcf_list</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">begin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;##&quot;</span><span class="p">,</span> <span class="n">line_strip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-3952"><a href="#L-3952"><span class="linenos">3952</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-3953"><a href="#L-3953"><span class="linenos">3953</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3954"><a href="#L-3954"><span class="linenos">3954</span></a><span class="sd">    The `identical` function compares the contents of multiple VCF files to determine if they are</span>
</span><span id="L-3955"><a href="#L-3955"><span class="linenos">3955</span></a><span class="sd">    identical.</span>
</span><span id="L-3956"><a href="#L-3956"><span class="linenos">3956</span></a>
</span><span id="L-3957"><a href="#L-3957"><span class="linenos">3957</span></a><span class="sd">    :param vcf_list: The `vcf_list` parameter is a list of file paths to VCF (Variant Call Format) files</span>
</span><span id="L-3958"><a href="#L-3958"><span class="linenos">3958</span></a><span class="sd">    that you want to compare for identity. The function reads the contents of these files and checks if</span>
</span><span id="L-3959"><a href="#L-3959"><span class="linenos">3959</span></a><span class="sd">    they are identical based on the specified conditions</span>
</span><span id="L-3960"><a href="#L-3960"><span class="linenos">3960</span></a><span class="sd">    :type vcf_list: typing.List[str]</span>
</span><span id="L-3961"><a href="#L-3961"><span class="linenos">3961</span></a><span class="sd">    :param begin: The `begin` parameter in the `identical` function is used to specify a string that</span>
</span><span id="L-3962"><a href="#L-3962"><span class="linenos">3962</span></a><span class="sd">    indicates the beginning of a line in the input files. If a line in the input file starts with the</span>
</span><span id="L-3963"><a href="#L-3963"><span class="linenos">3963</span></a><span class="sd">    specified `begin` string, it will be skipped and not included in the comparison process. By default,</span>
</span><span id="L-3964"><a href="#L-3964"><span class="linenos">3964</span></a><span class="sd">    defaults to ##</span>
</span><span id="L-3965"><a href="#L-3965"><span class="linenos">3965</span></a><span class="sd">    :type begin: str (optional)</span>
</span><span id="L-3966"><a href="#L-3966"><span class="linenos">3966</span></a><span class="sd">    :param line_strip: The `line_strip` parameter in the `identical` function is a boolean flag that</span>
</span><span id="L-3967"><a href="#L-3967"><span class="linenos">3967</span></a><span class="sd">    determines whether each line read from the input files should be stripped of leading and trailing</span>
</span><span id="L-3968"><a href="#L-3968"><span class="linenos">3968</span></a><span class="sd">    whitespaces before being compared. If `line_strip` is set to `True`, each line will be stripped</span>
</span><span id="L-3969"><a href="#L-3969"><span class="linenos">3969</span></a><span class="sd">    using the `strip, defaults to True</span>
</span><span id="L-3970"><a href="#L-3970"><span class="linenos">3970</span></a><span class="sd">    :type line_strip: bool (optional)</span>
</span><span id="L-3971"><a href="#L-3971"><span class="linenos">3971</span></a><span class="sd">    :return: The function `identical` is returning a boolean value. It returns `True` if all the lines</span>
</span><span id="L-3972"><a href="#L-3972"><span class="linenos">3972</span></a><span class="sd">    in the VCF files provided in the `vcf_list` are identical, and `False` otherwise.</span>
</span><span id="L-3973"><a href="#L-3973"><span class="linenos">3973</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-3974"><a href="#L-3974"><span class="linenos">3974</span></a>
</span><span id="L-3975"><a href="#L-3975"><span class="linenos">3975</span></a>    <span class="n">vcfs_lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-3976"><a href="#L-3976"><span class="linenos">3976</span></a>    <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-3977"><a href="#L-3977"><span class="linenos">3977</span></a>    <span class="k">for</span> <span class="n">vcf</span> <span class="ow">in</span> <span class="n">vcf_list</span><span class="p">:</span>
</span><span id="L-3978"><a href="#L-3978"><span class="linenos">3978</span></a>        <span class="n">vcfs_lines</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</span><span id="L-3979"><a href="#L-3979"><span class="linenos">3979</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">vcf</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-3980"><a href="#L-3980"><span class="linenos">3980</span></a>            <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-3981"><a href="#L-3981"><span class="linenos">3981</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">l</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">begin</span><span class="p">)</span> <span class="ow">or</span> <span class="n">begin</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="L-3982"><a href="#L-3982"><span class="linenos">3982</span></a>                    <span class="k">if</span> <span class="n">line_strip</span><span class="p">:</span>
</span><span id="L-3983"><a href="#L-3983"><span class="linenos">3983</span></a>                        <span class="n">l</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-3984"><a href="#L-3984"><span class="linenos">3984</span></a>                    <span class="n">vcfs_lines</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
</span><span id="L-3985"><a href="#L-3985"><span class="linenos">3985</span></a>        <span class="n">k</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-3986"><a href="#L-3986"><span class="linenos">3986</span></a>
</span><span id="L-3987"><a href="#L-3987"><span class="linenos">3987</span></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vcf_list</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-3988"><a href="#L-3988"><span class="linenos">3988</span></a>        <span class="k">if</span> <span class="n">vcfs_lines</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">vcfs_lines</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
</span><span id="L-3989"><a href="#L-3989"><span class="linenos">3989</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-3990"><a href="#L-3990"><span class="linenos">3990</span></a>    <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-3991"><a href="#L-3991"><span class="linenos">3991</span></a>
</span><span id="L-3992"><a href="#L-3992"><span class="linenos">3992</span></a>
</span><span id="L-3993"><a href="#L-3993"><span class="linenos">3993</span></a><span class="k">def</span> <span class="nf">check_docker_image_exists</span><span class="p">(</span><span class="n">image_with_tag</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-3994"><a href="#L-3994"><span class="linenos">3994</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3995"><a href="#L-3995"><span class="linenos">3995</span></a><span class="sd">    Checks if a Docker image with a specific tag exists in the local repository.</span>
</span><span id="L-3996"><a href="#L-3996"><span class="linenos">3996</span></a>
</span><span id="L-3997"><a href="#L-3997"><span class="linenos">3997</span></a><span class="sd">    :param image_with_tag: Image name with tag (e.g., &quot;image:version&quot;)</span>
</span><span id="L-3998"><a href="#L-3998"><span class="linenos">3998</span></a><span class="sd">    :return: True if the image exists, False otherwise</span>
</span><span id="L-3999"><a href="#L-3999"><span class="linenos">3999</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-4000"><a href="#L-4000"><span class="linenos">4000</span></a>    <span class="n">image_name</span><span class="p">,</span> <span class="n">image_tag</span> <span class="o">=</span> <span class="n">image_with_tag</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="L-4001"><a href="#L-4001"><span class="linenos">4001</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-4002"><a href="#L-4002"><span class="linenos">4002</span></a>        <span class="c1"># Run the `docker images` command and capture the output</span>
</span><span id="L-4003"><a href="#L-4003"><span class="linenos">4003</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
</span><span id="L-4004"><a href="#L-4004"><span class="linenos">4004</span></a>            <span class="p">[</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="s2">&quot;images&quot;</span><span class="p">,</span> <span class="s2">&quot;--format&quot;</span><span class="p">,</span> <span class="s2">&quot;{{json . }}&quot;</span><span class="p">],</span>
</span><span id="L-4005"><a href="#L-4005"><span class="linenos">4005</span></a>            <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="L-4006"><a href="#L-4006"><span class="linenos">4006</span></a>            <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="L-4007"><a href="#L-4007"><span class="linenos">4007</span></a>            <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-4008"><a href="#L-4008"><span class="linenos">4008</span></a>        <span class="p">)</span>
</span><span id="L-4009"><a href="#L-4009"><span class="linenos">4009</span></a>        <span class="c1"># Check for errors</span>
</span><span id="L-4010"><a href="#L-4010"><span class="linenos">4010</span></a>        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-4011"><a href="#L-4011"><span class="linenos">4011</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error running Docker command: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-4012"><a href="#L-4012"><span class="linenos">4012</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-4013"><a href="#L-4013"><span class="linenos">4013</span></a>
</span><span id="L-4014"><a href="#L-4014"><span class="linenos">4014</span></a>        <span class="c1"># Search for the image with the specified tag in the command output</span>
</span><span id="L-4015"><a href="#L-4015"><span class="linenos">4015</span></a>        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
</span><span id="L-4016"><a href="#L-4016"><span class="linenos">4016</span></a>            <span class="k">if</span> <span class="n">image</span><span class="p">:</span>
</span><span id="L-4017"><a href="#L-4017"><span class="linenos">4017</span></a>                <span class="n">image_dict</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</span><span id="L-4018"><a href="#L-4018"><span class="linenos">4018</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="L-4019"><a href="#L-4019"><span class="linenos">4019</span></a>                    <span class="n">image_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Repository&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">image_name</span>
</span><span id="L-4020"><a href="#L-4020"><span class="linenos">4020</span></a>                    <span class="ow">and</span> <span class="n">image_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Tag&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">image_tag</span>
</span><span id="L-4021"><a href="#L-4021"><span class="linenos">4021</span></a>                <span class="p">):</span>
</span><span id="L-4022"><a href="#L-4022"><span class="linenos">4022</span></a>                    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Find locally </span><span class="si">{</span><span class="n">image_with_tag</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-4023"><a href="#L-4023"><span class="linenos">4023</span></a>                    <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-4024"><a href="#L-4024"><span class="linenos">4024</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-4025"><a href="#L-4025"><span class="linenos">4025</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-4026"><a href="#L-4026"><span class="linenos">4026</span></a>        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Docker image check: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-4027"><a href="#L-4027"><span class="linenos">4027</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-4028"><a href="#L-4028"><span class="linenos">4028</span></a>
</span><span id="L-4029"><a href="#L-4029"><span class="linenos">4029</span></a>
</span><span id="L-4030"><a href="#L-4030"><span class="linenos">4030</span></a><span class="k">def</span> <span class="nf">params_string_to_dict</span><span class="p">(</span>
</span><span id="L-4031"><a href="#L-4031"><span class="linenos">4031</span></a>    <span class="n">params</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-4032"><a href="#L-4032"><span class="linenos">4032</span></a>    <span class="n">param_sep</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="L-4033"><a href="#L-4033"><span class="linenos">4033</span></a>    <span class="n">var_val_sep</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span>
</span><span id="L-4034"><a href="#L-4034"><span class="linenos">4034</span></a>    <span class="n">val_clear</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;+&quot;</span><span class="p">:</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">},</span>
</span><span id="L-4035"><a href="#L-4035"><span class="linenos">4035</span></a>    <span class="n">header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-4036"><a href="#L-4036"><span class="linenos">4036</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-4037"><a href="#L-4037"><span class="linenos">4037</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-4038"><a href="#L-4038"><span class="linenos">4038</span></a><span class="sd">    The `params_string_to_dict` function in Python converts a string of parameters into a dictionary</span>
</span><span id="L-4039"><a href="#L-4039"><span class="linenos">4039</span></a><span class="sd">    using specified separators and clears certain characters from the parameter values.</span>
</span><span id="L-4040"><a href="#L-4040"><span class="linenos">4040</span></a>
</span><span id="L-4041"><a href="#L-4041"><span class="linenos">4041</span></a><span class="sd">    :param params: The `params` parameter in the `params_string_to_dict` function is a string of</span>
</span><span id="L-4042"><a href="#L-4042"><span class="linenos">4042</span></a><span class="sd">    parameters that you want to convert into a dictionary. It contains the information you want to parse</span>
</span><span id="L-4043"><a href="#L-4043"><span class="linenos">4043</span></a><span class="sd">    and organize into key-value pairs</span>
</span><span id="L-4044"><a href="#L-4044"><span class="linenos">4044</span></a><span class="sd">    :type params: str</span>
</span><span id="L-4045"><a href="#L-4045"><span class="linenos">4045</span></a><span class="sd">    :param param_sep: The `param_sep` parameter in the `params_string_to_dict` function is used to</span>
</span><span id="L-4046"><a href="#L-4046"><span class="linenos">4046</span></a><span class="sd">    specify the separator that separates different parameters in the input string `params`. By default,</span>
</span><span id="L-4047"><a href="#L-4047"><span class="linenos">4047</span></a><span class="sd">    the `param_sep` is set to &quot;:&quot; in the function definition. This means that the function expects the</span>
</span><span id="L-4048"><a href="#L-4048"><span class="linenos">4048</span></a><span class="sd">    parameters in the input, defaults to :</span>
</span><span id="L-4049"><a href="#L-4049"><span class="linenos">4049</span></a><span class="sd">    :type param_sep: str (optional)</span>
</span><span id="L-4050"><a href="#L-4050"><span class="linenos">4050</span></a><span class="sd">    :param var_val_sep: The `var_val_sep` parameter in the `params_string_to_dict` function is used to</span>
</span><span id="L-4051"><a href="#L-4051"><span class="linenos">4051</span></a><span class="sd">    specify the separator between the variable and value in the input string `params`. By default, it is</span>
</span><span id="L-4052"><a href="#L-4052"><span class="linenos">4052</span></a><span class="sd">    set to `&quot;=&quot;`, which means that the function expects the format of each parameter in the `params`,</span>
</span><span id="L-4053"><a href="#L-4053"><span class="linenos">4053</span></a><span class="sd">    defaults to =</span>
</span><span id="L-4054"><a href="#L-4054"><span class="linenos">4054</span></a><span class="sd">    :type var_val_sep: str (optional)</span>
</span><span id="L-4055"><a href="#L-4055"><span class="linenos">4055</span></a><span class="sd">    :param val_clear: The `val_clear` parameter in the `params_string_to_dict` function is a dictionary</span>
</span><span id="L-4056"><a href="#L-4056"><span class="linenos">4056</span></a><span class="sd">    that contains key-value pairs used to clear specific characters from the parameter values before</span>
</span><span id="L-4057"><a href="#L-4057"><span class="linenos">4057</span></a><span class="sd">    storing them in the resulting dictionary</span>
</span><span id="L-4058"><a href="#L-4058"><span class="linenos">4058</span></a><span class="sd">    :type val_clear: dict</span>
</span><span id="L-4059"><a href="#L-4059"><span class="linenos">4059</span></a><span class="sd">    :param header: The `header` parameter in the `params_string_to_dict` function is a boolean flag that</span>
</span><span id="L-4060"><a href="#L-4060"><span class="linenos">4060</span></a><span class="sd">    determines whether the input string `params` has a header that should be skipped when processing the</span>
</span><span id="L-4061"><a href="#L-4061"><span class="linenos">4061</span></a><span class="sd">    parameters. If `header` is set to `True`, the function will start processing parameters from the</span>
</span><span id="L-4062"><a href="#L-4062"><span class="linenos">4062</span></a><span class="sd">    second line onwards, defaults to True</span>
</span><span id="L-4063"><a href="#L-4063"><span class="linenos">4063</span></a><span class="sd">    :type header: bool (optional)</span>
</span><span id="L-4064"><a href="#L-4064"><span class="linenos">4064</span></a><span class="sd">    :return: The function `params_string_to_dict` returns a dictionary containing the parameters</span>
</span><span id="L-4065"><a href="#L-4065"><span class="linenos">4065</span></a><span class="sd">    extracted from the input string `params`.</span>
</span><span id="L-4066"><a href="#L-4066"><span class="linenos">4066</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-4067"><a href="#L-4067"><span class="linenos">4067</span></a>
</span><span id="L-4068"><a href="#L-4068"><span class="linenos">4068</span></a>    <span class="c1"># Params dict</span>
</span><span id="L-4069"><a href="#L-4069"><span class="linenos">4069</span></a>    <span class="n">params_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-4070"><a href="#L-4070"><span class="linenos">4070</span></a>
</span><span id="L-4071"><a href="#L-4071"><span class="linenos">4071</span></a>    <span class="c1"># Header</span>
</span><span id="L-4072"><a href="#L-4072"><span class="linenos">4072</span></a>    <span class="k">if</span> <span class="n">header</span><span class="p">:</span>
</span><span id="L-4073"><a href="#L-4073"><span class="linenos">4073</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-4074"><a href="#L-4074"><span class="linenos">4074</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-4075"><a href="#L-4075"><span class="linenos">4075</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-4076"><a href="#L-4076"><span class="linenos">4076</span></a>
</span><span id="L-4077"><a href="#L-4077"><span class="linenos">4077</span></a>    <span class="c1"># Params</span>
</span><span id="L-4078"><a href="#L-4078"><span class="linenos">4078</span></a>    <span class="n">params_split</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">param_sep</span><span class="p">)</span>
</span><span id="L-4079"><a href="#L-4079"><span class="linenos">4079</span></a>    <span class="k">for</span> <span class="n">params_option</span> <span class="ow">in</span> <span class="n">params_split</span><span class="p">[</span><span class="n">start</span><span class="p">:]:</span>
</span><span id="L-4080"><a href="#L-4080"><span class="linenos">4080</span></a>        <span class="k">if</span> <span class="n">params_option</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="L-4081"><a href="#L-4081"><span class="linenos">4081</span></a>            <span class="n">params_option_var_val</span> <span class="o">=</span> <span class="n">params_option</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">var_val_sep</span><span class="p">)</span>
</span><span id="L-4082"><a href="#L-4082"><span class="linenos">4082</span></a>            <span class="n">params_option_var</span> <span class="o">=</span> <span class="n">params_option_var_val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-4083"><a href="#L-4083"><span class="linenos">4083</span></a>            <span class="n">params_option_val</span> <span class="o">=</span> <span class="n">params_option_var_val</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-4084"><a href="#L-4084"><span class="linenos">4084</span></a>            <span class="k">if</span> <span class="n">params_option_val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-4085"><a href="#L-4085"><span class="linenos">4085</span></a>                <span class="k">if</span> <span class="n">params_option_val</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]:</span>
</span><span id="L-4086"><a href="#L-4086"><span class="linenos">4086</span></a>                    <span class="n">params_option_val</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-4087"><a href="#L-4087"><span class="linenos">4087</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-4088"><a href="#L-4088"><span class="linenos">4088</span></a>                    <span class="c1"># clear value</span>
</span><span id="L-4089"><a href="#L-4089"><span class="linenos">4089</span></a>                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">val_clear</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-4090"><a href="#L-4090"><span class="linenos">4090</span></a>                        <span class="n">params_option_val</span> <span class="o">=</span> <span class="n">params_option_val</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-4091"><a href="#L-4091"><span class="linenos">4091</span></a>                <span class="n">params_dict</span><span class="p">[</span><span class="n">params_option_var</span><span class="p">]</span> <span class="o">=</span> <span class="n">params_option_val</span>
</span><span id="L-4092"><a href="#L-4092"><span class="linenos">4092</span></a>    <span class="k">return</span> <span class="n">params_dict</span>
</span><span id="L-4093"><a href="#L-4093"><span class="linenos">4093</span></a>
</span><span id="L-4094"><a href="#L-4094"><span class="linenos">4094</span></a>
</span><span id="L-4095"><a href="#L-4095"><span class="linenos">4095</span></a><span class="k">def</span> <span class="nf">determine_value_type</span><span class="p">(</span>
</span><span id="L-4096"><a href="#L-4096"><span class="linenos">4096</span></a>    <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sep</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="n">skip_null</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">]</span>
</span><span id="L-4097"><a href="#L-4097"><span class="linenos">4097</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-4098"><a href="#L-4098"><span class="linenos">4098</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-4099"><a href="#L-4099"><span class="linenos">4099</span></a><span class="sd">    The function `determine_value_type` determines the type of a given value in a string format,</span>
</span><span id="L-4100"><a href="#L-4100"><span class="linenos">4100</span></a><span class="sd">    handling lists of values separated by a specified separator and skipping specified null-like</span>
</span><span id="L-4101"><a href="#L-4101"><span class="linenos">4101</span></a><span class="sd">    values.</span>
</span><span id="L-4102"><a href="#L-4102"><span class="linenos">4102</span></a>
</span><span id="L-4103"><a href="#L-4103"><span class="linenos">4103</span></a><span class="sd">    :param value: The `value` parameter in the `determine_value_type` function is the input value</span>
</span><span id="L-4104"><a href="#L-4104"><span class="linenos">4104</span></a><span class="sd">    that you want to determine the type of. It can be a string containing one or more values</span>
</span><span id="L-4105"><a href="#L-4105"><span class="linenos">4105</span></a><span class="sd">    separated by a specified separator (default is &#39;;&#39;)</span>
</span><span id="L-4106"><a href="#L-4106"><span class="linenos">4106</span></a><span class="sd">    :type value: str</span>
</span><span id="L-4107"><a href="#L-4107"><span class="linenos">4107</span></a><span class="sd">    :param sep: The `sep` parameter in the `determine_value_type` function is used to specify the</span>
</span><span id="L-4108"><a href="#L-4108"><span class="linenos">4108</span></a><span class="sd">    separator character that is used to split the input `value` string into individual values. By</span>
</span><span id="L-4109"><a href="#L-4109"><span class="linenos">4109</span></a><span class="sd">    default, the separator is set to &quot;;&quot;, but you can change it to a different character if needed,</span>
</span><span id="L-4110"><a href="#L-4110"><span class="linenos">4110</span></a><span class="sd">    defaults to ;</span>
</span><span id="L-4111"><a href="#L-4111"><span class="linenos">4111</span></a><span class="sd">    :type sep: str (optional)</span>
</span><span id="L-4112"><a href="#L-4112"><span class="linenos">4112</span></a><span class="sd">    :param skip_null: The `skip_null` parameter in the `determine_value_type` function is a list</span>
</span><span id="L-4113"><a href="#L-4113"><span class="linenos">4113</span></a><span class="sd">    that contains values that should be skipped during the type determination process. These values</span>
</span><span id="L-4114"><a href="#L-4114"><span class="linenos">4114</span></a><span class="sd">    are considered as null-like or empty values and are not taken into account when determining the</span>
</span><span id="L-4115"><a href="#L-4115"><span class="linenos">4115</span></a><span class="sd">    type of the given value</span>
</span><span id="L-4116"><a href="#L-4116"><span class="linenos">4116</span></a><span class="sd">    :type skip_null: list</span>
</span><span id="L-4117"><a href="#L-4117"><span class="linenos">4117</span></a><span class="sd">    :return: The function `determine_value_type` returns a string indicating the type of the given</span>
</span><span id="L-4118"><a href="#L-4118"><span class="linenos">4118</span></a><span class="sd">    value. The possible return values are:</span>
</span><span id="L-4119"><a href="#L-4119"><span class="linenos">4119</span></a><span class="sd">    - &quot;VARCHAR&quot; if the value contains at least one non-numeric character</span>
</span><span id="L-4120"><a href="#L-4120"><span class="linenos">4120</span></a><span class="sd">    - &quot;DOUBLE&quot; if the value contains at least one floating-point number</span>
</span><span id="L-4121"><a href="#L-4121"><span class="linenos">4121</span></a><span class="sd">    - &quot;BIGINT&quot; if the value contains only integers</span>
</span><span id="L-4122"><a href="#L-4122"><span class="linenos">4122</span></a><span class="sd">    - None if the value is empty or does not match any</span>
</span><span id="L-4123"><a href="#L-4123"><span class="linenos">4123</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-4124"><a href="#L-4124"><span class="linenos">4124</span></a>
</span><span id="L-4125"><a href="#L-4125"><span class="linenos">4125</span></a>    <span class="c1"># Split the value by sep (dafult &#39;;&#39;) to handle lists of values</span>
</span><span id="L-4126"><a href="#L-4126"><span class="linenos">4126</span></a>    <span class="n">values</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="p">)</span>
</span><span id="L-4127"><a href="#L-4127"><span class="linenos">4127</span></a>
</span><span id="L-4128"><a href="#L-4128"><span class="linenos">4128</span></a>    <span class="n">has_float</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-4129"><a href="#L-4129"><span class="linenos">4129</span></a>    <span class="n">has_int</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-4130"><a href="#L-4130"><span class="linenos">4130</span></a>    <span class="n">has_string</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-4131"><a href="#L-4131"><span class="linenos">4131</span></a>
</span><span id="L-4132"><a href="#L-4132"><span class="linenos">4132</span></a>    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
</span><span id="L-4133"><a href="#L-4133"><span class="linenos">4133</span></a>        <span class="n">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-4134"><a href="#L-4134"><span class="linenos">4134</span></a>
</span><span id="L-4135"><a href="#L-4135"><span class="linenos">4135</span></a>        <span class="c1"># Skip empty or null-like values</span>
</span><span id="L-4136"><a href="#L-4136"><span class="linenos">4136</span></a>        <span class="k">if</span> <span class="n">skip_null</span> <span class="ow">and</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">skip_null</span><span class="p">:</span>
</span><span id="L-4137"><a href="#L-4137"><span class="linenos">4137</span></a>            <span class="k">continue</span>
</span><span id="L-4138"><a href="#L-4138"><span class="linenos">4138</span></a>
</span><span id="L-4139"><a href="#L-4139"><span class="linenos">4139</span></a>        <span class="c1"># Check if value is integer</span>
</span><span id="L-4140"><a href="#L-4140"><span class="linenos">4140</span></a>        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^-?\d+$&quot;</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
</span><span id="L-4141"><a href="#L-4141"><span class="linenos">4141</span></a>            <span class="n">has_int</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-4142"><a href="#L-4142"><span class="linenos">4142</span></a>        <span class="c1"># Check if value is float</span>
</span><span id="L-4143"><a href="#L-4143"><span class="linenos">4143</span></a>        <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^-?\d*\.\d+$&quot;</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
</span><span id="L-4144"><a href="#L-4144"><span class="linenos">4144</span></a>            <span class="n">has_float</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-4145"><a href="#L-4145"><span class="linenos">4145</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-4146"><a href="#L-4146"><span class="linenos">4146</span></a>            <span class="n">has_string</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-4147"><a href="#L-4147"><span class="linenos">4147</span></a>            <span class="k">return</span> <span class="s2">&quot;VARCHAR&quot;</span>  <span class="c1"># force return VARCHAR to speed up</span>
</span><span id="L-4148"><a href="#L-4148"><span class="linenos">4148</span></a>
</span><span id="L-4149"><a href="#L-4149"><span class="linenos">4149</span></a>    <span class="k">if</span> <span class="n">has_string</span><span class="p">:</span>
</span><span id="L-4150"><a href="#L-4150"><span class="linenos">4150</span></a>        <span class="k">return</span> <span class="s2">&quot;VARCHAR&quot;</span>
</span><span id="L-4151"><a href="#L-4151"><span class="linenos">4151</span></a>    <span class="k">elif</span> <span class="n">has_float</span><span class="p">:</span>
</span><span id="L-4152"><a href="#L-4152"><span class="linenos">4152</span></a>        <span class="k">return</span> <span class="s2">&quot;DOUBLE&quot;</span>
</span><span id="L-4153"><a href="#L-4153"><span class="linenos">4153</span></a>    <span class="k">elif</span> <span class="n">has_int</span><span class="p">:</span>
</span><span id="L-4154"><a href="#L-4154"><span class="linenos">4154</span></a>        <span class="k">return</span> <span class="s2">&quot;BIGINT&quot;</span>
</span><span id="L-4155"><a href="#L-4155"><span class="linenos">4155</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-4156"><a href="#L-4156"><span class="linenos">4156</span></a>        <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Default to None if no identifiable type is found</span>
</span><span id="L-4157"><a href="#L-4157"><span class="linenos">4157</span></a>
</span><span id="L-4158"><a href="#L-4158"><span class="linenos">4158</span></a>
</span><span id="L-4159"><a href="#L-4159"><span class="linenos">4159</span></a><span class="k">def</span> <span class="nf">determine_column_types</span><span class="p">(</span><span class="n">values_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-4160"><a href="#L-4160"><span class="linenos">4160</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-4161"><a href="#L-4161"><span class="linenos">4161</span></a><span class="sd">    The function `determine_column_types` analyzes a list of values to determine the predominant</span>
</span><span id="L-4162"><a href="#L-4162"><span class="linenos">4162</span></a><span class="sd">    data type among VARCHAR, DOUBLE, and BIGINT.</span>
</span><span id="L-4163"><a href="#L-4163"><span class="linenos">4163</span></a>
</span><span id="L-4164"><a href="#L-4164"><span class="linenos">4164</span></a><span class="sd">    :param values_list: It seems like you have provided the code snippet for a function that</span>
</span><span id="L-4165"><a href="#L-4165"><span class="linenos">4165</span></a><span class="sd">    determines the type of values in a list, but you have not provided the actual values_list that</span>
</span><span id="L-4166"><a href="#L-4166"><span class="linenos">4166</span></a><span class="sd">    the function will operate on. If you provide me with the values_list, I can help you test the</span>
</span><span id="L-4167"><a href="#L-4167"><span class="linenos">4167</span></a><span class="sd">    function and see how it determines the</span>
</span><span id="L-4168"><a href="#L-4168"><span class="linenos">4168</span></a><span class="sd">    :type values_list: list</span>
</span><span id="L-4169"><a href="#L-4169"><span class="linenos">4169</span></a><span class="sd">    :return: the type of the column based on the types of values present in the input list. It will</span>
</span><span id="L-4170"><a href="#L-4170"><span class="linenos">4170</span></a><span class="sd">    return &quot;VARCHAR&quot; if the list contains any string values, &quot;DOUBLE&quot; if it contains any float</span>
</span><span id="L-4171"><a href="#L-4171"><span class="linenos">4171</span></a><span class="sd">    values, &quot;BIGINT&quot; if it contains any integer values, and &quot;VARCHAR&quot; if none of the specific types</span>
</span><span id="L-4172"><a href="#L-4172"><span class="linenos">4172</span></a><span class="sd">    are found.</span>
</span><span id="L-4173"><a href="#L-4173"><span class="linenos">4173</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-4174"><a href="#L-4174"><span class="linenos">4174</span></a>
</span><span id="L-4175"><a href="#L-4175"><span class="linenos">4175</span></a>    <span class="n">has_float</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-4176"><a href="#L-4176"><span class="linenos">4176</span></a>    <span class="n">has_int</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-4177"><a href="#L-4177"><span class="linenos">4177</span></a>    <span class="n">has_string</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-4178"><a href="#L-4178"><span class="linenos">4178</span></a>
</span><span id="L-4179"><a href="#L-4179"><span class="linenos">4179</span></a>    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values_list</span><span class="p">:</span>
</span><span id="L-4180"><a href="#L-4180"><span class="linenos">4180</span></a>        <span class="n">value_type</span> <span class="o">=</span> <span class="n">determine_value_type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-4181"><a href="#L-4181"><span class="linenos">4181</span></a>
</span><span id="L-4182"><a href="#L-4182"><span class="linenos">4182</span></a>        <span class="k">if</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;VARCHAR&quot;</span><span class="p">:</span>
</span><span id="L-4183"><a href="#L-4183"><span class="linenos">4183</span></a>            <span class="n">has_string</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-4184"><a href="#L-4184"><span class="linenos">4184</span></a>            <span class="k">return</span> <span class="s2">&quot;VARCHAR&quot;</span>  <span class="c1"># force return VARCHAR to speed up</span>
</span><span id="L-4185"><a href="#L-4185"><span class="linenos">4185</span></a>        <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;DOUBLE&quot;</span><span class="p">:</span>
</span><span id="L-4186"><a href="#L-4186"><span class="linenos">4186</span></a>            <span class="n">has_float</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-4187"><a href="#L-4187"><span class="linenos">4187</span></a>        <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;BIGINT&quot;</span><span class="p">:</span>
</span><span id="L-4188"><a href="#L-4188"><span class="linenos">4188</span></a>            <span class="n">has_int</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-4189"><a href="#L-4189"><span class="linenos">4189</span></a>
</span><span id="L-4190"><a href="#L-4190"><span class="linenos">4190</span></a>    <span class="k">if</span> <span class="n">has_string</span><span class="p">:</span>
</span><span id="L-4191"><a href="#L-4191"><span class="linenos">4191</span></a>        <span class="k">return</span> <span class="s2">&quot;VARCHAR&quot;</span>
</span><span id="L-4192"><a href="#L-4192"><span class="linenos">4192</span></a>    <span class="k">elif</span> <span class="n">has_float</span><span class="p">:</span>
</span><span id="L-4193"><a href="#L-4193"><span class="linenos">4193</span></a>        <span class="k">return</span> <span class="s2">&quot;DOUBLE&quot;</span>
</span><span id="L-4194"><a href="#L-4194"><span class="linenos">4194</span></a>    <span class="k">elif</span> <span class="n">has_int</span><span class="p">:</span>
</span><span id="L-4195"><a href="#L-4195"><span class="linenos">4195</span></a>        <span class="k">return</span> <span class="s2">&quot;BIGINT&quot;</span>
</span><span id="L-4196"><a href="#L-4196"><span class="linenos">4196</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-4197"><a href="#L-4197"><span class="linenos">4197</span></a>        <span class="k">return</span> <span class="s2">&quot;VARCHAR&quot;</span>  <span class="c1"># Default to VARCHAR if no identifiable type is found</span>
</span><span id="L-4198"><a href="#L-4198"><span class="linenos">4198</span></a>
</span><span id="L-4199"><a href="#L-4199"><span class="linenos">4199</span></a>
</span><span id="L-4200"><a href="#L-4200"><span class="linenos">4200</span></a><span class="k">def</span> <span class="nf">detect_column_type</span><span class="p">(</span><span class="n">column</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-4201"><a href="#L-4201"><span class="linenos">4201</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-4202"><a href="#L-4202"><span class="linenos">4202</span></a><span class="sd">    The function `detect_column_type` determines the type of a given column in a DataFrame as either</span>
</span><span id="L-4203"><a href="#L-4203"><span class="linenos">4203</span></a><span class="sd">    DATETIME, BOOLEAN, DOUBLE, or VARCHAR.</span>
</span><span id="L-4204"><a href="#L-4204"><span class="linenos">4204</span></a>
</span><span id="L-4205"><a href="#L-4205"><span class="linenos">4205</span></a><span class="sd">    :param column: The function `detect_column_type` takes a column as input and determines its data</span>
</span><span id="L-4206"><a href="#L-4206"><span class="linenos">4206</span></a><span class="sd">    type based on certain conditions. The conditions are as follows:</span>
</span><span id="L-4207"><a href="#L-4207"><span class="linenos">4207</span></a><span class="sd">    :return: The function `detect_column_type` returns a string indicating the type of data in the input</span>
</span><span id="L-4208"><a href="#L-4208"><span class="linenos">4208</span></a><span class="sd">    column. The possible return values are &quot;DATETIME&quot;, &quot;BOOLEAN&quot;, &quot;DOUBLE&quot;, or &quot;VARCHAR&quot; based on the</span>
</span><span id="L-4209"><a href="#L-4209"><span class="linenos">4209</span></a><span class="sd">    conditions checked in the function.</span>
</span><span id="L-4210"><a href="#L-4210"><span class="linenos">4210</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-4211"><a href="#L-4211"><span class="linenos">4211</span></a>
</span><span id="L-4212"><a href="#L-4212"><span class="linenos">4212</span></a>    <span class="kn">from</span> <span class="nn">pandas.api.types</span> <span class="kn">import</span> <span class="n">is_datetime64_any_dtype</span> <span class="k">as</span> <span class="n">is_datetime</span>
</span><span id="L-4213"><a href="#L-4213"><span class="linenos">4213</span></a>
</span><span id="L-4214"><a href="#L-4214"><span class="linenos">4214</span></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">column</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-4215"><a href="#L-4215"><span class="linenos">4215</span></a>        <span class="k">return</span> <span class="s2">&quot;VARCHAR&quot;</span>
</span><span id="L-4216"><a href="#L-4216"><span class="linenos">4216</span></a>    <span class="k">elif</span> <span class="n">is_datetime</span><span class="p">(</span><span class="n">column</span><span class="p">):</span>
</span><span id="L-4217"><a href="#L-4217"><span class="linenos">4217</span></a>        <span class="k">return</span> <span class="s2">&quot;DATETIME&quot;</span>
</span><span id="L-4218"><a href="#L-4218"><span class="linenos">4218</span></a>    <span class="k">elif</span> <span class="n">column</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
</span><span id="L-4219"><a href="#L-4219"><span class="linenos">4219</span></a>        <span class="k">return</span> <span class="s2">&quot;BOOLEAN&quot;</span>
</span><span id="L-4220"><a href="#L-4220"><span class="linenos">4220</span></a>    <span class="k">elif</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;coerce&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">notnull</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
</span><span id="L-4221"><a href="#L-4221"><span class="linenos">4221</span></a>        <span class="k">return</span> <span class="s2">&quot;DOUBLE&quot;</span>
</span><span id="L-4222"><a href="#L-4222"><span class="linenos">4222</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-4223"><a href="#L-4223"><span class="linenos">4223</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-4224"><a href="#L-4224"><span class="linenos">4224</span></a>            <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">column</span><span class="p">)</span>
</span><span id="L-4225"><a href="#L-4225"><span class="linenos">4225</span></a>            <span class="k">return</span> <span class="s2">&quot;DOUBLE&quot;</span>
</span><span id="L-4226"><a href="#L-4226"><span class="linenos">4226</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="L-4227"><a href="#L-4227"><span class="linenos">4227</span></a>            <span class="k">return</span> <span class="s2">&quot;VARCHAR&quot;</span>
</span><span id="L-4228"><a href="#L-4228"><span class="linenos">4228</span></a>
</span><span id="L-4229"><a href="#L-4229"><span class="linenos">4229</span></a>
</span><span id="L-4230"><a href="#L-4230"><span class="linenos">4230</span></a><span class="k">def</span> <span class="nf">determine_column_number</span><span class="p">(</span><span class="n">values_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-4231"><a href="#L-4231"><span class="linenos">4231</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot; &quot;&quot;&quot;</span>
</span><span id="L-4232"><a href="#L-4232"><span class="linenos">4232</span></a>
</span><span id="L-4233"><a href="#L-4233"><span class="linenos">4233</span></a>    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values_list</span><span class="p">:</span>
</span><span id="L-4234"><a href="#L-4234"><span class="linenos">4234</span></a>        <span class="k">if</span> <span class="s2">&quot;;&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
</span><span id="L-4235"><a href="#L-4235"><span class="linenos">4235</span></a>            <span class="k">return</span> <span class="s2">&quot;.&quot;</span>
</span><span id="L-4236"><a href="#L-4236"><span class="linenos">4236</span></a>
</span><span id="L-4237"><a href="#L-4237"><span class="linenos">4237</span></a>    <span class="k">return</span> <span class="s2">&quot;1&quot;</span>
</span><span id="L-4238"><a href="#L-4238"><span class="linenos">4238</span></a>
</span><span id="L-4239"><a href="#L-4239"><span class="linenos">4239</span></a>
</span><span id="L-4240"><a href="#L-4240"><span class="linenos">4240</span></a><span class="k">def</span> <span class="nf">clean_annotation_field</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">char_allowed</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-4241"><a href="#L-4241"><span class="linenos">4241</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-4242"><a href="#L-4242"><span class="linenos">4242</span></a><span class="sd">    The `clean_annotation_field` function removes characters from a string that are not alphanumeric or</span>
</span><span id="L-4243"><a href="#L-4243"><span class="linenos">4243</span></a><span class="sd">    in a specified list.</span>
</span><span id="L-4244"><a href="#L-4244"><span class="linenos">4244</span></a>
</span><span id="L-4245"><a href="#L-4245"><span class="linenos">4245</span></a><span class="sd">    :param name: The `name` parameter is a string that represents the input text that you want to clean.</span>
</span><span id="L-4246"><a href="#L-4246"><span class="linenos">4246</span></a><span class="sd">    It typically contains annotations or other text that you want to process</span>
</span><span id="L-4247"><a href="#L-4247"><span class="linenos">4247</span></a><span class="sd">    :type name: str</span>
</span><span id="L-4248"><a href="#L-4248"><span class="linenos">4248</span></a><span class="sd">    :param char_allowed: The `char_allowed` parameter is a list that contains characters that are</span>
</span><span id="L-4249"><a href="#L-4249"><span class="linenos">4249</span></a><span class="sd">    allowed to remain in the `name` string after cleaning. Any character in the `name` string that is</span>
</span><span id="L-4250"><a href="#L-4250"><span class="linenos">4250</span></a><span class="sd">    not alphanumeric and not in the `char_allowed` list will be removed during the cleaning process</span>
</span><span id="L-4251"><a href="#L-4251"><span class="linenos">4251</span></a><span class="sd">    :type char_allowed: list</span>
</span><span id="L-4252"><a href="#L-4252"><span class="linenos">4252</span></a><span class="sd">    :return: The function `clean_annotation_field` returns a cleaned version of the `name` string, where</span>
</span><span id="L-4253"><a href="#L-4253"><span class="linenos">4253</span></a><span class="sd">    only alphanumeric characters and characters from the `char_allowed` list are kept.</span>
</span><span id="L-4254"><a href="#L-4254"><span class="linenos">4254</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-4255"><a href="#L-4255"><span class="linenos">4255</span></a>
</span><span id="L-4256"><a href="#L-4256"><span class="linenos">4256</span></a>    <span class="c1"># Init</span>
</span><span id="L-4257"><a href="#L-4257"><span class="linenos">4257</span></a>    <span class="k">if</span> <span class="n">char_allowed</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-4258"><a href="#L-4258"><span class="linenos">4258</span></a>        <span class="n">char_allowed</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-4259"><a href="#L-4259"><span class="linenos">4259</span></a>
</span><span id="L-4260"><a href="#L-4260"><span class="linenos">4260</span></a>    <span class="c1"># Convert char_allowed to a set for faster membership testing</span>
</span><span id="L-4261"><a href="#L-4261"><span class="linenos">4261</span></a>    <span class="n">char_allowed_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">char_allowed</span><span class="p">)</span>
</span><span id="L-4262"><a href="#L-4262"><span class="linenos">4262</span></a>
</span><span id="L-4263"><a href="#L-4263"><span class="linenos">4263</span></a>    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="L-4264"><a href="#L-4264"><span class="linenos">4264</span></a>        <span class="n">char</span> <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">name</span> <span class="k">if</span> <span class="p">(</span><span class="n">char</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="ow">or</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">char_allowed_set</span><span class="p">)</span>
</span><span id="L-4265"><a href="#L-4265"><span class="linenos">4265</span></a>    <span class="p">)</span>
</span><span id="L-4266"><a href="#L-4266"><span class="linenos">4266</span></a>
</span><span id="L-4267"><a href="#L-4267"><span class="linenos">4267</span></a>
</span><span id="L-4268"><a href="#L-4268"><span class="linenos">4268</span></a><span class="k">def</span> <span class="nf">docker_automount</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-4269"><a href="#L-4269"><span class="linenos">4269</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-4270"><a href="#L-4270"><span class="linenos">4270</span></a><span class="sd">     Add needed volume to the tool container, check first if we are already inside one otherwise return empty string</span>
</span><span id="L-4271"><a href="#L-4271"><span class="linenos">4271</span></a><span class="sd">    :param containerid: for other linux distribution catch container mount from container ID</span>
</span><span id="L-4272"><a href="#L-4272"><span class="linenos">4272</span></a><span class="sd">    :return: string containing volume to add</span>
</span><span id="L-4273"><a href="#L-4273"><span class="linenos">4273</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-4274"><a href="#L-4274"><span class="linenos">4274</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;/.dockerenv&quot;</span><span class="p">):</span>
</span><span id="L-4275"><a href="#L-4275"><span class="linenos">4275</span></a>        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Not inside docker container, block automount option&quot;</span><span class="p">)</span>
</span><span id="L-4276"><a href="#L-4276"><span class="linenos">4276</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-4277"><a href="#L-4277"><span class="linenos">4277</span></a>
</span><span id="L-4278"><a href="#L-4278"><span class="linenos">4278</span></a>    <span class="n">container_id</span> <span class="o">=</span> <span class="n">command</span><span class="p">(</span>
</span><span id="L-4279"><a href="#L-4279"><span class="linenos">4279</span></a>        <span class="sa">r</span><span class="s2">&quot;cat /proc/self/cgroup | grep &#39;docker&#39; | sed &#39;s/^.*\///&#39; | tail -n1&quot;</span>
</span><span id="L-4280"><a href="#L-4280"><span class="linenos">4280</span></a>    <span class="p">)</span>
</span><span id="L-4281"><a href="#L-4281"><span class="linenos">4281</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">container_id</span><span class="p">:</span>
</span><span id="L-4282"><a href="#L-4282"><span class="linenos">4282</span></a>        <span class="n">container_id</span> <span class="o">=</span> <span class="n">command</span><span class="p">(</span><span class="s2">&quot;cat /proc/1/cpuset | cut -d/ -f3&quot;</span><span class="p">)</span>
</span><span id="L-4283"><a href="#L-4283"><span class="linenos">4283</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">container_id</span><span class="p">:</span>
</span><span id="L-4284"><a href="#L-4284"><span class="linenos">4284</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Can&#39;t get container ID from within container EXIT&quot;</span><span class="p">)</span>
</span><span id="L-4285"><a href="#L-4285"><span class="linenos">4285</span></a>
</span><span id="L-4286"><a href="#L-4286"><span class="linenos">4286</span></a>    <span class="n">mounts_new</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-4287"><a href="#L-4287"><span class="linenos">4287</span></a>    <span class="n">mounts</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">command</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;docker inspect -f json </span><span class="si">{</span><span class="n">container_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;Mounts&quot;</span><span class="p">]</span>
</span><span id="L-4288"><a href="#L-4288"><span class="linenos">4288</span></a>    <span class="k">for</span> <span class="n">volume</span> <span class="ow">in</span> <span class="n">mounts</span><span class="p">:</span>
</span><span id="L-4289"><a href="#L-4289"><span class="linenos">4289</span></a>        <span class="k">if</span> <span class="s2">&quot;sock&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">volume</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Source&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;tmp&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">volume</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Source&quot;</span><span class="p">):</span>
</span><span id="L-4290"><a href="#L-4290"><span class="linenos">4290</span></a>            <span class="n">mounts_new</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; -v </span><span class="si">{</span><span class="n">volume</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">volume</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;Destination&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">volume</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Mode&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-4291"><a href="#L-4291"><span class="linenos">4291</span></a>    <span class="k">return</span> <span class="n">mounts_new</span>
</span></pre></div>


            </section>
                <section id="file_folder">
                    <div class="attr variable">
            <span class="name">file_folder</span>        =
<span class="default_value">&#39;/Users/lebechea/BIOINFO/git/HOWARD/howard/functions&#39;</span>

        
    </div>
    <a class="headerlink" href="#file_folder"></a>
    
    

                </section>
                <section id="subfolder_plugins">
                    <div class="attr variable">
            <span class="name">subfolder_plugins</span>        =
<span class="default_value">&#39;plugins&#39;</span>

        
    </div>
    <a class="headerlink" href="#subfolder_plugins"></a>
    
    

                </section>
                <section id="folder_main">
                    <div class="attr variable">
            <span class="name">folder_main</span>        =
<span class="default_value">&#39;/Users/lebechea/BIOINFO/git/HOWARD&#39;</span>

        
    </div>
    <a class="headerlink" href="#folder_main"></a>
    
    

                </section>
                <section id="folder_config">
                    <div class="attr variable">
            <span class="name">folder_config</span>        =
<span class="default_value">&#39;/Users/lebechea/BIOINFO/git/HOWARD/config&#39;</span>

        
    </div>
    <a class="headerlink" href="#folder_config"></a>
    
    

                </section>
                <section id="folder_user_home">
                    <div class="attr variable">
            <span class="name">folder_user_home</span>        =
<span class="default_value">&#39;/Users/lebechea&#39;</span>

        
    </div>
    <a class="headerlink" href="#folder_user_home"></a>
    
    

                </section>
                <section id="folder_howard_home">
                    <div class="attr variable">
            <span class="name">folder_howard_home</span>        =
<span class="default_value">&#39;/Users/lebechea/howard&#39;</span>

        
    </div>
    <a class="headerlink" href="#folder_howard_home"></a>
    
    

                </section>
                <section id="folder_plugins">
                    <div class="attr variable">
            <span class="name">folder_plugins</span>        =
<span class="default_value">&#39;/Users/lebechea/BIOINFO/git/HOWARD/plugins&#39;</span>

        
    </div>
    <a class="headerlink" href="#folder_plugins"></a>
    
    

                </section>
                <section id="comparison_map">
                    <div class="attr variable">
            <span class="name">comparison_map</span>        =
<span class="default_value">{&#39;gt&#39;: &#39;&gt;&#39;, &#39;gte&#39;: &#39;&gt;=&#39;, &#39;lt&#39;: &#39;&lt;&#39;, &#39;lte&#39;: &#39;&lt;=&#39;, &#39;equals&#39;: &#39;=&#39;, &#39;contains&#39;: &#39;SIMILAR TO&#39;}</span>

        
    </div>
    <a class="headerlink" href="#comparison_map"></a>
    
    

                </section>
                <section id="code_type_map">
                    <div class="attr variable">
            <span class="name">code_type_map</span>        =
<span class="default_value">{&#39;Integer&#39;: 0, &#39;String&#39;: 1, &#39;Float&#39;: 2, &#39;Flag&#39;: 3}</span>

        
    </div>
    <a class="headerlink" href="#code_type_map"></a>
    
    

                </section>
                <section id="code_type_map_to_sql">
                    <div class="attr variable">
            <span class="name">code_type_map_to_sql</span>        =
<span class="default_value">{&#39;Integer&#39;: &#39;INTEGER&#39;, &#39;String&#39;: &#39;VARCHAR&#39;, &#39;Float&#39;: &#39;FLOAT&#39;, &#39;Flag&#39;: &#39;VARCHAR&#39;}</span>

        
    </div>
    <a class="headerlink" href="#code_type_map_to_sql"></a>
    
    

                </section>
                <section id="file_format_delimiters">
                    <div class="attr variable">
            <span class="name">file_format_delimiters</span>        =
<span class="default_value">{&#39;vcf&#39;: &#39;\t&#39;, &#39;tsv&#39;: &#39;\t&#39;, &#39;csv&#39;: &#39;,&#39;, &#39;psv&#39;: &#39;|&#39;, &#39;bed&#39;: &#39;\t&#39;}</span>

        
    </div>
    <a class="headerlink" href="#file_format_delimiters"></a>
    
    

                </section>
                <section id="file_format_allowed">
                    <div class="attr variable">
            <span class="name">file_format_allowed</span>        =
<span class="default_value">[&#39;vcf&#39;, &#39;tsv&#39;, &#39;csv&#39;, &#39;psv&#39;, &#39;bed&#39;, &#39;json&#39;, &#39;parquet&#39;, &#39;duckdb&#39;]</span>

        
    </div>
    <a class="headerlink" href="#file_format_allowed"></a>
    
    

                </section>
                <section id="file_compressed_format">
                    <div class="attr variable">
            <span class="name">file_compressed_format</span>        =
<span class="default_value">[&#39;gz&#39;, &#39;bgz&#39;]</span>

        
    </div>
    <a class="headerlink" href="#file_compressed_format"></a>
    
    

                </section>
                <section id="vcf_required_release">
                    <div class="attr variable">
            <span class="name">vcf_required_release</span>        =
<span class="default_value">&#39;##fileformat=VCFv4.2&#39;</span>

        
    </div>
    <a class="headerlink" href="#vcf_required_release"></a>
    
    

                </section>
                <section id="vcf_required_columns">
                    <div class="attr variable">
            <span class="name">vcf_required_columns</span>        =
<span class="default_value">[&#39;#CHROM&#39;, &#39;POS&#39;, &#39;ID&#39;, &#39;REF&#39;, &#39;ALT&#39;, &#39;QUAL&#39;, &#39;FILTER&#39;, &#39;INFO&#39;]</span>

        
    </div>
    <a class="headerlink" href="#vcf_required_columns"></a>
    
    

                </section>
                <section id="vcf_required">
                    <div class="attr variable">
            <span class="name">vcf_required</span>        =
<span class="default_value">[&#39;##fileformat=VCFv4.2&#39;, &#39;#CHROM\tPOS\tID\tREF\tALT\tQUAL\tFILTER\tINFO&#39;]</span>

        
    </div>
    <a class="headerlink" href="#vcf_required"></a>
    
    

                </section>
                <section id="DEFAULT_TOOLS_FOLDER">
                    <div class="attr variable">
            <span class="name">DEFAULT_TOOLS_FOLDER</span>        =
<span class="default_value">&#39;/Users/lebechea/howard/tools&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_TOOLS_FOLDER"></a>
    
    

                </section>
                <section id="DEFAULT_TOOLS_BIN">
                    <div class="attr variable">
            <span class="name">DEFAULT_TOOLS_BIN</span>        =
<input id="DEFAULT_TOOLS_BIN-view-value" class="view-value-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
            <label class="view-value-button pdoc-button" for="DEFAULT_TOOLS_BIN-view-value"></label><span class="default_value">{&#39;bcftools&#39;: {&#39;bin&#39;: &#39;bcftools&#39;}, &#39;bgzip&#39;: {&#39;bin&#39;: &#39;bgzip&#39;}, &#39;java&#39;: {&#39;bin&#39;: &#39;java&#39;}, &#39;snpeff&#39;: {&#39;jar&#39;: &#39;~/howard/tools/snpeff/current/bin/snpEff.jar&#39;}, &#39;annovar&#39;: {&#39;perl&#39;: &#39;~/howard/tools/annovar/current/bin/table_annovar.pl&#39;}, &#39;exomiser&#39;: {&#39;jar&#39;: &#39;~/howard/tools/exomiser/current/bin/exomiser.jar&#39;}, &#39;docker&#39;: {&#39;bin&#39;: &#39;docker&#39;}, &#39;splice&#39;: {&#39;docker&#39;: {&#39;image&#39;: &#39;bioinfochrustrasbourg/splice:0.2.1&#39;, &#39;entrypoint&#39;: &#39;/bin/bash&#39;, &#39;options&#39;: None, &#39;command&#39;: None}}}</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_TOOLS_BIN"></a>
    
    

                </section>
                <section id="DEFAULT_ANNOVAR_URL">
                    <div class="attr variable">
            <span class="name">DEFAULT_ANNOVAR_URL</span>        =
<span class="default_value">&#39;http://www.openbioinformatics.org/annovar/download&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_ANNOVAR_URL"></a>
    
    

                </section>
                <section id="DEFAULT_REFSEQ_URL">
                    <div class="attr variable">
            <span class="name">DEFAULT_REFSEQ_URL</span>        =
<span class="default_value">&#39;http://hgdownload.soe.ucsc.edu/goldenPath&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_REFSEQ_URL"></a>
    
    

                </section>
                <section id="DEFAULT_DBNSFP_URL">
                    <div class="attr variable">
            <span class="name">DEFAULT_DBNSFP_URL</span>        =
<span class="default_value">&#39;https://dbnsfp.s3.amazonaws.com&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_DBNSFP_URL"></a>
    
    

                </section>
                <section id="DEFAULT_EXOMISER_URL">
                    <div class="attr variable">
            <span class="name">DEFAULT_EXOMISER_URL</span>        =
<span class="default_value">&#39;http://data.monarchinitiative.org/exomiser&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_EXOMISER_URL"></a>
    
    

                </section>
                <section id="DEFAULT_EXOMISER_REMM_URL">
                    <div class="attr variable">
            <span class="name">DEFAULT_EXOMISER_REMM_URL</span>        =
<span class="default_value">&#39;https://kircherlab.bihealth.org/download/ReMM&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_EXOMISER_REMM_URL"></a>
    
    

                </section>
                <section id="DEFAULT_EXOMISER_CADD_URL">
                    <div class="attr variable">
            <span class="name">DEFAULT_EXOMISER_CADD_URL</span>        =
<span class="default_value">&#39;https://kircherlab.bihealth.org/download/CADD&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_EXOMISER_CADD_URL"></a>
    
    

                </section>
                <section id="DEFAULT_ALPHAMISSENSE_URL">
                    <div class="attr variable">
            <span class="name">DEFAULT_ALPHAMISSENSE_URL</span>        =
<span class="default_value">&#39;https://storage.googleapis.com/dm_alphamissense&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_ALPHAMISSENSE_URL"></a>
    
    

                </section>
                <section id="DEFAULT_DBSNP_URL">
                    <div class="attr variable">
            <span class="name">DEFAULT_DBSNP_URL</span>        =
<span class="default_value">&#39;https://ftp.ncbi.nih.gov/snp/archive&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_DBSNP_URL"></a>
    
    

                </section>
                <section id="DEFAULT_DATABASE_FOLDER">
                    <div class="attr variable">
            <span class="name">DEFAULT_DATABASE_FOLDER</span>        =
<span class="default_value">&#39;/Users/lebechea/howard/databases&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_DATABASE_FOLDER"></a>
    
    

                </section>
                <section id="DEFAULT_ANNOTATIONS_FOLDER">
                    <div class="attr variable">
            <span class="name">DEFAULT_ANNOTATIONS_FOLDER</span>        =
<span class="default_value">&#39;/Users/lebechea/howard/databases/annotations/current&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_ANNOTATIONS_FOLDER"></a>
    
    

                </section>
                <section id="DEFAULT_GENOME_FOLDER">
                    <div class="attr variable">
            <span class="name">DEFAULT_GENOME_FOLDER</span>        =
<span class="default_value">&#39;/Users/lebechea/howard/databases/genomes/current&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_GENOME_FOLDER"></a>
    
    

                </section>
                <section id="DEFAULT_SNPEFF_FOLDER">
                    <div class="attr variable">
            <span class="name">DEFAULT_SNPEFF_FOLDER</span>        =
<span class="default_value">&#39;/Users/lebechea/howard/databases/snpeff/current&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_SNPEFF_FOLDER"></a>
    
    

                </section>
                <section id="DEFAULT_ANNOVAR_FOLDER">
                    <div class="attr variable">
            <span class="name">DEFAULT_ANNOVAR_FOLDER</span>        =
<span class="default_value">&#39;/Users/lebechea/howard/databases/annovar/current&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_ANNOVAR_FOLDER"></a>
    
    

                </section>
                <section id="DEFAULT_REFSEQ_FOLDER">
                    <div class="attr variable">
            <span class="name">DEFAULT_REFSEQ_FOLDER</span>        =
<span class="default_value">&#39;/Users/lebechea/howard/databases/refseq/current&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_REFSEQ_FOLDER"></a>
    
    

                </section>
                <section id="DEFAULT_DBNSFP_FOLDER">
                    <div class="attr variable">
            <span class="name">DEFAULT_DBNSFP_FOLDER</span>        =
<span class="default_value">&#39;/Users/lebechea/howard/databases/dbnsfp/current&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_DBNSFP_FOLDER"></a>
    
    

                </section>
                <section id="DEFAULT_EXOMISER_FOLDER">
                    <div class="attr variable">
            <span class="name">DEFAULT_EXOMISER_FOLDER</span>        =
<span class="default_value">&#39;/Users/lebechea/howard/databases/exomiser/current&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_EXOMISER_FOLDER"></a>
    
    

                </section>
                <section id="DEFAULT_DBSNP_FOLDER">
                    <div class="attr variable">
            <span class="name">DEFAULT_DBSNP_FOLDER</span>        =
<span class="default_value">&#39;/Users/lebechea/howard/databases/exomiser/dbsnp&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_DBSNP_FOLDER"></a>
    
    

                </section>
                <section id="DEFAULT_SPLICE_FOLDER">
                    <div class="attr variable">
            <span class="name">DEFAULT_SPLICE_FOLDER</span>        =
<span class="default_value">&#39;/Users/lebechea/howard/databases/splice&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_SPLICE_FOLDER"></a>
    
    

                </section>
                <section id="DEFAULT_SPLICEAI_FOLDER">
                    <div class="attr variable">
            <span class="name">DEFAULT_SPLICEAI_FOLDER</span>        =
<span class="default_value">&#39;/Users/lebechea/howard/databases/spliceai&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_SPLICEAI_FOLDER"></a>
    
    

                </section>
                <section id="DEFAULT_SPIP_FOLDER">
                    <div class="attr variable">
            <span class="name">DEFAULT_SPIP_FOLDER</span>        =
<span class="default_value">&#39;/Users/lebechea/howard/databases/spip&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_SPIP_FOLDER"></a>
    
    

                </section>
                <section id="DEFAULT_DATA_FOLDER">
                    <div class="attr variable">
            <span class="name">DEFAULT_DATA_FOLDER</span>        =
<span class="default_value">&#39;/Users/lebechea/howard/data&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_DATA_FOLDER"></a>
    
    

                </section>
                <section id="DEFAULT_ASSEMBLY">
                    <div class="attr variable">
            <span class="name">DEFAULT_ASSEMBLY</span>        =
<span class="default_value">&#39;hg19&#39;</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_ASSEMBLY"></a>
    
    

                </section>
                <section id="DUCKDB_EXTENSION">
                    <div class="attr variable">
            <span class="name">DUCKDB_EXTENSION</span>        =
<span class="default_value">&#39;/Users/lebechea/BIOINFO/git/HOWARD/howard/functions/duckdb_extension&#39;</span>

        
    </div>
    <a class="headerlink" href="#DUCKDB_EXTENSION"></a>
    
    

                </section>
                <section id="MACHIN_LIST">
                    <div class="attr variable">
            <span class="name">MACHIN_LIST</span>        =
<span class="default_value">{&#39;amd64&#39;: &#39;amd64&#39;, &#39;arm64&#39;: &#39;arm64&#39;}</span>

        
    </div>
    <a class="headerlink" href="#MACHIN_LIST"></a>
    
    

                </section>
                <section id="BCFTOOLS_FORMAT">
                    <div class="attr variable">
            <span class="name">BCFTOOLS_FORMAT</span>        =
<span class="default_value">[&#39;vcf&#39;, &#39;bed&#39;]</span>

        
    </div>
    <a class="headerlink" href="#BCFTOOLS_FORMAT"></a>
    
    

                </section>
                <section id="LOG_FORMAT">
                    <div class="attr variable">
            <span class="name">LOG_FORMAT</span>        =
<span class="default_value">&#39;#[%(asctime)s] [%(levelname)s] %(message)s&#39;</span>

        
    </div>
    <a class="headerlink" href="#LOG_FORMAT"></a>
    
    

                </section>
                <section id="CODE_TYPE_MAP">
                    <div class="attr variable">
            <span class="name">CODE_TYPE_MAP</span>        =
<span class="default_value">{&#39;Integer&#39;: 0, &#39;String&#39;: 1, &#39;Float&#39;: 2, &#39;Flag&#39;: 3}</span>

        
    </div>
    <a class="headerlink" href="#CODE_TYPE_MAP"></a>
    
    

                </section>
                <section id="GENOTYPE_MAP">
                    <div class="attr variable">
            <span class="name">GENOTYPE_MAP</span>        =
<span class="default_value">{None: &#39;.&#39;, -1: &#39;A&#39;, -2: &#39;G&#39;, -3: &#39;R&#39;}</span>

        
    </div>
    <a class="headerlink" href="#GENOTYPE_MAP"></a>
    
    

                </section>
                <section id="DTYPE_LIMIT_AUTO">
                    <div class="attr variable">
            <span class="name">DTYPE_LIMIT_AUTO</span>        =
<span class="default_value">10000</span>

        
    </div>
    <a class="headerlink" href="#DTYPE_LIMIT_AUTO"></a>
    
    

                </section>
                <section id="DEFAULT_CHUNK_SIZE">
                    <div class="attr variable">
            <span class="name">DEFAULT_CHUNK_SIZE</span>        =
<span class="default_value">1048576</span>

        
    </div>
    <a class="headerlink" href="#DEFAULT_CHUNK_SIZE"></a>
    
    

                </section>
                <section id="remove_if_exists">
                            <input id="remove_if_exists-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove_if_exists</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">filepaths</span><span class="p">:</span> <span class="nb">list</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="remove_if_exists-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#remove_if_exists"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="remove_if_exists-169"><a href="#remove_if_exists-169"><span class="linenos">169</span></a><span class="k">def</span> <span class="nf">remove_if_exists</span><span class="p">(</span><span class="n">filepaths</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="remove_if_exists-170"><a href="#remove_if_exists-170"><span class="linenos">170</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="remove_if_exists-171"><a href="#remove_if_exists-171"><span class="linenos">171</span></a><span class="sd">    The function removes a file if it exists at the specified filepath(s).</span>
</span><span id="remove_if_exists-172"><a href="#remove_if_exists-172"><span class="linenos">172</span></a>
</span><span id="remove_if_exists-173"><a href="#remove_if_exists-173"><span class="linenos">173</span></a><span class="sd">    :param filepaths: A list of file paths that you want to check for existence and remove if they exist</span>
</span><span id="remove_if_exists-174"><a href="#remove_if_exists-174"><span class="linenos">174</span></a><span class="sd">    :type filepaths: list</span>
</span><span id="remove_if_exists-175"><a href="#remove_if_exists-175"><span class="linenos">175</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="remove_if_exists-176"><a href="#remove_if_exists-176"><span class="linenos">176</span></a>
</span><span id="remove_if_exists-177"><a href="#remove_if_exists-177"><span class="linenos">177</span></a>    <span class="c1"># If input is string</span>
</span><span id="remove_if_exists-178"><a href="#remove_if_exists-178"><span class="linenos">178</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filepaths</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="remove_if_exists-179"><a href="#remove_if_exists-179"><span class="linenos">179</span></a>        <span class="n">filepaths</span> <span class="o">=</span> <span class="p">[</span><span class="n">filepaths</span><span class="p">]</span>
</span><span id="remove_if_exists-180"><a href="#remove_if_exists-180"><span class="linenos">180</span></a>
</span><span id="remove_if_exists-181"><a href="#remove_if_exists-181"><span class="linenos">181</span></a>    <span class="k">for</span> <span class="n">filepath</span> <span class="ow">in</span> <span class="n">filepaths</span><span class="p">:</span>
</span><span id="remove_if_exists-182"><a href="#remove_if_exists-182"><span class="linenos">182</span></a>
</span><span id="remove_if_exists-183"><a href="#remove_if_exists-183"><span class="linenos">183</span></a>        <span class="k">if</span> <span class="n">filepath</span><span class="p">:</span>
</span><span id="remove_if_exists-184"><a href="#remove_if_exists-184"><span class="linenos">184</span></a>
</span><span id="remove_if_exists-185"><a href="#remove_if_exists-185"><span class="linenos">185</span></a>            <span class="c1"># full path</span>
</span><span id="remove_if_exists-186"><a href="#remove_if_exists-186"><span class="linenos">186</span></a>            <span class="n">filepath</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="remove_if_exists-187"><a href="#remove_if_exists-187"><span class="linenos">187</span></a>
</span><span id="remove_if_exists-188"><a href="#remove_if_exists-188"><span class="linenos">188</span></a>            <span class="c1"># If path exists</span>
</span><span id="remove_if_exists-189"><a href="#remove_if_exists-189"><span class="linenos">189</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filepath</span><span class="p">):</span>
</span><span id="remove_if_exists-190"><a href="#remove_if_exists-190"><span class="linenos">190</span></a>
</span><span id="remove_if_exists-191"><a href="#remove_if_exists-191"><span class="linenos">191</span></a>                <span class="c1"># Folder</span>
</span><span id="remove_if_exists-192"><a href="#remove_if_exists-192"><span class="linenos">192</span></a>                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">filepath</span><span class="p">):</span>
</span><span id="remove_if_exists-193"><a href="#remove_if_exists-193"><span class="linenos">193</span></a>                    <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="remove_if_exists-194"><a href="#remove_if_exists-194"><span class="linenos">194</span></a>
</span><span id="remove_if_exists-195"><a href="#remove_if_exists-195"><span class="linenos">195</span></a>                <span class="c1"># File</span>
</span><span id="remove_if_exists-196"><a href="#remove_if_exists-196"><span class="linenos">196</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="remove_if_exists-197"><a href="#remove_if_exists-197"><span class="linenos">197</span></a>                    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The function removes a file if it exists at the specified filepath(s).</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>filepaths</strong>:  A list of file paths that you want to check for existence and remove if they exist</li>
</ul>
</div>


                </section>
                <section id="set_log_level">
                            <input id="set_log_level-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_log_level</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">verbosity</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">log_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="set_log_level-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#set_log_level"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="set_log_level-200"><a href="#set_log_level-200"><span class="linenos">200</span></a><span class="k">def</span> <span class="nf">set_log_level</span><span class="p">(</span><span class="n">verbosity</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">log_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="set_log_level-201"><a href="#set_log_level-201"><span class="linenos">201</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="set_log_level-202"><a href="#set_log_level-202"><span class="linenos">202</span></a><span class="sd">    It sets the log level of the Python logging module</span>
</span><span id="set_log_level-203"><a href="#set_log_level-203"><span class="linenos">203</span></a>
</span><span id="set_log_level-204"><a href="#set_log_level-204"><span class="linenos">204</span></a><span class="sd">    :param verbosity: The level of verbosity</span>
</span><span id="set_log_level-205"><a href="#set_log_level-205"><span class="linenos">205</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="set_log_level-206"><a href="#set_log_level-206"><span class="linenos">206</span></a>
</span><span id="set_log_level-207"><a href="#set_log_level-207"><span class="linenos">207</span></a>    <span class="n">verbosity</span> <span class="o">=</span> <span class="n">verbosity</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="set_log_level-208"><a href="#set_log_level-208"><span class="linenos">208</span></a>    <span class="n">configs</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="set_log_level-209"><a href="#set_log_level-209"><span class="linenos">209</span></a>        <span class="s2">&quot;debug&quot;</span><span class="p">:</span> <span class="n">log</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span>
</span><span id="set_log_level-210"><a href="#set_log_level-210"><span class="linenos">210</span></a>        <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="n">log</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span>
</span><span id="set_log_level-211"><a href="#set_log_level-211"><span class="linenos">211</span></a>        <span class="s2">&quot;warning&quot;</span><span class="p">:</span> <span class="n">log</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>
</span><span id="set_log_level-212"><a href="#set_log_level-212"><span class="linenos">212</span></a>        <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">log</span><span class="o">.</span><span class="n">ERROR</span><span class="p">,</span>
</span><span id="set_log_level-213"><a href="#set_log_level-213"><span class="linenos">213</span></a>        <span class="s2">&quot;critical&quot;</span><span class="p">:</span> <span class="n">log</span><span class="o">.</span><span class="n">CRITICAL</span><span class="p">,</span>
</span><span id="set_log_level-214"><a href="#set_log_level-214"><span class="linenos">214</span></a>        <span class="s2">&quot;notset&quot;</span><span class="p">:</span> <span class="n">log</span><span class="o">.</span><span class="n">NOTSET</span><span class="p">,</span>
</span><span id="set_log_level-215"><a href="#set_log_level-215"><span class="linenos">215</span></a>    <span class="p">}</span>
</span><span id="set_log_level-216"><a href="#set_log_level-216"><span class="linenos">216</span></a>    <span class="k">if</span> <span class="n">verbosity</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">configs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="set_log_level-217"><a href="#set_log_level-217"><span class="linenos">217</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unknown verbosity level:&quot;</span> <span class="o">+</span> <span class="n">verbosity</span><span class="p">)</span>
</span><span id="set_log_level-218"><a href="#set_log_level-218"><span class="linenos">218</span></a>
</span><span id="set_log_level-219"><a href="#set_log_level-219"><span class="linenos">219</span></a>    <span class="n">log</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
</span><span id="set_log_level-220"><a href="#set_log_level-220"><span class="linenos">220</span></a>        <span class="n">filename</span><span class="o">=</span><span class="n">log_file</span><span class="p">,</span>
</span><span id="set_log_level-221"><a href="#set_log_level-221"><span class="linenos">221</span></a>        <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
</span><span id="set_log_level-222"><a href="#set_log_level-222"><span class="linenos">222</span></a>        <span class="nb">format</span><span class="o">=</span><span class="n">LOG_FORMAT</span><span class="p">,</span>
</span><span id="set_log_level-223"><a href="#set_log_level-223"><span class="linenos">223</span></a>        <span class="n">datefmt</span><span class="o">=</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">,</span>
</span><span id="set_log_level-224"><a href="#set_log_level-224"><span class="linenos">224</span></a>        <span class="n">level</span><span class="o">=</span><span class="n">configs</span><span class="p">[</span><span class="n">verbosity</span><span class="p">],</span>
</span><span id="set_log_level-225"><a href="#set_log_level-225"><span class="linenos">225</span></a>    <span class="p">)</span>
</span><span id="set_log_level-226"><a href="#set_log_level-226"><span class="linenos">226</span></a>
</span><span id="set_log_level-227"><a href="#set_log_level-227"><span class="linenos">227</span></a>    <span class="k">return</span> <span class="n">verbosity</span>
</span></pre></div>


            <div class="docstring"><p>It sets the log level of the Python logging module</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>verbosity</strong>:  The level of verbosity</li>
</ul>
</div>


                </section>
                <section id="split_interval">
                            <input id="split_interval-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">split_interval</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">start</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">end</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">step</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>, </span><span class="param"><span class="n">ncuts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="split_interval-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#split_interval"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="split_interval-230"><a href="#split_interval-230"><span class="linenos">230</span></a><span class="k">def</span> <span class="nf">split_interval</span><span class="p">(</span><span class="n">start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">step</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">ncuts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="split_interval-231"><a href="#split_interval-231"><span class="linenos">231</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="split_interval-232"><a href="#split_interval-232"><span class="linenos">232</span></a><span class="sd">    It takes a start and end value, and either a step size or a number of cuts, and returns a list of</span>
</span><span id="split_interval-233"><a href="#split_interval-233"><span class="linenos">233</span></a><span class="sd">    values that split the interval into equal-sized pieces</span>
</span><span id="split_interval-234"><a href="#split_interval-234"><span class="linenos">234</span></a>
</span><span id="split_interval-235"><a href="#split_interval-235"><span class="linenos">235</span></a><span class="sd">    :param start: the start of the interval</span>
</span><span id="split_interval-236"><a href="#split_interval-236"><span class="linenos">236</span></a><span class="sd">    :param end: the end of the interval</span>
</span><span id="split_interval-237"><a href="#split_interval-237"><span class="linenos">237</span></a><span class="sd">    :param step: the step size between each cut</span>
</span><span id="split_interval-238"><a href="#split_interval-238"><span class="linenos">238</span></a><span class="sd">    :param ncuts: number of cuts to make</span>
</span><span id="split_interval-239"><a href="#split_interval-239"><span class="linenos">239</span></a><span class="sd">    :return: A list of numbers.</span>
</span><span id="split_interval-240"><a href="#split_interval-240"><span class="linenos">240</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="split_interval-241"><a href="#split_interval-241"><span class="linenos">241</span></a>    <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ncuts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="split_interval-242"><a href="#split_interval-242"><span class="linenos">242</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Either step or ncuts must be provided&quot;</span><span class="p">)</span>
</span><span id="split_interval-243"><a href="#split_interval-243"><span class="linenos">243</span></a>    <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ncuts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="split_interval-244"><a href="#split_interval-244"><span class="linenos">244</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only one of step or ncuts must be provided&quot;</span><span class="p">)</span>
</span><span id="split_interval-245"><a href="#split_interval-245"><span class="linenos">245</span></a>    <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="split_interval-246"><a href="#split_interval-246"><span class="linenos">246</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">step</span><span class="p">))</span> <span class="o">+</span> <span class="p">[</span><span class="n">end</span><span class="p">]</span>
</span><span id="split_interval-247"><a href="#split_interval-247"><span class="linenos">247</span></a>    <span class="k">if</span> <span class="n">ncuts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="split_interval-248"><a href="#split_interval-248"><span class="linenos">248</span></a>        <span class="n">step</span> <span class="o">=</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span> <span class="o">/</span> <span class="n">ncuts</span>
</span><span id="split_interval-249"><a href="#split_interval-249"><span class="linenos">249</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">start</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">step</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ncuts</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
</span></pre></div>


            <div class="docstring"><p>It takes a start and end value, and either a step size or a number of cuts, and returns a list of
values that split the interval into equal-sized pieces</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>start</strong>:  the start of the interval</li>
<li><strong>end</strong>:  the end of the interval</li>
<li><strong>step</strong>:  the step size between each cut</li>
<li><strong>ncuts</strong>:  number of cuts to make</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>A list of numbers.</p>
</blockquote>
</div>


                </section>
                <section id="merge_regions">
                            <input id="merge_regions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">merge_regions</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">regions</span><span class="p">:</span> <span class="nb">list</span></span><span class="return-annotation">) -> <span class="nb">list</span>:</span></span>

                <label class="view-source-button" for="merge_regions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#merge_regions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="merge_regions-252"><a href="#merge_regions-252"><span class="linenos">252</span></a><span class="k">def</span> <span class="nf">merge_regions</span><span class="p">(</span><span class="n">regions</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="merge_regions-253"><a href="#merge_regions-253"><span class="linenos">253</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="merge_regions-254"><a href="#merge_regions-254"><span class="linenos">254</span></a><span class="sd">    It takes a list of genomic regions and returns a list of genomic regions where overlapping regions</span>
</span><span id="merge_regions-255"><a href="#merge_regions-255"><span class="linenos">255</span></a><span class="sd">    have been merged</span>
</span><span id="merge_regions-256"><a href="#merge_regions-256"><span class="linenos">256</span></a>
</span><span id="merge_regions-257"><a href="#merge_regions-257"><span class="linenos">257</span></a><span class="sd">    :param regions: A list of tuples representing genomic regions with the values of the chrom, start</span>
</span><span id="merge_regions-258"><a href="#merge_regions-258"><span class="linenos">258</span></a><span class="sd">    and end columns</span>
</span><span id="merge_regions-259"><a href="#merge_regions-259"><span class="linenos">259</span></a><span class="sd">    :return: A list of tuples representing the merged regions with the values of the columns chrom,</span>
</span><span id="merge_regions-260"><a href="#merge_regions-260"><span class="linenos">260</span></a><span class="sd">    start and end.</span>
</span><span id="merge_regions-261"><a href="#merge_regions-261"><span class="linenos">261</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="merge_regions-262"><a href="#merge_regions-262"><span class="linenos">262</span></a>
</span><span id="merge_regions-263"><a href="#merge_regions-263"><span class="linenos">263</span></a>    <span class="n">merged_regions</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="merge_regions-264"><a href="#merge_regions-264"><span class="linenos">264</span></a>
</span><span id="merge_regions-265"><a href="#merge_regions-265"><span class="linenos">265</span></a>    <span class="k">if</span> <span class="n">regions</span><span class="p">:</span>
</span><span id="merge_regions-266"><a href="#merge_regions-266"><span class="linenos">266</span></a>
</span><span id="merge_regions-267"><a href="#merge_regions-267"><span class="linenos">267</span></a>        <span class="c1"># Sort regions by chromosomes and first position</span>
</span><span id="merge_regions-268"><a href="#merge_regions-268"><span class="linenos">268</span></a>        <span class="n">sorted_regions</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">regions</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="merge_regions-269"><a href="#merge_regions-269"><span class="linenos">269</span></a>
</span><span id="merge_regions-270"><a href="#merge_regions-270"><span class="linenos">270</span></a>        <span class="c1"># Init current region</span>
</span><span id="merge_regions-271"><a href="#merge_regions-271"><span class="linenos">271</span></a>        <span class="n">current_region</span> <span class="o">=</span> <span class="n">sorted_regions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="merge_regions-272"><a href="#merge_regions-272"><span class="linenos">272</span></a>
</span><span id="merge_regions-273"><a href="#merge_regions-273"><span class="linenos">273</span></a>        <span class="c1"># Fetch sorted regions</span>
</span><span id="merge_regions-274"><a href="#merge_regions-274"><span class="linenos">274</span></a>        <span class="k">for</span> <span class="n">region</span> <span class="ow">in</span> <span class="n">sorted_regions</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
</span><span id="merge_regions-275"><a href="#merge_regions-275"><span class="linenos">275</span></a>            <span class="c1"># If current region overlap next region, merge both</span>
</span><span id="merge_regions-276"><a href="#merge_regions-276"><span class="linenos">276</span></a>            <span class="k">if</span> <span class="n">current_region</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">region</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">current_region</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">region</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="merge_regions-277"><a href="#merge_regions-277"><span class="linenos">277</span></a>                <span class="n">current_region</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="merge_regions-278"><a href="#merge_regions-278"><span class="linenos">278</span></a>                    <span class="n">current_region</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="merge_regions-279"><a href="#merge_regions-279"><span class="linenos">279</span></a>                    <span class="n">current_region</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="merge_regions-280"><a href="#merge_regions-280"><span class="linenos">280</span></a>                    <span class="nb">max</span><span class="p">(</span><span class="n">current_region</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">region</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
</span><span id="merge_regions-281"><a href="#merge_regions-281"><span class="linenos">281</span></a>                <span class="p">)</span>
</span><span id="merge_regions-282"><a href="#merge_regions-282"><span class="linenos">282</span></a>            <span class="c1"># Else, add current region to merged regions list, and next region</span>
</span><span id="merge_regions-283"><a href="#merge_regions-283"><span class="linenos">283</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="merge_regions-284"><a href="#merge_regions-284"><span class="linenos">284</span></a>                <span class="n">merged_regions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_region</span><span class="p">)</span>
</span><span id="merge_regions-285"><a href="#merge_regions-285"><span class="linenos">285</span></a>                <span class="n">current_region</span> <span class="o">=</span> <span class="n">region</span>
</span><span id="merge_regions-286"><a href="#merge_regions-286"><span class="linenos">286</span></a>
</span><span id="merge_regions-287"><a href="#merge_regions-287"><span class="linenos">287</span></a>        <span class="c1"># Add last region to merged regions list</span>
</span><span id="merge_regions-288"><a href="#merge_regions-288"><span class="linenos">288</span></a>        <span class="n">merged_regions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_region</span><span class="p">)</span>
</span><span id="merge_regions-289"><a href="#merge_regions-289"><span class="linenos">289</span></a>
</span><span id="merge_regions-290"><a href="#merge_regions-290"><span class="linenos">290</span></a>    <span class="k">return</span> <span class="n">merged_regions</span>
</span></pre></div>


            <div class="docstring"><p>It takes a list of genomic regions and returns a list of genomic regions where overlapping regions
have been merged</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>regions</strong>:  A list of tuples representing genomic regions with the values of the chrom, start
and end columns</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>A list of tuples representing the merged regions with the values of the columns chrom,
  start and end.</p>
</blockquote>
</div>


                </section>
                <section id="create_where_clause">
                            <input id="create_where_clause-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">create_where_clause</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">merged_regions</span><span class="p">:</span> <span class="nb">list</span>, </span><span class="param"><span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;variants&#39;</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="create_where_clause-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#create_where_clause"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="create_where_clause-293"><a href="#create_where_clause-293"><span class="linenos">293</span></a><span class="k">def</span> <span class="nf">create_where_clause</span><span class="p">(</span><span class="n">merged_regions</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;variants&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="create_where_clause-294"><a href="#create_where_clause-294"><span class="linenos">294</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="create_where_clause-295"><a href="#create_where_clause-295"><span class="linenos">295</span></a><span class="sd">    It takes a list of merged regions and returns a SQL WHERE clause that can be used to filter variants</span>
</span><span id="create_where_clause-296"><a href="#create_where_clause-296"><span class="linenos">296</span></a><span class="sd">    in a SQL table</span>
</span><span id="create_where_clause-297"><a href="#create_where_clause-297"><span class="linenos">297</span></a>
</span><span id="create_where_clause-298"><a href="#create_where_clause-298"><span class="linenos">298</span></a><span class="sd">    :param merged_regions: a list of tuples representing the merged regions with the values of the</span>
</span><span id="create_where_clause-299"><a href="#create_where_clause-299"><span class="linenos">299</span></a><span class="sd">    chrom, start and end columns</span>
</span><span id="create_where_clause-300"><a href="#create_where_clause-300"><span class="linenos">300</span></a><span class="sd">    :param table: The name of the table to query, defaults to variants (optional)</span>
</span><span id="create_where_clause-301"><a href="#create_where_clause-301"><span class="linenos">301</span></a><span class="sd">    :return: A dictionary with the chromosome as key and the where clause as value.</span>
</span><span id="create_where_clause-302"><a href="#create_where_clause-302"><span class="linenos">302</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="create_where_clause-303"><a href="#create_where_clause-303"><span class="linenos">303</span></a>
</span><span id="create_where_clause-304"><a href="#create_where_clause-304"><span class="linenos">304</span></a>    <span class="n">where_clause</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>
</span><span id="create_where_clause-305"><a href="#create_where_clause-305"><span class="linenos">305</span></a>    <span class="n">where_clause_chrom</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="create_where_clause-306"><a href="#create_where_clause-306"><span class="linenos">306</span></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">region</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">merged_regions</span><span class="p">):</span>
</span><span id="create_where_clause-307"><a href="#create_where_clause-307"><span class="linenos">307</span></a>        <span class="n">chrom</span> <span class="o">=</span> <span class="n">region</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="create_where_clause-308"><a href="#create_where_clause-308"><span class="linenos">308</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">region</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="create_where_clause-309"><a href="#create_where_clause-309"><span class="linenos">309</span></a>        <span class="n">stop</span> <span class="o">=</span> <span class="n">region</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="create_where_clause-310"><a href="#create_where_clause-310"><span class="linenos">310</span></a>        <span class="k">if</span> <span class="n">chrom</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">where_clause_chrom</span><span class="p">:</span>
</span><span id="create_where_clause-311"><a href="#create_where_clause-311"><span class="linenos">311</span></a>            <span class="n">where_clause_chrom</span><span class="p">[</span><span class="n">chrom</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="create_where_clause-312"><a href="#create_where_clause-312"><span class="linenos">312</span></a>            <span class="n">where_clause_chrom_sep</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="create_where_clause-313"><a href="#create_where_clause-313"><span class="linenos">313</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="create_where_clause-314"><a href="#create_where_clause-314"><span class="linenos">314</span></a>            <span class="n">where_clause_chrom_sep</span> <span class="o">=</span> <span class="s2">&quot; OR &quot;</span>
</span><span id="create_where_clause-315"><a href="#create_where_clause-315"><span class="linenos">315</span></a>        <span class="n">where_clause_chrom</span><span class="p">[</span>
</span><span id="create_where_clause-316"><a href="#create_where_clause-316"><span class="linenos">316</span></a>            <span class="n">chrom</span>
</span><span id="create_where_clause-317"><a href="#create_where_clause-317"><span class="linenos">317</span></a>        <span class="p">]</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">where_clause_chrom_sep</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.POS &gt;= </span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2"> AND </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.POS &lt;= </span><span class="si">{</span><span class="n">stop</span><span class="si">}</span><span class="s2">) &quot;</span>
</span><span id="create_where_clause-318"><a href="#create_where_clause-318"><span class="linenos">318</span></a>
</span><span id="create_where_clause-319"><a href="#create_where_clause-319"><span class="linenos">319</span></a>    <span class="n">nb_chrom</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="create_where_clause-320"><a href="#create_where_clause-320"><span class="linenos">320</span></a>    <span class="n">where_clause_sep</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="create_where_clause-321"><a href="#create_where_clause-321"><span class="linenos">321</span></a>    <span class="k">for</span> <span class="n">chrom</span> <span class="ow">in</span> <span class="n">where_clause_chrom</span><span class="p">:</span>
</span><span id="create_where_clause-322"><a href="#create_where_clause-322"><span class="linenos">322</span></a>        <span class="n">nb_chrom</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="create_where_clause-323"><a href="#create_where_clause-323"><span class="linenos">323</span></a>        <span class="k">if</span> <span class="n">nb_chrom</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="create_where_clause-324"><a href="#create_where_clause-324"><span class="linenos">324</span></a>            <span class="n">where_clause_sep</span> <span class="o">=</span> <span class="s2">&quot; OR &quot;</span>
</span><span id="create_where_clause-325"><a href="#create_where_clause-325"><span class="linenos">325</span></a>        <span class="n">where_clause</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">where_clause_sep</span><span class="si">}</span><span class="s2"> ( </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.</span><span class="se">\&quot;</span><span class="s2">#CHROM</span><span class="se">\&quot;</span><span class="s2"> = &#39;</span><span class="si">{</span><span class="n">chrom</span><span class="si">}</span><span class="s2">&#39; AND ( </span><span class="si">{</span><span class="n">where_clause_chrom</span><span class="p">[</span><span class="n">chrom</span><span class="p">]</span><span class="si">}</span><span class="s2"> ) ) &quot;</span>
</span><span id="create_where_clause-326"><a href="#create_where_clause-326"><span class="linenos">326</span></a>
</span><span id="create_where_clause-327"><a href="#create_where_clause-327"><span class="linenos">327</span></a>    <span class="k">return</span> <span class="n">where_clause</span>
</span></pre></div>


            <div class="docstring"><p>It takes a list of merged regions and returns a SQL WHERE clause that can be used to filter variants
in a SQL table</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>merged_regions</strong>:  a list of tuples representing the merged regions with the values of the
chrom, start and end columns</li>
<li><strong>table</strong>:  The name of the table to query, defaults to variants (optional)</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>A dictionary with the chromosome as key and the where clause as value.</p>
</blockquote>
</div>


                </section>
                <section id="command">
                            <input id="command-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">command</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">command</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="command-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#command"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="command-330"><a href="#command-330"><span class="linenos">330</span></a><span class="k">def</span> <span class="nf">command</span><span class="p">(</span><span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="command-331"><a href="#command-331"><span class="linenos">331</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="command-332"><a href="#command-332"><span class="linenos">332</span></a><span class="sd">    It runs a command in the shell and waits for it to finish</span>
</span><span id="command-333"><a href="#command-333"><span class="linenos">333</span></a>
</span><span id="command-334"><a href="#command-334"><span class="linenos">334</span></a><span class="sd">    :param command: The command to run</span>
</span><span id="command-335"><a href="#command-335"><span class="linenos">335</span></a><span class="sd">    :return: The return value is the exit status of the process.</span>
</span><span id="command-336"><a href="#command-336"><span class="linenos">336</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="command-337"><a href="#command-337"><span class="linenos">337</span></a>
</span><span id="command-338"><a href="#command-338"><span class="linenos">338</span></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="command-339"><a href="#command-339"><span class="linenos">339</span></a>    <span class="k">return</span> <span class="n">output</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>It runs a command in the shell and waits for it to finish</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>command</strong>:  The command to run</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The return value is the exit status of the process.</p>
</blockquote>
</div>


                </section>
                <section id="run_parallel_commands">
                            <input id="run_parallel_commands-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run_parallel_commands</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">commands</span><span class="p">:</span> <span class="nb">list</span>, </span><span class="param"><span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span></span><span class="return-annotation">) -> <span class="nb">list</span>:</span></span>

                <label class="view-source-button" for="run_parallel_commands-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#run_parallel_commands"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="run_parallel_commands-342"><a href="#run_parallel_commands-342"><span class="linenos">342</span></a><span class="k">def</span> <span class="nf">run_parallel_commands</span><span class="p">(</span><span class="n">commands</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="run_parallel_commands-343"><a href="#run_parallel_commands-343"><span class="linenos">343</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="run_parallel_commands-344"><a href="#run_parallel_commands-344"><span class="linenos">344</span></a><span class="sd">    It takes a list of commands and a number of threads, and runs the commands in parallel</span>
</span><span id="run_parallel_commands-345"><a href="#run_parallel_commands-345"><span class="linenos">345</span></a>
</span><span id="run_parallel_commands-346"><a href="#run_parallel_commands-346"><span class="linenos">346</span></a><span class="sd">    :param commands: a list of commands to run</span>
</span><span id="run_parallel_commands-347"><a href="#run_parallel_commands-347"><span class="linenos">347</span></a><span class="sd">    :param threads: The number of threads to use</span>
</span><span id="run_parallel_commands-348"><a href="#run_parallel_commands-348"><span class="linenos">348</span></a><span class="sd">    :return: A list of results from the commands.</span>
</span><span id="run_parallel_commands-349"><a href="#run_parallel_commands-349"><span class="linenos">349</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="run_parallel_commands-350"><a href="#run_parallel_commands-350"><span class="linenos">350</span></a>    <span class="n">pool</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Pool</span><span class="p">(</span><span class="n">threads</span><span class="p">)</span>
</span><span id="run_parallel_commands-351"><a href="#run_parallel_commands-351"><span class="linenos">351</span></a>    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="run_parallel_commands-352"><a href="#run_parallel_commands-352"><span class="linenos">352</span></a>    <span class="k">for</span> <span class="n">cmd</span> <span class="ow">in</span> <span class="n">commands</span><span class="p">:</span>
</span><span id="run_parallel_commands-353"><a href="#run_parallel_commands-353"><span class="linenos">353</span></a>        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="run_parallel_commands-354"><a href="#run_parallel_commands-354"><span class="linenos">354</span></a>            <span class="n">pool</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">cmd</span><span class="p">,),</span> <span class="n">error_callback</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="run_parallel_commands-355"><a href="#run_parallel_commands-355"><span class="linenos">355</span></a>        <span class="p">)</span>
</span><span id="run_parallel_commands-356"><a href="#run_parallel_commands-356"><span class="linenos">356</span></a>    <span class="n">pool</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="run_parallel_commands-357"><a href="#run_parallel_commands-357"><span class="linenos">357</span></a>    <span class="n">pool</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="run_parallel_commands-358"><a href="#run_parallel_commands-358"><span class="linenos">358</span></a>    <span class="k">return</span> <span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>It takes a list of commands and a number of threads, and runs the commands in parallel</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>commands</strong>:  a list of commands to run</li>
<li><strong>threads</strong>:  The number of threads to use</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>A list of results from the commands.</p>
</blockquote>
</div>


                </section>
                <section id="run_parallel_functions">
                            <input id="run_parallel_functions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run_parallel_functions</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">functions</span><span class="p">:</span> <span class="nb">list</span>, </span><span class="param"><span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span></span><span class="return-annotation">) -> <span class="nb">list</span>:</span></span>

                <label class="view-source-button" for="run_parallel_functions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#run_parallel_functions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="run_parallel_functions-361"><a href="#run_parallel_functions-361"><span class="linenos">361</span></a><span class="k">def</span> <span class="nf">run_parallel_functions</span><span class="p">(</span><span class="n">functions</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="run_parallel_functions-362"><a href="#run_parallel_functions-362"><span class="linenos">362</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="run_parallel_functions-363"><a href="#run_parallel_functions-363"><span class="linenos">363</span></a><span class="sd">    It takes a list of functions and a number of threads, and runs the functions in parallel using the</span>
</span><span id="run_parallel_functions-364"><a href="#run_parallel_functions-364"><span class="linenos">364</span></a><span class="sd">    number of threads specified</span>
</span><span id="run_parallel_functions-365"><a href="#run_parallel_functions-365"><span class="linenos">365</span></a>
</span><span id="run_parallel_functions-366"><a href="#run_parallel_functions-366"><span class="linenos">366</span></a><span class="sd">    :param functions: a list of functions to run in parallel</span>
</span><span id="run_parallel_functions-367"><a href="#run_parallel_functions-367"><span class="linenos">367</span></a><span class="sd">    :param threads: The number of threads to use</span>
</span><span id="run_parallel_functions-368"><a href="#run_parallel_functions-368"><span class="linenos">368</span></a><span class="sd">    :return: A list of multiprocessing.pool.ApplyResult objects.</span>
</span><span id="run_parallel_functions-369"><a href="#run_parallel_functions-369"><span class="linenos">369</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="run_parallel_functions-370"><a href="#run_parallel_functions-370"><span class="linenos">370</span></a>    <span class="n">pool</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Pool</span><span class="p">(</span><span class="n">threads</span><span class="p">)</span>
</span><span id="run_parallel_functions-371"><a href="#run_parallel_functions-371"><span class="linenos">371</span></a>    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="run_parallel_functions-372"><a href="#run_parallel_functions-372"><span class="linenos">372</span></a>    <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">functions</span><span class="p">:</span>
</span><span id="run_parallel_functions-373"><a href="#run_parallel_functions-373"><span class="linenos">373</span></a>        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="run_parallel_functions-374"><a href="#run_parallel_functions-374"><span class="linenos">374</span></a>            <span class="n">pool</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;hello&quot;</span><span class="p">),</span> <span class="n">error_callback</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="run_parallel_functions-375"><a href="#run_parallel_functions-375"><span class="linenos">375</span></a>        <span class="p">)</span>
</span><span id="run_parallel_functions-376"><a href="#run_parallel_functions-376"><span class="linenos">376</span></a>    <span class="n">pool</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="run_parallel_functions-377"><a href="#run_parallel_functions-377"><span class="linenos">377</span></a>    <span class="n">pool</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="run_parallel_functions-378"><a href="#run_parallel_functions-378"><span class="linenos">378</span></a>    <span class="k">return</span> <span class="n">results</span>
</span></pre></div>


            <div class="docstring"><p>It takes a list of functions and a number of threads, and runs the functions in parallel using the
number of threads specified</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>functions</strong>:  a list of functions to run in parallel</li>
<li><strong>threads</strong>:  The number of threads to use</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>A list of multiprocessing.pool.ApplyResult objects.</p>
</blockquote>
</div>


                </section>
                <section id="example_function">
                            <input id="example_function-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">example_function</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">num</span>, </span><span class="param"><span class="n">word</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="example_function-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#example_function"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="example_function-381"><a href="#example_function-381"><span class="linenos">381</span></a><span class="k">def</span> <span class="nf">example_function</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
</span><span id="example_function-382"><a href="#example_function-382"><span class="linenos">382</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="example_function-383"><a href="#example_function-383"><span class="linenos">383</span></a><span class="sd">    `example_function` takes in a number and a word and returns a list of the number and the word</span>
</span><span id="example_function-384"><a href="#example_function-384"><span class="linenos">384</span></a>
</span><span id="example_function-385"><a href="#example_function-385"><span class="linenos">385</span></a><span class="sd">    :param num: a number</span>
</span><span id="example_function-386"><a href="#example_function-386"><span class="linenos">386</span></a><span class="sd">    :param word: a string</span>
</span><span id="example_function-387"><a href="#example_function-387"><span class="linenos">387</span></a><span class="sd">    :return: [num, word]</span>
</span><span id="example_function-388"><a href="#example_function-388"><span class="linenos">388</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="example_function-389"><a href="#example_function-389"><span class="linenos">389</span></a>    <span class="k">return</span> <span class="p">[</span><span class="n">num</span><span class="p">,</span> <span class="n">word</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p><code><a href="#example_function">example_function</a></code> takes in a number and a word and returns a list of the number and the word</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>num</strong>:  a number</li>
<li><strong>word</strong>:  a string</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>[num, word]</p>
</blockquote>
</div>


                </section>
                <section id="find">
                            <input id="find-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">find</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">path</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="find-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#find"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="find-392"><a href="#find-392"><span class="linenos">392</span></a><span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="find-393"><a href="#find-393"><span class="linenos">393</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="find-394"><a href="#find-394"><span class="linenos">394</span></a><span class="sd">    It recursively walks the directory tree starting at the given path, and returns the first file it</span>
</span><span id="find-395"><a href="#find-395"><span class="linenos">395</span></a><span class="sd">    finds with the given name</span>
</span><span id="find-396"><a href="#find-396"><span class="linenos">396</span></a>
</span><span id="find-397"><a href="#find-397"><span class="linenos">397</span></a><span class="sd">    :param name: The name of the file you&#39;re looking for</span>
</span><span id="find-398"><a href="#find-398"><span class="linenos">398</span></a><span class="sd">    :param path: The path to search for the file</span>
</span><span id="find-399"><a href="#find-399"><span class="linenos">399</span></a><span class="sd">    :return: The path to the file.</span>
</span><span id="find-400"><a href="#find-400"><span class="linenos">400</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="find-401"><a href="#find-401"><span class="linenos">401</span></a>    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
</span><span id="find-402"><a href="#find-402"><span class="linenos">402</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
</span><span id="find-403"><a href="#find-403"><span class="linenos">403</span></a>            <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="find-404"><a href="#find-404"><span class="linenos">404</span></a>    <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>It recursively walks the directory tree starting at the given path, and returns the first file it
finds with the given name</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong>:  The name of the file you're looking for</li>
<li><strong>path</strong>:  The path to search for the file</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The path to the file.</p>
</blockquote>
</div>


                </section>
                <section id="find_all">
                            <input id="find_all-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">find_all</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">path</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">list</span>:</span></span>

                <label class="view-source-button" for="find_all-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#find_all"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="find_all-407"><a href="#find_all-407"><span class="linenos">407</span></a><span class="k">def</span> <span class="nf">find_all</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="find_all-408"><a href="#find_all-408"><span class="linenos">408</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="find_all-409"><a href="#find_all-409"><span class="linenos">409</span></a><span class="sd">    &quot;Walk the directory tree starting at path, and for each regular file with the name name, append its</span>
</span><span id="find_all-410"><a href="#find_all-410"><span class="linenos">410</span></a><span class="sd">    full path to the result list.&quot;</span>
</span><span id="find_all-411"><a href="#find_all-411"><span class="linenos">411</span></a>
</span><span id="find_all-412"><a href="#find_all-412"><span class="linenos">412</span></a><span class="sd">    The os.walk function is a generator that yields a 3-tuple containing the name of a directory, a list</span>
</span><span id="find_all-413"><a href="#find_all-413"><span class="linenos">413</span></a><span class="sd">    of its subdirectories, and a list of the files in that directory. The name of the directory is a</span>
</span><span id="find_all-414"><a href="#find_all-414"><span class="linenos">414</span></a><span class="sd">    string, and the lists of subdirectories and files are lists of strings</span>
</span><span id="find_all-415"><a href="#find_all-415"><span class="linenos">415</span></a>
</span><span id="find_all-416"><a href="#find_all-416"><span class="linenos">416</span></a><span class="sd">    :param name: The name of the file you&#39;re looking for</span>
</span><span id="find_all-417"><a href="#find_all-417"><span class="linenos">417</span></a><span class="sd">    :param path: The path to search in</span>
</span><span id="find_all-418"><a href="#find_all-418"><span class="linenos">418</span></a><span class="sd">    :return: A list of all the files in the directory that have the name &quot;name&quot;</span>
</span><span id="find_all-419"><a href="#find_all-419"><span class="linenos">419</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="find_all-420"><a href="#find_all-420"><span class="linenos">420</span></a>
</span><span id="find_all-421"><a href="#find_all-421"><span class="linenos">421</span></a>    <span class="c1"># result</span>
</span><span id="find_all-422"><a href="#find_all-422"><span class="linenos">422</span></a>    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="find_all-423"><a href="#find_all-423"><span class="linenos">423</span></a>
</span><span id="find_all-424"><a href="#find_all-424"><span class="linenos">424</span></a>    <span class="c1"># Full path</span>
</span><span id="find_all-425"><a href="#find_all-425"><span class="linenos">425</span></a>    <span class="n">path</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="find_all-426"><a href="#find_all-426"><span class="linenos">426</span></a>
</span><span id="find_all-427"><a href="#find_all-427"><span class="linenos">427</span></a>    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
</span><span id="find_all-428"><a href="#find_all-428"><span class="linenos">428</span></a>        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="find_all-429"><a href="#find_all-429"><span class="linenos">429</span></a>            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">filename</span><span class="p">)):</span>
</span><span id="find_all-430"><a href="#find_all-430"><span class="linenos">430</span></a>                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">filename</span><span class="p">))</span>
</span><span id="find_all-431"><a href="#find_all-431"><span class="linenos">431</span></a>    <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>"Walk the directory tree starting at path, and for each regular file with the name name, append its
full path to the result list."</p>

<p>The os.walk function is a generator that yields a 3-tuple containing the name of a directory, a list
of its subdirectories, and a list of the files in that directory. The name of the directory is a
string, and the lists of subdirectories and files are lists of strings</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong>:  The name of the file you're looking for</li>
<li><strong>path</strong>:  The path to search in</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>A list of all the files in the directory that have the name "name"</p>
</blockquote>
</div>


                </section>
                <section id="find_genome">
                            <input id="find_genome-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">find_genome</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">genome_path</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">assembly</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>, </span><span class="param"><span class="n">file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="find_genome-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#find_genome"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="find_genome-434"><a href="#find_genome-434"><span class="linenos">434</span></a><span class="k">def</span> <span class="nf">find_genome</span><span class="p">(</span><span class="n">genome_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">assembly</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="find_genome-435"><a href="#find_genome-435"><span class="linenos">435</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="find_genome-436"><a href="#find_genome-436"><span class="linenos">436</span></a><span class="sd">    The `find_genome` function checks if a genome file exists at the specified path, and if not, it</span>
</span><span id="find_genome-437"><a href="#find_genome-437"><span class="linenos">437</span></a><span class="sd">    tries to find it using the provided assembly name or file name.</span>
</span><span id="find_genome-438"><a href="#find_genome-438"><span class="linenos">438</span></a>
</span><span id="find_genome-439"><a href="#find_genome-439"><span class="linenos">439</span></a><span class="sd">    :param genome_path: The path to the genome file</span>
</span><span id="find_genome-440"><a href="#find_genome-440"><span class="linenos">440</span></a><span class="sd">    :type genome_path: str</span>
</span><span id="find_genome-441"><a href="#find_genome-441"><span class="linenos">441</span></a><span class="sd">    :param assembly: The `assembly` parameter is a string that represents the name of the genome</span>
</span><span id="find_genome-442"><a href="#find_genome-442"><span class="linenos">442</span></a><span class="sd">    assembly. It is used to search for the genome file with the specified assembly name in the</span>
</span><span id="find_genome-443"><a href="#find_genome-443"><span class="linenos">443</span></a><span class="sd">    `genome_dir` directory. If a genome file with the assembly name is found, its path is returned</span>
</span><span id="find_genome-444"><a href="#find_genome-444"><span class="linenos">444</span></a><span class="sd">    :type assembly: str</span>
</span><span id="find_genome-445"><a href="#find_genome-445"><span class="linenos">445</span></a><span class="sd">    :param file: The `file` parameter is the name of the genome file that you want to find</span>
</span><span id="find_genome-446"><a href="#find_genome-446"><span class="linenos">446</span></a><span class="sd">    :type file: str</span>
</span><span id="find_genome-447"><a href="#find_genome-447"><span class="linenos">447</span></a><span class="sd">    :return: the path to the genome file.</span>
</span><span id="find_genome-448"><a href="#find_genome-448"><span class="linenos">448</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="find_genome-449"><a href="#find_genome-449"><span class="linenos">449</span></a>
</span><span id="find_genome-450"><a href="#find_genome-450"><span class="linenos">450</span></a>    <span class="c1"># Full path</span>
</span><span id="find_genome-451"><a href="#find_genome-451"><span class="linenos">451</span></a>    <span class="n">genome_path</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">genome_path</span><span class="p">)</span>
</span><span id="find_genome-452"><a href="#find_genome-452"><span class="linenos">452</span></a>
</span><span id="find_genome-453"><a href="#find_genome-453"><span class="linenos">453</span></a>    <span class="c1"># check genome</span>
</span><span id="find_genome-454"><a href="#find_genome-454"><span class="linenos">454</span></a>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">genome_path</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">genome_path</span><span class="p">):</span>
</span><span id="find_genome-455"><a href="#find_genome-455"><span class="linenos">455</span></a>        <span class="k">return</span> <span class="n">genome_path</span>
</span><span id="find_genome-456"><a href="#find_genome-456"><span class="linenos">456</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="find_genome-457"><a href="#find_genome-457"><span class="linenos">457</span></a>        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Genome warning: Try to find genome in &#39;</span><span class="si">{</span><span class="n">genome_path</span><span class="si">}</span><span class="s2">&#39;...&quot;</span><span class="p">)</span>
</span><span id="find_genome-458"><a href="#find_genome-458"><span class="linenos">458</span></a>        <span class="n">genome_dir</span> <span class="o">=</span> <span class="n">genome_path</span>
</span><span id="find_genome-459"><a href="#find_genome-459"><span class="linenos">459</span></a>        <span class="n">genome_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="find_genome-460"><a href="#find_genome-460"><span class="linenos">460</span></a>        <span class="c1"># Try to find genome</span>
</span><span id="find_genome-461"><a href="#find_genome-461"><span class="linenos">461</span></a>        <span class="k">if</span> <span class="n">file</span> <span class="ow">and</span> <span class="n">find_all</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">genome_dir</span><span class="p">):</span>
</span><span id="find_genome-462"><a href="#find_genome-462"><span class="linenos">462</span></a>            <span class="n">genome_path</span> <span class="o">=</span> <span class="n">find_all</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">genome_dir</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="find_genome-463"><a href="#find_genome-463"><span class="linenos">463</span></a>        <span class="k">elif</span> <span class="n">assembly</span> <span class="ow">and</span> <span class="n">find_all</span><span class="p">(</span><span class="n">assembly</span> <span class="o">+</span> <span class="s2">&quot;.fa&quot;</span><span class="p">,</span> <span class="n">genome_dir</span><span class="p">):</span>
</span><span id="find_genome-464"><a href="#find_genome-464"><span class="linenos">464</span></a>            <span class="n">genome_path</span> <span class="o">=</span> <span class="n">find_all</span><span class="p">(</span><span class="n">assembly</span> <span class="o">+</span> <span class="s2">&quot;.fa&quot;</span><span class="p">,</span> <span class="n">genome_dir</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="find_genome-465"><a href="#find_genome-465"><span class="linenos">465</span></a>    <span class="k">return</span> <span class="n">genome_path</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#find_genome">find_genome</a></code> function checks if a genome file exists at the specified path, and if not, it
tries to find it using the provided assembly name or file name.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>genome_path</strong>:  The path to the genome file</li>
<li><strong>assembly</strong>:  The <code>assembly</code> parameter is a string that represents the name of the genome
assembly. It is used to search for the genome file with the specified assembly name in the
<code>genome_dir</code> directory. If a genome file with the assembly name is found, its path is returned</li>
<li><strong>file</strong>:  The <code>file</code> parameter is the name of the genome file that you want to find</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>the path to the genome file.</p>
</blockquote>
</div>


                </section>
                <section id="find_file_prefix">
                            <input id="find_file_prefix-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">find_file_prefix</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">input_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">assembly</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="find_file_prefix-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#find_file_prefix"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="find_file_prefix-468"><a href="#find_file_prefix-468"><span class="linenos">468</span></a><span class="k">def</span> <span class="nf">find_file_prefix</span><span class="p">(</span>
</span><span id="find_file_prefix-469"><a href="#find_file_prefix-469"><span class="linenos">469</span></a>    <span class="n">input_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">assembly</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="find_file_prefix-470"><a href="#find_file_prefix-470"><span class="linenos">470</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="find_file_prefix-471"><a href="#find_file_prefix-471"><span class="linenos">471</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="find_file_prefix-472"><a href="#find_file_prefix-472"><span class="linenos">472</span></a><span class="sd">    The function `find_file_prefix` is used to find a specific file based on input parameters such as</span>
</span><span id="find_file_prefix-473"><a href="#find_file_prefix-473"><span class="linenos">473</span></a><span class="sd">    input file, folder, and assembly.</span>
</span><span id="find_file_prefix-474"><a href="#find_file_prefix-474"><span class="linenos">474</span></a>
</span><span id="find_file_prefix-475"><a href="#find_file_prefix-475"><span class="linenos">475</span></a><span class="sd">    :param input_file: The input file is the file that you want to find the prefix for. It can be a file</span>
</span><span id="find_file_prefix-476"><a href="#find_file_prefix-476"><span class="linenos">476</span></a><span class="sd">    path or just the file name if it is in the current directory</span>
</span><span id="find_file_prefix-477"><a href="#find_file_prefix-477"><span class="linenos">477</span></a><span class="sd">    :type input_file: str</span>
</span><span id="find_file_prefix-478"><a href="#find_file_prefix-478"><span class="linenos">478</span></a><span class="sd">    :param folder: The `folder` parameter is a string that represents the directory where the file is</span>
</span><span id="find_file_prefix-479"><a href="#find_file_prefix-479"><span class="linenos">479</span></a><span class="sd">    located</span>
</span><span id="find_file_prefix-480"><a href="#find_file_prefix-480"><span class="linenos">480</span></a><span class="sd">    :type folder: str</span>
</span><span id="find_file_prefix-481"><a href="#find_file_prefix-481"><span class="linenos">481</span></a><span class="sd">    :param assembly: The &quot;assembly&quot; parameter is a string that represents the assembly version of the</span>
</span><span id="find_file_prefix-482"><a href="#find_file_prefix-482"><span class="linenos">482</span></a><span class="sd">    file you are looking for. It is used to search for files with the specific assembly version in their</span>
</span><span id="find_file_prefix-483"><a href="#find_file_prefix-483"><span class="linenos">483</span></a><span class="sd">    filename</span>
</span><span id="find_file_prefix-484"><a href="#find_file_prefix-484"><span class="linenos">484</span></a><span class="sd">    :type assembly: str</span>
</span><span id="find_file_prefix-485"><a href="#find_file_prefix-485"><span class="linenos">485</span></a><span class="sd">    :return: the path of the output file.</span>
</span><span id="find_file_prefix-486"><a href="#find_file_prefix-486"><span class="linenos">486</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="find_file_prefix-487"><a href="#find_file_prefix-487"><span class="linenos">487</span></a>
</span><span id="find_file_prefix-488"><a href="#find_file_prefix-488"><span class="linenos">488</span></a>    <span class="c1"># Output</span>
</span><span id="find_file_prefix-489"><a href="#find_file_prefix-489"><span class="linenos">489</span></a>    <span class="n">output_file</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="find_file_prefix-490"><a href="#find_file_prefix-490"><span class="linenos">490</span></a>
</span><span id="find_file_prefix-491"><a href="#find_file_prefix-491"><span class="linenos">491</span></a>    <span class="c1"># Full path</span>
</span><span id="find_file_prefix-492"><a href="#find_file_prefix-492"><span class="linenos">492</span></a>    <span class="n">input_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>
</span><span id="find_file_prefix-493"><a href="#find_file_prefix-493"><span class="linenos">493</span></a>    <span class="n">folder</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
</span><span id="find_file_prefix-494"><a href="#find_file_prefix-494"><span class="linenos">494</span></a>
</span><span id="find_file_prefix-495"><a href="#find_file_prefix-495"><span class="linenos">495</span></a>    <span class="k">if</span> <span class="n">input_file</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">input_file</span><span class="p">):</span>
</span><span id="find_file_prefix-496"><a href="#find_file_prefix-496"><span class="linenos">496</span></a>        <span class="n">output_file</span> <span class="o">=</span> <span class="n">input_file</span>
</span><span id="find_file_prefix-497"><a href="#find_file_prefix-497"><span class="linenos">497</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="find_file_prefix-498"><a href="#find_file_prefix-498"><span class="linenos">498</span></a>        <span class="c1"># Find in specific assembly folder</span>
</span><span id="find_file_prefix-499"><a href="#find_file_prefix-499"><span class="linenos">499</span></a>        <span class="k">if</span> <span class="n">find_all</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">assembly</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
</span><span id="find_file_prefix-500"><a href="#find_file_prefix-500"><span class="linenos">500</span></a>            <span class="n">output_file</span> <span class="o">=</span> <span class="n">find_all</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">assembly</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="find_file_prefix-501"><a href="#find_file_prefix-501"><span class="linenos">501</span></a>        <span class="c1"># Find with assembly in filename</span>
</span><span id="find_file_prefix-502"><a href="#find_file_prefix-502"><span class="linenos">502</span></a>        <span class="k">elif</span> <span class="n">find_all</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">assembly</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span> <span class="n">folder</span><span class="p">):</span>
</span><span id="find_file_prefix-503"><a href="#find_file_prefix-503"><span class="linenos">503</span></a>            <span class="n">output_file</span> <span class="o">=</span> <span class="n">find_all</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">assembly</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span> <span class="n">folder</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="find_file_prefix-504"><a href="#find_file_prefix-504"><span class="linenos">504</span></a>        <span class="c1"># Find within the entire folder</span>
</span><span id="find_file_prefix-505"><a href="#find_file_prefix-505"><span class="linenos">505</span></a>        <span class="k">elif</span> <span class="n">find_all</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span> <span class="n">folder</span><span class="p">):</span>
</span><span id="find_file_prefix-506"><a href="#find_file_prefix-506"><span class="linenos">506</span></a>            <span class="n">output_file</span> <span class="o">=</span> <span class="n">find_all</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span> <span class="n">folder</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="find_file_prefix-507"><a href="#find_file_prefix-507"><span class="linenos">507</span></a>
</span><span id="find_file_prefix-508"><a href="#find_file_prefix-508"><span class="linenos">508</span></a>    <span class="k">return</span> <span class="n">output_file</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#find_file_prefix">find_file_prefix</a></code> is used to find a specific file based on input parameters such as
input file, folder, and assembly.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>input_file</strong>:  The input file is the file that you want to find the prefix for. It can be a file
path or just the file name if it is in the current directory</li>
<li><strong>folder</strong>:  The <code>folder</code> parameter is a string that represents the directory where the file is
located</li>
<li><strong>assembly</strong>:  The "assembly" parameter is a string that represents the assembly version of the
file you are looking for. It is used to search for files with the specific assembly version in their
filename</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>the path of the output file.</p>
</blockquote>
</div>


                </section>
                <section id="find_nomen">
                            <input id="find_nomen-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">find_nomen</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">hgvs</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span>,</span><span class="param">	<span class="n">transcript</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">transcripts</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>,</span><span class="param">	<span class="n">transcripts_source_order</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">pattern</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">transcripts_len</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="find_nomen-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#find_nomen"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="find_nomen-511"><a href="#find_nomen-511"><span class="linenos">511</span></a><span class="k">def</span> <span class="nf">find_nomen</span><span class="p">(</span>
</span><span id="find_nomen-512"><a href="#find_nomen-512"><span class="linenos">512</span></a>    <span class="n">hgvs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span><span id="find_nomen-513"><a href="#find_nomen-513"><span class="linenos">513</span></a>    <span class="n">transcript</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-514"><a href="#find_nomen-514"><span class="linenos">514</span></a>    <span class="n">transcripts</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
</span><span id="find_nomen-515"><a href="#find_nomen-515"><span class="linenos">515</span></a>    <span class="n">transcripts_source_order</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-516"><a href="#find_nomen-516"><span class="linenos">516</span></a>    <span class="n">pattern</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-517"><a href="#find_nomen-517"><span class="linenos">517</span></a>    <span class="n">transcripts_len</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-518"><a href="#find_nomen-518"><span class="linenos">518</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="find_nomen-519"><a href="#find_nomen-519"><span class="linenos">519</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="find_nomen-520"><a href="#find_nomen-520"><span class="linenos">520</span></a><span class="sd">    The function `find_nomen` takes a HGVS string and a list of transcripts, parses the HGVS string, and</span>
</span><span id="find_nomen-521"><a href="#find_nomen-521"><span class="linenos">521</span></a><span class="sd">    returns a dictionary with the best NOMEN based on specified patterns.</span>
</span><span id="find_nomen-522"><a href="#find_nomen-522"><span class="linenos">522</span></a>
</span><span id="find_nomen-523"><a href="#find_nomen-523"><span class="linenos">523</span></a><span class="sd">    :param hgvs: The `hgvs` parameter is a DataFrame containing the HGVS strings to parse. It seems like</span>
</span><span id="find_nomen-524"><a href="#find_nomen-524"><span class="linenos">524</span></a><span class="sd">    the function is designed to process multiple HGVS strings at once. You can pass this DataFrame to</span>
</span><span id="find_nomen-525"><a href="#find_nomen-525"><span class="linenos">525</span></a><span class="sd">    the function for processing. If you have a specific DataFrame that you would like to use, please</span>
</span><span id="find_nomen-526"><a href="#find_nomen-526"><span class="linenos">526</span></a><span class="sd">    provide it</span>
</span><span id="find_nomen-527"><a href="#find_nomen-527"><span class="linenos">527</span></a><span class="sd">    :type hgvs: pd.DataFrame</span>
</span><span id="find_nomen-528"><a href="#find_nomen-528"><span class="linenos">528</span></a><span class="sd">    :param transcript: The `transcript` parameter in the `find_nomen` function is used to specify a</span>
</span><span id="find_nomen-529"><a href="#find_nomen-529"><span class="linenos">529</span></a><span class="sd">    single transcript to use for ranking. It is a string that represents the transcript. If provided,</span>
</span><span id="find_nomen-530"><a href="#find_nomen-530"><span class="linenos">530</span></a><span class="sd">    this transcript will be used along with the transcripts from the `transcripts` list to determine the</span>
</span><span id="find_nomen-531"><a href="#find_nomen-531"><span class="linenos">531</span></a><span class="sd">    best NOMEN</span>
</span><span id="find_nomen-532"><a href="#find_nomen-532"><span class="linenos">532</span></a><span class="sd">    :type transcript: str</span>
</span><span id="find_nomen-533"><a href="#find_nomen-533"><span class="linenos">533</span></a><span class="sd">    :param transcripts: Transcripts are a list of transcripts to use for ranking in the `find_nomen`</span>
</span><span id="find_nomen-534"><a href="#find_nomen-534"><span class="linenos">534</span></a><span class="sd">    function. You can provide a list of transcripts that you want to consider when constructing the</span>
</span><span id="find_nomen-535"><a href="#find_nomen-535"><span class="linenos">535</span></a><span class="sd">    NOMEN for a given HGVS string</span>
</span><span id="find_nomen-536"><a href="#find_nomen-536"><span class="linenos">536</span></a><span class="sd">    :type transcripts: list</span>
</span><span id="find_nomen-537"><a href="#find_nomen-537"><span class="linenos">537</span></a><span class="sd">    :param transcripts_source_order: The `transcripts_source_order` parameter is a list that specifies</span>
</span><span id="find_nomen-538"><a href="#find_nomen-538"><span class="linenos">538</span></a><span class="sd">    the order in which different sources of transcripts should be considered. In the provided function,</span>
</span><span id="find_nomen-539"><a href="#find_nomen-539"><span class="linenos">539</span></a><span class="sd">    the default order is `[&quot;column&quot;, &quot;file&quot;]`, which means that transcripts from a column in the input</span>
</span><span id="find_nomen-540"><a href="#find_nomen-540"><span class="linenos">540</span></a><span class="sd">    data will be considered first, followed by</span>
</span><span id="find_nomen-541"><a href="#find_nomen-541"><span class="linenos">541</span></a><span class="sd">    :type transcripts_source_order: list</span>
</span><span id="find_nomen-542"><a href="#find_nomen-542"><span class="linenos">542</span></a><span class="sd">    :param pattern: The `pattern` parameter in the `find_nomen` function is used to specify the format</span>
</span><span id="find_nomen-543"><a href="#find_nomen-543"><span class="linenos">543</span></a><span class="sd">    in which the NOMEN should be constructed. By default, the pattern is set to</span>
</span><span id="find_nomen-544"><a href="#find_nomen-544"><span class="linenos">544</span></a><span class="sd">    &quot;GNOMEN:TNOMEN:ENOMEN:CNOMEN:RNOMEN:NNOMEN</span>
</span><span id="find_nomen-545"><a href="#find_nomen-545"><span class="linenos">545</span></a><span class="sd">    :return: The function `find_nomen` returns a dictionary containing the following keys:</span>
</span><span id="find_nomen-546"><a href="#find_nomen-546"><span class="linenos">546</span></a><span class="sd">    - NOMEN</span>
</span><span id="find_nomen-547"><a href="#find_nomen-547"><span class="linenos">547</span></a><span class="sd">    - CNOMEN</span>
</span><span id="find_nomen-548"><a href="#find_nomen-548"><span class="linenos">548</span></a><span class="sd">    - RNOMEN</span>
</span><span id="find_nomen-549"><a href="#find_nomen-549"><span class="linenos">549</span></a><span class="sd">    - NNOMEN</span>
</span><span id="find_nomen-550"><a href="#find_nomen-550"><span class="linenos">550</span></a><span class="sd">    - PNOMEN</span>
</span><span id="find_nomen-551"><a href="#find_nomen-551"><span class="linenos">551</span></a><span class="sd">    - TVNOMEN</span>
</span><span id="find_nomen-552"><a href="#find_nomen-552"><span class="linenos">552</span></a><span class="sd">    - TNOMEN</span>
</span><span id="find_nomen-553"><a href="#find_nomen-553"><span class="linenos">553</span></a><span class="sd">    - TPVNOMEN</span>
</span><span id="find_nomen-554"><a href="#find_nomen-554"><span class="linenos">554</span></a><span class="sd">    - TPNOMEN</span>
</span><span id="find_nomen-555"><a href="#find_nomen-555"><span class="linenos">555</span></a><span class="sd">    - VNOMEN</span>
</span><span id="find_nomen-556"><a href="#find_nomen-556"><span class="linenos">556</span></a><span class="sd">    - ENOMEN</span>
</span><span id="find_nomen-557"><a href="#find_nomen-557"><span class="linenos">557</span></a><span class="sd">    - GNOMEN</span>
</span><span id="find_nomen-558"><a href="#find_nomen-558"><span class="linenos">558</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="find_nomen-559"><a href="#find_nomen-559"><span class="linenos">559</span></a>
</span><span id="find_nomen-560"><a href="#find_nomen-560"><span class="linenos">560</span></a>    <span class="c1"># Result structure</span>
</span><span id="find_nomen-561"><a href="#find_nomen-561"><span class="linenos">561</span></a>    <span class="n">empty_nomen_dict</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="find_nomen-562"><a href="#find_nomen-562"><span class="linenos">562</span></a>        <span class="s2">&quot;NOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-563"><a href="#find_nomen-563"><span class="linenos">563</span></a>        <span class="s2">&quot;CNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-564"><a href="#find_nomen-564"><span class="linenos">564</span></a>        <span class="s2">&quot;RNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-565"><a href="#find_nomen-565"><span class="linenos">565</span></a>        <span class="s2">&quot;NNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-566"><a href="#find_nomen-566"><span class="linenos">566</span></a>        <span class="s2">&quot;PNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-567"><a href="#find_nomen-567"><span class="linenos">567</span></a>        <span class="s2">&quot;TVNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-568"><a href="#find_nomen-568"><span class="linenos">568</span></a>        <span class="s2">&quot;TNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-569"><a href="#find_nomen-569"><span class="linenos">569</span></a>        <span class="s2">&quot;TPVNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-570"><a href="#find_nomen-570"><span class="linenos">570</span></a>        <span class="s2">&quot;TPNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-571"><a href="#find_nomen-571"><span class="linenos">571</span></a>        <span class="s2">&quot;VNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-572"><a href="#find_nomen-572"><span class="linenos">572</span></a>        <span class="s2">&quot;ENOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-573"><a href="#find_nomen-573"><span class="linenos">573</span></a>        <span class="s2">&quot;GNOMEN&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="find_nomen-574"><a href="#find_nomen-574"><span class="linenos">574</span></a>    <span class="p">}</span>
</span><span id="find_nomen-575"><a href="#find_nomen-575"><span class="linenos">575</span></a>    <span class="n">nomen_dict</span> <span class="o">=</span> <span class="n">empty_nomen_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="find_nomen-576"><a href="#find_nomen-576"><span class="linenos">576</span></a>
</span><span id="find_nomen-577"><a href="#find_nomen-577"><span class="linenos">577</span></a>    <span class="c1"># Transcripts list</span>
</span><span id="find_nomen-578"><a href="#find_nomen-578"><span class="linenos">578</span></a>    <span class="n">transcripts_list</span> <span class="o">=</span> <span class="n">transcripts</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="find_nomen-579"><a href="#find_nomen-579"><span class="linenos">579</span></a>
</span><span id="find_nomen-580"><a href="#find_nomen-580"><span class="linenos">580</span></a>    <span class="c1"># Transcript as a list (create dict with rank, slow)</span>
</span><span id="find_nomen-581"><a href="#find_nomen-581"><span class="linenos">581</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">transcripts_list</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="find_nomen-582"><a href="#find_nomen-582"><span class="linenos">582</span></a>        <span class="n">transcripts_list_tmp</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="find_nomen-583"><a href="#find_nomen-583"><span class="linenos">583</span></a>        <span class="k">for</span> <span class="n">rank</span><span class="p">,</span> <span class="n">source</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">transcripts_list</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="find_nomen-584"><a href="#find_nomen-584"><span class="linenos">584</span></a>            <span class="n">transcripts_list_tmp</span><span class="p">[</span><span class="n">source</span><span class="p">]</span> <span class="o">=</span> <span class="n">rank</span>
</span><span id="find_nomen-585"><a href="#find_nomen-585"><span class="linenos">585</span></a>        <span class="n">transcripts_list</span> <span class="o">=</span> <span class="n">transcripts_list_tmp</span>
</span><span id="find_nomen-586"><a href="#find_nomen-586"><span class="linenos">586</span></a>
</span><span id="find_nomen-587"><a href="#find_nomen-587"><span class="linenos">587</span></a>    <span class="c1"># Pattern</span>
</span><span id="find_nomen-588"><a href="#find_nomen-588"><span class="linenos">588</span></a>    <span class="k">if</span> <span class="n">pattern</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="find_nomen-589"><a href="#find_nomen-589"><span class="linenos">589</span></a>        <span class="n">pattern</span> <span class="o">=</span> <span class="s2">&quot;GNOMEN:TNOMEN:ENOMEN:CNOMEN:RNOMEN:NNOMEN:PNOMEN&quot;</span>
</span><span id="find_nomen-590"><a href="#find_nomen-590"><span class="linenos">590</span></a>
</span><span id="find_nomen-591"><a href="#find_nomen-591"><span class="linenos">591</span></a>    <span class="c1"># Transcripts source order and rank</span>
</span><span id="find_nomen-592"><a href="#find_nomen-592"><span class="linenos">592</span></a>    <span class="k">if</span> <span class="n">transcripts_source_order</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="find_nomen-593"><a href="#find_nomen-593"><span class="linenos">593</span></a>        <span class="n">transcripts_source_order</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;column&quot;</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">]</span>
</span><span id="find_nomen-594"><a href="#find_nomen-594"><span class="linenos">594</span></a>    <span class="n">transcripts_source_order_rank</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="find_nomen-595"><a href="#find_nomen-595"><span class="linenos">595</span></a>    <span class="k">for</span> <span class="n">rank</span><span class="p">,</span> <span class="n">source</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">transcripts_source_order</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="find_nomen-596"><a href="#find_nomen-596"><span class="linenos">596</span></a>        <span class="n">transcripts_source_order_rank</span><span class="p">[</span><span class="n">source</span><span class="p">]</span> <span class="o">=</span> <span class="n">rank</span>
</span><span id="find_nomen-597"><a href="#find_nomen-597"><span class="linenos">597</span></a>
</span><span id="find_nomen-598"><a href="#find_nomen-598"><span class="linenos">598</span></a>    <span class="c1"># Transcripts file length</span>
</span><span id="find_nomen-599"><a href="#find_nomen-599"><span class="linenos">599</span></a>    <span class="k">if</span> <span class="n">transcripts_len</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="find_nomen-600"><a href="#find_nomen-600"><span class="linenos">600</span></a>        <span class="n">transcripts_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">transcripts_list</span><span class="p">)</span>
</span><span id="find_nomen-601"><a href="#find_nomen-601"><span class="linenos">601</span></a>
</span><span id="find_nomen-602"><a href="#find_nomen-602"><span class="linenos">602</span></a>    <span class="c1"># Check if transcript in column transcript, and add to transcripts list/rank</span>
</span><span id="find_nomen-603"><a href="#find_nomen-603"><span class="linenos">603</span></a>    <span class="n">transcript_shift</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="find_nomen-604"><a href="#find_nomen-604"><span class="linenos">604</span></a>    <span class="k">if</span> <span class="n">transcript</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">transcript</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;nan&quot;</span><span class="p">:</span>
</span><span id="find_nomen-605"><a href="#find_nomen-605"><span class="linenos">605</span></a>        <span class="n">transcript_list</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">transcript</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="find_nomen-606"><a href="#find_nomen-606"><span class="linenos">606</span></a>        <span class="k">if</span> <span class="n">transcripts_source_order_rank</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="find_nomen-607"><a href="#find_nomen-607"><span class="linenos">607</span></a>            <span class="s2">&quot;column&quot;</span><span class="p">,</span> <span class="mi">0</span>
</span><span id="find_nomen-608"><a href="#find_nomen-608"><span class="linenos">608</span></a>        <span class="p">)</span> <span class="o">&lt;</span> <span class="n">transcripts_source_order_rank</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="find_nomen-609"><a href="#find_nomen-609"><span class="linenos">609</span></a>            <span class="n">transcript_shift</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">transcript_list</span><span class="p">)</span>
</span><span id="find_nomen-610"><a href="#find_nomen-610"><span class="linenos">610</span></a>        <span class="k">for</span> <span class="n">rank</span><span class="p">,</span> <span class="n">transcript</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">transcript_list</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span id="find_nomen-611"><a href="#find_nomen-611"><span class="linenos">611</span></a>            <span class="k">if</span> <span class="n">transcripts_source_order_rank</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="find_nomen-612"><a href="#find_nomen-612"><span class="linenos">612</span></a>                <span class="s2">&quot;column&quot;</span><span class="p">,</span> <span class="mi">0</span>
</span><span id="find_nomen-613"><a href="#find_nomen-613"><span class="linenos">613</span></a>            <span class="p">)</span> <span class="o">&lt;</span> <span class="n">transcripts_source_order_rank</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="find_nomen-614"><a href="#find_nomen-614"><span class="linenos">614</span></a>                <span class="n">transcripts_list</span><span class="p">[</span><span class="n">transcript</span><span class="p">]</span> <span class="o">=</span> <span class="n">rank</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">transcript_list</span><span class="p">)</span>
</span><span id="find_nomen-615"><a href="#find_nomen-615"><span class="linenos">615</span></a>            <span class="k">elif</span> <span class="n">transcript</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">transcripts</span><span class="p">:</span>
</span><span id="find_nomen-616"><a href="#find_nomen-616"><span class="linenos">616</span></a>                <span class="n">transcripts_list</span><span class="p">[</span><span class="n">transcript</span><span class="p">]</span> <span class="o">=</span> <span class="n">rank</span> <span class="o">+</span> <span class="n">transcripts_len</span>
</span><span id="find_nomen-617"><a href="#find_nomen-617"><span class="linenos">617</span></a>
</span><span id="find_nomen-618"><a href="#find_nomen-618"><span class="linenos">618</span></a>    <span class="c1"># If hgvs not empty</span>
</span><span id="find_nomen-619"><a href="#find_nomen-619"><span class="linenos">619</span></a>    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">hgvs</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;nan&quot;</span><span class="p">:</span>
</span><span id="find_nomen-620"><a href="#find_nomen-620"><span class="linenos">620</span></a>
</span><span id="find_nomen-621"><a href="#find_nomen-621"><span class="linenos">621</span></a>        <span class="n">hgvs_split</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">hgvs</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="find_nomen-622"><a href="#find_nomen-622"><span class="linenos">622</span></a>
</span><span id="find_nomen-623"><a href="#find_nomen-623"><span class="linenos">623</span></a>        <span class="n">nomen_score_max</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="find_nomen-624"><a href="#find_nomen-624"><span class="linenos">624</span></a>
</span><span id="find_nomen-625"><a href="#find_nomen-625"><span class="linenos">625</span></a>        <span class="k">for</span> <span class="n">one_hgvs</span> <span class="ow">in</span> <span class="n">hgvs_split</span><span class="p">:</span>
</span><span id="find_nomen-626"><a href="#find_nomen-626"><span class="linenos">626</span></a>            <span class="n">one_hgvs_split</span> <span class="o">=</span> <span class="n">one_hgvs</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="find_nomen-627"><a href="#find_nomen-627"><span class="linenos">627</span></a>
</span><span id="find_nomen-628"><a href="#find_nomen-628"><span class="linenos">628</span></a>            <span class="n">one_nomen_score</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="find_nomen-629"><a href="#find_nomen-629"><span class="linenos">629</span></a>            <span class="n">one_nomen_dict</span> <span class="o">=</span> <span class="n">empty_nomen_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="find_nomen-630"><a href="#find_nomen-630"><span class="linenos">630</span></a>
</span><span id="find_nomen-631"><a href="#find_nomen-631"><span class="linenos">631</span></a>            <span class="k">for</span> <span class="n">one_hgvs_infos</span> <span class="ow">in</span> <span class="n">one_hgvs_split</span><span class="p">:</span>
</span><span id="find_nomen-632"><a href="#find_nomen-632"><span class="linenos">632</span></a>
</span><span id="find_nomen-633"><a href="#find_nomen-633"><span class="linenos">633</span></a>                <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[NX][MR]_(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">):</span>
</span><span id="find_nomen-634"><a href="#find_nomen-634"><span class="linenos">634</span></a>                    <span class="c1"># Transcript with version</span>
</span><span id="find_nomen-635"><a href="#find_nomen-635"><span class="linenos">635</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TVNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="find_nomen-636"><a href="#find_nomen-636"><span class="linenos">636</span></a>                    <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="find_nomen-637"><a href="#find_nomen-637"><span class="linenos">637</span></a>                    <span class="c1"># Split transcript</span>
</span><span id="find_nomen-638"><a href="#find_nomen-638"><span class="linenos">638</span></a>                    <span class="n">one_hgvs_infos_split</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
</span><span id="find_nomen-639"><a href="#find_nomen-639"><span class="linenos">639</span></a>                    <span class="c1"># Transcript</span>
</span><span id="find_nomen-640"><a href="#find_nomen-640"><span class="linenos">640</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos_split</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="find_nomen-641"><a href="#find_nomen-641"><span class="linenos">641</span></a>                    <span class="c1"># Transcript version</span>
</span><span id="find_nomen-642"><a href="#find_nomen-642"><span class="linenos">642</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">one_hgvs_infos_split</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="find_nomen-643"><a href="#find_nomen-643"><span class="linenos">643</span></a>                        <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;VNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos_split</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="find_nomen-644"><a href="#find_nomen-644"><span class="linenos">644</span></a>                    <span class="c1"># NOMEN Score</span>
</span><span id="find_nomen-645"><a href="#find_nomen-645"><span class="linenos">645</span></a>                    <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^NM_(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">)</span> <span class="ow">or</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
</span><span id="find_nomen-646"><a href="#find_nomen-646"><span class="linenos">646</span></a>                        <span class="sa">r</span><span class="s2">&quot;^NM_(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span>
</span><span id="find_nomen-647"><a href="#find_nomen-647"><span class="linenos">647</span></a>                    <span class="p">):</span>
</span><span id="find_nomen-648"><a href="#find_nomen-648"><span class="linenos">648</span></a>                        <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">2</span>
</span><span id="find_nomen-649"><a href="#find_nomen-649"><span class="linenos">649</span></a>                    <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^NR_(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">):</span>
</span><span id="find_nomen-650"><a href="#find_nomen-650"><span class="linenos">650</span></a>                        <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="find_nomen-651"><a href="#find_nomen-651"><span class="linenos">651</span></a>                    <span class="c1"># NOMEN with default transcript</span>
</span><span id="find_nomen-652"><a href="#find_nomen-652"><span class="linenos">652</span></a>                    <span class="k">if</span> <span class="p">(</span>
</span><span id="find_nomen-653"><a href="#find_nomen-653"><span class="linenos">653</span></a>                        <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TVNOMEN&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">transcripts_list</span>
</span><span id="find_nomen-654"><a href="#find_nomen-654"><span class="linenos">654</span></a>                        <span class="ow">or</span> <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TNOMEN&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">transcripts_list</span>
</span><span id="find_nomen-655"><a href="#find_nomen-655"><span class="linenos">655</span></a>                    <span class="p">):</span>
</span><span id="find_nomen-656"><a href="#find_nomen-656"><span class="linenos">656</span></a>                        <span class="n">rank</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="find_nomen-657"><a href="#find_nomen-657"><span class="linenos">657</span></a>                            <span class="nb">max</span><span class="p">(</span>
</span><span id="find_nomen-658"><a href="#find_nomen-658"><span class="linenos">658</span></a>                                <span class="n">transcripts_list</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="find_nomen-659"><a href="#find_nomen-659"><span class="linenos">659</span></a>                                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TVNOMEN&quot;</span><span class="p">],</span> <span class="o">-</span><span class="n">transcript_shift</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="find_nomen-660"><a href="#find_nomen-660"><span class="linenos">660</span></a>                                <span class="p">),</span>
</span><span id="find_nomen-661"><a href="#find_nomen-661"><span class="linenos">661</span></a>                                <span class="n">transcripts_list</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="find_nomen-662"><a href="#find_nomen-662"><span class="linenos">662</span></a>                                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TNOMEN&quot;</span><span class="p">],</span> <span class="o">-</span><span class="n">transcript_shift</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="find_nomen-663"><a href="#find_nomen-663"><span class="linenos">663</span></a>                                <span class="p">),</span>
</span><span id="find_nomen-664"><a href="#find_nomen-664"><span class="linenos">664</span></a>                            <span class="p">)</span>
</span><span id="find_nomen-665"><a href="#find_nomen-665"><span class="linenos">665</span></a>                            <span class="o">+</span> <span class="n">transcript_shift</span>
</span><span id="find_nomen-666"><a href="#find_nomen-666"><span class="linenos">666</span></a>                        <span class="p">)</span>
</span><span id="find_nomen-667"><a href="#find_nomen-667"><span class="linenos">667</span></a>                        <span class="k">if</span> <span class="n">rank</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="find_nomen-668"><a href="#find_nomen-668"><span class="linenos">668</span></a>                            <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">transcripts_list</span><span class="p">)</span> <span class="o">-</span> <span class="n">rank</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="find_nomen-669"><a href="#find_nomen-669"><span class="linenos">669</span></a>
</span><span id="find_nomen-670"><a href="#find_nomen-670"><span class="linenos">670</span></a>                <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[NX]P_(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">):</span>
</span><span id="find_nomen-671"><a href="#find_nomen-671"><span class="linenos">671</span></a>                    <span class="c1"># Transcript Protein with version</span>
</span><span id="find_nomen-672"><a href="#find_nomen-672"><span class="linenos">672</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TPVNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="find_nomen-673"><a href="#find_nomen-673"><span class="linenos">673</span></a>                    <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="find_nomen-674"><a href="#find_nomen-674"><span class="linenos">674</span></a>                    <span class="c1"># Split transcript</span>
</span><span id="find_nomen-675"><a href="#find_nomen-675"><span class="linenos">675</span></a>                    <span class="n">one_hgvs_infos_split</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
</span><span id="find_nomen-676"><a href="#find_nomen-676"><span class="linenos">676</span></a>                    <span class="c1"># Transcript Protein</span>
</span><span id="find_nomen-677"><a href="#find_nomen-677"><span class="linenos">677</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;TPNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos_split</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="find_nomen-678"><a href="#find_nomen-678"><span class="linenos">678</span></a>
</span><span id="find_nomen-679"><a href="#find_nomen-679"><span class="linenos">679</span></a>                <span class="k">elif</span> <span class="p">(</span>
</span><span id="find_nomen-680"><a href="#find_nomen-680"><span class="linenos">680</span></a>                    <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^c\.(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">)</span>
</span><span id="find_nomen-681"><a href="#find_nomen-681"><span class="linenos">681</span></a>                    <span class="ow">or</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^g\.(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">)</span>
</span><span id="find_nomen-682"><a href="#find_nomen-682"><span class="linenos">682</span></a>                    <span class="ow">or</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^m\.(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">)</span>
</span><span id="find_nomen-683"><a href="#find_nomen-683"><span class="linenos">683</span></a>                <span class="p">):</span>
</span><span id="find_nomen-684"><a href="#find_nomen-684"><span class="linenos">684</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;CNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="find_nomen-685"><a href="#find_nomen-685"><span class="linenos">685</span></a>                    <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="find_nomen-686"><a href="#find_nomen-686"><span class="linenos">686</span></a>                <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^n\.(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">):</span>
</span><span id="find_nomen-687"><a href="#find_nomen-687"><span class="linenos">687</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;NNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="find_nomen-688"><a href="#find_nomen-688"><span class="linenos">688</span></a>                    <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="find_nomen-689"><a href="#find_nomen-689"><span class="linenos">689</span></a>                <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^r\.(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">):</span>
</span><span id="find_nomen-690"><a href="#find_nomen-690"><span class="linenos">690</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;RNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="find_nomen-691"><a href="#find_nomen-691"><span class="linenos">691</span></a>                    <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="find_nomen-692"><a href="#find_nomen-692"><span class="linenos">692</span></a>                <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^p\.(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">):</span>
</span><span id="find_nomen-693"><a href="#find_nomen-693"><span class="linenos">693</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;PNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="find_nomen-694"><a href="#find_nomen-694"><span class="linenos">694</span></a>                    <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="find_nomen-695"><a href="#find_nomen-695"><span class="linenos">695</span></a>                <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^exon(.*)$&quot;</span><span class="p">,</span> <span class="n">one_hgvs_infos</span><span class="p">):</span>
</span><span id="find_nomen-696"><a href="#find_nomen-696"><span class="linenos">696</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;ENOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="find_nomen-697"><a href="#find_nomen-697"><span class="linenos">697</span></a>                    <span class="n">one_nomen_score</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="find_nomen-698"><a href="#find_nomen-698"><span class="linenos">698</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="find_nomen-699"><a href="#find_nomen-699"><span class="linenos">699</span></a>                    <span class="n">one_nomen_dict</span><span class="p">[</span><span class="s2">&quot;GNOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">one_hgvs_infos</span>
</span><span id="find_nomen-700"><a href="#find_nomen-700"><span class="linenos">700</span></a>
</span><span id="find_nomen-701"><a href="#find_nomen-701"><span class="linenos">701</span></a>            <span class="k">if</span> <span class="n">one_nomen_score</span> <span class="o">&gt;</span> <span class="n">nomen_score_max</span><span class="p">:</span>
</span><span id="find_nomen-702"><a href="#find_nomen-702"><span class="linenos">702</span></a>                <span class="n">nomen_dict</span> <span class="o">=</span> <span class="n">one_nomen_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="find_nomen-703"><a href="#find_nomen-703"><span class="linenos">703</span></a>                <span class="n">nomen_score_max</span> <span class="o">=</span> <span class="n">one_nomen_score</span>
</span><span id="find_nomen-704"><a href="#find_nomen-704"><span class="linenos">704</span></a>
</span><span id="find_nomen-705"><a href="#find_nomen-705"><span class="linenos">705</span></a>        <span class="c1"># Contruct NOMEN from pattern</span>
</span><span id="find_nomen-706"><a href="#find_nomen-706"><span class="linenos">706</span></a>        <span class="n">nomen</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="find_nomen-707"><a href="#find_nomen-707"><span class="linenos">707</span></a>        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">pattern</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">):</span>
</span><span id="find_nomen-708"><a href="#find_nomen-708"><span class="linenos">708</span></a>            <span class="k">if</span> <span class="n">nomen_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="find_nomen-709"><a href="#find_nomen-709"><span class="linenos">709</span></a>                <span class="n">nomen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nomen_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span><span id="find_nomen-710"><a href="#find_nomen-710"><span class="linenos">710</span></a>        <span class="n">nomen_dict</span><span class="p">[</span><span class="s2">&quot;NOMEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;:&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">nomen</span><span class="p">)</span>
</span><span id="find_nomen-711"><a href="#find_nomen-711"><span class="linenos">711</span></a>
</span><span id="find_nomen-712"><a href="#find_nomen-712"><span class="linenos">712</span></a>    <span class="k">return</span> <span class="n">nomen_dict</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#find_nomen">find_nomen</a></code> takes a HGVS string and a list of transcripts, parses the HGVS string, and
returns a dictionary with the best NOMEN based on specified patterns.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>hgvs</strong>:  The <code>hgvs</code> parameter is a DataFrame containing the HGVS strings to parse. It seems like
the function is designed to process multiple HGVS strings at once. You can pass this DataFrame to
the function for processing. If you have a specific DataFrame that you would like to use, please
provide it</li>
<li><strong>transcript</strong>:  The <code>transcript</code> parameter in the <code><a href="#find_nomen">find_nomen</a></code> function is used to specify a
single transcript to use for ranking. It is a string that represents the transcript. If provided,
this transcript will be used along with the transcripts from the <code>transcripts</code> list to determine the
best NOMEN</li>
<li><strong>transcripts</strong>:  Transcripts are a list of transcripts to use for ranking in the <code><a href="#find_nomen">find_nomen</a></code>
function. You can provide a list of transcripts that you want to consider when constructing the
NOMEN for a given HGVS string</li>
<li><strong>transcripts_source_order</strong>:  The <code>transcripts_source_order</code> parameter is a list that specifies
the order in which different sources of transcripts should be considered. In the provided function,
the default order is <code>["column", "file"]</code>, which means that transcripts from a column in the input
data will be considered first, followed by</li>
<li><strong>pattern</strong>:  The <code>pattern</code> parameter in the <code><a href="#find_nomen">find_nomen</a></code> function is used to specify the format
in which the NOMEN should be constructed. By default, the pattern is set to
"GNOMEN:TNOMEN:ENOMEN:CNOMEN:RNOMEN:NNOMEN</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#find_nomen">find_nomen</a></code> returns a dictionary containing the following keys:</p>
  
  <ul>
  <li>NOMEN</li>
  <li>CNOMEN</li>
  <li>RNOMEN</li>
  <li>NNOMEN</li>
  <li>PNOMEN</li>
  <li>TVNOMEN</li>
  <li>TNOMEN</li>
  <li>TPVNOMEN</li>
  <li>TPNOMEN</li>
  <li>VNOMEN</li>
  <li>ENOMEN</li>
  <li>GNOMEN</li>
  </ul>
</blockquote>
</div>


                </section>
                <section id="explode_annotation_format">
                            <input id="explode_annotation_format-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">explode_annotation_format</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">annotation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">uniquify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">output_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;fields&#39;</span>,</span><span class="param">	<span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;ANN_&#39;</span>,</span><span class="param">	<span class="n">header</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Allele&#39;</span><span class="p">,</span> <span class="s1">&#39;Annotation&#39;</span><span class="p">,</span> <span class="s1">&#39;Annotation_Impact&#39;</span><span class="p">,</span> <span class="s1">&#39;Gene_Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Gene_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Feature_Type&#39;</span><span class="p">,</span> <span class="s1">&#39;Feature_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Transcript_BioType&#39;</span><span class="p">,</span> <span class="s1">&#39;Rank&#39;</span><span class="p">,</span> <span class="s1">&#39;HGVS.c&#39;</span><span class="p">,</span> <span class="s1">&#39;HGVS.p&#39;</span><span class="p">,</span> <span class="s1">&#39;cDNA.pos / cDNA.length&#39;</span><span class="p">,</span> <span class="s1">&#39;CDS.pos / CDS.length&#39;</span><span class="p">,</span> <span class="s1">&#39;AA.pos / AA.length&#39;</span><span class="p">,</span> <span class="s1">&#39;Distance&#39;</span><span class="p">,</span> <span class="s1">&#39;ERRORS / WARNINGS / INFO&#39;</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="explode_annotation_format-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#explode_annotation_format"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="explode_annotation_format-715"><a href="#explode_annotation_format-715"><span class="linenos">715</span></a><span class="k">def</span> <span class="nf">explode_annotation_format</span><span class="p">(</span>
</span><span id="explode_annotation_format-716"><a href="#explode_annotation_format-716"><span class="linenos">716</span></a>    <span class="n">annotation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-717"><a href="#explode_annotation_format-717"><span class="linenos">717</span></a>    <span class="n">uniquify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="explode_annotation_format-718"><a href="#explode_annotation_format-718"><span class="linenos">718</span></a>    <span class="n">output_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;fields&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-719"><a href="#explode_annotation_format-719"><span class="linenos">719</span></a>    <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ANN_&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-720"><a href="#explode_annotation_format-720"><span class="linenos">720</span></a>    <span class="n">header</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="explode_annotation_format-721"><a href="#explode_annotation_format-721"><span class="linenos">721</span></a>        <span class="s2">&quot;Allele&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-722"><a href="#explode_annotation_format-722"><span class="linenos">722</span></a>        <span class="s2">&quot;Annotation&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-723"><a href="#explode_annotation_format-723"><span class="linenos">723</span></a>        <span class="s2">&quot;Annotation_Impact&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-724"><a href="#explode_annotation_format-724"><span class="linenos">724</span></a>        <span class="s2">&quot;Gene_Name&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-725"><a href="#explode_annotation_format-725"><span class="linenos">725</span></a>        <span class="s2">&quot;Gene_ID&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-726"><a href="#explode_annotation_format-726"><span class="linenos">726</span></a>        <span class="s2">&quot;Feature_Type&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-727"><a href="#explode_annotation_format-727"><span class="linenos">727</span></a>        <span class="s2">&quot;Feature_ID&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-728"><a href="#explode_annotation_format-728"><span class="linenos">728</span></a>        <span class="s2">&quot;Transcript_BioType&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-729"><a href="#explode_annotation_format-729"><span class="linenos">729</span></a>        <span class="s2">&quot;Rank&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-730"><a href="#explode_annotation_format-730"><span class="linenos">730</span></a>        <span class="s2">&quot;HGVS.c&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-731"><a href="#explode_annotation_format-731"><span class="linenos">731</span></a>        <span class="s2">&quot;HGVS.p&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-732"><a href="#explode_annotation_format-732"><span class="linenos">732</span></a>        <span class="s2">&quot;cDNA.pos / cDNA.length&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-733"><a href="#explode_annotation_format-733"><span class="linenos">733</span></a>        <span class="s2">&quot;CDS.pos / CDS.length&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-734"><a href="#explode_annotation_format-734"><span class="linenos">734</span></a>        <span class="s2">&quot;AA.pos / AA.length&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-735"><a href="#explode_annotation_format-735"><span class="linenos">735</span></a>        <span class="s2">&quot;Distance&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-736"><a href="#explode_annotation_format-736"><span class="linenos">736</span></a>        <span class="s2">&quot;ERRORS / WARNINGS / INFO&quot;</span><span class="p">,</span>
</span><span id="explode_annotation_format-737"><a href="#explode_annotation_format-737"><span class="linenos">737</span></a>    <span class="p">],</span>
</span><span id="explode_annotation_format-738"><a href="#explode_annotation_format-738"><span class="linenos">738</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="explode_annotation_format-739"><a href="#explode_annotation_format-739"><span class="linenos">739</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="explode_annotation_format-740"><a href="#explode_annotation_format-740"><span class="linenos">740</span></a><span class="sd">    The `explode_annotation_format` function takes an annotation string and formats it into a specified</span>
</span><span id="explode_annotation_format-741"><a href="#explode_annotation_format-741"><span class="linenos">741</span></a><span class="sd">    output format with optional customization parameters.</span>
</span><span id="explode_annotation_format-742"><a href="#explode_annotation_format-742"><span class="linenos">742</span></a>
</span><span id="explode_annotation_format-743"><a href="#explode_annotation_format-743"><span class="linenos">743</span></a><span class="sd">    :param annotation: The `annotation` parameter is a string containing multiple annotations separated</span>
</span><span id="explode_annotation_format-744"><a href="#explode_annotation_format-744"><span class="linenos">744</span></a><span class="sd">    by commas and pipe symbols. Each annotation consists of different fields separated by pipe symbols.</span>
</span><span id="explode_annotation_format-745"><a href="#explode_annotation_format-745"><span class="linenos">745</span></a><span class="sd">    For example, an annotation string could look like this: &quot;A|B|C,D|E|F&quot;</span>
</span><span id="explode_annotation_format-746"><a href="#explode_annotation_format-746"><span class="linenos">746</span></a><span class="sd">    :type annotation: str</span>
</span><span id="explode_annotation_format-747"><a href="#explode_annotation_format-747"><span class="linenos">747</span></a><span class="sd">    :param uniquify: The `uniquify` parameter in the `explode_annotation_format` function is a boolean</span>
</span><span id="explode_annotation_format-748"><a href="#explode_annotation_format-748"><span class="linenos">748</span></a><span class="sd">    flag that determines whether to keep only unique values for each annotation field. If set to `True`,</span>
</span><span id="explode_annotation_format-749"><a href="#explode_annotation_format-749"><span class="linenos">749</span></a><span class="sd">    only unique values will be retained for each field before joining them together. If set to `False`,</span>
</span><span id="explode_annotation_format-750"><a href="#explode_annotation_format-750"><span class="linenos">750</span></a><span class="sd">    all values, defaults to False</span>
</span><span id="explode_annotation_format-751"><a href="#explode_annotation_format-751"><span class="linenos">751</span></a><span class="sd">    :type uniquify: bool (optional)</span>
</span><span id="explode_annotation_format-752"><a href="#explode_annotation_format-752"><span class="linenos">752</span></a><span class="sd">    :param output_format: The `output_format` parameter specifies the format in which you want the</span>
</span><span id="explode_annotation_format-753"><a href="#explode_annotation_format-753"><span class="linenos">753</span></a><span class="sd">    output to be generated. The function supports two output formats: &quot;fields&quot; and &quot;JSON&quot;. If you choose</span>
</span><span id="explode_annotation_format-754"><a href="#explode_annotation_format-754"><span class="linenos">754</span></a><span class="sd">    &quot;fields&quot;, the output will be a string with annotations separated by semicolons. If you choose</span>
</span><span id="explode_annotation_format-755"><a href="#explode_annotation_format-755"><span class="linenos">755</span></a><span class="sd">    &quot;JSON&quot;, the, defaults to fields</span>
</span><span id="explode_annotation_format-756"><a href="#explode_annotation_format-756"><span class="linenos">756</span></a><span class="sd">    :type output_format: str (optional)</span>
</span><span id="explode_annotation_format-757"><a href="#explode_annotation_format-757"><span class="linenos">757</span></a><span class="sd">    :param prefix: The `prefix` parameter in the `explode_annotation_format` function is used to specify</span>
</span><span id="explode_annotation_format-758"><a href="#explode_annotation_format-758"><span class="linenos">758</span></a><span class="sd">    the prefix that will be added to each annotation field when generating the exploded annotation</span>
</span><span id="explode_annotation_format-759"><a href="#explode_annotation_format-759"><span class="linenos">759</span></a><span class="sd">    string. In the provided function, the default prefix value is set to &quot;ANN_&quot;. You can customize this</span>
</span><span id="explode_annotation_format-760"><a href="#explode_annotation_format-760"><span class="linenos">760</span></a><span class="sd">    prefix value to suit your specific, defaults to ANN_</span>
</span><span id="explode_annotation_format-761"><a href="#explode_annotation_format-761"><span class="linenos">761</span></a><span class="sd">    :type prefix: str (optional)</span>
</span><span id="explode_annotation_format-762"><a href="#explode_annotation_format-762"><span class="linenos">762</span></a><span class="sd">    :param header: The `header` parameter in the `explode_annotation_format` function is a list of</span>
</span><span id="explode_annotation_format-763"><a href="#explode_annotation_format-763"><span class="linenos">763</span></a><span class="sd">    column names that will be used to create a DataFrame from the input annotation string. Each element</span>
</span><span id="explode_annotation_format-764"><a href="#explode_annotation_format-764"><span class="linenos">764</span></a><span class="sd">    in the `header` list corresponds to a specific field in the annotation data</span>
</span><span id="explode_annotation_format-765"><a href="#explode_annotation_format-765"><span class="linenos">765</span></a><span class="sd">    :type header: list</span>
</span><span id="explode_annotation_format-766"><a href="#explode_annotation_format-766"><span class="linenos">766</span></a><span class="sd">    :return: The function `explode_annotation_format` returns a string that contains the exploded and</span>
</span><span id="explode_annotation_format-767"><a href="#explode_annotation_format-767"><span class="linenos">767</span></a><span class="sd">    formatted annotation information based on the input parameters provided. The format of the returned</span>
</span><span id="explode_annotation_format-768"><a href="#explode_annotation_format-768"><span class="linenos">768</span></a><span class="sd">    string depends on the `output_format` parameter. If `output_format` is set to &quot;JSON&quot;, the function</span>
</span><span id="explode_annotation_format-769"><a href="#explode_annotation_format-769"><span class="linenos">769</span></a><span class="sd">    returns a JSON-formatted string. Otherwise, it returns a string with annotations formatted based on</span>
</span><span id="explode_annotation_format-770"><a href="#explode_annotation_format-770"><span class="linenos">770</span></a><span class="sd">    the other parameters such as `uniquify</span>
</span><span id="explode_annotation_format-771"><a href="#explode_annotation_format-771"><span class="linenos">771</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="explode_annotation_format-772"><a href="#explode_annotation_format-772"><span class="linenos">772</span></a>
</span><span id="explode_annotation_format-773"><a href="#explode_annotation_format-773"><span class="linenos">773</span></a>    <span class="c1"># Split annotation ann values</span>
</span><span id="explode_annotation_format-774"><a href="#explode_annotation_format-774"><span class="linenos">774</span></a>    <span class="n">annotation_infos</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">annotation</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)]</span>
</span><span id="explode_annotation_format-775"><a href="#explode_annotation_format-775"><span class="linenos">775</span></a>
</span><span id="explode_annotation_format-776"><a href="#explode_annotation_format-776"><span class="linenos">776</span></a>    <span class="c1"># Create dictionary</span>
</span><span id="explode_annotation_format-777"><a href="#explode_annotation_format-777"><span class="linenos">777</span></a>    <span class="n">annotation_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">header</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">))}</span>
</span><span id="explode_annotation_format-778"><a href="#explode_annotation_format-778"><span class="linenos">778</span></a>    <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">annotation_infos</span><span class="p">:</span>
</span><span id="explode_annotation_format-779"><a href="#explode_annotation_format-779"><span class="linenos">779</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">)):</span>
</span><span id="explode_annotation_format-780"><a href="#explode_annotation_format-780"><span class="linenos">780</span></a>            <span class="n">annotation_dict</span><span class="p">[</span><span class="n">header</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="explode_annotation_format-781"><a href="#explode_annotation_format-781"><span class="linenos">781</span></a>
</span><span id="explode_annotation_format-782"><a href="#explode_annotation_format-782"><span class="linenos">782</span></a>    <span class="c1"># Fetch each annotations</span>
</span><span id="explode_annotation_format-783"><a href="#explode_annotation_format-783"><span class="linenos">783</span></a>    <span class="k">if</span> <span class="n">output_format</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;JSON&quot;</span><span class="p">:</span>
</span><span id="explode_annotation_format-784"><a href="#explode_annotation_format-784"><span class="linenos">784</span></a>
</span><span id="explode_annotation_format-785"><a href="#explode_annotation_format-785"><span class="linenos">785</span></a>        <span class="c1"># Transpose dict</span>
</span><span id="explode_annotation_format-786"><a href="#explode_annotation_format-786"><span class="linenos">786</span></a>        <span class="n">annotation_explode</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="explode_annotation_format-787"><a href="#explode_annotation_format-787"><span class="linenos">787</span></a>            <span class="n">i</span><span class="p">:</span> <span class="p">{</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">annotation_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</span><span id="explode_annotation_format-788"><a href="#explode_annotation_format-788"><span class="linenos">788</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">annotation_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()))))</span>
</span><span id="explode_annotation_format-789"><a href="#explode_annotation_format-789"><span class="linenos">789</span></a>        <span class="p">}</span>
</span><span id="explode_annotation_format-790"><a href="#explode_annotation_format-790"><span class="linenos">790</span></a>
</span><span id="explode_annotation_format-791"><a href="#explode_annotation_format-791"><span class="linenos">791</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="explode_annotation_format-792"><a href="#explode_annotation_format-792"><span class="linenos">792</span></a>        <span class="n">ann_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="explode_annotation_format-793"><a href="#explode_annotation_format-793"><span class="linenos">793</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">annotation_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="explode_annotation_format-794"><a href="#explode_annotation_format-794"><span class="linenos">794</span></a>            <span class="k">if</span> <span class="n">uniquify</span><span class="p">:</span>
</span><span id="explode_annotation_format-795"><a href="#explode_annotation_format-795"><span class="linenos">795</span></a>                <span class="n">values</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="explode_annotation_format-796"><a href="#explode_annotation_format-796"><span class="linenos">796</span></a>            <span class="n">ann_list_infos</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="explode_annotation_format-797"><a href="#explode_annotation_format-797"><span class="linenos">797</span></a>            <span class="k">if</span> <span class="n">ann_list_infos</span><span class="p">:</span>
</span><span id="explode_annotation_format-798"><a href="#explode_annotation_format-798"><span class="linenos">798</span></a>                <span class="n">header_clean</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">char</span> <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">key</span> <span class="k">if</span> <span class="n">char</span><span class="o">.</span><span class="n">isalnum</span><span class="p">())</span>
</span><span id="explode_annotation_format-799"><a href="#explode_annotation_format-799"><span class="linenos">799</span></a>                <span class="n">ann_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">header_clean</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">ann_list_infos</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="explode_annotation_format-800"><a href="#explode_annotation_format-800"><span class="linenos">800</span></a>
</span><span id="explode_annotation_format-801"><a href="#explode_annotation_format-801"><span class="linenos">801</span></a>        <span class="c1"># join list</span>
</span><span id="explode_annotation_format-802"><a href="#explode_annotation_format-802"><span class="linenos">802</span></a>        <span class="n">annotation_explode</span> <span class="o">=</span> <span class="s2">&quot;;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ann_list</span><span class="p">)</span>
</span><span id="explode_annotation_format-803"><a href="#explode_annotation_format-803"><span class="linenos">803</span></a>
</span><span id="explode_annotation_format-804"><a href="#explode_annotation_format-804"><span class="linenos">804</span></a>    <span class="k">return</span> <span class="n">annotation_explode</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#explode_annotation_format">explode_annotation_format</a></code> function takes an annotation string and formats it into a specified
output format with optional customization parameters.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>annotation</strong>:  The <code>annotation</code> parameter is a string containing multiple annotations separated
by commas and pipe symbols. Each annotation consists of different fields separated by pipe symbols.
For example, an annotation string could look like this: "A|B|C,D|E|F"</li>
<li><strong>uniquify</strong>:  The <code>uniquify</code> parameter in the <code><a href="#explode_annotation_format">explode_annotation_format</a></code> function is a boolean
flag that determines whether to keep only unique values for each annotation field. If set to <code>True</code>,
only unique values will be retained for each field before joining them together. If set to <code>False</code>,
all values, defaults to False</li>
<li><strong>output_format</strong>:  The <code>output_format</code> parameter specifies the format in which you want the
output to be generated. The function supports two output formats: "fields" and "JSON". If you choose
"fields", the output will be a string with annotations separated by semicolons. If you choose
"JSON", the, defaults to fields</li>
<li><strong>prefix</strong>:  The <code>prefix</code> parameter in the <code><a href="#explode_annotation_format">explode_annotation_format</a></code> function is used to specify
the prefix that will be added to each annotation field when generating the exploded annotation
string. In the provided function, the default prefix value is set to "ANN_". You can customize this
prefix value to suit your specific, defaults to ANN_</li>
<li><strong>header</strong>:  The <code>header</code> parameter in the <code><a href="#explode_annotation_format">explode_annotation_format</a></code> function is a list of
column names that will be used to create a DataFrame from the input annotation string. Each element
in the <code>header</code> list corresponds to a specific field in the annotation data</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#explode_annotation_format">explode_annotation_format</a></code> returns a string that contains the exploded and
  formatted annotation information based on the input parameters provided. The format of the returned
  string depends on the <code>output_format</code> parameter. If <code>output_format</code> is set to "JSON", the function
  returns a JSON-formatted string. Otherwise, it returns a string with annotations formatted based on
  the other parameters such as `uniquify</p>
</blockquote>
</div>


                </section>
                <section id="extract_snpeff_hgvs">
                            <input id="extract_snpeff_hgvs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_snpeff_hgvs</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">snpeff</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">header</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Allele&#39;</span><span class="p">,</span> <span class="s1">&#39;Annotation&#39;</span><span class="p">,</span> <span class="s1">&#39;Annotation_Impact&#39;</span><span class="p">,</span> <span class="s1">&#39;Gene_Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Gene_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Feature_Type&#39;</span><span class="p">,</span> <span class="s1">&#39;Feature_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Transcript_BioType&#39;</span><span class="p">,</span> <span class="s1">&#39;Rank&#39;</span><span class="p">,</span> <span class="s1">&#39;HGVS.c&#39;</span><span class="p">,</span> <span class="s1">&#39;HGVS.p&#39;</span><span class="p">,</span> <span class="s1">&#39;cDNA.pos / cDNA.length&#39;</span><span class="p">,</span> <span class="s1">&#39;CDS.pos / CDS.length&#39;</span><span class="p">,</span> <span class="s1">&#39;AA.pos / AA.length&#39;</span><span class="p">,</span> <span class="s1">&#39;Distance&#39;</span><span class="p">,</span> <span class="s1">&#39;ERRORS / WARNINGS / INFO&#39;</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="extract_snpeff_hgvs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_snpeff_hgvs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_snpeff_hgvs-807"><a href="#extract_snpeff_hgvs-807"><span class="linenos">807</span></a><span class="k">def</span> <span class="nf">extract_snpeff_hgvs</span><span class="p">(</span>
</span><span id="extract_snpeff_hgvs-808"><a href="#extract_snpeff_hgvs-808"><span class="linenos">808</span></a>    <span class="n">snpeff</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-809"><a href="#extract_snpeff_hgvs-809"><span class="linenos">809</span></a>    <span class="n">header</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="extract_snpeff_hgvs-810"><a href="#extract_snpeff_hgvs-810"><span class="linenos">810</span></a>        <span class="s2">&quot;Allele&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-811"><a href="#extract_snpeff_hgvs-811"><span class="linenos">811</span></a>        <span class="s2">&quot;Annotation&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-812"><a href="#extract_snpeff_hgvs-812"><span class="linenos">812</span></a>        <span class="s2">&quot;Annotation_Impact&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-813"><a href="#extract_snpeff_hgvs-813"><span class="linenos">813</span></a>        <span class="s2">&quot;Gene_Name&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-814"><a href="#extract_snpeff_hgvs-814"><span class="linenos">814</span></a>        <span class="s2">&quot;Gene_ID&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-815"><a href="#extract_snpeff_hgvs-815"><span class="linenos">815</span></a>        <span class="s2">&quot;Feature_Type&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-816"><a href="#extract_snpeff_hgvs-816"><span class="linenos">816</span></a>        <span class="s2">&quot;Feature_ID&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-817"><a href="#extract_snpeff_hgvs-817"><span class="linenos">817</span></a>        <span class="s2">&quot;Transcript_BioType&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-818"><a href="#extract_snpeff_hgvs-818"><span class="linenos">818</span></a>        <span class="s2">&quot;Rank&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-819"><a href="#extract_snpeff_hgvs-819"><span class="linenos">819</span></a>        <span class="s2">&quot;HGVS.c&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-820"><a href="#extract_snpeff_hgvs-820"><span class="linenos">820</span></a>        <span class="s2">&quot;HGVS.p&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-821"><a href="#extract_snpeff_hgvs-821"><span class="linenos">821</span></a>        <span class="s2">&quot;cDNA.pos / cDNA.length&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-822"><a href="#extract_snpeff_hgvs-822"><span class="linenos">822</span></a>        <span class="s2">&quot;CDS.pos / CDS.length&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-823"><a href="#extract_snpeff_hgvs-823"><span class="linenos">823</span></a>        <span class="s2">&quot;AA.pos / AA.length&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-824"><a href="#extract_snpeff_hgvs-824"><span class="linenos">824</span></a>        <span class="s2">&quot;Distance&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-825"><a href="#extract_snpeff_hgvs-825"><span class="linenos">825</span></a>        <span class="s2">&quot;ERRORS / WARNINGS / INFO&quot;</span><span class="p">,</span>
</span><span id="extract_snpeff_hgvs-826"><a href="#extract_snpeff_hgvs-826"><span class="linenos">826</span></a>    <span class="p">],</span>
</span><span id="extract_snpeff_hgvs-827"><a href="#extract_snpeff_hgvs-827"><span class="linenos">827</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="extract_snpeff_hgvs-828"><a href="#extract_snpeff_hgvs-828"><span class="linenos">828</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="extract_snpeff_hgvs-829"><a href="#extract_snpeff_hgvs-829"><span class="linenos">829</span></a><span class="sd">    This function extracts HGVS annotations from a given snpEff annotation string and returns them as a</span>
</span><span id="extract_snpeff_hgvs-830"><a href="#extract_snpeff_hgvs-830"><span class="linenos">830</span></a><span class="sd">    comma-separated string.</span>
</span><span id="extract_snpeff_hgvs-831"><a href="#extract_snpeff_hgvs-831"><span class="linenos">831</span></a>
</span><span id="extract_snpeff_hgvs-832"><a href="#extract_snpeff_hgvs-832"><span class="linenos">832</span></a><span class="sd">    :param snpeff: The `snpeff` parameter is a string that contains annotations for genetic variants in</span>
</span><span id="extract_snpeff_hgvs-833"><a href="#extract_snpeff_hgvs-833"><span class="linenos">833</span></a><span class="sd">    a specific format. It is used as input to extract HGVS notation for the variants</span>
</span><span id="extract_snpeff_hgvs-834"><a href="#extract_snpeff_hgvs-834"><span class="linenos">834</span></a><span class="sd">    :type snpeff: str</span>
</span><span id="extract_snpeff_hgvs-835"><a href="#extract_snpeff_hgvs-835"><span class="linenos">835</span></a><span class="sd">    :param header: The header parameter is a list of column names that will be used to create a pandas</span>
</span><span id="extract_snpeff_hgvs-836"><a href="#extract_snpeff_hgvs-836"><span class="linenos">836</span></a><span class="sd">    DataFrame from the snpeff string input. It is used to extract specific information from the snpeff</span>
</span><span id="extract_snpeff_hgvs-837"><a href="#extract_snpeff_hgvs-837"><span class="linenos">837</span></a><span class="sd">    annotations</span>
</span><span id="extract_snpeff_hgvs-838"><a href="#extract_snpeff_hgvs-838"><span class="linenos">838</span></a><span class="sd">    :type header: str</span>
</span><span id="extract_snpeff_hgvs-839"><a href="#extract_snpeff_hgvs-839"><span class="linenos">839</span></a><span class="sd">    :return: a string that contains the HGVS annotations extracted from the input SNPEff annotation</span>
</span><span id="extract_snpeff_hgvs-840"><a href="#extract_snpeff_hgvs-840"><span class="linenos">840</span></a><span class="sd">    string.</span>
</span><span id="extract_snpeff_hgvs-841"><a href="#extract_snpeff_hgvs-841"><span class="linenos">841</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_snpeff_hgvs-842"><a href="#extract_snpeff_hgvs-842"><span class="linenos">842</span></a>
</span><span id="extract_snpeff_hgvs-843"><a href="#extract_snpeff_hgvs-843"><span class="linenos">843</span></a>    <span class="c1"># Split snpeff ann values</span>
</span><span id="extract_snpeff_hgvs-844"><a href="#extract_snpeff_hgvs-844"><span class="linenos">844</span></a>    <span class="n">snpeff_infos</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">snpeff</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)]</span>
</span><span id="extract_snpeff_hgvs-845"><a href="#extract_snpeff_hgvs-845"><span class="linenos">845</span></a>
</span><span id="extract_snpeff_hgvs-846"><a href="#extract_snpeff_hgvs-846"><span class="linenos">846</span></a>    <span class="c1"># Create Dataframe</span>
</span><span id="extract_snpeff_hgvs-847"><a href="#extract_snpeff_hgvs-847"><span class="linenos">847</span></a>    <span class="n">snpeff_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="extract_snpeff_hgvs-848"><a href="#extract_snpeff_hgvs-848"><span class="linenos">848</span></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">)):</span>
</span><span id="extract_snpeff_hgvs-849"><a href="#extract_snpeff_hgvs-849"><span class="linenos">849</span></a>        <span class="n">snpeff_dict</span><span class="p">[</span><span class="n">header</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">snpeff_infos</span><span class="p">]</span>
</span><span id="extract_snpeff_hgvs-850"><a href="#extract_snpeff_hgvs-850"><span class="linenos">850</span></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">snpeff_dict</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</span><span id="extract_snpeff_hgvs-851"><a href="#extract_snpeff_hgvs-851"><span class="linenos">851</span></a>
</span><span id="extract_snpeff_hgvs-852"><a href="#extract_snpeff_hgvs-852"><span class="linenos">852</span></a>    <span class="c1"># Fetch each annotations</span>
</span><span id="extract_snpeff_hgvs-853"><a href="#extract_snpeff_hgvs-853"><span class="linenos">853</span></a>    <span class="n">hgvs_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="extract_snpeff_hgvs-854"><a href="#extract_snpeff_hgvs-854"><span class="linenos">854</span></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
</span><span id="extract_snpeff_hgvs-855"><a href="#extract_snpeff_hgvs-855"><span class="linenos">855</span></a>
</span><span id="extract_snpeff_hgvs-856"><a href="#extract_snpeff_hgvs-856"><span class="linenos">856</span></a>        <span class="c1"># Catch values</span>
</span><span id="extract_snpeff_hgvs-857"><a href="#extract_snpeff_hgvs-857"><span class="linenos">857</span></a>        <span class="n">gene_id</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Gene_ID&quot;</span><span class="p">]</span>
</span><span id="extract_snpeff_hgvs-858"><a href="#extract_snpeff_hgvs-858"><span class="linenos">858</span></a>        <span class="n">feature_id</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Feature_ID&quot;</span><span class="p">]</span>
</span><span id="extract_snpeff_hgvs-859"><a href="#extract_snpeff_hgvs-859"><span class="linenos">859</span></a>        <span class="n">rank</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Rank&quot;</span><span class="p">]</span>
</span><span id="extract_snpeff_hgvs-860"><a href="#extract_snpeff_hgvs-860"><span class="linenos">860</span></a>        <span class="n">hgvs_c</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;HGVS.c&quot;</span><span class="p">]</span>
</span><span id="extract_snpeff_hgvs-861"><a href="#extract_snpeff_hgvs-861"><span class="linenos">861</span></a>        <span class="n">hgvs_p</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;HGVS.p&quot;</span><span class="p">]</span>
</span><span id="extract_snpeff_hgvs-862"><a href="#extract_snpeff_hgvs-862"><span class="linenos">862</span></a>
</span><span id="extract_snpeff_hgvs-863"><a href="#extract_snpeff_hgvs-863"><span class="linenos">863</span></a>        <span class="c1"># Concatenate with &quot;:&quot; if not empty</span>
</span><span id="extract_snpeff_hgvs-864"><a href="#extract_snpeff_hgvs-864"><span class="linenos">864</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="extract_snpeff_hgvs-865"><a href="#extract_snpeff_hgvs-865"><span class="linenos">865</span></a>        <span class="k">if</span> <span class="n">gene_id</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="extract_snpeff_hgvs-866"><a href="#extract_snpeff_hgvs-866"><span class="linenos">866</span></a>            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gene_id</span><span class="p">)</span>
</span><span id="extract_snpeff_hgvs-867"><a href="#extract_snpeff_hgvs-867"><span class="linenos">867</span></a>        <span class="k">if</span> <span class="n">feature_id</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="extract_snpeff_hgvs-868"><a href="#extract_snpeff_hgvs-868"><span class="linenos">868</span></a>            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature_id</span><span class="p">)</span>
</span><span id="extract_snpeff_hgvs-869"><a href="#extract_snpeff_hgvs-869"><span class="linenos">869</span></a>        <span class="k">if</span> <span class="n">rank</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="extract_snpeff_hgvs-870"><a href="#extract_snpeff_hgvs-870"><span class="linenos">870</span></a>            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;exon&quot;</span> <span class="o">+</span> <span class="n">rank</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="extract_snpeff_hgvs-871"><a href="#extract_snpeff_hgvs-871"><span class="linenos">871</span></a>        <span class="k">if</span> <span class="n">hgvs_c</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="extract_snpeff_hgvs-872"><a href="#extract_snpeff_hgvs-872"><span class="linenos">872</span></a>            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hgvs_c</span><span class="p">)</span>
</span><span id="extract_snpeff_hgvs-873"><a href="#extract_snpeff_hgvs-873"><span class="linenos">873</span></a>        <span class="k">if</span> <span class="n">hgvs_p</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="extract_snpeff_hgvs-874"><a href="#extract_snpeff_hgvs-874"><span class="linenos">874</span></a>            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hgvs_p</span><span class="p">)</span>
</span><span id="extract_snpeff_hgvs-875"><a href="#extract_snpeff_hgvs-875"><span class="linenos">875</span></a>        <span class="n">hgvs</span> <span class="o">=</span> <span class="s2">&quot;:&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="extract_snpeff_hgvs-876"><a href="#extract_snpeff_hgvs-876"><span class="linenos">876</span></a>
</span><span id="extract_snpeff_hgvs-877"><a href="#extract_snpeff_hgvs-877"><span class="linenos">877</span></a>        <span class="c1"># Add to list</span>
</span><span id="extract_snpeff_hgvs-878"><a href="#extract_snpeff_hgvs-878"><span class="linenos">878</span></a>        <span class="n">hgvs_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hgvs</span><span class="p">)</span>
</span><span id="extract_snpeff_hgvs-879"><a href="#extract_snpeff_hgvs-879"><span class="linenos">879</span></a>
</span><span id="extract_snpeff_hgvs-880"><a href="#extract_snpeff_hgvs-880"><span class="linenos">880</span></a>    <span class="c1"># join list</span>
</span><span id="extract_snpeff_hgvs-881"><a href="#extract_snpeff_hgvs-881"><span class="linenos">881</span></a>    <span class="n">snpeff_hgvs</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">hgvs_list</span><span class="p">)</span>
</span><span id="extract_snpeff_hgvs-882"><a href="#extract_snpeff_hgvs-882"><span class="linenos">882</span></a>
</span><span id="extract_snpeff_hgvs-883"><a href="#extract_snpeff_hgvs-883"><span class="linenos">883</span></a>    <span class="k">return</span> <span class="n">snpeff_hgvs</span>
</span></pre></div>


            <div class="docstring"><p>This function extracts HGVS annotations from a given snpEff annotation string and returns them as a
comma-separated string.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>snpeff</strong>:  The <code>snpeff</code> parameter is a string that contains annotations for genetic variants in
a specific format. It is used as input to extract HGVS notation for the variants</li>
<li><strong>header</strong>:  The header parameter is a list of column names that will be used to create a pandas
DataFrame from the snpeff string input. It is used to extract specific information from the snpeff
annotations</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a string that contains the HGVS annotations extracted from the input SNPEff annotation
  string.</p>
</blockquote>
</div>


                </section>
                <section id="explode_snpeff_ann">
                            <input id="explode_snpeff_ann-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">explode_snpeff_ann</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">snpeff</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">uniquify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">output_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;fields&#39;</span>,</span><span class="param">	<span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;ANN_&#39;</span>,</span><span class="param">	<span class="n">header</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Allele&#39;</span><span class="p">,</span> <span class="s1">&#39;Annotation&#39;</span><span class="p">,</span> <span class="s1">&#39;Annotation_Impact&#39;</span><span class="p">,</span> <span class="s1">&#39;Gene_Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Gene_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Feature_Type&#39;</span><span class="p">,</span> <span class="s1">&#39;Feature_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Transcript_BioType&#39;</span><span class="p">,</span> <span class="s1">&#39;Rank&#39;</span><span class="p">,</span> <span class="s1">&#39;HGVS.c&#39;</span><span class="p">,</span> <span class="s1">&#39;HGVS.p&#39;</span><span class="p">,</span> <span class="s1">&#39;cDNA.pos / cDNA.length&#39;</span><span class="p">,</span> <span class="s1">&#39;CDS.pos / CDS.length&#39;</span><span class="p">,</span> <span class="s1">&#39;AA.pos / AA.length&#39;</span><span class="p">,</span> <span class="s1">&#39;Distance&#39;</span><span class="p">,</span> <span class="s1">&#39;ERRORS / WARNINGS / INFO&#39;</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="explode_snpeff_ann-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#explode_snpeff_ann"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="explode_snpeff_ann-886"><a href="#explode_snpeff_ann-886"><span class="linenos">886</span></a><span class="k">def</span> <span class="nf">explode_snpeff_ann</span><span class="p">(</span>
</span><span id="explode_snpeff_ann-887"><a href="#explode_snpeff_ann-887"><span class="linenos">887</span></a>    <span class="n">snpeff</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-888"><a href="#explode_snpeff_ann-888"><span class="linenos">888</span></a>    <span class="n">uniquify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-889"><a href="#explode_snpeff_ann-889"><span class="linenos">889</span></a>    <span class="n">output_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;fields&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-890"><a href="#explode_snpeff_ann-890"><span class="linenos">890</span></a>    <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ANN_&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-891"><a href="#explode_snpeff_ann-891"><span class="linenos">891</span></a>    <span class="n">header</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="explode_snpeff_ann-892"><a href="#explode_snpeff_ann-892"><span class="linenos">892</span></a>        <span class="s2">&quot;Allele&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-893"><a href="#explode_snpeff_ann-893"><span class="linenos">893</span></a>        <span class="s2">&quot;Annotation&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-894"><a href="#explode_snpeff_ann-894"><span class="linenos">894</span></a>        <span class="s2">&quot;Annotation_Impact&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-895"><a href="#explode_snpeff_ann-895"><span class="linenos">895</span></a>        <span class="s2">&quot;Gene_Name&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-896"><a href="#explode_snpeff_ann-896"><span class="linenos">896</span></a>        <span class="s2">&quot;Gene_ID&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-897"><a href="#explode_snpeff_ann-897"><span class="linenos">897</span></a>        <span class="s2">&quot;Feature_Type&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-898"><a href="#explode_snpeff_ann-898"><span class="linenos">898</span></a>        <span class="s2">&quot;Feature_ID&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-899"><a href="#explode_snpeff_ann-899"><span class="linenos">899</span></a>        <span class="s2">&quot;Transcript_BioType&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-900"><a href="#explode_snpeff_ann-900"><span class="linenos">900</span></a>        <span class="s2">&quot;Rank&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-901"><a href="#explode_snpeff_ann-901"><span class="linenos">901</span></a>        <span class="s2">&quot;HGVS.c&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-902"><a href="#explode_snpeff_ann-902"><span class="linenos">902</span></a>        <span class="s2">&quot;HGVS.p&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-903"><a href="#explode_snpeff_ann-903"><span class="linenos">903</span></a>        <span class="s2">&quot;cDNA.pos / cDNA.length&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-904"><a href="#explode_snpeff_ann-904"><span class="linenos">904</span></a>        <span class="s2">&quot;CDS.pos / CDS.length&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-905"><a href="#explode_snpeff_ann-905"><span class="linenos">905</span></a>        <span class="s2">&quot;AA.pos / AA.length&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-906"><a href="#explode_snpeff_ann-906"><span class="linenos">906</span></a>        <span class="s2">&quot;Distance&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-907"><a href="#explode_snpeff_ann-907"><span class="linenos">907</span></a>        <span class="s2">&quot;ERRORS / WARNINGS / INFO&quot;</span><span class="p">,</span>
</span><span id="explode_snpeff_ann-908"><a href="#explode_snpeff_ann-908"><span class="linenos">908</span></a>    <span class="p">],</span>
</span><span id="explode_snpeff_ann-909"><a href="#explode_snpeff_ann-909"><span class="linenos">909</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="explode_snpeff_ann-910"><a href="#explode_snpeff_ann-910"><span class="linenos">910</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="explode_snpeff_ann-911"><a href="#explode_snpeff_ann-911"><span class="linenos">911</span></a><span class="sd">    The `explode_snpeff_ann` function takes a string of SNPEff annotations, splits and processes them</span>
</span><span id="explode_snpeff_ann-912"><a href="#explode_snpeff_ann-912"><span class="linenos">912</span></a><span class="sd">    based on specified parameters, and returns the processed annotations in a specified output format.</span>
</span><span id="explode_snpeff_ann-913"><a href="#explode_snpeff_ann-913"><span class="linenos">913</span></a>
</span><span id="explode_snpeff_ann-914"><a href="#explode_snpeff_ann-914"><span class="linenos">914</span></a><span class="sd">    :param snpeff: The `snpeff` parameter is a string containing annotations separated by commas. Each</span>
</span><span id="explode_snpeff_ann-915"><a href="#explode_snpeff_ann-915"><span class="linenos">915</span></a><span class="sd">    annotation is further divided into different fields separated by pipes (|)</span>
</span><span id="explode_snpeff_ann-916"><a href="#explode_snpeff_ann-916"><span class="linenos">916</span></a><span class="sd">    :type snpeff: str</span>
</span><span id="explode_snpeff_ann-917"><a href="#explode_snpeff_ann-917"><span class="linenos">917</span></a><span class="sd">    :param uniquify: The `uniquify` parameter in the `explode_snpeff_ann` function is a boolean flag</span>
</span><span id="explode_snpeff_ann-918"><a href="#explode_snpeff_ann-918"><span class="linenos">918</span></a><span class="sd">    that determines whether to keep only unique values for each annotation field or not. If `uniquify`</span>
</span><span id="explode_snpeff_ann-919"><a href="#explode_snpeff_ann-919"><span class="linenos">919</span></a><span class="sd">    is set to `True`, only unique values will be kept for each annotation field. If, defaults to False</span>
</span><span id="explode_snpeff_ann-920"><a href="#explode_snpeff_ann-920"><span class="linenos">920</span></a><span class="sd">    :type uniquify: bool (optional)</span>
</span><span id="explode_snpeff_ann-921"><a href="#explode_snpeff_ann-921"><span class="linenos">921</span></a><span class="sd">    :param output_format: The `output_format` parameter in the `explode_snpeff_ann` function specifies</span>
</span><span id="explode_snpeff_ann-922"><a href="#explode_snpeff_ann-922"><span class="linenos">922</span></a><span class="sd">    the format in which the output will be generated. The function supports two output formats: &quot;fields&quot;</span>
</span><span id="explode_snpeff_ann-923"><a href="#explode_snpeff_ann-923"><span class="linenos">923</span></a><span class="sd">    and &quot;JSON&quot;, defaults to fields</span>
</span><span id="explode_snpeff_ann-924"><a href="#explode_snpeff_ann-924"><span class="linenos">924</span></a><span class="sd">    :type output_format: str (optional)</span>
</span><span id="explode_snpeff_ann-925"><a href="#explode_snpeff_ann-925"><span class="linenos">925</span></a><span class="sd">    :param prefix: The `prefix` parameter in the `explode_snpeff_ann` function is used to specify the</span>
</span><span id="explode_snpeff_ann-926"><a href="#explode_snpeff_ann-926"><span class="linenos">926</span></a><span class="sd">    prefix that will be added to each annotation field in the output. For example, if the prefix is set</span>
</span><span id="explode_snpeff_ann-927"><a href="#explode_snpeff_ann-927"><span class="linenos">927</span></a><span class="sd">    to &quot;ANN_&quot;, then the output annotations will be formatted as &quot;ANN_Annotation=example_annotation,</span>
</span><span id="explode_snpeff_ann-928"><a href="#explode_snpeff_ann-928"><span class="linenos">928</span></a><span class="sd">    defaults to ANN_</span>
</span><span id="explode_snpeff_ann-929"><a href="#explode_snpeff_ann-929"><span class="linenos">929</span></a><span class="sd">    :type prefix: str (optional)</span>
</span><span id="explode_snpeff_ann-930"><a href="#explode_snpeff_ann-930"><span class="linenos">930</span></a><span class="sd">    :param header: The `header` parameter in the `explode_snpeff_ann` function is a list of strings that</span>
</span><span id="explode_snpeff_ann-931"><a href="#explode_snpeff_ann-931"><span class="linenos">931</span></a><span class="sd">    represent the column names or fields for the output data. These strings include information such as</span>
</span><span id="explode_snpeff_ann-932"><a href="#explode_snpeff_ann-932"><span class="linenos">932</span></a><span class="sd">    allele, annotation, gene name, gene ID, feature type, transcript biotype, and various other details</span>
</span><span id="explode_snpeff_ann-933"><a href="#explode_snpeff_ann-933"><span class="linenos">933</span></a><span class="sd">    related</span>
</span><span id="explode_snpeff_ann-934"><a href="#explode_snpeff_ann-934"><span class="linenos">934</span></a><span class="sd">    :type header: list</span>
</span><span id="explode_snpeff_ann-935"><a href="#explode_snpeff_ann-935"><span class="linenos">935</span></a><span class="sd">    :return: The function `explode_snpeff_ann` returns a string that contains the exploded and formatted</span>
</span><span id="explode_snpeff_ann-936"><a href="#explode_snpeff_ann-936"><span class="linenos">936</span></a><span class="sd">    SNPEff annotations based on the input parameters provided. The specific format of the returned</span>
</span><span id="explode_snpeff_ann-937"><a href="#explode_snpeff_ann-937"><span class="linenos">937</span></a><span class="sd">    string depends on the `output_format`, `uniquify`, and other parameters specified in the function.</span>
</span><span id="explode_snpeff_ann-938"><a href="#explode_snpeff_ann-938"><span class="linenos">938</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="explode_snpeff_ann-939"><a href="#explode_snpeff_ann-939"><span class="linenos">939</span></a>
</span><span id="explode_snpeff_ann-940"><a href="#explode_snpeff_ann-940"><span class="linenos">940</span></a>    <span class="c1"># Split snpeff ann values</span>
</span><span id="explode_snpeff_ann-941"><a href="#explode_snpeff_ann-941"><span class="linenos">941</span></a>    <span class="n">snpeff_infos</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">snpeff</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)]</span>
</span><span id="explode_snpeff_ann-942"><a href="#explode_snpeff_ann-942"><span class="linenos">942</span></a>
</span><span id="explode_snpeff_ann-943"><a href="#explode_snpeff_ann-943"><span class="linenos">943</span></a>    <span class="c1"># Create Dataframe</span>
</span><span id="explode_snpeff_ann-944"><a href="#explode_snpeff_ann-944"><span class="linenos">944</span></a>    <span class="n">snpeff_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="explode_snpeff_ann-945"><a href="#explode_snpeff_ann-945"><span class="linenos">945</span></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">)):</span>
</span><span id="explode_snpeff_ann-946"><a href="#explode_snpeff_ann-946"><span class="linenos">946</span></a>        <span class="k">if</span> <span class="n">output_format</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;JSON&quot;</span><span class="p">]:</span>
</span><span id="explode_snpeff_ann-947"><a href="#explode_snpeff_ann-947"><span class="linenos">947</span></a>            <span class="n">header_clean</span> <span class="o">=</span> <span class="n">header</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="explode_snpeff_ann-948"><a href="#explode_snpeff_ann-948"><span class="linenos">948</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="explode_snpeff_ann-949"><a href="#explode_snpeff_ann-949"><span class="linenos">949</span></a>            <span class="n">header_clean</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">char</span> <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">header</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">char</span><span class="o">.</span><span class="n">isalnum</span><span class="p">())</span>
</span><span id="explode_snpeff_ann-950"><a href="#explode_snpeff_ann-950"><span class="linenos">950</span></a>        <span class="n">snpeff_dict</span><span class="p">[</span><span class="n">header_clean</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">snpeff_infos</span><span class="p">]</span>
</span><span id="explode_snpeff_ann-951"><a href="#explode_snpeff_ann-951"><span class="linenos">951</span></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">snpeff_dict</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</span><span id="explode_snpeff_ann-952"><a href="#explode_snpeff_ann-952"><span class="linenos">952</span></a>
</span><span id="explode_snpeff_ann-953"><a href="#explode_snpeff_ann-953"><span class="linenos">953</span></a>    <span class="c1"># Fetch each annotations</span>
</span><span id="explode_snpeff_ann-954"><a href="#explode_snpeff_ann-954"><span class="linenos">954</span></a>    <span class="k">if</span> <span class="n">output_format</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;JSON&quot;</span><span class="p">]:</span>
</span><span id="explode_snpeff_ann-955"><a href="#explode_snpeff_ann-955"><span class="linenos">955</span></a>        <span class="n">snpeff_ann_explode</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
</span><span id="explode_snpeff_ann-956"><a href="#explode_snpeff_ann-956"><span class="linenos">956</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="explode_snpeff_ann-957"><a href="#explode_snpeff_ann-957"><span class="linenos">957</span></a>        <span class="n">ann_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="explode_snpeff_ann-958"><a href="#explode_snpeff_ann-958"><span class="linenos">958</span></a>        <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="n">df</span><span class="p">:</span>
</span><span id="explode_snpeff_ann-959"><a href="#explode_snpeff_ann-959"><span class="linenos">959</span></a>            <span class="k">if</span> <span class="n">uniquify</span><span class="p">:</span>
</span><span id="explode_snpeff_ann-960"><a href="#explode_snpeff_ann-960"><span class="linenos">960</span></a>                <span class="n">ann_list_infos</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">annotation</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</span><span id="explode_snpeff_ann-961"><a href="#explode_snpeff_ann-961"><span class="linenos">961</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="explode_snpeff_ann-962"><a href="#explode_snpeff_ann-962"><span class="linenos">962</span></a>                <span class="n">ann_list_infos</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">annotation</span><span class="p">])</span>
</span><span id="explode_snpeff_ann-963"><a href="#explode_snpeff_ann-963"><span class="linenos">963</span></a>            <span class="k">if</span> <span class="n">ann_list_infos</span><span class="p">:</span>
</span><span id="explode_snpeff_ann-964"><a href="#explode_snpeff_ann-964"><span class="linenos">964</span></a>                <span class="n">ann_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">annotation</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">ann_list_infos</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="explode_snpeff_ann-965"><a href="#explode_snpeff_ann-965"><span class="linenos">965</span></a>
</span><span id="explode_snpeff_ann-966"><a href="#explode_snpeff_ann-966"><span class="linenos">966</span></a>        <span class="c1"># join list</span>
</span><span id="explode_snpeff_ann-967"><a href="#explode_snpeff_ann-967"><span class="linenos">967</span></a>        <span class="n">snpeff_ann_explode</span> <span class="o">=</span> <span class="s2">&quot;;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ann_list</span><span class="p">)</span>
</span><span id="explode_snpeff_ann-968"><a href="#explode_snpeff_ann-968"><span class="linenos">968</span></a>
</span><span id="explode_snpeff_ann-969"><a href="#explode_snpeff_ann-969"><span class="linenos">969</span></a>    <span class="k">return</span> <span class="n">snpeff_ann_explode</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#explode_snpeff_ann">explode_snpeff_ann</a></code> function takes a string of SNPEff annotations, splits and processes them
based on specified parameters, and returns the processed annotations in a specified output format.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>snpeff</strong>:  The <code>snpeff</code> parameter is a string containing annotations separated by commas. Each
annotation is further divided into different fields separated by pipes (|)</li>
<li><strong>uniquify</strong>:  The <code>uniquify</code> parameter in the <code><a href="#explode_snpeff_ann">explode_snpeff_ann</a></code> function is a boolean flag
that determines whether to keep only unique values for each annotation field or not. If <code>uniquify</code>
is set to <code>True</code>, only unique values will be kept for each annotation field. If, defaults to False</li>
<li><strong>output_format</strong>:  The <code>output_format</code> parameter in the <code><a href="#explode_snpeff_ann">explode_snpeff_ann</a></code> function specifies
the format in which the output will be generated. The function supports two output formats: "fields"
and "JSON", defaults to fields</li>
<li><strong>prefix</strong>:  The <code>prefix</code> parameter in the <code><a href="#explode_snpeff_ann">explode_snpeff_ann</a></code> function is used to specify the
prefix that will be added to each annotation field in the output. For example, if the prefix is set
to "ANN_", then the output annotations will be formatted as "ANN_Annotation=example_annotation,
defaults to ANN_</li>
<li><strong>header</strong>:  The <code>header</code> parameter in the <code><a href="#explode_snpeff_ann">explode_snpeff_ann</a></code> function is a list of strings that
represent the column names or fields for the output data. These strings include information such as
allele, annotation, gene name, gene ID, feature type, transcript biotype, and various other details
related</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#explode_snpeff_ann">explode_snpeff_ann</a></code> returns a string that contains the exploded and formatted
  SNPEff annotations based on the input parameters provided. The specific format of the returned
  string depends on the <code>output_format</code>, <code>uniquify</code>, and other parameters specified in the function.</p>
</blockquote>
</div>


                </section>
                <section id="get_index">
                            <input id="get_index-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_index</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">value</span>, </span><span class="param"><span class="n">values</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="get_index-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_index"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_index-972"><a href="#get_index-972"><span class="linenos">972</span></a><span class="k">def</span> <span class="nf">get_index</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="get_index-973"><a href="#get_index-973"><span class="linenos">973</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_index-974"><a href="#get_index-974"><span class="linenos">974</span></a><span class="sd">    The function returns the index of a given value in a list, or -1 if the value is not in the list.</span>
</span><span id="get_index-975"><a href="#get_index-975"><span class="linenos">975</span></a>
</span><span id="get_index-976"><a href="#get_index-976"><span class="linenos">976</span></a><span class="sd">    :param value: The value to search for in the list</span>
</span><span id="get_index-977"><a href="#get_index-977"><span class="linenos">977</span></a><span class="sd">    :param values: The parameter &quot;values&quot; is a list of values in which we want to find the index of a</span>
</span><span id="get_index-978"><a href="#get_index-978"><span class="linenos">978</span></a><span class="sd">    specific value. It is an optional parameter with a default value of an empty list</span>
</span><span id="get_index-979"><a href="#get_index-979"><span class="linenos">979</span></a><span class="sd">    :type values: list</span>
</span><span id="get_index-980"><a href="#get_index-980"><span class="linenos">980</span></a><span class="sd">    :return: The function `get_index` returns the index of the first occurrence of the `value` parameter</span>
</span><span id="get_index-981"><a href="#get_index-981"><span class="linenos">981</span></a><span class="sd">    in the `values` list. If the `value` parameter is not found in the `values` list, the function</span>
</span><span id="get_index-982"><a href="#get_index-982"><span class="linenos">982</span></a><span class="sd">    returns -1.</span>
</span><span id="get_index-983"><a href="#get_index-983"><span class="linenos">983</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_index-984"><a href="#get_index-984"><span class="linenos">984</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="get_index-985"><a href="#get_index-985"><span class="linenos">985</span></a>        <span class="k">return</span> <span class="n">values</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="get_index-986"><a href="#get_index-986"><span class="linenos">986</span></a>    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="get_index-987"><a href="#get_index-987"><span class="linenos">987</span></a>        <span class="c1"># If element does not exist, return -1</span>
</span><span id="get_index-988"><a href="#get_index-988"><span class="linenos">988</span></a>        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</span></pre></div>


            <div class="docstring"><p>The function returns the index of a given value in a list, or -1 if the value is not in the list.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>value</strong>:  The value to search for in the list</li>
<li><strong>values</strong>:  The parameter "values" is a list of values in which we want to find the index of a
specific value. It is an optional parameter with a default value of an empty list</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#get_index">get_index</a></code> returns the index of the first occurrence of the <code>value</code> parameter
  in the <code>values</code> list. If the <code>value</code> parameter is not found in the <code>values</code> list, the function
  returns -1.</p>
</blockquote>
</div>


                </section>
                <section id="get_file_format">
                            <input id="get_file_format-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_file_format</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="get_file_format-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_file_format"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_file_format-991"><a href="#get_file_format-991"><span class="linenos"> 991</span></a><span class="k">def</span> <span class="nf">get_file_format</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="get_file_format-992"><a href="#get_file_format-992"><span class="linenos"> 992</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_file_format-993"><a href="#get_file_format-993"><span class="linenos"> 993</span></a><span class="sd">    It takes a filename and returns the file format</span>
</span><span id="get_file_format-994"><a href="#get_file_format-994"><span class="linenos"> 994</span></a>
</span><span id="get_file_format-995"><a href="#get_file_format-995"><span class="linenos"> 995</span></a><span class="sd">    :param filename: the name of the file you want to get the format of</span>
</span><span id="get_file_format-996"><a href="#get_file_format-996"><span class="linenos"> 996</span></a><span class="sd">    :type filename: str</span>
</span><span id="get_file_format-997"><a href="#get_file_format-997"><span class="linenos"> 997</span></a><span class="sd">    :return: The file format of the file.</span>
</span><span id="get_file_format-998"><a href="#get_file_format-998"><span class="linenos"> 998</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_file_format-999"><a href="#get_file_format-999"><span class="linenos"> 999</span></a>    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
</span><span id="get_file_format-1000"><a href="#get_file_format-1000"><span class="linenos">1000</span></a>        <span class="n">filename_name</span><span class="p">,</span> <span class="n">filename_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="get_file_format-1001"><a href="#get_file_format-1001"><span class="linenos">1001</span></a>        <span class="n">filename_format</span> <span class="o">=</span> <span class="n">filename_extension</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="get_file_format-1002"><a href="#get_file_format-1002"><span class="linenos">1002</span></a>        <span class="k">if</span> <span class="n">filename_format</span> <span class="ow">in</span> <span class="n">file_compressed_format</span><span class="p">:</span>
</span><span id="get_file_format-1003"><a href="#get_file_format-1003"><span class="linenos">1003</span></a>            <span class="n">_</span><span class="p">,</span> <span class="n">filename_name_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename_name</span><span class="p">)</span>
</span><span id="get_file_format-1004"><a href="#get_file_format-1004"><span class="linenos">1004</span></a>            <span class="n">filename_format</span> <span class="o">=</span> <span class="n">filename_name_extension</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="get_file_format-1005"><a href="#get_file_format-1005"><span class="linenos">1005</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="get_file_format-1006"><a href="#get_file_format-1006"><span class="linenos">1006</span></a>        <span class="n">filename_format</span> <span class="o">=</span> <span class="s2">&quot;unknown&quot;</span>
</span><span id="get_file_format-1007"><a href="#get_file_format-1007"><span class="linenos">1007</span></a>    <span class="k">return</span> <span class="n">filename_format</span>
</span></pre></div>


            <div class="docstring"><p>It takes a filename and returns the file format</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>filename</strong>:  the name of the file you want to get the format of</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The file format of the file.</p>
</blockquote>
</div>


                </section>
                <section id="findbypipeline">
                            <input id="findbypipeline-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">findbypipeline</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">df</span>, </span><span class="param"><span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="findbypipeline-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#findbypipeline"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="findbypipeline-1010"><a href="#findbypipeline-1010"><span class="linenos">1010</span></a><span class="k">def</span> <span class="nf">findbypipeline</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]):</span>
</span><span id="findbypipeline-1011"><a href="#findbypipeline-1011"><span class="linenos">1011</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="findbypipeline-1012"><a href="#findbypipeline-1012"><span class="linenos">1012</span></a><span class="sd">    This function takes a dataframe and a list of samples, and returns the number of pipelines found in</span>
</span><span id="findbypipeline-1013"><a href="#findbypipeline-1013"><span class="linenos">1013</span></a><span class="sd">    the samples that have a non-null GT value.</span>
</span><span id="findbypipeline-1014"><a href="#findbypipeline-1014"><span class="linenos">1014</span></a>
</span><span id="findbypipeline-1015"><a href="#findbypipeline-1015"><span class="linenos">1015</span></a><span class="sd">    :param df: The input dataframe containing genetic variant information</span>
</span><span id="findbypipeline-1016"><a href="#findbypipeline-1016"><span class="linenos">1016</span></a><span class="sd">    :param samples: The `samples` parameter is a list of strings representing the names of the</span>
</span><span id="findbypipeline-1017"><a href="#findbypipeline-1017"><span class="linenos">1017</span></a><span class="sd">    samples/pipelines to be searched for in the input dataframe `df`</span>
</span><span id="findbypipeline-1018"><a href="#findbypipeline-1018"><span class="linenos">1018</span></a><span class="sd">    :type samples: list</span>
</span><span id="findbypipeline-1019"><a href="#findbypipeline-1019"><span class="linenos">1019</span></a><span class="sd">    :return: a string in the format of &quot;nb_pipeline_find/nb_pipeline&quot;, where nb_pipeline_find is the</span>
</span><span id="findbypipeline-1020"><a href="#findbypipeline-1020"><span class="linenos">1020</span></a><span class="sd">    number of pipelines in the input list samples that have a non-null GT value in the input dataframe</span>
</span><span id="findbypipeline-1021"><a href="#findbypipeline-1021"><span class="linenos">1021</span></a><span class="sd">    df, and nb_pipeline is the total number of pipelines in the input list samples. If the input list</span>
</span><span id="findbypipeline-1022"><a href="#findbypipeline-1022"><span class="linenos">1022</span></a><span class="sd">    samples is empty, the function returns &quot;0/0&quot;.</span>
</span><span id="findbypipeline-1023"><a href="#findbypipeline-1023"><span class="linenos">1023</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="findbypipeline-1024"><a href="#findbypipeline-1024"><span class="linenos">1024</span></a>
</span><span id="findbypipeline-1025"><a href="#findbypipeline-1025"><span class="linenos">1025</span></a>    <span class="c1"># format</span>
</span><span id="findbypipeline-1026"><a href="#findbypipeline-1026"><span class="linenos">1026</span></a>    <span class="n">format_fields</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;FORMAT&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="findbypipeline-1027"><a href="#findbypipeline-1027"><span class="linenos">1027</span></a>
</span><span id="findbypipeline-1028"><a href="#findbypipeline-1028"><span class="linenos">1028</span></a>    <span class="c1"># no sample/pipeline</span>
</span><span id="findbypipeline-1029"><a href="#findbypipeline-1029"><span class="linenos">1029</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="findbypipeline-1030"><a href="#findbypipeline-1030"><span class="linenos">1030</span></a>        <span class="k">return</span> <span class="s2">&quot;0/0&quot;</span>
</span><span id="findbypipeline-1031"><a href="#findbypipeline-1031"><span class="linenos">1031</span></a>
</span><span id="findbypipeline-1032"><a href="#findbypipeline-1032"><span class="linenos">1032</span></a>    <span class="c1"># init</span>
</span><span id="findbypipeline-1033"><a href="#findbypipeline-1033"><span class="linenos">1033</span></a>    <span class="n">nb_pipeline</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>
</span><span id="findbypipeline-1034"><a href="#findbypipeline-1034"><span class="linenos">1034</span></a>    <span class="n">nb_pipeline_find</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="findbypipeline-1035"><a href="#findbypipeline-1035"><span class="linenos">1035</span></a>
</span><span id="findbypipeline-1036"><a href="#findbypipeline-1036"><span class="linenos">1036</span></a>    <span class="c1"># For each sample/pipeline</span>
</span><span id="findbypipeline-1037"><a href="#findbypipeline-1037"><span class="linenos">1037</span></a>    <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="findbypipeline-1038"><a href="#findbypipeline-1038"><span class="linenos">1038</span></a>
</span><span id="findbypipeline-1039"><a href="#findbypipeline-1039"><span class="linenos">1039</span></a>        <span class="c1"># Split snpeff ann values</span>
</span><span id="findbypipeline-1040"><a href="#findbypipeline-1040"><span class="linenos">1040</span></a>        <span class="n">sample_infos</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sample</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="findbypipeline-1041"><a href="#findbypipeline-1041"><span class="linenos">1041</span></a>
</span><span id="findbypipeline-1042"><a href="#findbypipeline-1042"><span class="linenos">1042</span></a>        <span class="c1"># Create Dataframe</span>
</span><span id="findbypipeline-1043"><a href="#findbypipeline-1043"><span class="linenos">1043</span></a>        <span class="n">sample_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="findbypipeline-1044"><a href="#findbypipeline-1044"><span class="linenos">1044</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">format_fields</span><span class="p">)):</span>
</span><span id="findbypipeline-1045"><a href="#findbypipeline-1045"><span class="linenos">1045</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_infos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>
</span><span id="findbypipeline-1046"><a href="#findbypipeline-1046"><span class="linenos">1046</span></a>                <span class="n">sample_dict</span><span class="p">[</span><span class="n">format_fields</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">sample_infos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="findbypipeline-1047"><a href="#findbypipeline-1047"><span class="linenos">1047</span></a>
</span><span id="findbypipeline-1048"><a href="#findbypipeline-1048"><span class="linenos">1048</span></a>        <span class="c1"># Check if GT not null</span>
</span><span id="findbypipeline-1049"><a href="#findbypipeline-1049"><span class="linenos">1049</span></a>        <span class="k">if</span> <span class="n">sample_dict</span><span class="p">[</span><span class="s2">&quot;GT&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;./.&quot;</span><span class="p">,</span> <span class="s2">&quot;.|.&quot;</span><span class="p">]:</span>
</span><span id="findbypipeline-1050"><a href="#findbypipeline-1050"><span class="linenos">1050</span></a>            <span class="n">nb_pipeline_find</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="findbypipeline-1051"><a href="#findbypipeline-1051"><span class="linenos">1051</span></a>
</span><span id="findbypipeline-1052"><a href="#findbypipeline-1052"><span class="linenos">1052</span></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">nb_pipeline_find</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">nb_pipeline</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>This function takes a dataframe and a list of samples, and returns the number of pipelines found in
the samples that have a non-null GT value.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>df</strong>:  The input dataframe containing genetic variant information</li>
<li><strong>samples</strong>:  The <code>samples</code> parameter is a list of strings representing the names of the
samples/pipelines to be searched for in the input dataframe <code>df</code></li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a string in the format of "nb_pipeline_find/nb_pipeline", where nb_pipeline_find is the
  number of pipelines in the input list samples that have a non-null GT value in the input dataframe
  df, and nb_pipeline is the total number of pipelines in the input list samples. If the input list
  samples is empty, the function returns "0/0".</p>
</blockquote>
</div>


                </section>
                <section id="genotypeconcordance">
                            <input id="genotypeconcordance-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">genotypeconcordance</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">df</span>, </span><span class="param"><span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="genotypeconcordance-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#genotypeconcordance"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="genotypeconcordance-1055"><a href="#genotypeconcordance-1055"><span class="linenos">1055</span></a><span class="k">def</span> <span class="nf">genotypeconcordance</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]):</span>
</span><span id="genotypeconcordance-1056"><a href="#genotypeconcordance-1056"><span class="linenos">1056</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="genotypeconcordance-1057"><a href="#genotypeconcordance-1057"><span class="linenos">1057</span></a><span class="sd">    The function checks the genotype concordance of a given list of samples in a dataframe.</span>
</span><span id="genotypeconcordance-1058"><a href="#genotypeconcordance-1058"><span class="linenos">1058</span></a>
</span><span id="genotypeconcordance-1059"><a href="#genotypeconcordance-1059"><span class="linenos">1059</span></a><span class="sd">    :param df: The input dataframe containing genetic variant information, including genotype</span>
</span><span id="genotypeconcordance-1060"><a href="#genotypeconcordance-1060"><span class="linenos">1060</span></a><span class="sd">    information for each sample/pipeline</span>
</span><span id="genotypeconcordance-1061"><a href="#genotypeconcordance-1061"><span class="linenos">1061</span></a><span class="sd">    :param samples: The parameter &quot;samples&quot; is a list of sample/pipeline names that are present in the</span>
</span><span id="genotypeconcordance-1062"><a href="#genotypeconcordance-1062"><span class="linenos">1062</span></a><span class="sd">    input dataframe &quot;df&quot;. These samples/pipelines have genotype information that will be used to</span>
</span><span id="genotypeconcordance-1063"><a href="#genotypeconcordance-1063"><span class="linenos">1063</span></a><span class="sd">    calculate genotype concordance</span>
</span><span id="genotypeconcordance-1064"><a href="#genotypeconcordance-1064"><span class="linenos">1064</span></a><span class="sd">    :type samples: list</span>
</span><span id="genotypeconcordance-1065"><a href="#genotypeconcordance-1065"><span class="linenos">1065</span></a><span class="sd">    :return: a string that indicates whether the genotypes of the specified samples in the input</span>
</span><span id="genotypeconcordance-1066"><a href="#genotypeconcordance-1066"><span class="linenos">1066</span></a><span class="sd">    dataframe are concordant or not. The string is either &quot;TRUE&quot; or &quot;FALSE&quot;, depending on whether all</span>
</span><span id="genotypeconcordance-1067"><a href="#genotypeconcordance-1067"><span class="linenos">1067</span></a><span class="sd">    the specified samples have the same genotype or not.</span>
</span><span id="genotypeconcordance-1068"><a href="#genotypeconcordance-1068"><span class="linenos">1068</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="genotypeconcordance-1069"><a href="#genotypeconcordance-1069"><span class="linenos">1069</span></a>
</span><span id="genotypeconcordance-1070"><a href="#genotypeconcordance-1070"><span class="linenos">1070</span></a>    <span class="c1"># format</span>
</span><span id="genotypeconcordance-1071"><a href="#genotypeconcordance-1071"><span class="linenos">1071</span></a>    <span class="n">format_fields</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;FORMAT&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="genotypeconcordance-1072"><a href="#genotypeconcordance-1072"><span class="linenos">1072</span></a>
</span><span id="genotypeconcordance-1073"><a href="#genotypeconcordance-1073"><span class="linenos">1073</span></a>    <span class="c1"># no sample/pipeline</span>
</span><span id="genotypeconcordance-1074"><a href="#genotypeconcordance-1074"><span class="linenos">1074</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="genotypeconcordance-1075"><a href="#genotypeconcordance-1075"><span class="linenos">1075</span></a>        <span class="k">return</span> <span class="s2">&quot;0/0&quot;</span>
</span><span id="genotypeconcordance-1076"><a href="#genotypeconcordance-1076"><span class="linenos">1076</span></a>
</span><span id="genotypeconcordance-1077"><a href="#genotypeconcordance-1077"><span class="linenos">1077</span></a>    <span class="c1"># init</span>
</span><span id="genotypeconcordance-1078"><a href="#genotypeconcordance-1078"><span class="linenos">1078</span></a>    <span class="n">genotype_list</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="genotypeconcordance-1079"><a href="#genotypeconcordance-1079"><span class="linenos">1079</span></a>
</span><span id="genotypeconcordance-1080"><a href="#genotypeconcordance-1080"><span class="linenos">1080</span></a>    <span class="c1"># For each sample/pipeline</span>
</span><span id="genotypeconcordance-1081"><a href="#genotypeconcordance-1081"><span class="linenos">1081</span></a>    <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="genotypeconcordance-1082"><a href="#genotypeconcordance-1082"><span class="linenos">1082</span></a>
</span><span id="genotypeconcordance-1083"><a href="#genotypeconcordance-1083"><span class="linenos">1083</span></a>        <span class="k">if</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">df</span><span class="p">:</span>
</span><span id="genotypeconcordance-1084"><a href="#genotypeconcordance-1084"><span class="linenos">1084</span></a>
</span><span id="genotypeconcordance-1085"><a href="#genotypeconcordance-1085"><span class="linenos">1085</span></a>            <span class="c1"># Split snpeff ann values</span>
</span><span id="genotypeconcordance-1086"><a href="#genotypeconcordance-1086"><span class="linenos">1086</span></a>            <span class="n">sample_infos</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sample</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="genotypeconcordance-1087"><a href="#genotypeconcordance-1087"><span class="linenos">1087</span></a>
</span><span id="genotypeconcordance-1088"><a href="#genotypeconcordance-1088"><span class="linenos">1088</span></a>            <span class="c1"># Create Dataframe</span>
</span><span id="genotypeconcordance-1089"><a href="#genotypeconcordance-1089"><span class="linenos">1089</span></a>            <span class="n">sample_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="genotypeconcordance-1090"><a href="#genotypeconcordance-1090"><span class="linenos">1090</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">format_fields</span><span class="p">)):</span>
</span><span id="genotypeconcordance-1091"><a href="#genotypeconcordance-1091"><span class="linenos">1091</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_infos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>
</span><span id="genotypeconcordance-1092"><a href="#genotypeconcordance-1092"><span class="linenos">1092</span></a>                    <span class="n">sample_dict</span><span class="p">[</span><span class="n">format_fields</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">sample_infos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="genotypeconcordance-1093"><a href="#genotypeconcordance-1093"><span class="linenos">1093</span></a>
</span><span id="genotypeconcordance-1094"><a href="#genotypeconcordance-1094"><span class="linenos">1094</span></a>            <span class="c1"># Check if GT not null</span>
</span><span id="genotypeconcordance-1095"><a href="#genotypeconcordance-1095"><span class="linenos">1095</span></a>            <span class="c1"># genotype_list[sample_dict[&quot;GT&quot;]] = 1</span>
</span><span id="genotypeconcordance-1096"><a href="#genotypeconcordance-1096"><span class="linenos">1096</span></a>            <span class="k">if</span> <span class="n">sample_dict</span><span class="p">[</span><span class="s2">&quot;GT&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;./.&quot;</span><span class="p">,</span> <span class="s2">&quot;.|.&quot;</span><span class="p">]:</span>
</span><span id="genotypeconcordance-1097"><a href="#genotypeconcordance-1097"><span class="linenos">1097</span></a>                <span class="n">genotype_list</span><span class="p">[</span><span class="n">sample_dict</span><span class="p">[</span><span class="s2">&quot;GT&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="genotypeconcordance-1098"><a href="#genotypeconcordance-1098"><span class="linenos">1098</span></a>
</span><span id="genotypeconcordance-1099"><a href="#genotypeconcordance-1099"><span class="linenos">1099</span></a>    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">genotype_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>The function checks the genotype concordance of a given list of samples in a dataframe.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>df</strong>:  The input dataframe containing genetic variant information, including genotype
information for each sample/pipeline</li>
<li><strong>samples</strong>:  The parameter "samples" is a list of sample/pipeline names that are present in the
input dataframe "df". These samples/pipelines have genotype information that will be used to
calculate genotype concordance</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a string that indicates whether the genotypes of the specified samples in the input
  dataframe are concordant or not. The string is either "TRUE" or "FALSE", depending on whether all
  the specified samples have the same genotype or not.</p>
</blockquote>
</div>


                </section>
                <section id="genotype_compression">
                            <input id="genotype_compression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">genotype_compression</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">genotype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="genotype_compression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#genotype_compression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="genotype_compression-1102"><a href="#genotype_compression-1102"><span class="linenos">1102</span></a><span class="k">def</span> <span class="nf">genotype_compression</span><span class="p">(</span><span class="n">genotype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="genotype_compression-1103"><a href="#genotype_compression-1103"><span class="linenos">1103</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="genotype_compression-1104"><a href="#genotype_compression-1104"><span class="linenos">1104</span></a><span class="sd">    The function takes a genotype string, replaces dots with zeros, removes non-digit characters, sorts</span>
</span><span id="genotype_compression-1105"><a href="#genotype_compression-1105"><span class="linenos">1105</span></a><span class="sd">    and removes duplicates, and returns the compressed genotype string.</span>
</span><span id="genotype_compression-1106"><a href="#genotype_compression-1106"><span class="linenos">1106</span></a>
</span><span id="genotype_compression-1107"><a href="#genotype_compression-1107"><span class="linenos">1107</span></a><span class="sd">    :param genotype: The input genotype as a string. It is a DNA sequence that contains genetic</span>
</span><span id="genotype_compression-1108"><a href="#genotype_compression-1108"><span class="linenos">1108</span></a><span class="sd">    information</span>
</span><span id="genotype_compression-1109"><a href="#genotype_compression-1109"><span class="linenos">1109</span></a><span class="sd">    :type genotype: str</span>
</span><span id="genotype_compression-1110"><a href="#genotype_compression-1110"><span class="linenos">1110</span></a><span class="sd">    :return: The function `genotype_compression` returns a compressed version of the input genotype</span>
</span><span id="genotype_compression-1111"><a href="#genotype_compression-1111"><span class="linenos">1111</span></a><span class="sd">    string. The compressed string has all dots replaced with 0s, all non-digit characters removed, and</span>
</span><span id="genotype_compression-1112"><a href="#genotype_compression-1112"><span class="linenos">1112</span></a><span class="sd">    duplicates removed and sorted. The compressed string is returned as a string.</span>
</span><span id="genotype_compression-1113"><a href="#genotype_compression-1113"><span class="linenos">1113</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="genotype_compression-1114"><a href="#genotype_compression-1114"><span class="linenos">1114</span></a>
</span><span id="genotype_compression-1115"><a href="#genotype_compression-1115"><span class="linenos">1115</span></a>    <span class="n">genotype_compressed</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="genotype_compression-1116"><a href="#genotype_compression-1116"><span class="linenos">1116</span></a>        <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\D&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">genotype</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">))))</span>
</span><span id="genotype_compression-1117"><a href="#genotype_compression-1117"><span class="linenos">1117</span></a>    <span class="p">)</span>
</span><span id="genotype_compression-1118"><a href="#genotype_compression-1118"><span class="linenos">1118</span></a>
</span><span id="genotype_compression-1119"><a href="#genotype_compression-1119"><span class="linenos">1119</span></a>    <span class="k">return</span> <span class="n">genotype_compressed</span>
</span></pre></div>


            <div class="docstring"><p>The function takes a genotype string, replaces dots with zeros, removes non-digit characters, sorts
and removes duplicates, and returns the compressed genotype string.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>genotype</strong>:  The input genotype as a string. It is a DNA sequence that contains genetic
information</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#genotype_compression">genotype_compression</a></code> returns a compressed version of the input genotype
  string. The compressed string has all dots replaced with 0s, all non-digit characters removed, and
  duplicates removed and sorted. The compressed string is returned as a string.</p>
</blockquote>
</div>


                </section>
                <section id="genotype_barcode">
                            <input id="genotype_barcode-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">genotype_barcode</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">genotype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="genotype_barcode-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#genotype_barcode"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="genotype_barcode-1122"><a href="#genotype_barcode-1122"><span class="linenos">1122</span></a><span class="k">def</span> <span class="nf">genotype_barcode</span><span class="p">(</span><span class="n">genotype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="genotype_barcode-1123"><a href="#genotype_barcode-1123"><span class="linenos">1123</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="genotype_barcode-1124"><a href="#genotype_barcode-1124"><span class="linenos">1124</span></a><span class="sd">    This function takes a genotype string and compresses it, then returns a barcode string based on the</span>
</span><span id="genotype_barcode-1125"><a href="#genotype_barcode-1125"><span class="linenos">1125</span></a><span class="sd">    length and content of the compressed genotype.</span>
</span><span id="genotype_barcode-1126"><a href="#genotype_barcode-1126"><span class="linenos">1126</span></a>
</span><span id="genotype_barcode-1127"><a href="#genotype_barcode-1127"><span class="linenos">1127</span></a><span class="sd">    :param genotype: The genotype parameter is a string that represents a genetic sequence or code</span>
</span><span id="genotype_barcode-1128"><a href="#genotype_barcode-1128"><span class="linenos">1128</span></a><span class="sd">    :type genotype: str</span>
</span><span id="genotype_barcode-1129"><a href="#genotype_barcode-1129"><span class="linenos">1129</span></a><span class="sd">    :return: The function `genotype_barcode` returns a string representing the barcode for a given</span>
</span><span id="genotype_barcode-1130"><a href="#genotype_barcode-1130"><span class="linenos">1130</span></a><span class="sd">    genotype. The barcode can be &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, or &quot;?&quot; depending on the length and content of the</span>
</span><span id="genotype_barcode-1131"><a href="#genotype_barcode-1131"><span class="linenos">1131</span></a><span class="sd">    compressed genotype string.</span>
</span><span id="genotype_barcode-1132"><a href="#genotype_barcode-1132"><span class="linenos">1132</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="genotype_barcode-1133"><a href="#genotype_barcode-1133"><span class="linenos">1133</span></a>
</span><span id="genotype_barcode-1134"><a href="#genotype_barcode-1134"><span class="linenos">1134</span></a>    <span class="n">genotype_compressed</span> <span class="o">=</span> <span class="n">genotype_compression</span><span class="p">(</span><span class="n">genotype</span><span class="p">)</span>
</span><span id="genotype_barcode-1135"><a href="#genotype_barcode-1135"><span class="linenos">1135</span></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">genotype_compressed</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="genotype_barcode-1136"><a href="#genotype_barcode-1136"><span class="linenos">1136</span></a>        <span class="k">if</span> <span class="n">genotype_compressed</span> <span class="o">==</span> <span class="s2">&quot;0&quot;</span><span class="p">:</span>
</span><span id="genotype_barcode-1137"><a href="#genotype_barcode-1137"><span class="linenos">1137</span></a>            <span class="n">barcode</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
</span><span id="genotype_barcode-1138"><a href="#genotype_barcode-1138"><span class="linenos">1138</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="genotype_barcode-1139"><a href="#genotype_barcode-1139"><span class="linenos">1139</span></a>            <span class="n">barcode</span> <span class="o">=</span> <span class="s2">&quot;2&quot;</span>
</span><span id="genotype_barcode-1140"><a href="#genotype_barcode-1140"><span class="linenos">1140</span></a>    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">genotype_compressed</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="genotype_barcode-1141"><a href="#genotype_barcode-1141"><span class="linenos">1141</span></a>        <span class="n">barcode</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
</span><span id="genotype_barcode-1142"><a href="#genotype_barcode-1142"><span class="linenos">1142</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="genotype_barcode-1143"><a href="#genotype_barcode-1143"><span class="linenos">1143</span></a>        <span class="n">barcode</span> <span class="o">=</span> <span class="s2">&quot;?&quot;</span>
</span><span id="genotype_barcode-1144"><a href="#genotype_barcode-1144"><span class="linenos">1144</span></a>
</span><span id="genotype_barcode-1145"><a href="#genotype_barcode-1145"><span class="linenos">1145</span></a>    <span class="k">return</span> <span class="n">barcode</span>
</span></pre></div>


            <div class="docstring"><p>This function takes a genotype string and compresses it, then returns a barcode string based on the
length and content of the compressed genotype.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>genotype</strong>:  The genotype parameter is a string that represents a genetic sequence or code</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#genotype_barcode">genotype_barcode</a></code> returns a string representing the barcode for a given
  genotype. The barcode can be "0", "1", "2", or "?" depending on the length and content of the
  compressed genotype string.</p>
</blockquote>
</div>


                </section>
                <section id="barcode">
                            <input id="barcode-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">barcode</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">df</span>, </span><span class="param"><span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="barcode-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#barcode"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="barcode-1148"><a href="#barcode-1148"><span class="linenos">1148</span></a><span class="k">def</span> <span class="nf">barcode</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]):</span>
</span><span id="barcode-1149"><a href="#barcode-1149"><span class="linenos">1149</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="barcode-1150"><a href="#barcode-1150"><span class="linenos">1150</span></a><span class="sd">    Generates a barcode based on the genotype of the specified samples.</span>
</span><span id="barcode-1151"><a href="#barcode-1151"><span class="linenos">1151</span></a>
</span><span id="barcode-1152"><a href="#barcode-1152"><span class="linenos">1152</span></a><span class="sd">    :param df: A pandas DataFrame containing the genetic data.</span>
</span><span id="barcode-1153"><a href="#barcode-1153"><span class="linenos">1153</span></a><span class="sd">    :type df: pandas.DataFrame</span>
</span><span id="barcode-1154"><a href="#barcode-1154"><span class="linenos">1154</span></a>
</span><span id="barcode-1155"><a href="#barcode-1155"><span class="linenos">1155</span></a><span class="sd">    :param samples: A list of sample names to use for generating the barcode.</span>
</span><span id="barcode-1156"><a href="#barcode-1156"><span class="linenos">1156</span></a><span class="sd">    :type samples: list(str)</span>
</span><span id="barcode-1157"><a href="#barcode-1157"><span class="linenos">1157</span></a>
</span><span id="barcode-1158"><a href="#barcode-1158"><span class="linenos">1158</span></a><span class="sd">    :return: A barcode string based on the genotype of the specified samples.</span>
</span><span id="barcode-1159"><a href="#barcode-1159"><span class="linenos">1159</span></a><span class="sd">    :rtype: str</span>
</span><span id="barcode-1160"><a href="#barcode-1160"><span class="linenos">1160</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="barcode-1161"><a href="#barcode-1161"><span class="linenos">1161</span></a>    <span class="c1"># format</span>
</span><span id="barcode-1162"><a href="#barcode-1162"><span class="linenos">1162</span></a>    <span class="n">format_fields</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;FORMAT&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="barcode-1163"><a href="#barcode-1163"><span class="linenos">1163</span></a>
</span><span id="barcode-1164"><a href="#barcode-1164"><span class="linenos">1164</span></a>    <span class="c1"># no sample/pipeline</span>
</span><span id="barcode-1165"><a href="#barcode-1165"><span class="linenos">1165</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="barcode-1166"><a href="#barcode-1166"><span class="linenos">1166</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span><span id="barcode-1167"><a href="#barcode-1167"><span class="linenos">1167</span></a>
</span><span id="barcode-1168"><a href="#barcode-1168"><span class="linenos">1168</span></a>    <span class="c1"># init</span>
</span><span id="barcode-1169"><a href="#barcode-1169"><span class="linenos">1169</span></a>    <span class="n">barcode</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="barcode-1170"><a href="#barcode-1170"><span class="linenos">1170</span></a>
</span><span id="barcode-1171"><a href="#barcode-1171"><span class="linenos">1171</span></a>    <span class="c1"># For each sample/pipeline</span>
</span><span id="barcode-1172"><a href="#barcode-1172"><span class="linenos">1172</span></a>    <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="barcode-1173"><a href="#barcode-1173"><span class="linenos">1173</span></a>
</span><span id="barcode-1174"><a href="#barcode-1174"><span class="linenos">1174</span></a>        <span class="k">if</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">df</span><span class="p">:</span>
</span><span id="barcode-1175"><a href="#barcode-1175"><span class="linenos">1175</span></a>
</span><span id="barcode-1176"><a href="#barcode-1176"><span class="linenos">1176</span></a>            <span class="c1"># Split snpeff ann values</span>
</span><span id="barcode-1177"><a href="#barcode-1177"><span class="linenos">1177</span></a>            <span class="n">sample_infos</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sample</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="barcode-1178"><a href="#barcode-1178"><span class="linenos">1178</span></a>
</span><span id="barcode-1179"><a href="#barcode-1179"><span class="linenos">1179</span></a>            <span class="c1"># Create Dataframe</span>
</span><span id="barcode-1180"><a href="#barcode-1180"><span class="linenos">1180</span></a>            <span class="n">sample_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="barcode-1181"><a href="#barcode-1181"><span class="linenos">1181</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">format_fields</span><span class="p">)):</span>
</span><span id="barcode-1182"><a href="#barcode-1182"><span class="linenos">1182</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_infos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>
</span><span id="barcode-1183"><a href="#barcode-1183"><span class="linenos">1183</span></a>                    <span class="n">sample_dict</span><span class="p">[</span><span class="n">format_fields</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">sample_infos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="barcode-1184"><a href="#barcode-1184"><span class="linenos">1184</span></a>
</span><span id="barcode-1185"><a href="#barcode-1185"><span class="linenos">1185</span></a>            <span class="c1"># generate barcode</span>
</span><span id="barcode-1186"><a href="#barcode-1186"><span class="linenos">1186</span></a>            <span class="n">barcode</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">genotype_barcode</span><span class="p">(</span><span class="n">sample_dict</span><span class="p">[</span><span class="s2">&quot;GT&quot;</span><span class="p">]))</span>
</span><span id="barcode-1187"><a href="#barcode-1187"><span class="linenos">1187</span></a>
</span><span id="barcode-1188"><a href="#barcode-1188"><span class="linenos">1188</span></a>    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">barcode</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generates a barcode based on the genotype of the specified samples.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><p><strong>df</strong>:  A pandas DataFrame containing the genetic data.</p></li>
<li><p><strong>samples</strong>:  A list of sample names to use for generating the barcode.</p></li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>A barcode string based on the genotype of the specified samples.</p>
</blockquote>
</div>


                </section>
                <section id="trio">
                            <input id="trio-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">trio</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">df</span>, </span><span class="param"><span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="trio-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#trio"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="trio-1191"><a href="#trio-1191"><span class="linenos">1191</span></a><span class="k">def</span> <span class="nf">trio</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]):</span>
</span><span id="trio-1192"><a href="#trio-1192"><span class="linenos">1192</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="trio-1193"><a href="#trio-1193"><span class="linenos">1193</span></a><span class="sd">    The function trio(df, samples:list = []) determines the type of variant (denovo, dominant, or</span>
</span><span id="trio-1194"><a href="#trio-1194"><span class="linenos">1194</span></a><span class="sd">    recessive) in a trio based on the barcode generated from the samples.</span>
</span><span id="trio-1195"><a href="#trio-1195"><span class="linenos">1195</span></a>
</span><span id="trio-1196"><a href="#trio-1196"><span class="linenos">1196</span></a><span class="sd">    :param df: The input dataframe containing genetic variant information</span>
</span><span id="trio-1197"><a href="#trio-1197"><span class="linenos">1197</span></a><span class="sd">    :param samples: A list of sample IDs to be used in the analysis</span>
</span><span id="trio-1198"><a href="#trio-1198"><span class="linenos">1198</span></a><span class="sd">    :type samples: list</span>
</span><span id="trio-1199"><a href="#trio-1199"><span class="linenos">1199</span></a><span class="sd">    :return: The function `trio` returns a string that represents the type of variant in a trio</span>
</span><span id="trio-1200"><a href="#trio-1200"><span class="linenos">1200</span></a><span class="sd">    analysis, which can be &quot;denovo&quot;, &quot;dominant&quot;, &quot;recessive&quot;, or &quot;unknown&quot;.</span>
</span><span id="trio-1201"><a href="#trio-1201"><span class="linenos">1201</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="trio-1202"><a href="#trio-1202"><span class="linenos">1202</span></a>
</span><span id="trio-1203"><a href="#trio-1203"><span class="linenos">1203</span></a>    <span class="c1"># no sample/pipeline</span>
</span><span id="trio-1204"><a href="#trio-1204"><span class="linenos">1204</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="trio-1205"><a href="#trio-1205"><span class="linenos">1205</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span><span id="trio-1206"><a href="#trio-1206"><span class="linenos">1206</span></a>
</span><span id="trio-1207"><a href="#trio-1207"><span class="linenos">1207</span></a>    <span class="c1"># init</span>
</span><span id="trio-1208"><a href="#trio-1208"><span class="linenos">1208</span></a>    <span class="n">trio_barcode</span> <span class="o">=</span> <span class="n">barcode</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">samples</span><span class="p">)</span>
</span><span id="trio-1209"><a href="#trio-1209"><span class="linenos">1209</span></a>
</span><span id="trio-1210"><a href="#trio-1210"><span class="linenos">1210</span></a>    <span class="c1"># switcher</span>
</span><span id="trio-1211"><a href="#trio-1211"><span class="linenos">1211</span></a>    <span class="n">switcher</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="trio-1212"><a href="#trio-1212"><span class="linenos">1212</span></a>        <span class="s2">&quot;001&quot;</span><span class="p">:</span> <span class="s2">&quot;denovo&quot;</span><span class="p">,</span>
</span><span id="trio-1213"><a href="#trio-1213"><span class="linenos">1213</span></a>        <span class="p">(</span><span class="s2">&quot;011&quot;</span><span class="p">,</span> <span class="s2">&quot;101&quot;</span><span class="p">,</span> <span class="s2">&quot;111&quot;</span><span class="p">,</span> <span class="s2">&quot;021&quot;</span><span class="p">,</span> <span class="s2">&quot;201&quot;</span><span class="p">,</span> <span class="s2">&quot;121&quot;</span><span class="p">,</span> <span class="s2">&quot;211&quot;</span><span class="p">):</span> <span class="s2">&quot;dominant&quot;</span><span class="p">,</span>
</span><span id="trio-1214"><a href="#trio-1214"><span class="linenos">1214</span></a>        <span class="p">(</span><span class="s2">&quot;112&quot;</span><span class="p">,</span> <span class="s2">&quot;212&quot;</span><span class="p">,</span> <span class="s2">&quot;122&quot;</span><span class="p">,</span> <span class="s2">&quot;222&quot;</span><span class="p">):</span> <span class="s2">&quot;recessive&quot;</span><span class="p">,</span>
</span><span id="trio-1215"><a href="#trio-1215"><span class="linenos">1215</span></a>    <span class="p">}</span>
</span><span id="trio-1216"><a href="#trio-1216"><span class="linenos">1216</span></a>
</span><span id="trio-1217"><a href="#trio-1217"><span class="linenos">1217</span></a>    <span class="n">trio_variant_type</span> <span class="o">=</span> <span class="s2">&quot;unknown&quot;</span>
</span><span id="trio-1218"><a href="#trio-1218"><span class="linenos">1218</span></a>    <span class="k">for</span> <span class="n">case</span> <span class="ow">in</span> <span class="n">switcher</span><span class="p">:</span>
</span><span id="trio-1219"><a href="#trio-1219"><span class="linenos">1219</span></a>        <span class="k">if</span> <span class="n">trio_barcode</span> <span class="ow">in</span> <span class="n">case</span><span class="p">:</span>
</span><span id="trio-1220"><a href="#trio-1220"><span class="linenos">1220</span></a>            <span class="n">trio_variant_type</span> <span class="o">=</span> <span class="n">switcher</span><span class="p">[</span><span class="n">case</span><span class="p">]</span>
</span><span id="trio-1221"><a href="#trio-1221"><span class="linenos">1221</span></a>            <span class="k">break</span>
</span><span id="trio-1222"><a href="#trio-1222"><span class="linenos">1222</span></a>
</span><span id="trio-1223"><a href="#trio-1223"><span class="linenos">1223</span></a>    <span class="k">return</span> <span class="n">trio_variant_type</span>
</span></pre></div>


            <div class="docstring"><p>The function trio(df, samples:list = []) determines the type of variant (denovo, dominant, or
recessive) in a trio based on the barcode generated from the samples.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>df</strong>:  The input dataframe containing genetic variant information</li>
<li><strong>samples</strong>:  A list of sample IDs to be used in the analysis</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#trio">trio</a></code> returns a string that represents the type of variant in a trio
  analysis, which can be "denovo", "dominant", "recessive", or "unknown".</p>
</blockquote>
</div>


                </section>
                <section id="vaf_normalization">
                            <input id="vaf_normalization-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">vaf_normalization</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">row</span>, </span><span class="param"><span class="n">sample</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="vaf_normalization-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#vaf_normalization"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="vaf_normalization-1226"><a href="#vaf_normalization-1226"><span class="linenos">1226</span></a><span class="k">def</span> <span class="nf">vaf_normalization</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">sample</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="vaf_normalization-1227"><a href="#vaf_normalization-1227"><span class="linenos">1227</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="vaf_normalization-1228"><a href="#vaf_normalization-1228"><span class="linenos">1228</span></a><span class="sd">    This function takes in a row of data and a sample name, extracts the genotype information for that</span>
</span><span id="vaf_normalization-1229"><a href="#vaf_normalization-1229"><span class="linenos">1229</span></a><span class="sd">    sample, calculates the variant allele frequency (VAF) from the genotype information, and adds the</span>
</span><span id="vaf_normalization-1230"><a href="#vaf_normalization-1230"><span class="linenos">1230</span></a><span class="sd">    VAF to the genotype information before returning it.</span>
</span><span id="vaf_normalization-1231"><a href="#vaf_normalization-1231"><span class="linenos">1231</span></a>
</span><span id="vaf_normalization-1232"><a href="#vaf_normalization-1232"><span class="linenos">1232</span></a><span class="sd">    :param row: The input row of a pandas DataFrame containing information about a genetic variant</span>
</span><span id="vaf_normalization-1233"><a href="#vaf_normalization-1233"><span class="linenos">1233</span></a><span class="sd">    :param sample: The parameter &quot;sample&quot; is a string representing the name of the sample for which we</span>
</span><span id="vaf_normalization-1234"><a href="#vaf_normalization-1234"><span class="linenos">1234</span></a><span class="sd">    want to calculate the VAF (Variant Allele Frequency). It is used to extract the genotype information</span>
</span><span id="vaf_normalization-1235"><a href="#vaf_normalization-1235"><span class="linenos">1235</span></a><span class="sd">    for that particular sample from the input row</span>
</span><span id="vaf_normalization-1236"><a href="#vaf_normalization-1236"><span class="linenos">1236</span></a><span class="sd">    :type sample: str</span>
</span><span id="vaf_normalization-1237"><a href="#vaf_normalization-1237"><span class="linenos">1237</span></a><span class="sd">    :return: a string that represents the genotype information for a given sample with an added &quot;VAF&quot;</span>
</span><span id="vaf_normalization-1238"><a href="#vaf_normalization-1238"><span class="linenos">1238</span></a><span class="sd">    field that represents the variant allele frequency.</span>
</span><span id="vaf_normalization-1239"><a href="#vaf_normalization-1239"><span class="linenos">1239</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="vaf_normalization-1240"><a href="#vaf_normalization-1240"><span class="linenos">1240</span></a>
</span><span id="vaf_normalization-1241"><a href="#vaf_normalization-1241"><span class="linenos">1241</span></a>    <span class="c1"># format</span>
</span><span id="vaf_normalization-1242"><a href="#vaf_normalization-1242"><span class="linenos">1242</span></a>    <span class="n">format_fields</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;FORMAT&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="vaf_normalization-1243"><a href="#vaf_normalization-1243"><span class="linenos">1243</span></a>
</span><span id="vaf_normalization-1244"><a href="#vaf_normalization-1244"><span class="linenos">1244</span></a>    <span class="c1"># Sample genotype</span>
</span><span id="vaf_normalization-1245"><a href="#vaf_normalization-1245"><span class="linenos">1245</span></a>    <span class="n">sample_genotype</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="n">sample</span><span class="p">]</span>
</span><span id="vaf_normalization-1246"><a href="#vaf_normalization-1246"><span class="linenos">1246</span></a>
</span><span id="vaf_normalization-1247"><a href="#vaf_normalization-1247"><span class="linenos">1247</span></a>    <span class="c1"># No genotype</span>
</span><span id="vaf_normalization-1248"><a href="#vaf_normalization-1248"><span class="linenos">1248</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">sample_genotype</span><span class="p">:</span>
</span><span id="vaf_normalization-1249"><a href="#vaf_normalization-1249"><span class="linenos">1249</span></a>        <span class="n">sample_genotype</span> <span class="o">=</span> <span class="s2">&quot;./.&quot;</span>
</span><span id="vaf_normalization-1250"><a href="#vaf_normalization-1250"><span class="linenos">1250</span></a>
</span><span id="vaf_normalization-1251"><a href="#vaf_normalization-1251"><span class="linenos">1251</span></a>    <span class="c1"># Split samples values values</span>
</span><span id="vaf_normalization-1252"><a href="#vaf_normalization-1252"><span class="linenos">1252</span></a>    <span class="n">sample_genotype_infos</span> <span class="o">=</span> <span class="n">sample_genotype</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="vaf_normalization-1253"><a href="#vaf_normalization-1253"><span class="linenos">1253</span></a>
</span><span id="vaf_normalization-1254"><a href="#vaf_normalization-1254"><span class="linenos">1254</span></a>    <span class="c1"># Create Dataframe</span>
</span><span id="vaf_normalization-1255"><a href="#vaf_normalization-1255"><span class="linenos">1255</span></a>    <span class="n">sample_genotype_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="vaf_normalization-1256"><a href="#vaf_normalization-1256"><span class="linenos">1256</span></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">format_fields</span><span class="p">)):</span>
</span><span id="vaf_normalization-1257"><a href="#vaf_normalization-1257"><span class="linenos">1257</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_genotype_infos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>
</span><span id="vaf_normalization-1258"><a href="#vaf_normalization-1258"><span class="linenos">1258</span></a>            <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="n">format_fields</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">sample_genotype_infos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="vaf_normalization-1259"><a href="#vaf_normalization-1259"><span class="linenos">1259</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="vaf_normalization-1260"><a href="#vaf_normalization-1260"><span class="linenos">1260</span></a>            <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="n">format_fields</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span>
</span><span id="vaf_normalization-1261"><a href="#vaf_normalization-1261"><span class="linenos">1261</span></a>
</span><span id="vaf_normalization-1262"><a href="#vaf_normalization-1262"><span class="linenos">1262</span></a>    <span class="c1"># Find VAF</span>
</span><span id="vaf_normalization-1263"><a href="#vaf_normalization-1263"><span class="linenos">1263</span></a>    <span class="c1"># Default VAF</span>
</span><span id="vaf_normalization-1264"><a href="#vaf_normalization-1264"><span class="linenos">1264</span></a>    <span class="n">vaf</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span>
</span><span id="vaf_normalization-1265"><a href="#vaf_normalization-1265"><span class="linenos">1265</span></a>    <span class="c1"># VAF from FREQ</span>
</span><span id="vaf_normalization-1266"><a href="#vaf_normalization-1266"><span class="linenos">1266</span></a>    <span class="k">if</span> <span class="s2">&quot;FREQ&quot;</span> <span class="ow">in</span> <span class="n">sample_genotype_dict</span><span class="p">:</span>
</span><span id="vaf_normalization-1267"><a href="#vaf_normalization-1267"><span class="linenos">1267</span></a>        <span class="k">if</span> <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="s2">&quot;FREQ&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;.&quot;</span><span class="p">:</span>
</span><span id="vaf_normalization-1268"><a href="#vaf_normalization-1268"><span class="linenos">1268</span></a>            <span class="n">vaf_freq</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
</span><span id="vaf_normalization-1269"><a href="#vaf_normalization-1269"><span class="linenos">1269</span></a>                <span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="s2">&quot;FREQ&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">))</span>
</span><span id="vaf_normalization-1270"><a href="#vaf_normalization-1270"><span class="linenos">1270</span></a>            <span class="p">)</span>
</span><span id="vaf_normalization-1271"><a href="#vaf_normalization-1271"><span class="linenos">1271</span></a>            <span class="k">if</span> <span class="n">vaf_freq</span><span class="p">:</span>
</span><span id="vaf_normalization-1272"><a href="#vaf_normalization-1272"><span class="linenos">1272</span></a>                <span class="n">vaf</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">vaf_freq</span> <span class="o">/</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</span><span id="vaf_normalization-1273"><a href="#vaf_normalization-1273"><span class="linenos">1273</span></a>    <span class="c1"># VAF from DP4</span>
</span><span id="vaf_normalization-1274"><a href="#vaf_normalization-1274"><span class="linenos">1274</span></a>    <span class="k">elif</span> <span class="s2">&quot;DP4&quot;</span> <span class="ow">in</span> <span class="n">sample_genotype_dict</span><span class="p">:</span>
</span><span id="vaf_normalization-1275"><a href="#vaf_normalization-1275"><span class="linenos">1275</span></a>        <span class="k">if</span> <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="s2">&quot;DP4&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;.&quot;</span><span class="p">:</span>
</span><span id="vaf_normalization-1276"><a href="#vaf_normalization-1276"><span class="linenos">1276</span></a>            <span class="n">dp4_split</span> <span class="o">=</span> <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="s2">&quot;DP4&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="vaf_normalization-1277"><a href="#vaf_normalization-1277"><span class="linenos">1277</span></a>            <span class="k">if</span> <span class="n">dp4_split</span> <span class="o">!=</span> <span class="p">[</span><span class="s2">&quot;.&quot;</span><span class="p">]:</span>
</span><span id="vaf_normalization-1278"><a href="#vaf_normalization-1278"><span class="linenos">1278</span></a>                <span class="n">dp4_dp</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">dp4_split</span><span class="p">))</span>
</span><span id="vaf_normalization-1279"><a href="#vaf_normalization-1279"><span class="linenos">1279</span></a>                <span class="n">pd4_alt</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">dp4_split</span><span class="p">[</span><span class="mi">2</span><span class="p">:]))</span>
</span><span id="vaf_normalization-1280"><a href="#vaf_normalization-1280"><span class="linenos">1280</span></a>                <span class="n">vaf</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">pd4_alt</span> <span class="o">/</span> <span class="n">dp4_dp</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="k">if</span> <span class="n">dp4_dp</span> <span class="k">else</span> <span class="s2">&quot;.&quot;</span>
</span><span id="vaf_normalization-1281"><a href="#vaf_normalization-1281"><span class="linenos">1281</span></a>    <span class="c1"># VAF from AD</span>
</span><span id="vaf_normalization-1282"><a href="#vaf_normalization-1282"><span class="linenos">1282</span></a>    <span class="k">elif</span> <span class="s2">&quot;AD&quot;</span> <span class="ow">in</span> <span class="n">sample_genotype_dict</span><span class="p">:</span>
</span><span id="vaf_normalization-1283"><a href="#vaf_normalization-1283"><span class="linenos">1283</span></a>        <span class="k">if</span> <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="s2">&quot;AD&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;.&quot;</span><span class="p">:</span>
</span><span id="vaf_normalization-1284"><a href="#vaf_normalization-1284"><span class="linenos">1284</span></a>            <span class="n">ad_split</span> <span class="o">=</span> <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="s2">&quot;AD&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
</span><span id="vaf_normalization-1285"><a href="#vaf_normalization-1285"><span class="linenos">1285</span></a>            <span class="k">if</span> <span class="n">ad_split</span> <span class="o">!=</span> <span class="p">[</span><span class="s2">&quot;.&quot;</span><span class="p">]:</span>
</span><span id="vaf_normalization-1286"><a href="#vaf_normalization-1286"><span class="linenos">1286</span></a>                <span class="n">ad_dp</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">ad_split</span><span class="p">))</span>
</span><span id="vaf_normalization-1287"><a href="#vaf_normalization-1287"><span class="linenos">1287</span></a>                <span class="n">ad_alt</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">ad_split</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
</span><span id="vaf_normalization-1288"><a href="#vaf_normalization-1288"><span class="linenos">1288</span></a>                <span class="n">vaf</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">ad_alt</span> <span class="o">/</span> <span class="n">ad_dp</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="k">if</span> <span class="n">ad_dp</span> <span class="k">else</span> <span class="s2">&quot;.&quot;</span>
</span><span id="vaf_normalization-1289"><a href="#vaf_normalization-1289"><span class="linenos">1289</span></a>
</span><span id="vaf_normalization-1290"><a href="#vaf_normalization-1290"><span class="linenos">1290</span></a>    <span class="c1"># add vaf into genotype</span>
</span><span id="vaf_normalization-1291"><a href="#vaf_normalization-1291"><span class="linenos">1291</span></a>    <span class="n">sample_genotype_dict</span><span class="p">[</span><span class="s2">&quot;VAF&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vaf</span>
</span><span id="vaf_normalization-1292"><a href="#vaf_normalization-1292"><span class="linenos">1292</span></a>
</span><span id="vaf_normalization-1293"><a href="#vaf_normalization-1293"><span class="linenos">1293</span></a>    <span class="c1"># Create new genotype info</span>
</span><span id="vaf_normalization-1294"><a href="#vaf_normalization-1294"><span class="linenos">1294</span></a>    <span class="n">genotype_with_vaf</span> <span class="o">=</span> <span class="s2">&quot;:&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">sample_genotype_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>
</span><span id="vaf_normalization-1295"><a href="#vaf_normalization-1295"><span class="linenos">1295</span></a>
</span><span id="vaf_normalization-1296"><a href="#vaf_normalization-1296"><span class="linenos">1296</span></a>    <span class="k">return</span> <span class="n">genotype_with_vaf</span>
</span></pre></div>


            <div class="docstring"><p>This function takes in a row of data and a sample name, extracts the genotype information for that
sample, calculates the variant allele frequency (VAF) from the genotype information, and adds the
VAF to the genotype information before returning it.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>row</strong>:  The input row of a pandas DataFrame containing information about a genetic variant</li>
<li><strong>sample</strong>:  The parameter "sample" is a string representing the name of the sample for which we
want to calculate the VAF (Variant Allele Frequency). It is used to extract the genotype information
for that particular sample from the input row</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a string that represents the genotype information for a given sample with an added "VAF"
  field that represents the variant allele frequency.</p>
</blockquote>
</div>


                </section>
                <section id="genotype_stats">
                            <input id="genotype_stats-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">genotype_stats</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">df</span>, </span><span class="param"><span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>, </span><span class="param"><span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;VAF&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="genotype_stats-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#genotype_stats"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="genotype_stats-1299"><a href="#genotype_stats-1299"><span class="linenos">1299</span></a><span class="k">def</span> <span class="nf">genotype_stats</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">samples</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;VAF&quot;</span><span class="p">):</span>
</span><span id="genotype_stats-1300"><a href="#genotype_stats-1300"><span class="linenos">1300</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="genotype_stats-1301"><a href="#genotype_stats-1301"><span class="linenos">1301</span></a><span class="sd">    This function computes statistics on a specified information field (e.g. VAF) for a given set of</span>
</span><span id="genotype_stats-1302"><a href="#genotype_stats-1302"><span class="linenos">1302</span></a><span class="sd">    samples in a pandas dataframe.</span>
</span><span id="genotype_stats-1303"><a href="#genotype_stats-1303"><span class="linenos">1303</span></a>
</span><span id="genotype_stats-1304"><a href="#genotype_stats-1304"><span class="linenos">1304</span></a><span class="sd">    :param df: The input dataframe containing variant information</span>
</span><span id="genotype_stats-1305"><a href="#genotype_stats-1305"><span class="linenos">1305</span></a><span class="sd">    :param samples: The list of sample/pipeline names for which to compute the genotype statistics. If</span>
</span><span id="genotype_stats-1306"><a href="#genotype_stats-1306"><span class="linenos">1306</span></a><span class="sd">    empty, the function will return an empty dictionary</span>
</span><span id="genotype_stats-1307"><a href="#genotype_stats-1307"><span class="linenos">1307</span></a><span class="sd">    :type samples: list</span>
</span><span id="genotype_stats-1308"><a href="#genotype_stats-1308"><span class="linenos">1308</span></a><span class="sd">    :param info: The parameter &quot;info&quot; is a string that represents the type of information being analyzed</span>
</span><span id="genotype_stats-1309"><a href="#genotype_stats-1309"><span class="linenos">1309</span></a><span class="sd">    in the function. In this case, it is used to compute statistics on the Variant Allele Frequency</span>
</span><span id="genotype_stats-1310"><a href="#genotype_stats-1310"><span class="linenos">1310</span></a><span class="sd">    (VAF) of genetic variants, defaults to VAF</span>
</span><span id="genotype_stats-1311"><a href="#genotype_stats-1311"><span class="linenos">1311</span></a><span class="sd">    :type info: str (optional)</span>
</span><span id="genotype_stats-1312"><a href="#genotype_stats-1312"><span class="linenos">1312</span></a><span class="sd">    :return: a dictionary containing statistics related to a specified information field (default is</span>
</span><span id="genotype_stats-1313"><a href="#genotype_stats-1313"><span class="linenos">1313</span></a><span class="sd">    &quot;VAF&quot;) for a given set of samples in a pandas DataFrame. The statistics include the number of</span>
</span><span id="genotype_stats-1314"><a href="#genotype_stats-1314"><span class="linenos">1314</span></a><span class="sd">    values, a list of values, minimum value, maximum value, mean, median, and standard deviation. If no</span>
</span><span id="genotype_stats-1315"><a href="#genotype_stats-1315"><span class="linenos">1315</span></a><span class="sd">    samples are specified, an empty dictionary is returned.</span>
</span><span id="genotype_stats-1316"><a href="#genotype_stats-1316"><span class="linenos">1316</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="genotype_stats-1317"><a href="#genotype_stats-1317"><span class="linenos">1317</span></a>
</span><span id="genotype_stats-1318"><a href="#genotype_stats-1318"><span class="linenos">1318</span></a>    <span class="c1"># format</span>
</span><span id="genotype_stats-1319"><a href="#genotype_stats-1319"><span class="linenos">1319</span></a>    <span class="n">format_fields</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;FORMAT&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="genotype_stats-1320"><a href="#genotype_stats-1320"><span class="linenos">1320</span></a>
</span><span id="genotype_stats-1321"><a href="#genotype_stats-1321"><span class="linenos">1321</span></a>    <span class="c1"># init</span>
</span><span id="genotype_stats-1322"><a href="#genotype_stats-1322"><span class="linenos">1322</span></a>    <span class="n">vaf_stats</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="genotype_stats-1323"><a href="#genotype_stats-1323"><span class="linenos">1323</span></a>        <span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_nb&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="genotype_stats-1324"><a href="#genotype_stats-1324"><span class="linenos">1324</span></a>        <span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_list&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="genotype_stats-1325"><a href="#genotype_stats-1325"><span class="linenos">1325</span></a>        <span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_min&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="genotype_stats-1326"><a href="#genotype_stats-1326"><span class="linenos">1326</span></a>        <span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_max&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="genotype_stats-1327"><a href="#genotype_stats-1327"><span class="linenos">1327</span></a>        <span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_mean&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="genotype_stats-1328"><a href="#genotype_stats-1328"><span class="linenos">1328</span></a>        <span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_mediane&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="genotype_stats-1329"><a href="#genotype_stats-1329"><span class="linenos">1329</span></a>        <span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_stdev&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="genotype_stats-1330"><a href="#genotype_stats-1330"><span class="linenos">1330</span></a>    <span class="p">}</span>
</span><span id="genotype_stats-1331"><a href="#genotype_stats-1331"><span class="linenos">1331</span></a>
</span><span id="genotype_stats-1332"><a href="#genotype_stats-1332"><span class="linenos">1332</span></a>    <span class="c1"># no sample/pipeline</span>
</span><span id="genotype_stats-1333"><a href="#genotype_stats-1333"><span class="linenos">1333</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="genotype_stats-1334"><a href="#genotype_stats-1334"><span class="linenos">1334</span></a>        <span class="k">return</span> <span class="n">vaf_stats</span>
</span><span id="genotype_stats-1335"><a href="#genotype_stats-1335"><span class="linenos">1335</span></a>
</span><span id="genotype_stats-1336"><a href="#genotype_stats-1336"><span class="linenos">1336</span></a>    <span class="c1"># init</span>
</span><span id="genotype_stats-1337"><a href="#genotype_stats-1337"><span class="linenos">1337</span></a>    <span class="n">vaf_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="genotype_stats-1338"><a href="#genotype_stats-1338"><span class="linenos">1338</span></a>
</span><span id="genotype_stats-1339"><a href="#genotype_stats-1339"><span class="linenos">1339</span></a>    <span class="c1"># For each sample/pipeline</span>
</span><span id="genotype_stats-1340"><a href="#genotype_stats-1340"><span class="linenos">1340</span></a>    <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="n">samples</span><span class="p">:</span>
</span><span id="genotype_stats-1341"><a href="#genotype_stats-1341"><span class="linenos">1341</span></a>
</span><span id="genotype_stats-1342"><a href="#genotype_stats-1342"><span class="linenos">1342</span></a>        <span class="c1"># Split snpeff ann values</span>
</span><span id="genotype_stats-1343"><a href="#genotype_stats-1343"><span class="linenos">1343</span></a>        <span class="n">sample_infos</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">sample</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="genotype_stats-1344"><a href="#genotype_stats-1344"><span class="linenos">1344</span></a>
</span><span id="genotype_stats-1345"><a href="#genotype_stats-1345"><span class="linenos">1345</span></a>        <span class="c1"># Create Dataframe</span>
</span><span id="genotype_stats-1346"><a href="#genotype_stats-1346"><span class="linenos">1346</span></a>        <span class="n">sample_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="genotype_stats-1347"><a href="#genotype_stats-1347"><span class="linenos">1347</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">format_fields</span><span class="p">)):</span>
</span><span id="genotype_stats-1348"><a href="#genotype_stats-1348"><span class="linenos">1348</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_infos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>
</span><span id="genotype_stats-1349"><a href="#genotype_stats-1349"><span class="linenos">1349</span></a>                <span class="n">sample_dict</span><span class="p">[</span><span class="n">format_fields</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">sample_infos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="genotype_stats-1350"><a href="#genotype_stats-1350"><span class="linenos">1350</span></a>
</span><span id="genotype_stats-1351"><a href="#genotype_stats-1351"><span class="linenos">1351</span></a>        <span class="c1"># Check if GT not null</span>
</span><span id="genotype_stats-1352"><a href="#genotype_stats-1352"><span class="linenos">1352</span></a>        <span class="k">if</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">sample_dict</span><span class="p">:</span>
</span><span id="genotype_stats-1353"><a href="#genotype_stats-1353"><span class="linenos">1353</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="genotype_stats-1354"><a href="#genotype_stats-1354"><span class="linenos">1354</span></a>                <span class="n">vaf_float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">sample_dict</span><span class="p">[</span><span class="n">info</span><span class="p">])</span>
</span><span id="genotype_stats-1355"><a href="#genotype_stats-1355"><span class="linenos">1355</span></a>            <span class="k">except</span><span class="p">:</span>
</span><span id="genotype_stats-1356"><a href="#genotype_stats-1356"><span class="linenos">1356</span></a>                <span class="n">vaf_float</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="genotype_stats-1357"><a href="#genotype_stats-1357"><span class="linenos">1357</span></a>            <span class="k">if</span> <span class="n">vaf_float</span><span class="p">:</span>
</span><span id="genotype_stats-1358"><a href="#genotype_stats-1358"><span class="linenos">1358</span></a>                <span class="n">vaf_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vaf_float</span><span class="p">)</span>
</span><span id="genotype_stats-1359"><a href="#genotype_stats-1359"><span class="linenos">1359</span></a>
</span><span id="genotype_stats-1360"><a href="#genotype_stats-1360"><span class="linenos">1360</span></a>    <span class="n">vaf_stats</span><span class="p">[</span><span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_nb&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vaf_list</span><span class="p">)</span>
</span><span id="genotype_stats-1361"><a href="#genotype_stats-1361"><span class="linenos">1361</span></a>    <span class="k">if</span> <span class="n">vaf_list</span><span class="p">:</span>
</span><span id="genotype_stats-1362"><a href="#genotype_stats-1362"><span class="linenos">1362</span></a>        <span class="n">vaf_stats</span><span class="p">[</span><span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_list&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;:&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vaf_list</span><span class="p">])</span>
</span><span id="genotype_stats-1363"><a href="#genotype_stats-1363"><span class="linenos">1363</span></a>
</span><span id="genotype_stats-1364"><a href="#genotype_stats-1364"><span class="linenos">1364</span></a>    <span class="c1"># Compute min, max, mean and median only if the list is not empty</span>
</span><span id="genotype_stats-1365"><a href="#genotype_stats-1365"><span class="linenos">1365</span></a>    <span class="k">if</span> <span class="n">vaf_list</span><span class="p">:</span>
</span><span id="genotype_stats-1366"><a href="#genotype_stats-1366"><span class="linenos">1366</span></a>        <span class="n">vaf_stats</span><span class="p">[</span><span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_min&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">vaf_list</span><span class="p">)</span>
</span><span id="genotype_stats-1367"><a href="#genotype_stats-1367"><span class="linenos">1367</span></a>        <span class="n">vaf_stats</span><span class="p">[</span><span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_max&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">vaf_list</span><span class="p">)</span>
</span><span id="genotype_stats-1368"><a href="#genotype_stats-1368"><span class="linenos">1368</span></a>        <span class="n">vaf_stats</span><span class="p">[</span><span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_mean&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">statistics</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">vaf_list</span><span class="p">)</span>
</span><span id="genotype_stats-1369"><a href="#genotype_stats-1369"><span class="linenos">1369</span></a>        <span class="n">vaf_stats</span><span class="p">[</span><span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_mediane&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">statistics</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">vaf_list</span><span class="p">)</span>
</span><span id="genotype_stats-1370"><a href="#genotype_stats-1370"><span class="linenos">1370</span></a>
</span><span id="genotype_stats-1371"><a href="#genotype_stats-1371"><span class="linenos">1371</span></a>    <span class="c1"># Check if there are at least 2 values in the list before computing variance or stdev</span>
</span><span id="genotype_stats-1372"><a href="#genotype_stats-1372"><span class="linenos">1372</span></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vaf_list</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="genotype_stats-1373"><a href="#genotype_stats-1373"><span class="linenos">1373</span></a>        <span class="n">vaf_stats</span><span class="p">[</span><span class="n">info</span> <span class="o">+</span> <span class="s2">&quot;_stats_stdev&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">statistics</span><span class="o">.</span><span class="n">stdev</span><span class="p">(</span><span class="n">vaf_list</span><span class="p">)</span>
</span><span id="genotype_stats-1374"><a href="#genotype_stats-1374"><span class="linenos">1374</span></a>
</span><span id="genotype_stats-1375"><a href="#genotype_stats-1375"><span class="linenos">1375</span></a>    <span class="k">return</span> <span class="n">vaf_stats</span>
</span></pre></div>


            <div class="docstring"><p>This function computes statistics on a specified information field (e.g. VAF) for a given set of
samples in a pandas dataframe.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>df</strong>:  The input dataframe containing variant information</li>
<li><strong>samples</strong>:  The list of sample/pipeline names for which to compute the genotype statistics. If
empty, the function will return an empty dictionary</li>
<li><strong>info</strong>:  The parameter "info" is a string that represents the type of information being analyzed
in the function. In this case, it is used to compute statistics on the Variant Allele Frequency
(VAF) of genetic variants, defaults to VAF</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a dictionary containing statistics related to a specified information field (default is
  "VAF") for a given set of samples in a pandas DataFrame. The statistics include the number of
  values, a list of values, minimum value, maximum value, mean, median, and standard deviation. If no
  samples are specified, an empty dictionary is returned.</p>
</blockquote>
</div>


                </section>
                <section id="extract_file">
                            <input id="extract_file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_file</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>, </span><span class="param"><span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="extract_file-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_file"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_file-1378"><a href="#extract_file-1378"><span class="linenos">1378</span></a><span class="k">def</span> <span class="nf">extract_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="extract_file-1379"><a href="#extract_file-1379"><span class="linenos">1379</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="extract_file-1380"><a href="#extract_file-1380"><span class="linenos">1380</span></a><span class="sd">    The function extracts a compressed file in .zip or .gz format based on the file path provided.</span>
</span><span id="extract_file-1381"><a href="#extract_file-1381"><span class="linenos">1381</span></a>
</span><span id="extract_file-1382"><a href="#extract_file-1382"><span class="linenos">1382</span></a><span class="sd">    :param file_path: The file path parameter is a string that represents the path to a file that needs</span>
</span><span id="extract_file-1383"><a href="#extract_file-1383"><span class="linenos">1383</span></a><span class="sd">    to be extracted. The function checks if the file has a &quot;.zip&quot; or &quot;.gz&quot; extension and extracts it</span>
</span><span id="extract_file-1384"><a href="#extract_file-1384"><span class="linenos">1384</span></a><span class="sd">    accordingly</span>
</span><span id="extract_file-1385"><a href="#extract_file-1385"><span class="linenos">1385</span></a><span class="sd">    :type file_path: str</span>
</span><span id="extract_file-1386"><a href="#extract_file-1386"><span class="linenos">1386</span></a><span class="sd">    :param path: The `path` parameter is an optional string that represents the directory where the</span>
</span><span id="extract_file-1387"><a href="#extract_file-1387"><span class="linenos">1387</span></a><span class="sd">    extracted files will be saved. If no `path` is provided, the function will use the directory of the</span>
</span><span id="extract_file-1388"><a href="#extract_file-1388"><span class="linenos">1388</span></a><span class="sd">    `file_path` as the extraction destination</span>
</span><span id="extract_file-1389"><a href="#extract_file-1389"><span class="linenos">1389</span></a><span class="sd">    :type path: str</span>
</span><span id="extract_file-1390"><a href="#extract_file-1390"><span class="linenos">1390</span></a><span class="sd">    :param threads: The `threads` parameter is an optional parameter that specifies the number of</span>
</span><span id="extract_file-1391"><a href="#extract_file-1391"><span class="linenos">1391</span></a><span class="sd">    threads to use for extraction. By default, it is set to 1, meaning the extraction will be done using</span>
</span><span id="extract_file-1392"><a href="#extract_file-1392"><span class="linenos">1392</span></a><span class="sd">    a single thread, defaults to 1</span>
</span><span id="extract_file-1393"><a href="#extract_file-1393"><span class="linenos">1393</span></a><span class="sd">    :type threads: int (optional)</span>
</span><span id="extract_file-1394"><a href="#extract_file-1394"><span class="linenos">1394</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_file-1395"><a href="#extract_file-1395"><span class="linenos">1395</span></a>
</span><span id="extract_file-1396"><a href="#extract_file-1396"><span class="linenos">1396</span></a>    <span class="k">if</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.zip&quot;</span><span class="p">):</span>
</span><span id="extract_file-1397"><a href="#extract_file-1397"><span class="linenos">1397</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
</span><span id="extract_file-1398"><a href="#extract_file-1398"><span class="linenos">1398</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="extract_file-1399"><a href="#extract_file-1399"><span class="linenos">1399</span></a>        <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zip_ref</span><span class="p">:</span>
</span><span id="extract_file-1400"><a href="#extract_file-1400"><span class="linenos">1400</span></a>            <span class="n">zip_ref</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="extract_file-1401"><a href="#extract_file-1401"><span class="linenos">1401</span></a>    <span class="k">elif</span> <span class="n">file_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.gz&quot;</span><span class="p">):</span>
</span><span id="extract_file-1402"><a href="#extract_file-1402"><span class="linenos">1402</span></a>        <span class="n">concat_and_compress_files</span><span class="p">(</span>
</span><span id="extract_file-1403"><a href="#extract_file-1403"><span class="linenos">1403</span></a>            <span class="n">input_files</span><span class="o">=</span><span class="p">[</span><span class="n">file_path</span><span class="p">],</span>
</span><span id="extract_file-1404"><a href="#extract_file-1404"><span class="linenos">1404</span></a>            <span class="n">output_file</span><span class="o">=</span><span class="n">file_path</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">],</span>
</span><span id="extract_file-1405"><a href="#extract_file-1405"><span class="linenos">1405</span></a>            <span class="n">compression_type</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
</span><span id="extract_file-1406"><a href="#extract_file-1406"><span class="linenos">1406</span></a>            <span class="n">threads</span><span class="o">=</span><span class="n">threads</span><span class="p">,</span>
</span><span id="extract_file-1407"><a href="#extract_file-1407"><span class="linenos">1407</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The function extracts a compressed file in .zip or .gz format based on the file path provided.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>file_path</strong>:  The file path parameter is a string that represents the path to a file that needs
to be extracted. The function checks if the file has a ".zip" or ".gz" extension and extracts it
accordingly</li>
<li><strong>path</strong>:  The <code>path</code> parameter is an optional string that represents the directory where the
extracted files will be saved. If no <code>path</code> is provided, the function will use the directory of the
<code>file_path</code> as the extraction destination</li>
<li><strong>threads</strong>:  The <code>threads</code> parameter is an optional parameter that specifies the number of
threads to use for extraction. By default, it is set to 1, meaning the extraction will be done using
a single thread, defaults to 1</li>
</ul>
</div>


                </section>
                <section id="download_file">
                            <input id="download_file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">download_file</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">url</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">dest_file_path</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1048576</span>,</span><span class="param">	<span class="n">try_aria</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">aria_async_dns</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>,</span><span class="param">	<span class="n">quiet</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="download_file-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#download_file"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="download_file-1410"><a href="#download_file-1410"><span class="linenos">1410</span></a><span class="k">def</span> <span class="nf">download_file</span><span class="p">(</span>
</span><span id="download_file-1411"><a href="#download_file-1411"><span class="linenos">1411</span></a>    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="download_file-1412"><a href="#download_file-1412"><span class="linenos">1412</span></a>    <span class="n">dest_file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="download_file-1413"><a href="#download_file-1413"><span class="linenos">1413</span></a>    <span class="n">chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">,</span>
</span><span id="download_file-1414"><a href="#download_file-1414"><span class="linenos">1414</span></a>    <span class="n">try_aria</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="download_file-1415"><a href="#download_file-1415"><span class="linenos">1415</span></a>    <span class="n">aria_async_dns</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="download_file-1416"><a href="#download_file-1416"><span class="linenos">1416</span></a>    <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="download_file-1417"><a href="#download_file-1417"><span class="linenos">1417</span></a>    <span class="n">quiet</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="download_file-1418"><a href="#download_file-1418"><span class="linenos">1418</span></a><span class="p">):</span>
</span><span id="download_file-1419"><a href="#download_file-1419"><span class="linenos">1419</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="download_file-1420"><a href="#download_file-1420"><span class="linenos">1420</span></a><span class="sd">    The `download_file` function is a Python function that downloads a file from a given URL and saves</span>
</span><span id="download_file-1421"><a href="#download_file-1421"><span class="linenos">1421</span></a><span class="sd">    it to a specified destination file path in chunks.</span>
</span><span id="download_file-1422"><a href="#download_file-1422"><span class="linenos">1422</span></a>
</span><span id="download_file-1423"><a href="#download_file-1423"><span class="linenos">1423</span></a><span class="sd">    :param url: The `url` parameter is the URL of the file you want to download. It should be a string</span>
</span><span id="download_file-1424"><a href="#download_file-1424"><span class="linenos">1424</span></a><span class="sd">    that represents the complete URL, including the protocol (e.g., &quot;http://example.com/file.txt&quot;)</span>
</span><span id="download_file-1425"><a href="#download_file-1425"><span class="linenos">1425</span></a><span class="sd">    :type url: str</span>
</span><span id="download_file-1426"><a href="#download_file-1426"><span class="linenos">1426</span></a><span class="sd">    :param dest_file_path: The `dest_file_path` parameter is the path where the downloaded file will be</span>
</span><span id="download_file-1427"><a href="#download_file-1427"><span class="linenos">1427</span></a><span class="sd">    saved. It should be a string representing the file path, including the file name and extension. For</span>
</span><span id="download_file-1428"><a href="#download_file-1428"><span class="linenos">1428</span></a><span class="sd">    example, if you want to save the file as &quot;myfile.txt&quot; in the current directory, you can set `dest</span>
</span><span id="download_file-1429"><a href="#download_file-1429"><span class="linenos">1429</span></a><span class="sd">    :type dest_file_path: str</span>
</span><span id="download_file-1430"><a href="#download_file-1430"><span class="linenos">1430</span></a><span class="sd">    :param chunk_size: The `chunk_size` parameter determines the size of each chunk of data that is</span>
</span><span id="download_file-1431"><a href="#download_file-1431"><span class="linenos">1431</span></a><span class="sd">    downloaded at a time. In this case, the default value is set to 1 MB, which means that the file will</span>
</span><span id="download_file-1432"><a href="#download_file-1432"><span class="linenos">1432</span></a><span class="sd">    be downloaded in chunks of 1 MB at a time. This parameter can be adjusted according to</span>
</span><span id="download_file-1433"><a href="#download_file-1433"><span class="linenos">1433</span></a><span class="sd">    :type chunk_size: int</span>
</span><span id="download_file-1434"><a href="#download_file-1434"><span class="linenos">1434</span></a><span class="sd">    :param try_aria: The `try_aria` parameter is a boolean value that determines whether to use the</span>
</span><span id="download_file-1435"><a href="#download_file-1435"><span class="linenos">1435</span></a><span class="sd">    Aria2c command-line tool for downloading the file. If set to `True`, the function will attempt to</span>
</span><span id="download_file-1436"><a href="#download_file-1436"><span class="linenos">1436</span></a><span class="sd">    download the file using Aria2c. If set to `False`, the function will use the, defaults to True</span>
</span><span id="download_file-1437"><a href="#download_file-1437"><span class="linenos">1437</span></a><span class="sd">    :type try_aria: bool (optional)</span>
</span><span id="download_file-1438"><a href="#download_file-1438"><span class="linenos">1438</span></a><span class="sd">    :param aria_async_dns: The `aria_async_dns` parameter is a boolean value that determines whether to</span>
</span><span id="download_file-1439"><a href="#download_file-1439"><span class="linenos">1439</span></a><span class="sd">    use asynchronous DNS resolution with Aria2c. If set to `True`, Aria2c will use asynchronous DNS</span>
</span><span id="download_file-1440"><a href="#download_file-1440"><span class="linenos">1440</span></a><span class="sd">    resolution, which can improve download performance. If set to `False`, Aria2c will use synchronous,</span>
</span><span id="download_file-1441"><a href="#download_file-1441"><span class="linenos">1441</span></a><span class="sd">    defaults to False</span>
</span><span id="download_file-1442"><a href="#download_file-1442"><span class="linenos">1442</span></a><span class="sd">    :type aria_async_dns: bool (optional)</span>
</span><span id="download_file-1443"><a href="#download_file-1443"><span class="linenos">1443</span></a><span class="sd">    :param threads: The `threads` parameter specifies the number of threads to be used for downloading</span>
</span><span id="download_file-1444"><a href="#download_file-1444"><span class="linenos">1444</span></a><span class="sd">    the file. It determines the number of simultaneous connections that will be made to download the</span>
</span><span id="download_file-1445"><a href="#download_file-1445"><span class="linenos">1445</span></a><span class="sd">    file. By default, it is set to 1, which means that only one connection will be made at a time.</span>
</span><span id="download_file-1446"><a href="#download_file-1446"><span class="linenos">1446</span></a><span class="sd">    Increasing the value, defaults to 1</span>
</span><span id="download_file-1447"><a href="#download_file-1447"><span class="linenos">1447</span></a><span class="sd">    :type threads: int (optional)</span>
</span><span id="download_file-1448"><a href="#download_file-1448"><span class="linenos">1448</span></a><span class="sd">    :param quiet: The `quiet` parameter is a boolean value that determines whether to suppress the</span>
</span><span id="download_file-1449"><a href="#download_file-1449"><span class="linenos">1449</span></a><span class="sd">    output of the download process. If set to `True`, the output will be suppressed. If set to `False`,</span>
</span><span id="download_file-1450"><a href="#download_file-1450"><span class="linenos">1450</span></a><span class="sd">    the output will be displayed. By default, it is set to `True`, defaults to True</span>
</span><span id="download_file-1451"><a href="#download_file-1451"><span class="linenos">1451</span></a><span class="sd">    :type quiet: bool (optional)</span>
</span><span id="download_file-1452"><a href="#download_file-1452"><span class="linenos">1452</span></a><span class="sd">    :return: a boolean value indicating whether the file was successfully downloaded and saved to the</span>
</span><span id="download_file-1453"><a href="#download_file-1453"><span class="linenos">1453</span></a><span class="sd">    specified destination file path.</span>
</span><span id="download_file-1454"><a href="#download_file-1454"><span class="linenos">1454</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="download_file-1455"><a href="#download_file-1455"><span class="linenos">1455</span></a>
</span><span id="download_file-1456"><a href="#download_file-1456"><span class="linenos">1456</span></a>    <span class="c1"># Full path</span>
</span><span id="download_file-1457"><a href="#download_file-1457"><span class="linenos">1457</span></a>    <span class="n">dest_file_path</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">)</span>
</span><span id="download_file-1458"><a href="#download_file-1458"><span class="linenos">1458</span></a>
</span><span id="download_file-1459"><a href="#download_file-1459"><span class="linenos">1459</span></a>    <span class="c1"># Create folder if not exists</span>
</span><span id="download_file-1460"><a href="#download_file-1460"><span class="linenos">1460</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">)):</span>
</span><span id="download_file-1461"><a href="#download_file-1461"><span class="linenos">1461</span></a>        <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">))</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="download_file-1462"><a href="#download_file-1462"><span class="linenos">1462</span></a>
</span><span id="download_file-1463"><a href="#download_file-1463"><span class="linenos">1463</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="download_file-1464"><a href="#download_file-1464"><span class="linenos">1464</span></a>
</span><span id="download_file-1465"><a href="#download_file-1465"><span class="linenos">1465</span></a>        <span class="k">if</span> <span class="n">try_aria</span><span class="p">:</span>
</span><span id="download_file-1466"><a href="#download_file-1466"><span class="linenos">1466</span></a>
</span><span id="download_file-1467"><a href="#download_file-1467"><span class="linenos">1467</span></a>            <span class="c1"># Aria options</span>
</span><span id="download_file-1468"><a href="#download_file-1468"><span class="linenos">1468</span></a>            <span class="n">aria_async_dns_option</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">aria_async_dns</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="download_file-1469"><a href="#download_file-1469"><span class="linenos">1469</span></a>            <span class="k">if</span> <span class="n">quiet</span> <span class="ow">and</span> <span class="n">log</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">level</span> <span class="o">&gt;=</span> <span class="mi">20</span><span class="p">:</span>
</span><span id="download_file-1470"><a href="#download_file-1470"><span class="linenos">1470</span></a>                <span class="n">aria_quiet_option</span> <span class="o">=</span> <span class="s2">&quot; --quiet &quot;</span>
</span><span id="download_file-1471"><a href="#download_file-1471"><span class="linenos">1471</span></a>                <span class="n">aria_redirect_option</span> <span class="o">=</span> <span class="s2">&quot; 2&gt;/dev/null &quot;</span>
</span><span id="download_file-1472"><a href="#download_file-1472"><span class="linenos">1472</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="download_file-1473"><a href="#download_file-1473"><span class="linenos">1473</span></a>                <span class="n">aria_quiet_option</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="download_file-1474"><a href="#download_file-1474"><span class="linenos">1474</span></a>                <span class="n">aria_redirect_option</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="download_file-1475"><a href="#download_file-1475"><span class="linenos">1475</span></a>
</span><span id="download_file-1476"><a href="#download_file-1476"><span class="linenos">1476</span></a>            <span class="c1"># Aria command</span>
</span><span id="download_file-1477"><a href="#download_file-1477"><span class="linenos">1477</span></a>            <span class="n">aria_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;aria2c -c -s </span><span class="si">{</span><span class="n">threads</span><span class="si">}</span><span class="s2"> -x </span><span class="si">{</span><span class="n">threads</span><span class="si">}</span><span class="s2"> -j 1 </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> -d </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">)</span><span class="si">}</span><span class="s2"> -o </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">aria_quiet_option</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="download_file-1478"><a href="#download_file-1478"><span class="linenos">1478</span></a>
</span><span id="download_file-1479"><a href="#download_file-1479"><span class="linenos">1479</span></a>            <span class="c1"># Launch command</span>
</span><span id="download_file-1480"><a href="#download_file-1480"><span class="linenos">1480</span></a>            <span class="c1"># Try with --async-dns option</span>
</span><span id="download_file-1481"><a href="#download_file-1481"><span class="linenos">1481</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="download_file-1482"><a href="#download_file-1482"><span class="linenos">1482</span></a>                <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span>
</span><span id="download_file-1483"><a href="#download_file-1483"><span class="linenos">1483</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">aria_command</span><span class="si">}</span><span class="s2"> --async-dns=</span><span class="si">{</span><span class="n">aria_async_dns_option</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">aria_redirect_option</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="download_file-1484"><a href="#download_file-1484"><span class="linenos">1484</span></a>                <span class="p">)</span>
</span><span id="download_file-1485"><a href="#download_file-1485"><span class="linenos">1485</span></a>                <span class="k">if</span> <span class="n">output</span><span class="p">:</span>
</span><span id="download_file-1486"><a href="#download_file-1486"><span class="linenos">1486</span></a>                    <span class="k">assert</span> <span class="kc">False</span>
</span><span id="download_file-1487"><a href="#download_file-1487"><span class="linenos">1487</span></a>            <span class="k">except</span><span class="p">:</span>
</span><span id="download_file-1488"><a href="#download_file-1488"><span class="linenos">1488</span></a>                <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">aria_command</span><span class="p">)</span>
</span><span id="download_file-1489"><a href="#download_file-1489"><span class="linenos">1489</span></a>
</span><span id="download_file-1490"><a href="#download_file-1490"><span class="linenos">1490</span></a>            <span class="c1"># Test output file</span>
</span><span id="download_file-1491"><a href="#download_file-1491"><span class="linenos">1491</span></a>            <span class="k">if</span> <span class="n">output</span> <span class="ow">or</span> <span class="ow">not</span> <span class="p">(</span>
</span><span id="download_file-1492"><a href="#download_file-1492"><span class="linenos">1492</span></a>                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">)</span><span class="o">.</span><span class="n">st_size</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="download_file-1493"><a href="#download_file-1493"><span class="linenos">1493</span></a>            <span class="p">):</span>
</span><span id="download_file-1494"><a href="#download_file-1494"><span class="linenos">1494</span></a>                <span class="k">assert</span> <span class="kc">False</span>
</span><span id="download_file-1495"><a href="#download_file-1495"><span class="linenos">1495</span></a>
</span><span id="download_file-1496"><a href="#download_file-1496"><span class="linenos">1496</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="download_file-1497"><a href="#download_file-1497"><span class="linenos">1497</span></a>
</span><span id="download_file-1498"><a href="#download_file-1498"><span class="linenos">1498</span></a>            <span class="k">assert</span> <span class="kc">False</span>
</span><span id="download_file-1499"><a href="#download_file-1499"><span class="linenos">1499</span></a>
</span><span id="download_file-1500"><a href="#download_file-1500"><span class="linenos">1500</span></a>    <span class="k">except</span><span class="p">:</span>
</span><span id="download_file-1501"><a href="#download_file-1501"><span class="linenos">1501</span></a>
</span><span id="download_file-1502"><a href="#download_file-1502"><span class="linenos">1502</span></a>        <span class="c1"># Request</span>
</span><span id="download_file-1503"><a href="#download_file-1503"><span class="linenos">1503</span></a>        <span class="k">with</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">r</span><span class="p">:</span>
</span><span id="download_file-1504"><a href="#download_file-1504"><span class="linenos">1504</span></a>            <span class="n">r</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
</span><span id="download_file-1505"><a href="#download_file-1505"><span class="linenos">1505</span></a>
</span><span id="download_file-1506"><a href="#download_file-1506"><span class="linenos">1506</span></a>            <span class="c1"># Create a temporary file</span>
</span><span id="download_file-1507"><a href="#download_file-1507"><span class="linenos">1507</span></a>            <span class="n">tmp_file_path</span> <span class="o">=</span> <span class="n">dest_file_path</span> <span class="o">+</span> <span class="s2">&quot;.tmp&quot;</span>
</span><span id="download_file-1508"><a href="#download_file-1508"><span class="linenos">1508</span></a>
</span><span id="download_file-1509"><a href="#download_file-1509"><span class="linenos">1509</span></a>            <span class="c1"># Open the temporary file for writing in binary mode</span>
</span><span id="download_file-1510"><a href="#download_file-1510"><span class="linenos">1510</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tmp_file_path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="download_file-1511"><a href="#download_file-1511"><span class="linenos">1511</span></a>
</span><span id="download_file-1512"><a href="#download_file-1512"><span class="linenos">1512</span></a>                <span class="c1"># Download the file by chunks</span>
</span><span id="download_file-1513"><a href="#download_file-1513"><span class="linenos">1513</span></a>                <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="n">chunk_size</span><span class="p">):</span>
</span><span id="download_file-1514"><a href="#download_file-1514"><span class="linenos">1514</span></a>
</span><span id="download_file-1515"><a href="#download_file-1515"><span class="linenos">1515</span></a>                    <span class="c1"># Write the chunk to the temporary file</span>
</span><span id="download_file-1516"><a href="#download_file-1516"><span class="linenos">1516</span></a>                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</span><span id="download_file-1517"><a href="#download_file-1517"><span class="linenos">1517</span></a>
</span><span id="download_file-1518"><a href="#download_file-1518"><span class="linenos">1518</span></a>        <span class="c1"># Move the temporary file to the final destination</span>
</span><span id="download_file-1519"><a href="#download_file-1519"><span class="linenos">1519</span></a>        <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">tmp_file_path</span><span class="p">,</span> <span class="n">dest_file_path</span><span class="p">)</span>
</span><span id="download_file-1520"><a href="#download_file-1520"><span class="linenos">1520</span></a>
</span><span id="download_file-1521"><a href="#download_file-1521"><span class="linenos">1521</span></a>    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dest_file_path</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#download_file">download_file</a></code> function is a Python function that downloads a file from a given URL and saves
it to a specified destination file path in chunks.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>url</strong>:  The <code>url</code> parameter is the URL of the file you want to download. It should be a string
that represents the complete URL, including the protocol (e.g., "http://example.com/file.txt")</li>
<li><strong>dest_file_path</strong>:  The <code>dest_file_path</code> parameter is the path where the downloaded file will be
saved. It should be a string representing the file path, including the file name and extension. For
example, if you want to save the file as "myfile.txt" in the current directory, you can set `dest</li>
<li><strong>chunk_size</strong>:  The <code>chunk_size</code> parameter determines the size of each chunk of data that is
downloaded at a time. In this case, the default value is set to 1 MB, which means that the file will
be downloaded in chunks of 1 MB at a time. This parameter can be adjusted according to</li>
<li><strong>try_aria</strong>:  The <code>try_aria</code> parameter is a boolean value that determines whether to use the
Aria2c command-line tool for downloading the file. If set to <code>True</code>, the function will attempt to
download the file using Aria2c. If set to <code>False</code>, the function will use the, defaults to True</li>
<li><strong>aria_async_dns</strong>:  The <code>aria_async_dns</code> parameter is a boolean value that determines whether to
use asynchronous DNS resolution with Aria2c. If set to <code>True</code>, Aria2c will use asynchronous DNS
resolution, which can improve download performance. If set to <code>False</code>, Aria2c will use synchronous,
defaults to False</li>
<li><strong>threads</strong>:  The <code>threads</code> parameter specifies the number of threads to be used for downloading
the file. It determines the number of simultaneous connections that will be made to download the
file. By default, it is set to 1, which means that only one connection will be made at a time.
Increasing the value, defaults to 1</li>
<li><strong>quiet</strong>:  The <code>quiet</code> parameter is a boolean value that determines whether to suppress the
output of the download process. If set to <code>True</code>, the output will be suppressed. If set to <code>False</code>,
the output will be displayed. By default, it is set to <code>True</code>, defaults to True</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a boolean value indicating whether the file was successfully downloaded and saved to the
  specified destination file path.</p>
</blockquote>
</div>


                </section>
                <section id="whereis_bin">
                            <input id="whereis_bin-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">whereis_bin</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">bin_file</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="whereis_bin-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#whereis_bin"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="whereis_bin-1524"><a href="#whereis_bin-1524"><span class="linenos">1524</span></a><span class="k">def</span> <span class="nf">whereis_bin</span><span class="p">(</span><span class="n">bin_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="whereis_bin-1525"><a href="#whereis_bin-1525"><span class="linenos">1525</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot; &quot;&quot;&quot;</span>
</span><span id="whereis_bin-1526"><a href="#whereis_bin-1526"><span class="linenos">1526</span></a>
</span><span id="whereis_bin-1527"><a href="#whereis_bin-1527"><span class="linenos">1527</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bin_file</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="whereis_bin-1528"><a href="#whereis_bin-1528"><span class="linenos">1528</span></a>        <span class="n">whereis_bin</span> <span class="o">=</span> <span class="n">bin_file</span>
</span><span id="whereis_bin-1529"><a href="#whereis_bin-1529"><span class="linenos">1529</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="whereis_bin-1530"><a href="#whereis_bin-1530"><span class="linenos">1530</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="whereis_bin-1531"><a href="#whereis_bin-1531"><span class="linenos">1531</span></a>
</span><span id="whereis_bin-1532"><a href="#whereis_bin-1532"><span class="linenos">1532</span></a>    <span class="c1"># Switch to which</span>
</span><span id="whereis_bin-1533"><a href="#whereis_bin-1533"><span class="linenos">1533</span></a>    <span class="k">if</span> <span class="n">whereis_bin</span> <span class="ow">and</span> <span class="n">which</span><span class="p">(</span><span class="n">whereis_bin</span><span class="p">):</span>
</span><span id="whereis_bin-1534"><a href="#whereis_bin-1534"><span class="linenos">1534</span></a>        <span class="n">whereis_bin</span> <span class="o">=</span> <span class="n">which</span><span class="p">(</span><span class="n">whereis_bin</span><span class="p">)</span>
</span><span id="whereis_bin-1535"><a href="#whereis_bin-1535"><span class="linenos">1535</span></a>
</span><span id="whereis_bin-1536"><a href="#whereis_bin-1536"><span class="linenos">1536</span></a>    <span class="c1"># Full path</span>
</span><span id="whereis_bin-1537"><a href="#whereis_bin-1537"><span class="linenos">1537</span></a>    <span class="n">whereis_bin</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">whereis_bin</span><span class="p">)</span>
</span><span id="whereis_bin-1538"><a href="#whereis_bin-1538"><span class="linenos">1538</span></a>
</span><span id="whereis_bin-1539"><a href="#whereis_bin-1539"><span class="linenos">1539</span></a>    <span class="k">if</span> <span class="n">whereis_bin</span> <span class="ow">and</span> <span class="p">(</span>
</span><span id="whereis_bin-1540"><a href="#whereis_bin-1540"><span class="linenos">1540</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">whereis_bin</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">whereis_bin</span> <span class="ow">and</span> <span class="n">which</span><span class="p">(</span><span class="n">whereis_bin</span><span class="p">))</span>
</span><span id="whereis_bin-1541"><a href="#whereis_bin-1541"><span class="linenos">1541</span></a>    <span class="p">):</span>
</span><span id="whereis_bin-1542"><a href="#whereis_bin-1542"><span class="linenos">1542</span></a>        <span class="k">return</span> <span class="n">whereis_bin</span>
</span><span id="whereis_bin-1543"><a href="#whereis_bin-1543"><span class="linenos">1543</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="whereis_bin-1544"><a href="#whereis_bin-1544"><span class="linenos">1544</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


    

                </section>
                <section id="get_bin">
                            <input id="get_bin-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bin</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="nb">bin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">tool</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">bin_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;bin&#39;</span>,</span><span class="param">	<span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>,</span><span class="param">	<span class="n">default_folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;/Users/lebechea/howard/tools&#39;</span>,</span><span class="param">	<span class="n">output_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;bin&#39;</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="get_bin-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_bin"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_bin-1547"><a href="#get_bin-1547"><span class="linenos">1547</span></a><span class="k">def</span> <span class="nf">get_bin</span><span class="p">(</span>
</span><span id="get_bin-1548"><a href="#get_bin-1548"><span class="linenos">1548</span></a>    <span class="nb">bin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="get_bin-1549"><a href="#get_bin-1549"><span class="linenos">1549</span></a>    <span class="n">tool</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="get_bin-1550"><a href="#get_bin-1550"><span class="linenos">1550</span></a>    <span class="n">bin_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bin&quot;</span><span class="p">,</span>
</span><span id="get_bin-1551"><a href="#get_bin-1551"><span class="linenos">1551</span></a>    <span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="get_bin-1552"><a href="#get_bin-1552"><span class="linenos">1552</span></a>    <span class="n">default_folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT_TOOLS_FOLDER</span><span class="p">,</span>
</span><span id="get_bin-1553"><a href="#get_bin-1553"><span class="linenos">1553</span></a>    <span class="n">output_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bin&quot;</span><span class="p">,</span>
</span><span id="get_bin-1554"><a href="#get_bin-1554"><span class="linenos">1554</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="get_bin-1555"><a href="#get_bin-1555"><span class="linenos">1555</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_bin-1556"><a href="#get_bin-1556"><span class="linenos">1556</span></a><span class="sd">    The `get_bin` function retrieves the path to a specified binary file from a configuration dictionary</span>
</span><span id="get_bin-1557"><a href="#get_bin-1557"><span class="linenos">1557</span></a><span class="sd">    or searches for it in the file system if it is not specified in the configuration.</span>
</span><span id="get_bin-1558"><a href="#get_bin-1558"><span class="linenos">1558</span></a>
</span><span id="get_bin-1559"><a href="#get_bin-1559"><span class="linenos">1559</span></a><span class="sd">    :param bin: The `bin` parameter is a string or a pattern that represents the name of the binary file (e.g.,</span>
</span><span id="get_bin-1560"><a href="#get_bin-1560"><span class="linenos">1560</span></a><span class="sd">    `snpEff.jar`, `exomiser-cli*.jar`) that you want to retrieve the path for</span>
</span><span id="get_bin-1561"><a href="#get_bin-1561"><span class="linenos">1561</span></a><span class="sd">    :type bin: str</span>
</span><span id="get_bin-1562"><a href="#get_bin-1562"><span class="linenos">1562</span></a><span class="sd">    :param tool: The `tool` parameter is a string that represents the name of the tool. It is used to</span>
</span><span id="get_bin-1563"><a href="#get_bin-1563"><span class="linenos">1563</span></a><span class="sd">    retrieve the path to the tool&#39;s binary file</span>
</span><span id="get_bin-1564"><a href="#get_bin-1564"><span class="linenos">1564</span></a><span class="sd">    :type tool: str</span>
</span><span id="get_bin-1565"><a href="#get_bin-1565"><span class="linenos">1565</span></a><span class="sd">    :param bin_type: The `bin_type` parameter is a string that specifies the type of binary file to</span>
</span><span id="get_bin-1566"><a href="#get_bin-1566"><span class="linenos">1566</span></a><span class="sd">    search for in the config dict (e.g., `jar`, `bin`). In this case, the default value is &quot;bin&quot;. A value &quot;jar&quot; indicates that the function is searching</span>
</span><span id="get_bin-1567"><a href="#get_bin-1567"><span class="linenos">1567</span></a><span class="sd">    for a JAR file. Defaults to bin</span>
</span><span id="get_bin-1568"><a href="#get_bin-1568"><span class="linenos">1568</span></a><span class="sd">    :type bin_type: str (optional)</span>
</span><span id="get_bin-1569"><a href="#get_bin-1569"><span class="linenos">1569</span></a><span class="sd">    :param config: A dictionary containing configuration information for the snpEff tool, including the</span>
</span><span id="get_bin-1570"><a href="#get_bin-1570"><span class="linenos">1570</span></a><span class="sd">    path to the snpEff jar file. If no configuration is provided, an empty dictionary is used</span>
</span><span id="get_bin-1571"><a href="#get_bin-1571"><span class="linenos">1571</span></a><span class="sd">    :type config: dict</span>
</span><span id="get_bin-1572"><a href="#get_bin-1572"><span class="linenos">1572</span></a><span class="sd">    :param default_folder: The `default_folder` parameter is a string that represents the default folder</span>
</span><span id="get_bin-1573"><a href="#get_bin-1573"><span class="linenos">1573</span></a><span class="sd">    where the tool binaries are located. If the `bin_file` is not found in the configuration dictionary</span>
</span><span id="get_bin-1574"><a href="#get_bin-1574"><span class="linenos">1574</span></a><span class="sd">    or in the file system, the function will search for it in this default folder</span>
</span><span id="get_bin-1575"><a href="#get_bin-1575"><span class="linenos">1575</span></a><span class="sd">    :type default_folder: str</span>
</span><span id="get_bin-1576"><a href="#get_bin-1576"><span class="linenos">1576</span></a><span class="sd">    :return: the path to the snpEff.jar file. If the file is not found, it returns None.</span>
</span><span id="get_bin-1577"><a href="#get_bin-1577"><span class="linenos">1577</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_bin-1578"><a href="#get_bin-1578"><span class="linenos">1578</span></a>
</span><span id="get_bin-1579"><a href="#get_bin-1579"><span class="linenos">1579</span></a>    <span class="c1"># Full path</span>
</span><span id="get_bin-1580"><a href="#get_bin-1580"><span class="linenos">1580</span></a>    <span class="n">default_folder</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">default_folder</span><span class="p">)</span>
</span><span id="get_bin-1581"><a href="#get_bin-1581"><span class="linenos">1581</span></a>    <span class="c1"># log.debug(f&quot;default_folder={default_folder}&quot;)</span>
</span><span id="get_bin-1582"><a href="#get_bin-1582"><span class="linenos">1582</span></a>
</span><span id="get_bin-1583"><a href="#get_bin-1583"><span class="linenos">1583</span></a>    <span class="c1"># Config</span>
</span><span id="get_bin-1584"><a href="#get_bin-1584"><span class="linenos">1584</span></a>    <span class="n">config_tool</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tools&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tool</span><span class="p">)</span>
</span><span id="get_bin-1585"><a href="#get_bin-1585"><span class="linenos">1585</span></a>
</span><span id="get_bin-1586"><a href="#get_bin-1586"><span class="linenos">1586</span></a>    <span class="c1"># Allowed dict conf</span>
</span><span id="get_bin-1587"><a href="#get_bin-1587"><span class="linenos">1587</span></a>    <span class="n">tool_dict_conf_type_allowed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;jar&quot;</span><span class="p">,</span> <span class="s2">&quot;java&quot;</span><span class="p">,</span> <span class="s2">&quot;docker&quot;</span><span class="p">]</span>
</span><span id="get_bin-1588"><a href="#get_bin-1588"><span class="linenos">1588</span></a>
</span><span id="get_bin-1589"><a href="#get_bin-1589"><span class="linenos">1589</span></a>    <span class="c1"># Find bin_file</span>
</span><span id="get_bin-1590"><a href="#get_bin-1590"><span class="linenos">1590</span></a>    <span class="n">bin_file</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="get_bin-1591"><a href="#get_bin-1591"><span class="linenos">1591</span></a>    <span class="n">bin_file_type</span> <span class="o">=</span> <span class="n">bin_type</span>
</span><span id="get_bin-1592"><a href="#get_bin-1592"><span class="linenos">1592</span></a>
</span><span id="get_bin-1593"><a href="#get_bin-1593"><span class="linenos">1593</span></a>    <span class="c1"># For input config for tool and default config (if not provided)</span>
</span><span id="get_bin-1594"><a href="#get_bin-1594"><span class="linenos">1594</span></a>    <span class="k">for</span> <span class="n">conf</span> <span class="ow">in</span> <span class="p">[</span><span class="n">config_tool</span><span class="p">,</span> <span class="n">DEFAULT_TOOLS_BIN</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="p">{})]:</span>
</span><span id="get_bin-1595"><a href="#get_bin-1595"><span class="linenos">1595</span></a>
</span><span id="get_bin-1596"><a href="#get_bin-1596"><span class="linenos">1596</span></a>        <span class="c1"># If config not empty and bin_file not already found</span>
</span><span id="get_bin-1597"><a href="#get_bin-1597"><span class="linenos">1597</span></a>        <span class="k">if</span> <span class="n">conf</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">bin_file</span><span class="p">:</span>
</span><span id="get_bin-1598"><a href="#get_bin-1598"><span class="linenos">1598</span></a>
</span><span id="get_bin-1599"><a href="#get_bin-1599"><span class="linenos">1599</span></a>            <span class="c1"># If tool config is a dict (simple dict with type of more complex such as docker)</span>
</span><span id="get_bin-1600"><a href="#get_bin-1600"><span class="linenos">1600</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="n">bin_type</span><span class="p">:</span>
</span><span id="get_bin-1601"><a href="#get_bin-1601"><span class="linenos">1601</span></a>
</span><span id="get_bin-1602"><a href="#get_bin-1602"><span class="linenos">1602</span></a>                <span class="c1"># If type found in dict (simple dict such as</span>
</span><span id="get_bin-1603"><a href="#get_bin-1603"><span class="linenos">1603</span></a>                <span class="c1"># {&#39;bin&#39;: &#39;/path/to/tool&#39;})</span>
</span><span id="get_bin-1604"><a href="#get_bin-1604"><span class="linenos">1604</span></a>                <span class="c1"># {&#39;jar&#39;: &#39;/path/to/tool.jar&#39;})</span>
</span><span id="get_bin-1605"><a href="#get_bin-1605"><span class="linenos">1605</span></a>                <span class="k">if</span> <span class="n">bin_type</span> <span class="ow">in</span> <span class="n">conf</span><span class="p">:</span>
</span><span id="get_bin-1606"><a href="#get_bin-1606"><span class="linenos">1606</span></a>                    <span class="n">bin_file_new</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">bin_type</span><span class="p">)</span>
</span><span id="get_bin-1607"><a href="#get_bin-1607"><span class="linenos">1607</span></a>                    <span class="c1"># If bin is a env binary or a existing file (see whereis function)</span>
</span><span id="get_bin-1608"><a href="#get_bin-1608"><span class="linenos">1608</span></a>                    <span class="k">if</span> <span class="n">whereis_bin</span><span class="p">(</span><span class="n">bin_file_new</span><span class="p">):</span>
</span><span id="get_bin-1609"><a href="#get_bin-1609"><span class="linenos">1609</span></a>                        <span class="n">bin_file</span> <span class="o">=</span> <span class="n">whereis_bin</span><span class="p">(</span><span class="n">bin_file_new</span><span class="p">)</span>
</span><span id="get_bin-1610"><a href="#get_bin-1610"><span class="linenos">1610</span></a>                    <span class="c1"># If specific bin type is asked (e.g. docker, which is a dict not a string)</span>
</span><span id="get_bin-1611"><a href="#get_bin-1611"><span class="linenos">1611</span></a>                    <span class="k">elif</span> <span class="n">bin_type</span> <span class="ow">in</span> <span class="n">tool_dict_conf_type_allowed</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="get_bin-1612"><a href="#get_bin-1612"><span class="linenos">1612</span></a>                        <span class="n">bin_file_new</span><span class="p">,</span> <span class="nb">dict</span>
</span><span id="get_bin-1613"><a href="#get_bin-1613"><span class="linenos">1613</span></a>                    <span class="p">):</span>
</span><span id="get_bin-1614"><a href="#get_bin-1614"><span class="linenos">1614</span></a>                        <span class="k">if</span> <span class="n">output_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;bin&quot;</span><span class="p">,</span> <span class="s2">&quot;dict&quot;</span><span class="p">]:</span>
</span><span id="get_bin-1615"><a href="#get_bin-1615"><span class="linenos">1615</span></a>                            <span class="k">return</span> <span class="n">bin_file_new</span>
</span><span id="get_bin-1616"><a href="#get_bin-1616"><span class="linenos">1616</span></a>                        <span class="k">elif</span> <span class="n">output_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]:</span>
</span><span id="get_bin-1617"><a href="#get_bin-1617"><span class="linenos">1617</span></a>                            <span class="k">return</span> <span class="n">bin_type</span>
</span><span id="get_bin-1618"><a href="#get_bin-1618"><span class="linenos">1618</span></a>
</span><span id="get_bin-1619"><a href="#get_bin-1619"><span class="linenos">1619</span></a>                <span class="c1"># If bin not found as a specific input type</span>
</span><span id="get_bin-1620"><a href="#get_bin-1620"><span class="linenos">1620</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">bin_file</span><span class="p">:</span>
</span><span id="get_bin-1621"><a href="#get_bin-1621"><span class="linenos">1621</span></a>
</span><span id="get_bin-1622"><a href="#get_bin-1622"><span class="linenos">1622</span></a>                    <span class="c1"># For each other type in conf (if any)</span>
</span><span id="get_bin-1623"><a href="#get_bin-1623"><span class="linenos">1623</span></a>                    <span class="k">for</span> <span class="n">bin_type_conf</span> <span class="ow">in</span> <span class="n">conf</span><span class="p">:</span>
</span><span id="get_bin-1624"><a href="#get_bin-1624"><span class="linenos">1624</span></a>
</span><span id="get_bin-1625"><a href="#get_bin-1625"><span class="linenos">1625</span></a>                        <span class="c1"># Bin file/config and bin type</span>
</span><span id="get_bin-1626"><a href="#get_bin-1626"><span class="linenos">1626</span></a>                        <span class="n">bin_file</span> <span class="o">=</span> <span class="n">conf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">bin_type_conf</span><span class="p">)</span>
</span><span id="get_bin-1627"><a href="#get_bin-1627"><span class="linenos">1627</span></a>                        <span class="n">bin_file_type</span> <span class="o">=</span> <span class="n">bin_type_conf</span>
</span><span id="get_bin-1628"><a href="#get_bin-1628"><span class="linenos">1628</span></a>
</span><span id="get_bin-1629"><a href="#get_bin-1629"><span class="linenos">1629</span></a>                        <span class="c1"># If type is allowed to be return (e.g. &#39;docker&#39;, &#39;java&#39;)</span>
</span><span id="get_bin-1630"><a href="#get_bin-1630"><span class="linenos">1630</span></a>                        <span class="k">if</span> <span class="n">bin_file_type</span> <span class="ow">in</span> <span class="n">tool_dict_conf_type_allowed</span><span class="p">:</span>
</span><span id="get_bin-1631"><a href="#get_bin-1631"><span class="linenos">1631</span></a>
</span><span id="get_bin-1632"><a href="#get_bin-1632"><span class="linenos">1632</span></a>                            <span class="c1"># return if output type is for a dict (for futher configuration, e.g. for &#39;docker&#39;, &#39;java&#39;)</span>
</span><span id="get_bin-1633"><a href="#get_bin-1633"><span class="linenos">1633</span></a>                            <span class="k">if</span> <span class="n">output_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;dict&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bin_file</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="get_bin-1634"><a href="#get_bin-1634"><span class="linenos">1634</span></a>                                <span class="k">return</span> <span class="n">bin_file</span>
</span><span id="get_bin-1635"><a href="#get_bin-1635"><span class="linenos">1635</span></a>                            <span class="c1"># else:</span>
</span><span id="get_bin-1636"><a href="#get_bin-1636"><span class="linenos">1636</span></a>                            <span class="c1">#     return None</span>
</span><span id="get_bin-1637"><a href="#get_bin-1637"><span class="linenos">1637</span></a>
</span><span id="get_bin-1638"><a href="#get_bin-1638"><span class="linenos">1638</span></a>            <span class="c1"># If config is a path to binary/file as a string</span>
</span><span id="get_bin-1639"><a href="#get_bin-1639"><span class="linenos">1639</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conf</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="get_bin-1640"><a href="#get_bin-1640"><span class="linenos">1640</span></a>                <span class="n">bin_file</span> <span class="o">=</span> <span class="n">conf</span>
</span><span id="get_bin-1641"><a href="#get_bin-1641"><span class="linenos">1641</span></a>
</span><span id="get_bin-1642"><a href="#get_bin-1642"><span class="linenos">1642</span></a>    <span class="c1"># Return not &quot;bin&quot;</span>
</span><span id="get_bin-1643"><a href="#get_bin-1643"><span class="linenos">1643</span></a>    <span class="k">if</span> <span class="n">output_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]:</span>
</span><span id="get_bin-1644"><a href="#get_bin-1644"><span class="linenos">1644</span></a>        <span class="k">return</span> <span class="n">bin_file_type</span>
</span><span id="get_bin-1645"><a href="#get_bin-1645"><span class="linenos">1645</span></a>    <span class="k">elif</span> <span class="n">output_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;dict&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bin_file</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="get_bin-1646"><a href="#get_bin-1646"><span class="linenos">1646</span></a>        <span class="k">return</span> <span class="n">bin_file</span>
</span><span id="get_bin-1647"><a href="#get_bin-1647"><span class="linenos">1647</span></a>
</span><span id="get_bin-1648"><a href="#get_bin-1648"><span class="linenos">1648</span></a>    <span class="c1"># Check bin_file validation</span>
</span><span id="get_bin-1649"><a href="#get_bin-1649"><span class="linenos">1649</span></a>    <span class="n">bin_file</span> <span class="o">=</span> <span class="n">whereis_bin</span><span class="p">(</span><span class="n">bin_file</span><span class="p">)</span>
</span><span id="get_bin-1650"><a href="#get_bin-1650"><span class="linenos">1650</span></a>
</span><span id="get_bin-1651"><a href="#get_bin-1651"><span class="linenos">1651</span></a>    <span class="c1"># Config - check tools</span>
</span><span id="get_bin-1652"><a href="#get_bin-1652"><span class="linenos">1652</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">bin_file</span><span class="p">:</span>
</span><span id="get_bin-1653"><a href="#get_bin-1653"><span class="linenos">1653</span></a>
</span><span id="get_bin-1654"><a href="#get_bin-1654"><span class="linenos">1654</span></a>        <span class="c1"># Try to find bin file</span>
</span><span id="get_bin-1655"><a href="#get_bin-1655"><span class="linenos">1655</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="get_bin-1656"><a href="#get_bin-1656"><span class="linenos">1656</span></a>            <span class="n">bin_file</span> <span class="o">=</span> <span class="n">find_all</span><span class="p">(</span><span class="nb">bin</span><span class="p">,</span> <span class="n">default_folder</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="get_bin-1657"><a href="#get_bin-1657"><span class="linenos">1657</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="get_bin-1658"><a href="#get_bin-1658"><span class="linenos">1658</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="get_bin-1659"><a href="#get_bin-1659"><span class="linenos">1659</span></a>
</span><span id="get_bin-1660"><a href="#get_bin-1660"><span class="linenos">1660</span></a>        <span class="c1"># Full path</span>
</span><span id="get_bin-1661"><a href="#get_bin-1661"><span class="linenos">1661</span></a>        <span class="n">bin_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">bin_file</span><span class="p">)</span>
</span><span id="get_bin-1662"><a href="#get_bin-1662"><span class="linenos">1662</span></a>
</span><span id="get_bin-1663"><a href="#get_bin-1663"><span class="linenos">1663</span></a>        <span class="c1"># Check if found</span>
</span><span id="get_bin-1664"><a href="#get_bin-1664"><span class="linenos">1664</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">bin_file</span><span class="p">):</span>
</span><span id="get_bin-1665"><a href="#get_bin-1665"><span class="linenos">1665</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="get_bin-1666"><a href="#get_bin-1666"><span class="linenos">1666</span></a>
</span><span id="get_bin-1667"><a href="#get_bin-1667"><span class="linenos">1667</span></a>    <span class="k">return</span> <span class="n">bin_file</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#get_bin">get_bin</a></code> function retrieves the path to a specified binary file from a configuration dictionary
or searches for it in the file system if it is not specified in the configuration.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>bin</strong>:  The <code>bin</code> parameter is a string or a pattern that represents the name of the binary file (e.g.,
<code>snpEff.jar</code>, <code>exomiser-cli*.jar</code>) that you want to retrieve the path for</li>
<li><strong>tool</strong>:  The <code>tool</code> parameter is a string that represents the name of the tool. It is used to
retrieve the path to the tool's binary file</li>
<li><strong>bin_type</strong>:  The <code>bin_type</code> parameter is a string that specifies the type of binary file to
search for in the config dict (e.g., <code>jar</code>, <code>bin</code>). In this case, the default value is "bin". A value "jar" indicates that the function is searching
for a JAR file. Defaults to bin</li>
<li><strong>config</strong>:  A dictionary containing configuration information for the snpEff tool, including the
path to the snpEff jar file. If no configuration is provided, an empty dictionary is used</li>
<li><strong>default_folder</strong>:  The <code>default_folder</code> parameter is a string that represents the default folder
where the tool binaries are located. If the <code>bin_file</code> is not found in the configuration dictionary
or in the file system, the function will search for it in this default folder</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>the path to the snpEff.jar file. If the file is not found, it returns None.</p>
</blockquote>
</div>


                </section>
                <section id="get_bin_command">
                            <input id="get_bin_command-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_bin_command</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="nb">bin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">tool</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">bin_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;bin&#39;</span>,</span><span class="param">	<span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>,</span><span class="param">	<span class="n">param</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>,</span><span class="param">	<span class="n">default_folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;/Users/lebechea/howard/tools&#39;</span>,</span><span class="param">	<span class="n">add_options</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="get_bin_command-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_bin_command"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_bin_command-1670"><a href="#get_bin_command-1670"><span class="linenos">1670</span></a><span class="k">def</span> <span class="nf">get_bin_command</span><span class="p">(</span>
</span><span id="get_bin_command-1671"><a href="#get_bin_command-1671"><span class="linenos">1671</span></a>    <span class="nb">bin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="get_bin_command-1672"><a href="#get_bin_command-1672"><span class="linenos">1672</span></a>    <span class="n">tool</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="get_bin_command-1673"><a href="#get_bin_command-1673"><span class="linenos">1673</span></a>    <span class="n">bin_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bin&quot;</span><span class="p">,</span>
</span><span id="get_bin_command-1674"><a href="#get_bin_command-1674"><span class="linenos">1674</span></a>    <span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="get_bin_command-1675"><a href="#get_bin_command-1675"><span class="linenos">1675</span></a>    <span class="n">param</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="get_bin_command-1676"><a href="#get_bin_command-1676"><span class="linenos">1676</span></a>    <span class="n">default_folder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT_TOOLS_FOLDER</span><span class="p">,</span>
</span><span id="get_bin_command-1677"><a href="#get_bin_command-1677"><span class="linenos">1677</span></a>    <span class="n">add_options</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="get_bin_command-1678"><a href="#get_bin_command-1678"><span class="linenos">1678</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="get_bin_command-1679"><a href="#get_bin_command-1679"><span class="linenos">1679</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_bin_command-1680"><a href="#get_bin_command-1680"><span class="linenos">1680</span></a><span class="sd">    The function `get_bin_command` generates a command based on the tool type (jar, java, docker) and</span>
</span><span id="get_bin_command-1681"><a href="#get_bin_command-1681"><span class="linenos">1681</span></a><span class="sd">    specified parameters.</span>
</span><span id="get_bin_command-1682"><a href="#get_bin_command-1682"><span class="linenos">1682</span></a>
</span><span id="get_bin_command-1683"><a href="#get_bin_command-1683"><span class="linenos">1683</span></a><span class="sd">    :param bin: The `bin` parameter in the `get_bin_command` function is used to specify the binary</span>
</span><span id="get_bin_command-1684"><a href="#get_bin_command-1684"><span class="linenos">1684</span></a><span class="sd">    executable file that you want to run. It is a string that represents the path or name of the binary</span>
</span><span id="get_bin_command-1685"><a href="#get_bin_command-1685"><span class="linenos">1685</span></a><span class="sd">    file. If you provide this parameter, the function will attempt to locate the binary file based on</span>
</span><span id="get_bin_command-1686"><a href="#get_bin_command-1686"><span class="linenos">1686</span></a><span class="sd">    the</span>
</span><span id="get_bin_command-1687"><a href="#get_bin_command-1687"><span class="linenos">1687</span></a><span class="sd">    :type bin: str</span>
</span><span id="get_bin_command-1688"><a href="#get_bin_command-1688"><span class="linenos">1688</span></a><span class="sd">    :param tool: The `tool` parameter in the `get_bin_command` function represents the name of the tool</span>
</span><span id="get_bin_command-1689"><a href="#get_bin_command-1689"><span class="linenos">1689</span></a><span class="sd">    for which you want to retrieve the command. It is used to identify the specific tool for which the</span>
</span><span id="get_bin_command-1690"><a href="#get_bin_command-1690"><span class="linenos">1690</span></a><span class="sd">    command is being generated</span>
</span><span id="get_bin_command-1691"><a href="#get_bin_command-1691"><span class="linenos">1691</span></a><span class="sd">    :type tool: str</span>
</span><span id="get_bin_command-1692"><a href="#get_bin_command-1692"><span class="linenos">1692</span></a><span class="sd">    :param bin_type: The `bin_type` parameter in the `get_bin_command` function specifies the type of</span>
</span><span id="get_bin_command-1693"><a href="#get_bin_command-1693"><span class="linenos">1693</span></a><span class="sd">    binary executable that the tool uses. It can have values like &quot;bin&quot;, &quot;jar&quot;, &quot;java&quot;, &quot;docker&quot;, etc.,</span>
</span><span id="get_bin_command-1694"><a href="#get_bin_command-1694"><span class="linenos">1694</span></a><span class="sd">    depending on the type of tool being executed. The function uses this parameter to determine,</span>
</span><span id="get_bin_command-1695"><a href="#get_bin_command-1695"><span class="linenos">1695</span></a><span class="sd">    defaults to bin</span>
</span><span id="get_bin_command-1696"><a href="#get_bin_command-1696"><span class="linenos">1696</span></a><span class="sd">    :type bin_type: str (optional)</span>
</span><span id="get_bin_command-1697"><a href="#get_bin_command-1697"><span class="linenos">1697</span></a><span class="sd">    :param config: The `config` parameter in the `get_bin_command` function is a dictionary that holds</span>
</span><span id="get_bin_command-1698"><a href="#get_bin_command-1698"><span class="linenos">1698</span></a><span class="sd">    configuration settings for the tool being used. It can include various settings such as paths,</span>
</span><span id="get_bin_command-1699"><a href="#get_bin_command-1699"><span class="linenos">1699</span></a><span class="sd">    environment variables, or any other configuration options needed for the tool to run properly</span>
</span><span id="get_bin_command-1700"><a href="#get_bin_command-1700"><span class="linenos">1700</span></a><span class="sd">    :type config: dict</span>
</span><span id="get_bin_command-1701"><a href="#get_bin_command-1701"><span class="linenos">1701</span></a><span class="sd">    :param param: The `param` parameter in the `get_bin_command` function is a dictionary that contains</span>
</span><span id="get_bin_command-1702"><a href="#get_bin_command-1702"><span class="linenos">1702</span></a><span class="sd">    additional parameters or configurations for the tool being executed. These parameters can be used to</span>
</span><span id="get_bin_command-1703"><a href="#get_bin_command-1703"><span class="linenos">1703</span></a><span class="sd">    customize the behavior or settings of the tool when generating the command for execution. The</span>
</span><span id="get_bin_command-1704"><a href="#get_bin_command-1704"><span class="linenos">1704</span></a><span class="sd">    function uses the `param` dictionary along with the</span>
</span><span id="get_bin_command-1705"><a href="#get_bin_command-1705"><span class="linenos">1705</span></a><span class="sd">    :type param: dict</span>
</span><span id="get_bin_command-1706"><a href="#get_bin_command-1706"><span class="linenos">1706</span></a><span class="sd">    :param default_folder: The `default_folder` parameter in the `get_bin_command` function is used to</span>
</span><span id="get_bin_command-1707"><a href="#get_bin_command-1707"><span class="linenos">1707</span></a><span class="sd">    specify the default folder where the tools are located. If a specific folder is not provided when</span>
</span><span id="get_bin_command-1708"><a href="#get_bin_command-1708"><span class="linenos">1708</span></a><span class="sd">    calling the function, it will default to the value of `DEFAULT_TOOLS_FOLDER`</span>
</span><span id="get_bin_command-1709"><a href="#get_bin_command-1709"><span class="linenos">1709</span></a><span class="sd">    :type default_folder: str</span>
</span><span id="get_bin_command-1710"><a href="#get_bin_command-1710"><span class="linenos">1710</span></a><span class="sd">    :param add_options: The `add_options` parameter in the `get_bin_command` function allows you to pass</span>
</span><span id="get_bin_command-1711"><a href="#get_bin_command-1711"><span class="linenos">1711</span></a><span class="sd">    additional options or arguments to the command being constructed based on the tool type. These</span>
</span><span id="get_bin_command-1712"><a href="#get_bin_command-1712"><span class="linenos">1712</span></a><span class="sd">    additional options can be specific configurations, flags, or any other parameters that you want to</span>
</span><span id="get_bin_command-1713"><a href="#get_bin_command-1713"><span class="linenos">1713</span></a><span class="sd">    include in the final command. When provided,</span>
</span><span id="get_bin_command-1714"><a href="#get_bin_command-1714"><span class="linenos">1714</span></a><span class="sd">    :type add_options: str</span>
</span><span id="get_bin_command-1715"><a href="#get_bin_command-1715"><span class="linenos">1715</span></a><span class="sd">    :return: The `get_bin_command` function returns a string representing the command to execute a</span>
</span><span id="get_bin_command-1716"><a href="#get_bin_command-1716"><span class="linenos">1716</span></a><span class="sd">    specific tool based on the provided parameters. The returned command can be either a Java command</span>
</span><span id="get_bin_command-1717"><a href="#get_bin_command-1717"><span class="linenos">1717</span></a><span class="sd">    for running a JAR file or a Docker command for running a Docker image/container. If the tool type is</span>
</span><span id="get_bin_command-1718"><a href="#get_bin_command-1718"><span class="linenos">1718</span></a><span class="sd">    not Java or Docker, it returns the default tool bin.</span>
</span><span id="get_bin_command-1719"><a href="#get_bin_command-1719"><span class="linenos">1719</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_bin_command-1720"><a href="#get_bin_command-1720"><span class="linenos">1720</span></a>
</span><span id="get_bin_command-1721"><a href="#get_bin_command-1721"><span class="linenos">1721</span></a>    <span class="c1"># Tool bin and type</span>
</span><span id="get_bin_command-1722"><a href="#get_bin_command-1722"><span class="linenos">1722</span></a>    <span class="n">tool_bin</span> <span class="o">=</span> <span class="n">get_bin</span><span class="p">(</span>
</span><span id="get_bin_command-1723"><a href="#get_bin_command-1723"><span class="linenos">1723</span></a>        <span class="nb">bin</span><span class="o">=</span><span class="nb">bin</span><span class="p">,</span>
</span><span id="get_bin_command-1724"><a href="#get_bin_command-1724"><span class="linenos">1724</span></a>        <span class="n">tool</span><span class="o">=</span><span class="n">tool</span><span class="p">,</span>
</span><span id="get_bin_command-1725"><a href="#get_bin_command-1725"><span class="linenos">1725</span></a>        <span class="n">bin_type</span><span class="o">=</span><span class="n">bin_type</span><span class="p">,</span>
</span><span id="get_bin_command-1726"><a href="#get_bin_command-1726"><span class="linenos">1726</span></a>        <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
</span><span id="get_bin_command-1727"><a href="#get_bin_command-1727"><span class="linenos">1727</span></a>        <span class="n">default_folder</span><span class="o">=</span><span class="n">default_folder</span><span class="p">,</span>
</span><span id="get_bin_command-1728"><a href="#get_bin_command-1728"><span class="linenos">1728</span></a>    <span class="p">)</span>
</span><span id="get_bin_command-1729"><a href="#get_bin_command-1729"><span class="linenos">1729</span></a>    <span class="n">tool_bin_type</span> <span class="o">=</span> <span class="n">get_bin</span><span class="p">(</span>
</span><span id="get_bin_command-1730"><a href="#get_bin_command-1730"><span class="linenos">1730</span></a>        <span class="nb">bin</span><span class="o">=</span><span class="nb">bin</span><span class="p">,</span>
</span><span id="get_bin_command-1731"><a href="#get_bin_command-1731"><span class="linenos">1731</span></a>        <span class="n">tool</span><span class="o">=</span><span class="n">tool</span><span class="p">,</span>
</span><span id="get_bin_command-1732"><a href="#get_bin_command-1732"><span class="linenos">1732</span></a>        <span class="n">bin_type</span><span class="o">=</span><span class="n">bin_type</span><span class="p">,</span>
</span><span id="get_bin_command-1733"><a href="#get_bin_command-1733"><span class="linenos">1733</span></a>        <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
</span><span id="get_bin_command-1734"><a href="#get_bin_command-1734"><span class="linenos">1734</span></a>        <span class="n">output_type</span><span class="o">=</span><span class="s2">&quot;type&quot;</span><span class="p">,</span>
</span><span id="get_bin_command-1735"><a href="#get_bin_command-1735"><span class="linenos">1735</span></a>        <span class="n">default_folder</span><span class="o">=</span><span class="n">default_folder</span><span class="p">,</span>
</span><span id="get_bin_command-1736"><a href="#get_bin_command-1736"><span class="linenos">1736</span></a>    <span class="p">)</span>
</span><span id="get_bin_command-1737"><a href="#get_bin_command-1737"><span class="linenos">1737</span></a>
</span><span id="get_bin_command-1738"><a href="#get_bin_command-1738"><span class="linenos">1738</span></a>    <span class="c1"># Threads and memory</span>
</span><span id="get_bin_command-1739"><a href="#get_bin_command-1739"><span class="linenos">1739</span></a>    <span class="n">threads</span> <span class="o">=</span> <span class="n">get_threads</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="n">param</span><span class="p">)</span>
</span><span id="get_bin_command-1740"><a href="#get_bin_command-1740"><span class="linenos">1740</span></a>    <span class="n">memory</span> <span class="o">=</span> <span class="n">extract_memory_in_go</span><span class="p">(</span><span class="n">get_memory</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="n">param</span><span class="p">))</span>
</span><span id="get_bin_command-1741"><a href="#get_bin_command-1741"><span class="linenos">1741</span></a>    <span class="n">tmp</span> <span class="o">=</span> <span class="n">get_tmp</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="n">param</span><span class="p">)</span>
</span><span id="get_bin_command-1742"><a href="#get_bin_command-1742"><span class="linenos">1742</span></a>    <span class="c1"># Java and jar command</span>
</span><span id="get_bin_command-1743"><a href="#get_bin_command-1743"><span class="linenos">1743</span></a>    <span class="k">if</span> <span class="n">tool_bin_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;jar&quot;</span><span class="p">,</span> <span class="s2">&quot;java&quot;</span><span class="p">]:</span>
</span><span id="get_bin_command-1744"><a href="#get_bin_command-1744"><span class="linenos">1744</span></a>
</span><span id="get_bin_command-1745"><a href="#get_bin_command-1745"><span class="linenos">1745</span></a>        <span class="c1"># Find java bin</span>
</span><span id="get_bin_command-1746"><a href="#get_bin_command-1746"><span class="linenos">1746</span></a>        <span class="n">java_bin</span> <span class="o">=</span> <span class="n">get_bin</span><span class="p">(</span><span class="n">tool</span><span class="o">=</span><span class="s2">&quot;java&quot;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="get_bin_command-1747"><a href="#get_bin_command-1747"><span class="linenos">1747</span></a>
</span><span id="get_bin_command-1748"><a href="#get_bin_command-1748"><span class="linenos">1748</span></a>        <span class="c1"># Java options</span>
</span><span id="get_bin_command-1749"><a href="#get_bin_command-1749"><span class="linenos">1749</span></a>        <span class="n">java_options</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="get_bin_command-1750"><a href="#get_bin_command-1750"><span class="linenos">1750</span></a>
</span><span id="get_bin_command-1751"><a href="#get_bin_command-1751"><span class="linenos">1751</span></a>        <span class="c1"># Threads</span>
</span><span id="get_bin_command-1752"><a href="#get_bin_command-1752"><span class="linenos">1752</span></a>        <span class="k">if</span> <span class="n">threads</span><span class="p">:</span>
</span><span id="get_bin_command-1753"><a href="#get_bin_command-1753"><span class="linenos">1753</span></a>            <span class="n">java_options</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; -XX:ParallelGCThreads=</span><span class="si">{</span><span class="n">threads</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="get_bin_command-1754"><a href="#get_bin_command-1754"><span class="linenos">1754</span></a>
</span><span id="get_bin_command-1755"><a href="#get_bin_command-1755"><span class="linenos">1755</span></a>        <span class="c1"># Memory</span>
</span><span id="get_bin_command-1756"><a href="#get_bin_command-1756"><span class="linenos">1756</span></a>        <span class="k">if</span> <span class="n">memory</span><span class="p">:</span>
</span><span id="get_bin_command-1757"><a href="#get_bin_command-1757"><span class="linenos">1757</span></a>            <span class="n">java_options</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; -XX:MaxHeapSize=</span><span class="si">{</span><span class="n">memory</span><span class="si">}</span><span class="s2">G &quot;</span>
</span><span id="get_bin_command-1758"><a href="#get_bin_command-1758"><span class="linenos">1758</span></a>
</span><span id="get_bin_command-1759"><a href="#get_bin_command-1759"><span class="linenos">1759</span></a>        <span class="c1"># Additional options</span>
</span><span id="get_bin_command-1760"><a href="#get_bin_command-1760"><span class="linenos">1760</span></a>        <span class="k">if</span> <span class="n">add_options</span><span class="p">:</span>
</span><span id="get_bin_command-1761"><a href="#get_bin_command-1761"><span class="linenos">1761</span></a>            <span class="n">java_options</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">add_options</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="get_bin_command-1762"><a href="#get_bin_command-1762"><span class="linenos">1762</span></a>
</span><span id="get_bin_command-1763"><a href="#get_bin_command-1763"><span class="linenos">1763</span></a>        <span class="c1"># Java Command for tool</span>
</span><span id="get_bin_command-1764"><a href="#get_bin_command-1764"><span class="linenos">1764</span></a>        <span class="n">tool_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">java_bin</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">java_options</span><span class="si">}</span><span class="s2"> -jar </span><span class="si">{</span><span class="n">tool_bin</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="get_bin_command-1765"><a href="#get_bin_command-1765"><span class="linenos">1765</span></a>        <span class="c1"># Return tool java command</span>
</span><span id="get_bin_command-1766"><a href="#get_bin_command-1766"><span class="linenos">1766</span></a>        <span class="k">return</span> <span class="n">tool_command</span>
</span><span id="get_bin_command-1767"><a href="#get_bin_command-1767"><span class="linenos">1767</span></a>
</span><span id="get_bin_command-1768"><a href="#get_bin_command-1768"><span class="linenos">1768</span></a>    <span class="c1"># Docker command</span>
</span><span id="get_bin_command-1769"><a href="#get_bin_command-1769"><span class="linenos">1769</span></a>    <span class="k">elif</span> <span class="n">tool_bin_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;docker&quot;</span><span class="p">]:</span>
</span><span id="get_bin_command-1770"><a href="#get_bin_command-1770"><span class="linenos">1770</span></a>
</span><span id="get_bin_command-1771"><a href="#get_bin_command-1771"><span class="linenos">1771</span></a>        <span class="c1"># Find docker bin</span>
</span><span id="get_bin_command-1772"><a href="#get_bin_command-1772"><span class="linenos">1772</span></a>        <span class="n">docker_bin</span> <span class="o">=</span> <span class="n">get_bin</span><span class="p">(</span><span class="n">tool</span><span class="o">=</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="get_bin_command-1773"><a href="#get_bin_command-1773"><span class="linenos">1773</span></a>
</span><span id="get_bin_command-1774"><a href="#get_bin_command-1774"><span class="linenos">1774</span></a>        <span class="c1"># Docker param for tool</span>
</span><span id="get_bin_command-1775"><a href="#get_bin_command-1775"><span class="linenos">1775</span></a>        <span class="n">tool_bin_dict</span> <span class="o">=</span> <span class="n">get_bin</span><span class="p">(</span>
</span><span id="get_bin_command-1776"><a href="#get_bin_command-1776"><span class="linenos">1776</span></a>            <span class="n">tool</span><span class="o">=</span><span class="n">tool</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">bin_type</span><span class="o">=</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="n">output_type</span><span class="o">=</span><span class="s2">&quot;dict&quot;</span>
</span><span id="get_bin_command-1777"><a href="#get_bin_command-1777"><span class="linenos">1777</span></a>        <span class="p">)</span>
</span><span id="get_bin_command-1778"><a href="#get_bin_command-1778"><span class="linenos">1778</span></a>        <span class="n">tool_bin_docker_image</span> <span class="o">=</span> <span class="n">tool_bin_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="get_bin_command-1779"><a href="#get_bin_command-1779"><span class="linenos">1779</span></a>        <span class="n">tool_bin_docker_entrypoint</span> <span class="o">=</span> <span class="n">tool_bin_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entrypoint&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="get_bin_command-1780"><a href="#get_bin_command-1780"><span class="linenos">1780</span></a>        <span class="n">tool_bin_docker_command</span> <span class="o">=</span> <span class="n">tool_bin_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;command&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="get_bin_command-1781"><a href="#get_bin_command-1781"><span class="linenos">1781</span></a>        <span class="n">tool_bin_docker_options</span> <span class="o">=</span> <span class="n">tool_bin_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;options&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="get_bin_command-1782"><a href="#get_bin_command-1782"><span class="linenos">1782</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">tool_bin_docker_image</span><span class="p">:</span>
</span><span id="get_bin_command-1783"><a href="#get_bin_command-1783"><span class="linenos">1783</span></a>            <span class="n">msg_error</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Error in Docker command for tool &#39;</span><span class="si">{</span><span class="n">tool</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
</span><span id="get_bin_command-1784"><a href="#get_bin_command-1784"><span class="linenos">1784</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg_error</span><span class="p">)</span>
</span><span id="get_bin_command-1785"><a href="#get_bin_command-1785"><span class="linenos">1785</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg_error</span><span class="p">)</span>
</span><span id="get_bin_command-1786"><a href="#get_bin_command-1786"><span class="linenos">1786</span></a>
</span><span id="get_bin_command-1787"><a href="#get_bin_command-1787"><span class="linenos">1787</span></a>        <span class="c1"># Create default param</span>
</span><span id="get_bin_command-1788"><a href="#get_bin_command-1788"><span class="linenos">1788</span></a>        <span class="n">tool_bin_docker_params</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="get_bin_command-1789"><a href="#get_bin_command-1789"><span class="linenos">1789</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="get_bin_command-1790"><a href="#get_bin_command-1790"><span class="linenos">1790</span></a>            <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tools&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1791"><a href="#get_bin_command-1791"><span class="linenos">1791</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1792"><a href="#get_bin_command-1792"><span class="linenos">1792</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1793"><a href="#get_bin_command-1793"><span class="linenos">1793</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1794"><a href="#get_bin_command-1794"><span class="linenos">1794</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;notremove&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="get_bin_command-1795"><a href="#get_bin_command-1795"><span class="linenos">1795</span></a>            <span class="ow">is</span> <span class="kc">True</span>
</span><span id="get_bin_command-1796"><a href="#get_bin_command-1796"><span class="linenos">1796</span></a>        <span class="p">):</span>
</span><span id="get_bin_command-1797"><a href="#get_bin_command-1797"><span class="linenos">1797</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span>
</span><span id="get_bin_command-1798"><a href="#get_bin_command-1798"><span class="linenos">1798</span></a>        <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;notremove&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="get_bin_command-1799"><a href="#get_bin_command-1799"><span class="linenos">1799</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span>
</span><span id="get_bin_command-1800"><a href="#get_bin_command-1800"><span class="linenos">1800</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="get_bin_command-1801"><a href="#get_bin_command-1801"><span class="linenos">1801</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="s2">&quot; --rm &quot;</span>
</span><span id="get_bin_command-1802"><a href="#get_bin_command-1802"><span class="linenos">1802</span></a>
</span><span id="get_bin_command-1803"><a href="#get_bin_command-1803"><span class="linenos">1803</span></a>        <span class="c1"># Temp folder by default</span>
</span><span id="get_bin_command-1804"><a href="#get_bin_command-1804"><span class="linenos">1804</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="get_bin_command-1805"><a href="#get_bin_command-1805"><span class="linenos">1805</span></a>            <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tools&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1806"><a href="#get_bin_command-1806"><span class="linenos">1806</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1807"><a href="#get_bin_command-1807"><span class="linenos">1807</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1808"><a href="#get_bin_command-1808"><span class="linenos">1808</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1809"><a href="#get_bin_command-1809"><span class="linenos">1809</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="get_bin_command-1810"><a href="#get_bin_command-1810"><span class="linenos">1810</span></a>            <span class="ow">is</span> <span class="kc">True</span>
</span><span id="get_bin_command-1811"><a href="#get_bin_command-1811"><span class="linenos">1811</span></a>        <span class="p">):</span>
</span><span id="get_bin_command-1812"><a href="#get_bin_command-1812"><span class="linenos">1812</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; -v </span><span class="si">{</span><span class="n">tmp</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">tmp</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="get_bin_command-1813"><a href="#get_bin_command-1813"><span class="linenos">1813</span></a>        <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="get_bin_command-1814"><a href="#get_bin_command-1814"><span class="linenos">1814</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; -v </span><span class="si">{</span><span class="n">tmp</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">tmp</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="get_bin_command-1815"><a href="#get_bin_command-1815"><span class="linenos">1815</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="get_bin_command-1816"><a href="#get_bin_command-1816"><span class="linenos">1816</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span>
</span><span id="get_bin_command-1817"><a href="#get_bin_command-1817"><span class="linenos">1817</span></a>
</span><span id="get_bin_command-1818"><a href="#get_bin_command-1818"><span class="linenos">1818</span></a>        <span class="c1"># Threads</span>
</span><span id="get_bin_command-1819"><a href="#get_bin_command-1819"><span class="linenos">1819</span></a>        <span class="k">if</span> <span class="n">threads</span><span class="p">:</span>
</span><span id="get_bin_command-1820"><a href="#get_bin_command-1820"><span class="linenos">1820</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; --cpus=</span><span class="si">{</span><span class="n">threads</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="get_bin_command-1821"><a href="#get_bin_command-1821"><span class="linenos">1821</span></a>
</span><span id="get_bin_command-1822"><a href="#get_bin_command-1822"><span class="linenos">1822</span></a>        <span class="c1"># Memory</span>
</span><span id="get_bin_command-1823"><a href="#get_bin_command-1823"><span class="linenos">1823</span></a>        <span class="k">if</span> <span class="n">memory</span><span class="p">:</span>
</span><span id="get_bin_command-1824"><a href="#get_bin_command-1824"><span class="linenos">1824</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; --memory=</span><span class="si">{</span><span class="n">memory</span><span class="si">}</span><span class="s2">g &quot;</span>
</span><span id="get_bin_command-1825"><a href="#get_bin_command-1825"><span class="linenos">1825</span></a>
</span><span id="get_bin_command-1826"><a href="#get_bin_command-1826"><span class="linenos">1826</span></a>        <span class="k">def</span> <span class="nf">mount_folder</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
</span><span id="get_bin_command-1827"><a href="#get_bin_command-1827"><span class="linenos">1827</span></a>            <span class="n">add_options</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="get_bin_command-1828"><a href="#get_bin_command-1828"><span class="linenos">1828</span></a>            <span class="k">for</span> <span class="n">databases</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="p">(</span>
</span><span id="get_bin_command-1829"><a href="#get_bin_command-1829"><span class="linenos">1829</span></a>                <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;folders&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;databases&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="get_bin_command-1830"><a href="#get_bin_command-1830"><span class="linenos">1830</span></a>            <span class="p">):</span>
</span><span id="get_bin_command-1831"><a href="#get_bin_command-1831"><span class="linenos">1831</span></a>                <span class="k">if</span> <span class="n">path</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="get_bin_command-1832"><a href="#get_bin_command-1832"><span class="linenos">1832</span></a>                    <span class="n">add_options</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; -v </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">:ro&quot;</span>
</span><span id="get_bin_command-1833"><a href="#get_bin_command-1833"><span class="linenos">1833</span></a>                <span class="k">elif</span> <span class="n">path</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="get_bin_command-1834"><a href="#get_bin_command-1834"><span class="linenos">1834</span></a>                    <span class="k">for</span> <span class="n">pathlist</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
</span><span id="get_bin_command-1835"><a href="#get_bin_command-1835"><span class="linenos">1835</span></a>                        <span class="n">add_options</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; -v </span><span class="si">{</span><span class="n">pathlist</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">pathlist</span><span class="si">}</span><span class="s2">:ro&quot;</span>
</span><span id="get_bin_command-1836"><a href="#get_bin_command-1836"><span class="linenos">1836</span></a>            <span class="k">return</span> <span class="n">add_options</span>
</span><span id="get_bin_command-1837"><a href="#get_bin_command-1837"><span class="linenos">1837</span></a>
</span><span id="get_bin_command-1838"><a href="#get_bin_command-1838"><span class="linenos">1838</span></a>        <span class="c1"># Init docker param</span>
</span><span id="get_bin_command-1839"><a href="#get_bin_command-1839"><span class="linenos">1839</span></a>        <span class="k">if</span> <span class="n">tool_bin_docker_options</span><span class="p">:</span>
</span><span id="get_bin_command-1840"><a href="#get_bin_command-1840"><span class="linenos">1840</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">tool_bin_docker_options</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="get_bin_command-1841"><a href="#get_bin_command-1841"><span class="linenos">1841</span></a>
</span><span id="get_bin_command-1842"><a href="#get_bin_command-1842"><span class="linenos">1842</span></a>        <span class="c1"># Mount folder only</span>
</span><span id="get_bin_command-1843"><a href="#get_bin_command-1843"><span class="linenos">1843</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="get_bin_command-1844"><a href="#get_bin_command-1844"><span class="linenos">1844</span></a>            <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tools&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1845"><a href="#get_bin_command-1845"><span class="linenos">1845</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1846"><a href="#get_bin_command-1846"><span class="linenos">1846</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1847"><a href="#get_bin_command-1847"><span class="linenos">1847</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1848"><a href="#get_bin_command-1848"><span class="linenos">1848</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;automount&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="get_bin_command-1849"><a href="#get_bin_command-1849"><span class="linenos">1849</span></a>            <span class="ow">is</span> <span class="kc">False</span>
</span><span id="get_bin_command-1850"><a href="#get_bin_command-1850"><span class="linenos">1850</span></a>        <span class="p">):</span>
</span><span id="get_bin_command-1851"><a href="#get_bin_command-1851"><span class="linenos">1851</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="n">mount_folder</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="get_bin_command-1852"><a href="#get_bin_command-1852"><span class="linenos">1852</span></a>        <span class="k">elif</span> <span class="p">(</span>
</span><span id="get_bin_command-1853"><a href="#get_bin_command-1853"><span class="linenos">1853</span></a>            <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tools&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1854"><a href="#get_bin_command-1854"><span class="linenos">1854</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1855"><a href="#get_bin_command-1855"><span class="linenos">1855</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1856"><a href="#get_bin_command-1856"><span class="linenos">1856</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_bin_command-1857"><a href="#get_bin_command-1857"><span class="linenos">1857</span></a>            <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;automount&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="get_bin_command-1858"><a href="#get_bin_command-1858"><span class="linenos">1858</span></a>            <span class="ow">is</span> <span class="kc">True</span>
</span><span id="get_bin_command-1859"><a href="#get_bin_command-1859"><span class="linenos">1859</span></a>        <span class="p">):</span>
</span><span id="get_bin_command-1860"><a href="#get_bin_command-1860"><span class="linenos">1860</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="n">docker_automount</span><span class="p">()</span>
</span><span id="get_bin_command-1861"><a href="#get_bin_command-1861"><span class="linenos">1861</span></a>        <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;automount&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="get_bin_command-1862"><a href="#get_bin_command-1862"><span class="linenos">1862</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="n">mount_folder</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="get_bin_command-1863"><a href="#get_bin_command-1863"><span class="linenos">1863</span></a>        <span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;automount&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="get_bin_command-1864"><a href="#get_bin_command-1864"><span class="linenos">1864</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="n">docker_automount</span><span class="p">()</span>
</span><span id="get_bin_command-1865"><a href="#get_bin_command-1865"><span class="linenos">1865</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="get_bin_command-1866"><a href="#get_bin_command-1866"><span class="linenos">1866</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="n">mount_folder</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="get_bin_command-1867"><a href="#get_bin_command-1867"><span class="linenos">1867</span></a>
</span><span id="get_bin_command-1868"><a href="#get_bin_command-1868"><span class="linenos">1868</span></a>        <span class="c1"># Entrypoint</span>
</span><span id="get_bin_command-1869"><a href="#get_bin_command-1869"><span class="linenos">1869</span></a>        <span class="k">if</span> <span class="n">tool_bin_docker_entrypoint</span><span class="p">:</span>
</span><span id="get_bin_command-1870"><a href="#get_bin_command-1870"><span class="linenos">1870</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; --entrypoint=&#39;</span><span class="si">{</span><span class="n">tool_bin_docker_entrypoint</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
</span><span id="get_bin_command-1871"><a href="#get_bin_command-1871"><span class="linenos">1871</span></a>
</span><span id="get_bin_command-1872"><a href="#get_bin_command-1872"><span class="linenos">1872</span></a>        <span class="c1"># Additional options</span>
</span><span id="get_bin_command-1873"><a href="#get_bin_command-1873"><span class="linenos">1873</span></a>        <span class="k">if</span> <span class="n">add_options</span><span class="p">:</span>
</span><span id="get_bin_command-1874"><a href="#get_bin_command-1874"><span class="linenos">1874</span></a>            <span class="n">tool_bin_docker_params</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">add_options</span><span class="si">}</span><span class="s2"> &quot;</span>
</span><span id="get_bin_command-1875"><a href="#get_bin_command-1875"><span class="linenos">1875</span></a>
</span><span id="get_bin_command-1876"><a href="#get_bin_command-1876"><span class="linenos">1876</span></a>        <span class="c1"># Additioanl command</span>
</span><span id="get_bin_command-1877"><a href="#get_bin_command-1877"><span class="linenos">1877</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">tool_bin_docker_command</span><span class="p">:</span>
</span><span id="get_bin_command-1878"><a href="#get_bin_command-1878"><span class="linenos">1878</span></a>            <span class="n">tool_bin_docker_command</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="get_bin_command-1879"><a href="#get_bin_command-1879"><span class="linenos">1879</span></a>
</span><span id="get_bin_command-1880"><a href="#get_bin_command-1880"><span class="linenos">1880</span></a>        <span class="c1"># Docker command</span>
</span><span id="get_bin_command-1881"><a href="#get_bin_command-1881"><span class="linenos">1881</span></a>        <span class="n">tool_command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">docker_bin</span><span class="si">}</span><span class="s2"> run </span><span class="si">{</span><span class="n">tool_bin_docker_params</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">tool_bin_docker_image</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">tool_bin_docker_command</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="get_bin_command-1882"><a href="#get_bin_command-1882"><span class="linenos">1882</span></a>
</span><span id="get_bin_command-1883"><a href="#get_bin_command-1883"><span class="linenos">1883</span></a>        <span class="c1"># Return tool docker command</span>
</span><span id="get_bin_command-1884"><a href="#get_bin_command-1884"><span class="linenos">1884</span></a>        <span class="k">return</span> <span class="n">tool_command</span>
</span><span id="get_bin_command-1885"><a href="#get_bin_command-1885"><span class="linenos">1885</span></a>
</span><span id="get_bin_command-1886"><a href="#get_bin_command-1886"><span class="linenos">1886</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="get_bin_command-1887"><a href="#get_bin_command-1887"><span class="linenos">1887</span></a>        <span class="k">return</span> <span class="n">tool_bin</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#get_bin_command">get_bin_command</a></code> generates a command based on the tool type (jar, java, docker) and
specified parameters.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>bin</strong>:  The <code>bin</code> parameter in the <code><a href="#get_bin_command">get_bin_command</a></code> function is used to specify the binary
executable file that you want to run. It is a string that represents the path or name of the binary
file. If you provide this parameter, the function will attempt to locate the binary file based on
the</li>
<li><strong>tool</strong>:  The <code>tool</code> parameter in the <code><a href="#get_bin_command">get_bin_command</a></code> function represents the name of the tool
for which you want to retrieve the command. It is used to identify the specific tool for which the
command is being generated</li>
<li><strong>bin_type</strong>:  The <code>bin_type</code> parameter in the <code><a href="#get_bin_command">get_bin_command</a></code> function specifies the type of
binary executable that the tool uses. It can have values like "bin", "jar", "java", "docker", etc.,
depending on the type of tool being executed. The function uses this parameter to determine,
defaults to bin</li>
<li><strong>config</strong>:  The <code>config</code> parameter in the <code><a href="#get_bin_command">get_bin_command</a></code> function is a dictionary that holds
configuration settings for the tool being used. It can include various settings such as paths,
environment variables, or any other configuration options needed for the tool to run properly</li>
<li><strong>param</strong>:  The <code>param</code> parameter in the <code><a href="#get_bin_command">get_bin_command</a></code> function is a dictionary that contains
additional parameters or configurations for the tool being executed. These parameters can be used to
customize the behavior or settings of the tool when generating the command for execution. The
function uses the <code>param</code> dictionary along with the</li>
<li><strong>default_folder</strong>:  The <code>default_folder</code> parameter in the <code><a href="#get_bin_command">get_bin_command</a></code> function is used to
specify the default folder where the tools are located. If a specific folder is not provided when
calling the function, it will default to the value of <code><a href="#DEFAULT_TOOLS_FOLDER">DEFAULT_TOOLS_FOLDER</a></code></li>
<li><strong>add_options</strong>:  The <code>add_options</code> parameter in the <code><a href="#get_bin_command">get_bin_command</a></code> function allows you to pass
additional options or arguments to the command being constructed based on the tool type. These
additional options can be specific configurations, flags, or any other parameters that you want to
include in the final command. When provided,</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The <code><a href="#get_bin_command">get_bin_command</a></code> function returns a string representing the command to execute a
  specific tool based on the provided parameters. The returned command can be either a Java command
  for running a JAR file or a Docker command for running a Docker image/container. If the tool type is
  not Java or Docker, it returns the default tool bin.</p>
</blockquote>
</div>


                </section>
                <section id="get_tmp">
                            <input id="get_tmp-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_tmp</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>, </span><span class="param"><span class="n">param</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span>, </span><span class="param"><span class="n">default_tmp</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;/tmp&#39;</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="get_tmp-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_tmp"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_tmp-1890"><a href="#get_tmp-1890"><span class="linenos">1890</span></a><span class="k">def</span> <span class="nf">get_tmp</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">param</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">default_tmp</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;/tmp&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="get_tmp-1891"><a href="#get_tmp-1891"><span class="linenos">1891</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_tmp-1892"><a href="#get_tmp-1892"><span class="linenos">1892</span></a><span class="sd">    The `get_tmp` function returns the value of the &quot;tmp&quot; parameter from either the `param` dictionary,</span>
</span><span id="get_tmp-1893"><a href="#get_tmp-1893"><span class="linenos">1893</span></a><span class="sd">    `config` dictionary, or a default value &quot;/tmp&quot;.</span>
</span><span id="get_tmp-1894"><a href="#get_tmp-1894"><span class="linenos">1894</span></a>
</span><span id="get_tmp-1895"><a href="#get_tmp-1895"><span class="linenos">1895</span></a><span class="sd">    :param config: Config is a dictionary that contains configuration settings for the function. It is</span>
</span><span id="get_tmp-1896"><a href="#get_tmp-1896"><span class="linenos">1896</span></a><span class="sd">    an optional parameter with a default value of an empty dictionary. It can be used to provide</span>
</span><span id="get_tmp-1897"><a href="#get_tmp-1897"><span class="linenos">1897</span></a><span class="sd">    additional configuration settings to the function `get_tmp`</span>
</span><span id="get_tmp-1898"><a href="#get_tmp-1898"><span class="linenos">1898</span></a><span class="sd">    :type config: dict</span>
</span><span id="get_tmp-1899"><a href="#get_tmp-1899"><span class="linenos">1899</span></a><span class="sd">    :param param: The `param` parameter is a dictionary containing parameters that can be passed to the</span>
</span><span id="get_tmp-1900"><a href="#get_tmp-1900"><span class="linenos">1900</span></a><span class="sd">    function `get_tmp`. It can include various key-value pairs, but in this context, the function</span>
</span><span id="get_tmp-1901"><a href="#get_tmp-1901"><span class="linenos">1901</span></a><span class="sd">    specifically looks for the key &quot;tmp&quot; within the `param` dictionary to determine the temporary path</span>
</span><span id="get_tmp-1902"><a href="#get_tmp-1902"><span class="linenos">1902</span></a><span class="sd">    value. If the &quot;</span>
</span><span id="get_tmp-1903"><a href="#get_tmp-1903"><span class="linenos">1903</span></a><span class="sd">    :type param: dict</span>
</span><span id="get_tmp-1904"><a href="#get_tmp-1904"><span class="linenos">1904</span></a><span class="sd">    :param default_tmp: The `default_tmp` parameter in the `get_tmp` function is a string that</span>
</span><span id="get_tmp-1905"><a href="#get_tmp-1905"><span class="linenos">1905</span></a><span class="sd">    represents the default path for temporary files. If the &quot;tmp&quot; key is not found in the `param`</span>
</span><span id="get_tmp-1906"><a href="#get_tmp-1906"><span class="linenos">1906</span></a><span class="sd">    dictionary or the `config` dictionary, the function will return this `default_tmp` value, which is,</span>
</span><span id="get_tmp-1907"><a href="#get_tmp-1907"><span class="linenos">1907</span></a><span class="sd">    defaults to /tmp</span>
</span><span id="get_tmp-1908"><a href="#get_tmp-1908"><span class="linenos">1908</span></a><span class="sd">    :type default_tmp: str (optional)</span>
</span><span id="get_tmp-1909"><a href="#get_tmp-1909"><span class="linenos">1909</span></a><span class="sd">    :return: The function `get_tmp` returns the value of the &quot;tmp&quot; key from the `param` dictionary if it</span>
</span><span id="get_tmp-1910"><a href="#get_tmp-1910"><span class="linenos">1910</span></a><span class="sd">    exists. If the &quot;tmp&quot; key is not found in the `param` dictionary, it returns the value of the &quot;tmp&quot;</span>
</span><span id="get_tmp-1911"><a href="#get_tmp-1911"><span class="linenos">1911</span></a><span class="sd">    key from the `config` dictionary. If neither key is found in `param` or `config`, it returns the</span>
</span><span id="get_tmp-1912"><a href="#get_tmp-1912"><span class="linenos">1912</span></a><span class="sd">    default value &quot;/tmp&quot;.</span>
</span><span id="get_tmp-1913"><a href="#get_tmp-1913"><span class="linenos">1913</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_tmp-1914"><a href="#get_tmp-1914"><span class="linenos">1914</span></a>
</span><span id="get_tmp-1915"><a href="#get_tmp-1915"><span class="linenos">1915</span></a>    <span class="c1"># Tmp in param or config</span>
</span><span id="get_tmp-1916"><a href="#get_tmp-1916"><span class="linenos">1916</span></a>    <span class="n">tmp_param</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tmp&quot;</span><span class="p">,</span> <span class="n">default_tmp</span><span class="p">))</span>
</span><span id="get_tmp-1917"><a href="#get_tmp-1917"><span class="linenos">1917</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">tmp_param</span><span class="p">:</span>
</span><span id="get_tmp-1918"><a href="#get_tmp-1918"><span class="linenos">1918</span></a>        <span class="n">tmp_param</span> <span class="o">=</span> <span class="n">default_tmp</span>
</span><span id="get_tmp-1919"><a href="#get_tmp-1919"><span class="linenos">1919</span></a>
</span><span id="get_tmp-1920"><a href="#get_tmp-1920"><span class="linenos">1920</span></a>    <span class="c1"># Return tmp</span>
</span><span id="get_tmp-1921"><a href="#get_tmp-1921"><span class="linenos">1921</span></a>    <span class="k">return</span> <span class="n">tmp_param</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#get_tmp">get_tmp</a></code> function returns the value of the "tmp" parameter from either the <code>param</code> dictionary,
<code>config</code> dictionary, or a default value "/tmp".</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>config</strong>:  Config is a dictionary that contains configuration settings for the function. It is
an optional parameter with a default value of an empty dictionary. It can be used to provide
additional configuration settings to the function <code><a href="#get_tmp">get_tmp</a></code></li>
<li><strong>param</strong>:  The <code>param</code> parameter is a dictionary containing parameters that can be passed to the
function <code><a href="#get_tmp">get_tmp</a></code>. It can include various key-value pairs, but in this context, the function
specifically looks for the key "tmp" within the <code>param</code> dictionary to determine the temporary path
value. If the "</li>
<li><strong>default_tmp</strong>:  The <code>default_tmp</code> parameter in the <code><a href="#get_tmp">get_tmp</a></code> function is a string that
represents the default path for temporary files. If the "tmp" key is not found in the <code>param</code>
dictionary or the <code>config</code> dictionary, the function will return this <code>default_tmp</code> value, which is,
defaults to /tmp</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#get_tmp">get_tmp</a></code> returns the value of the "tmp" key from the <code>param</code> dictionary if it
  exists. If the "tmp" key is not found in the <code>param</code> dictionary, it returns the value of the "tmp"
  key from the <code>config</code> dictionary. If neither key is found in <code>param</code> or <code>config</code>, it returns the
  default value "/tmp".</p>
</blockquote>
</div>


                </section>
                <section id="get_threads">
                            <input id="get_threads-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_threads</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>, </span><span class="param"><span class="n">param</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="get_threads-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_threads"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_threads-1924"><a href="#get_threads-1924"><span class="linenos">1924</span></a><span class="k">def</span> <span class="nf">get_threads</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">param</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="get_threads-1925"><a href="#get_threads-1925"><span class="linenos">1925</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_threads-1926"><a href="#get_threads-1926"><span class="linenos">1926</span></a><span class="sd">    This Python function retrieves the number of threads to use based on input parameters and system</span>
</span><span id="get_threads-1927"><a href="#get_threads-1927"><span class="linenos">1927</span></a><span class="sd">    configuration.</span>
</span><span id="get_threads-1928"><a href="#get_threads-1928"><span class="linenos">1928</span></a>
</span><span id="get_threads-1929"><a href="#get_threads-1929"><span class="linenos">1929</span></a><span class="sd">    :param config: The `config` parameter is a dictionary that contains configuration settings for the</span>
</span><span id="get_threads-1930"><a href="#get_threads-1930"><span class="linenos">1930</span></a><span class="sd">    function `get_threads`. It can be used to provide default values for the number of threads to use in</span>
</span><span id="get_threads-1931"><a href="#get_threads-1931"><span class="linenos">1931</span></a><span class="sd">    the function</span>
</span><span id="get_threads-1932"><a href="#get_threads-1932"><span class="linenos">1932</span></a><span class="sd">    :type config: dict</span>
</span><span id="get_threads-1933"><a href="#get_threads-1933"><span class="linenos">1933</span></a><span class="sd">    :param param: The `param` parameter is a dictionary that may contain the key &quot;threads&quot; which</span>
</span><span id="get_threads-1934"><a href="#get_threads-1934"><span class="linenos">1934</span></a><span class="sd">    specifies the number of threads to use. If the &quot;threads&quot; key is not present in the `param`</span>
</span><span id="get_threads-1935"><a href="#get_threads-1935"><span class="linenos">1935</span></a><span class="sd">    dictionary, the function will look for the &quot;threads&quot; key in the `config` dictionary. If neither</span>
</span><span id="get_threads-1936"><a href="#get_threads-1936"><span class="linenos">1936</span></a><span class="sd">    :type param: dict</span>
</span><span id="get_threads-1937"><a href="#get_threads-1937"><span class="linenos">1937</span></a><span class="sd">    :return: The function `get_threads` returns the number of threads to be used based on the input</span>
</span><span id="get_threads-1938"><a href="#get_threads-1938"><span class="linenos">1938</span></a><span class="sd">    parameters.</span>
</span><span id="get_threads-1939"><a href="#get_threads-1939"><span class="linenos">1939</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_threads-1940"><a href="#get_threads-1940"><span class="linenos">1940</span></a>
</span><span id="get_threads-1941"><a href="#get_threads-1941"><span class="linenos">1941</span></a>    <span class="c1"># Config</span>
</span><span id="get_threads-1942"><a href="#get_threads-1942"><span class="linenos">1942</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="p">:</span>
</span><span id="get_threads-1943"><a href="#get_threads-1943"><span class="linenos">1943</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="get_threads-1944"><a href="#get_threads-1944"><span class="linenos">1944</span></a>
</span><span id="get_threads-1945"><a href="#get_threads-1945"><span class="linenos">1945</span></a>    <span class="c1"># Param</span>
</span><span id="get_threads-1946"><a href="#get_threads-1946"><span class="linenos">1946</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">param</span><span class="p">:</span>
</span><span id="get_threads-1947"><a href="#get_threads-1947"><span class="linenos">1947</span></a>        <span class="n">param</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="get_threads-1948"><a href="#get_threads-1948"><span class="linenos">1948</span></a>
</span><span id="get_threads-1949"><a href="#get_threads-1949"><span class="linenos">1949</span></a>    <span class="c1"># Threads system</span>
</span><span id="get_threads-1950"><a href="#get_threads-1950"><span class="linenos">1950</span></a>    <span class="n">nb_threads</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()</span>
</span><span id="get_threads-1951"><a href="#get_threads-1951"><span class="linenos">1951</span></a>
</span><span id="get_threads-1952"><a href="#get_threads-1952"><span class="linenos">1952</span></a>    <span class="c1"># Threads in param or config</span>
</span><span id="get_threads-1953"><a href="#get_threads-1953"><span class="linenos">1953</span></a>    <span class="n">threads_param</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;threads&quot;</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;threads&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
</span><span id="get_threads-1954"><a href="#get_threads-1954"><span class="linenos">1954</span></a>
</span><span id="get_threads-1955"><a href="#get_threads-1955"><span class="linenos">1955</span></a>    <span class="c1"># Check threads in params</span>
</span><span id="get_threads-1956"><a href="#get_threads-1956"><span class="linenos">1956</span></a>    <span class="k">if</span> <span class="n">threads_param</span><span class="p">:</span>
</span><span id="get_threads-1957"><a href="#get_threads-1957"><span class="linenos">1957</span></a>        <span class="n">input_thread</span> <span class="o">=</span> <span class="n">threads_param</span>
</span><span id="get_threads-1958"><a href="#get_threads-1958"><span class="linenos">1958</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="get_threads-1959"><a href="#get_threads-1959"><span class="linenos">1959</span></a>        <span class="n">input_thread</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="get_threads-1960"><a href="#get_threads-1960"><span class="linenos">1960</span></a>
</span><span id="get_threads-1961"><a href="#get_threads-1961"><span class="linenos">1961</span></a>    <span class="c1"># Check threads value</span>
</span><span id="get_threads-1962"><a href="#get_threads-1962"><span class="linenos">1962</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">threads_param</span> <span class="ow">or</span> <span class="nb">int</span><span class="p">(</span><span class="n">threads_param</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="get_threads-1963"><a href="#get_threads-1963"><span class="linenos">1963</span></a>        <span class="n">threads</span> <span class="o">=</span> <span class="n">nb_threads</span>
</span><span id="get_threads-1964"><a href="#get_threads-1964"><span class="linenos">1964</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="get_threads-1965"><a href="#get_threads-1965"><span class="linenos">1965</span></a>        <span class="n">threads</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">input_thread</span><span class="p">)</span>
</span><span id="get_threads-1966"><a href="#get_threads-1966"><span class="linenos">1966</span></a>
</span><span id="get_threads-1967"><a href="#get_threads-1967"><span class="linenos">1967</span></a>    <span class="c1"># Return threads</span>
</span><span id="get_threads-1968"><a href="#get_threads-1968"><span class="linenos">1968</span></a>    <span class="k">return</span> <span class="n">threads</span>
</span></pre></div>


            <div class="docstring"><p>This Python function retrieves the number of threads to use based on input parameters and system
configuration.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>config</strong>:  The <code>config</code> parameter is a dictionary that contains configuration settings for the
function <code><a href="#get_threads">get_threads</a></code>. It can be used to provide default values for the number of threads to use in
the function</li>
<li><strong>param</strong>:  The <code>param</code> parameter is a dictionary that may contain the key "threads" which
specifies the number of threads to use. If the "threads" key is not present in the <code>param</code>
dictionary, the function will look for the "threads" key in the <code>config</code> dictionary. If neither</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#get_threads">get_threads</a></code> returns the number of threads to be used based on the input
  parameters.</p>
</blockquote>
</div>


                </section>
                <section id="get_memory">
                            <input id="get_memory-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_memory</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>, </span><span class="param"><span class="n">param</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="get_memory-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_memory"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_memory-1971"><a href="#get_memory-1971"><span class="linenos">1971</span></a><span class="k">def</span> <span class="nf">get_memory</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">param</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="get_memory-1972"><a href="#get_memory-1972"><span class="linenos">1972</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_memory-1973"><a href="#get_memory-1973"><span class="linenos">1973</span></a><span class="sd">    The `get_memory` function retrieves memory information using psutil and calculates a default memory</span>
</span><span id="get_memory-1974"><a href="#get_memory-1974"><span class="linenos">1974</span></a><span class="sd">    value based on total memory, with the option to specify a custom memory value.</span>
</span><span id="get_memory-1975"><a href="#get_memory-1975"><span class="linenos">1975</span></a>
</span><span id="get_memory-1976"><a href="#get_memory-1976"><span class="linenos">1976</span></a><span class="sd">    :param config: The `config` parameter is a dictionary that may contain configuration settings for</span>
</span><span id="get_memory-1977"><a href="#get_memory-1977"><span class="linenos">1977</span></a><span class="sd">    the function `get_memory`. It is used to provide default values or settings for the function</span>
</span><span id="get_memory-1978"><a href="#get_memory-1978"><span class="linenos">1978</span></a><span class="sd">    :type config: dict</span>
</span><span id="get_memory-1979"><a href="#get_memory-1979"><span class="linenos">1979</span></a><span class="sd">    :param param: The `param` parameter is a dictionary that may contain a key &quot;memory&quot; which represents</span>
</span><span id="get_memory-1980"><a href="#get_memory-1980"><span class="linenos">1980</span></a><span class="sd">    the amount of memory to be used. If the &quot;memory&quot; key is not present in the `param` dictionary, the</span>
</span><span id="get_memory-1981"><a href="#get_memory-1981"><span class="linenos">1981</span></a><span class="sd">    function will try to retrieve the value from the `config` dictionary using the key &quot;</span>
</span><span id="get_memory-1982"><a href="#get_memory-1982"><span class="linenos">1982</span></a><span class="sd">    :type param: dict</span>
</span><span id="get_memory-1983"><a href="#get_memory-1983"><span class="linenos">1983</span></a><span class="sd">    :return: The function `get_memory` returns a string representing the amount of memory to be used.</span>
</span><span id="get_memory-1984"><a href="#get_memory-1984"><span class="linenos">1984</span></a><span class="sd">    This memory value is calculated based on the total memory available on the system, with a default</span>
</span><span id="get_memory-1985"><a href="#get_memory-1985"><span class="linenos">1985</span></a><span class="sd">    value set to 80% of the total memory. The function first checks if a specific memory value is</span>
</span><span id="get_memory-1986"><a href="#get_memory-1986"><span class="linenos">1986</span></a><span class="sd">    provided in the `param` dictionary, and if not, it looks for a default value in the `config`</span>
</span><span id="get_memory-1987"><a href="#get_memory-1987"><span class="linenos">1987</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_memory-1988"><a href="#get_memory-1988"><span class="linenos">1988</span></a>
</span><span id="get_memory-1989"><a href="#get_memory-1989"><span class="linenos">1989</span></a>    <span class="kn">import</span> <span class="nn">psutil</span>
</span><span id="get_memory-1990"><a href="#get_memory-1990"><span class="linenos">1990</span></a>
</span><span id="get_memory-1991"><a href="#get_memory-1991"><span class="linenos">1991</span></a>    <span class="c1"># Memory system</span>
</span><span id="get_memory-1992"><a href="#get_memory-1992"><span class="linenos">1992</span></a>    <span class="n">mem</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span>
</span><span id="get_memory-1993"><a href="#get_memory-1993"><span class="linenos">1993</span></a>    <span class="n">mem_total</span> <span class="o">=</span> <span class="n">mem</span><span class="o">.</span><span class="n">total</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span>
</span><span id="get_memory-1994"><a href="#get_memory-1994"><span class="linenos">1994</span></a>    <span class="n">mem_default</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">mem_total</span> <span class="o">*</span> <span class="mf">0.8</span><span class="p">)</span>
</span><span id="get_memory-1995"><a href="#get_memory-1995"><span class="linenos">1995</span></a>
</span><span id="get_memory-1996"><a href="#get_memory-1996"><span class="linenos">1996</span></a>    <span class="c1"># Threads in param or config</span>
</span><span id="get_memory-1997"><a href="#get_memory-1997"><span class="linenos">1997</span></a>    <span class="k">if</span> <span class="n">config</span><span class="p">:</span>
</span><span id="get_memory-1998"><a href="#get_memory-1998"><span class="linenos">1998</span></a>        <span class="n">memory_config</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;memory&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="get_memory-1999"><a href="#get_memory-1999"><span class="linenos">1999</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="get_memory-2000"><a href="#get_memory-2000"><span class="linenos">2000</span></a>        <span class="n">memory_config</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="get_memory-2001"><a href="#get_memory-2001"><span class="linenos">2001</span></a>    <span class="k">if</span> <span class="n">param</span><span class="p">:</span>
</span><span id="get_memory-2002"><a href="#get_memory-2002"><span class="linenos">2002</span></a>        <span class="n">memory_param</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;memory&quot;</span><span class="p">,</span> <span class="n">memory_config</span><span class="p">)</span>
</span><span id="get_memory-2003"><a href="#get_memory-2003"><span class="linenos">2003</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="get_memory-2004"><a href="#get_memory-2004"><span class="linenos">2004</span></a>        <span class="n">memory_param</span> <span class="o">=</span> <span class="n">memory_config</span>
</span><span id="get_memory-2005"><a href="#get_memory-2005"><span class="linenos">2005</span></a>
</span><span id="get_memory-2006"><a href="#get_memory-2006"><span class="linenos">2006</span></a>    <span class="c1"># Check memory value</span>
</span><span id="get_memory-2007"><a href="#get_memory-2007"><span class="linenos">2007</span></a>    <span class="k">if</span> <span class="n">mem_default</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="get_memory-2008"><a href="#get_memory-2008"><span class="linenos">2008</span></a>        <span class="n">mem_default</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="get_memory-2009"><a href="#get_memory-2009"><span class="linenos">2009</span></a>    <span class="k">if</span> <span class="n">memory_param</span><span class="p">:</span>
</span><span id="get_memory-2010"><a href="#get_memory-2010"><span class="linenos">2010</span></a>        <span class="n">memory</span> <span class="o">=</span> <span class="n">memory_param</span>
</span><span id="get_memory-2011"><a href="#get_memory-2011"><span class="linenos">2011</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="get_memory-2012"><a href="#get_memory-2012"><span class="linenos">2012</span></a>        <span class="n">memory</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">mem_default</span><span class="si">}</span><span class="s2">G&quot;</span>
</span><span id="get_memory-2013"><a href="#get_memory-2013"><span class="linenos">2013</span></a>
</span><span id="get_memory-2014"><a href="#get_memory-2014"><span class="linenos">2014</span></a>    <span class="k">return</span> <span class="n">memory</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#get_memory">get_memory</a></code> function retrieves memory information using psutil and calculates a default memory
value based on total memory, with the option to specify a custom memory value.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>config</strong>:  The <code>config</code> parameter is a dictionary that may contain configuration settings for
the function <code><a href="#get_memory">get_memory</a></code>. It is used to provide default values or settings for the function</li>
<li><strong>param</strong>:  The <code>param</code> parameter is a dictionary that may contain a key "memory" which represents
the amount of memory to be used. If the "memory" key is not present in the <code>param</code> dictionary, the
function will try to retrieve the value from the <code>config</code> dictionary using the key "</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#get_memory">get_memory</a></code> returns a string representing the amount of memory to be used.
  This memory value is calculated based on the total memory available on the system, with a default
  value set to 80% of the total memory. The function first checks if a specific memory value is
  provided in the <code>param</code> dictionary, and if not, it looks for a default value in the <code>config</code></p>
</blockquote>
</div>


                </section>
                <section id="extract_float_from_str">
                            <input id="extract_float_from_str-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_float_from_str</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span><span class="return-annotation">) -> <span class="nb">float</span>:</span></span>

                <label class="view-source-button" for="extract_float_from_str-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_float_from_str"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_float_from_str-2017"><a href="#extract_float_from_str-2017"><span class="linenos">2017</span></a><span class="k">def</span> <span class="nf">extract_float_from_str</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="extract_float_from_str-2018"><a href="#extract_float_from_str-2018"><span class="linenos">2018</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="extract_float_from_str-2019"><a href="#extract_float_from_str-2019"><span class="linenos">2019</span></a><span class="sd">    The function `extract_float_from_str` extracts a float value from a given string input.</span>
</span><span id="extract_float_from_str-2020"><a href="#extract_float_from_str-2020"><span class="linenos">2020</span></a>
</span><span id="extract_float_from_str-2021"><a href="#extract_float_from_str-2021"><span class="linenos">2021</span></a><span class="sd">    :param text: The `extract_float_from_str` function is designed to extract a floating-point number</span>
</span><span id="extract_float_from_str-2022"><a href="#extract_float_from_str-2022"><span class="linenos">2022</span></a><span class="sd">    from a given string input. The function uses a regular expression to find the first occurrence of a</span>
</span><span id="extract_float_from_str-2023"><a href="#extract_float_from_str-2023"><span class="linenos">2023</span></a><span class="sd">    floating-point number in the input string and returns it as a float</span>
</span><span id="extract_float_from_str-2024"><a href="#extract_float_from_str-2024"><span class="linenos">2024</span></a><span class="sd">    :type text: str</span>
</span><span id="extract_float_from_str-2025"><a href="#extract_float_from_str-2025"><span class="linenos">2025</span></a><span class="sd">    :return: The function `extract_float_from_str` returns a float value extracted from the input text</span>
</span><span id="extract_float_from_str-2026"><a href="#extract_float_from_str-2026"><span class="linenos">2026</span></a><span class="sd">    string. If a float value is found in the text, it is returned as a float. If no float value is</span>
</span><span id="extract_float_from_str-2027"><a href="#extract_float_from_str-2027"><span class="linenos">2027</span></a><span class="sd">    found, it returns `None`.</span>
</span><span id="extract_float_from_str-2028"><a href="#extract_float_from_str-2028"><span class="linenos">2028</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_float_from_str-2029"><a href="#extract_float_from_str-2029"><span class="linenos">2029</span></a>
</span><span id="extract_float_from_str-2030"><a href="#extract_float_from_str-2030"><span class="linenos">2030</span></a>    <span class="n">value_in_float</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[-+]?\d*\.*\d+&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
</span><span id="extract_float_from_str-2031"><a href="#extract_float_from_str-2031"><span class="linenos">2031</span></a>
</span><span id="extract_float_from_str-2032"><a href="#extract_float_from_str-2032"><span class="linenos">2032</span></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value_in_float</span><span class="p">):</span>
</span><span id="extract_float_from_str-2033"><a href="#extract_float_from_str-2033"><span class="linenos">2033</span></a>        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">value_in_float</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="extract_float_from_str-2034"><a href="#extract_float_from_str-2034"><span class="linenos">2034</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="extract_float_from_str-2035"><a href="#extract_float_from_str-2035"><span class="linenos">2035</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#extract_float_from_str">extract_float_from_str</a></code> extracts a float value from a given string input.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>text</strong>:  The <code><a href="#extract_float_from_str">extract_float_from_str</a></code> function is designed to extract a floating-point number
from a given string input. The function uses a regular expression to find the first occurrence of a
floating-point number in the input string and returns it as a float</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#extract_float_from_str">extract_float_from_str</a></code> returns a float value extracted from the input text
  string. If a float value is found in the text, it is returned as a float. If no float value is
  found, it returns <code>None</code>.</p>
</blockquote>
</div>


                </section>
                <section id="extract_memory_in_go">
                            <input id="extract_memory_in_go-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_memory_in_go</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">memory_str</span>, </span><span class="param"><span class="n">default_value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>, </span><span class="param"><span class="n">default_unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;G&#39;</span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="extract_memory_in_go-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_memory_in_go"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_memory_in_go-2038"><a href="#extract_memory_in_go-2038"><span class="linenos">2038</span></a><span class="k">def</span> <span class="nf">extract_memory_in_go</span><span class="p">(</span>
</span><span id="extract_memory_in_go-2039"><a href="#extract_memory_in_go-2039"><span class="linenos">2039</span></a>    <span class="n">memory_str</span><span class="p">,</span> <span class="n">default_value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">default_unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;G&quot;</span>
</span><span id="extract_memory_in_go-2040"><a href="#extract_memory_in_go-2040"><span class="linenos">2040</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="extract_memory_in_go-2041"><a href="#extract_memory_in_go-2041"><span class="linenos">2041</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="extract_memory_in_go-2042"><a href="#extract_memory_in_go-2042"><span class="linenos">2042</span></a><span class="sd">    The `extract_memory_in_go` function converts a memory size string in the format FLOAT[kMG] to an</span>
</span><span id="extract_memory_in_go-2043"><a href="#extract_memory_in_go-2043"><span class="linenos">2043</span></a><span class="sd">    integer value in Go memory units.</span>
</span><span id="extract_memory_in_go-2044"><a href="#extract_memory_in_go-2044"><span class="linenos">2044</span></a>
</span><span id="extract_memory_in_go-2045"><a href="#extract_memory_in_go-2045"><span class="linenos">2045</span></a><span class="sd">    :param memory_str: The `memory_str` parameter should be a string representing a memory value with a</span>
</span><span id="extract_memory_in_go-2046"><a href="#extract_memory_in_go-2046"><span class="linenos">2046</span></a><span class="sd">    unit suffix in the format FLOAT[kMG]. For example, it could be &quot;1G&quot;, &quot;512M&quot;, or &quot;2k&quot;</span>
</span><span id="extract_memory_in_go-2047"><a href="#extract_memory_in_go-2047"><span class="linenos">2047</span></a><span class="sd">    :param default: The `default` parameter in the `extract_memory_in_go` function is used to specify a</span>
</span><span id="extract_memory_in_go-2048"><a href="#extract_memory_in_go-2048"><span class="linenos">2048</span></a><span class="sd">    default integer value if the conversion of the memory size string fails or if the value cannot be</span>
</span><span id="extract_memory_in_go-2049"><a href="#extract_memory_in_go-2049"><span class="linenos">2049</span></a><span class="sd">    extracted from the input string. If no valid value can be extracted from the input string, the</span>
</span><span id="extract_memory_in_go-2050"><a href="#extract_memory_in_go-2050"><span class="linenos">2050</span></a><span class="sd">    function will return the, defaults to 1</span>
</span><span id="extract_memory_in_go-2051"><a href="#extract_memory_in_go-2051"><span class="linenos">2051</span></a><span class="sd">    :type default: int (optional)</span>
</span><span id="extract_memory_in_go-2052"><a href="#extract_memory_in_go-2052"><span class="linenos">2052</span></a><span class="sd">    :return: The `extract_memory_in_go` function is returning an integer value representing the memory</span>
</span><span id="extract_memory_in_go-2053"><a href="#extract_memory_in_go-2053"><span class="linenos">2053</span></a><span class="sd">    size in Go units based on the input memory string provided.</span>
</span><span id="extract_memory_in_go-2054"><a href="#extract_memory_in_go-2054"><span class="linenos">2054</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_memory_in_go-2055"><a href="#extract_memory_in_go-2055"><span class="linenos">2055</span></a>
</span><span id="extract_memory_in_go-2056"><a href="#extract_memory_in_go-2056"><span class="linenos">2056</span></a>    <span class="c1"># Convert in upper ccase</span>
</span><span id="extract_memory_in_go-2057"><a href="#extract_memory_in_go-2057"><span class="linenos">2057</span></a>    <span class="n">memory_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">memory_str</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span><span id="extract_memory_in_go-2058"><a href="#extract_memory_in_go-2058"><span class="linenos">2058</span></a>
</span><span id="extract_memory_in_go-2059"><a href="#extract_memory_in_go-2059"><span class="linenos">2059</span></a>    <span class="c1"># Coefficient</span>
</span><span id="extract_memory_in_go-2060"><a href="#extract_memory_in_go-2060"><span class="linenos">2060</span></a>    <span class="n">coefficient</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="extract_memory_in_go-2061"><a href="#extract_memory_in_go-2061"><span class="linenos">2061</span></a>        <span class="s2">&quot;K&quot;</span><span class="p">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">),</span>
</span><span id="extract_memory_in_go-2062"><a href="#extract_memory_in_go-2062"><span class="linenos">2062</span></a>        <span class="s2">&quot;M&quot;</span><span class="p">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">,</span>
</span><span id="extract_memory_in_go-2063"><a href="#extract_memory_in_go-2063"><span class="linenos">2063</span></a>        <span class="s2">&quot;G&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="extract_memory_in_go-2064"><a href="#extract_memory_in_go-2064"><span class="linenos">2064</span></a>    <span class="p">}</span>
</span><span id="extract_memory_in_go-2065"><a href="#extract_memory_in_go-2065"><span class="linenos">2065</span></a>
</span><span id="extract_memory_in_go-2066"><a href="#extract_memory_in_go-2066"><span class="linenos">2066</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="extract_memory_in_go-2067"><a href="#extract_memory_in_go-2067"><span class="linenos">2067</span></a>        <span class="c1"># Extract in float</span>
</span><span id="extract_memory_in_go-2068"><a href="#extract_memory_in_go-2068"><span class="linenos">2068</span></a>        <span class="n">value</span> <span class="o">=</span> <span class="n">extract_float_from_str</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">memory_str</span><span class="p">)</span>
</span><span id="extract_memory_in_go-2069"><a href="#extract_memory_in_go-2069"><span class="linenos">2069</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
</span><span id="extract_memory_in_go-2070"><a href="#extract_memory_in_go-2070"><span class="linenos">2070</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">default_value</span>
</span><span id="extract_memory_in_go-2071"><a href="#extract_memory_in_go-2071"><span class="linenos">2071</span></a>
</span><span id="extract_memory_in_go-2072"><a href="#extract_memory_in_go-2072"><span class="linenos">2072</span></a>        <span class="c1"># Extract unit</span>
</span><span id="extract_memory_in_go-2073"><a href="#extract_memory_in_go-2073"><span class="linenos">2073</span></a>        <span class="n">unit</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[?([A-Za-z]+&quot;</span><span class="p">,</span> <span class="n">memory_str</span><span class="p">)</span>
</span><span id="extract_memory_in_go-2074"><a href="#extract_memory_in_go-2074"><span class="linenos">2074</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">unit</span><span class="p">:</span>
</span><span id="extract_memory_in_go-2075"><a href="#extract_memory_in_go-2075"><span class="linenos">2075</span></a>            <span class="n">unit</span> <span class="o">=</span> <span class="n">default_unit</span>
</span><span id="extract_memory_in_go-2076"><a href="#extract_memory_in_go-2076"><span class="linenos">2076</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="extract_memory_in_go-2077"><a href="#extract_memory_in_go-2077"><span class="linenos">2077</span></a>            <span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="extract_memory_in_go-2078"><a href="#extract_memory_in_go-2078"><span class="linenos">2078</span></a>
</span><span id="extract_memory_in_go-2079"><a href="#extract_memory_in_go-2079"><span class="linenos">2079</span></a>        <span class="c1"># Convert in int Go</span>
</span><span id="extract_memory_in_go-2080"><a href="#extract_memory_in_go-2080"><span class="linenos">2080</span></a>        <span class="k">if</span> <span class="n">unit</span> <span class="ow">in</span> <span class="n">coefficient</span><span class="p">:</span>
</span><span id="extract_memory_in_go-2081"><a href="#extract_memory_in_go-2081"><span class="linenos">2081</span></a>            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span> <span class="o">*</span> <span class="n">coefficient</span><span class="p">[</span><span class="n">unit</span><span class="p">])</span>
</span><span id="extract_memory_in_go-2082"><a href="#extract_memory_in_go-2082"><span class="linenos">2082</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="extract_memory_in_go-2083"><a href="#extract_memory_in_go-2083"><span class="linenos">2083</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="extract_memory_in_go-2084"><a href="#extract_memory_in_go-2084"><span class="linenos">2084</span></a>                <span class="sa">f</span><span class="s2">&quot;Invalid unit &#39;</span><span class="si">{</span><span class="n">unit</span><span class="si">}</span><span class="s2">&#39;. Use &#39;k&#39;, &#39;m&#39; ou &#39;g&#39; i upper or lower case.&quot;</span>
</span><span id="extract_memory_in_go-2085"><a href="#extract_memory_in_go-2085"><span class="linenos">2085</span></a>            <span class="p">)</span>
</span><span id="extract_memory_in_go-2086"><a href="#extract_memory_in_go-2086"><span class="linenos">2086</span></a>    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
</span><span id="extract_memory_in_go-2087"><a href="#extract_memory_in_go-2087"><span class="linenos">2087</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="extract_memory_in_go-2088"><a href="#extract_memory_in_go-2088"><span class="linenos">2088</span></a>            <span class="sa">f</span><span class="s2">&quot;Invalid memory format &#39;</span><span class="si">{</span><span class="n">memory_str</span><span class="si">}</span><span class="s2">&#39;. Use format FLOAT[kMG].&quot;</span>
</span><span id="extract_memory_in_go-2089"><a href="#extract_memory_in_go-2089"><span class="linenos">2089</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#extract_memory_in_go">extract_memory_in_go</a></code> function converts a memory size string in the format FLOAT[kMG] to an
integer value in Go memory units.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>memory_str</strong>:  The <code>memory_str</code> parameter should be a string representing a memory value with a
unit suffix in the format FLOAT[kMG]. For example, it could be "1G", "512M", or "2k"</li>
<li><strong>default</strong>:  The <code>default</code> parameter in the <code><a href="#extract_memory_in_go">extract_memory_in_go</a></code> function is used to specify a
default integer value if the conversion of the memory size string fails or if the value cannot be
extracted from the input string. If no valid value can be extracted from the input string, the
function will return the, defaults to 1</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The <code><a href="#extract_memory_in_go">extract_memory_in_go</a></code> function is returning an integer value representing the memory
  size in Go units based on the input memory string provided.</p>
</blockquote>
</div>


                </section>
                <section id="concat_file">
                            <input id="concat_file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">concat_file</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">input_files</span><span class="p">:</span> <span class="nb">list</span>, </span><span class="param"><span class="n">output_file</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="concat_file-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#concat_file"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="concat_file-2092"><a href="#concat_file-2092"><span class="linenos">2092</span></a><span class="k">def</span> <span class="nf">concat_file</span><span class="p">(</span><span class="n">input_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">output_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="concat_file-2093"><a href="#concat_file-2093"><span class="linenos">2093</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="concat_file-2094"><a href="#concat_file-2094"><span class="linenos">2094</span></a><span class="sd">    This function concatenates multiple input files into a single output file.</span>
</span><span id="concat_file-2095"><a href="#concat_file-2095"><span class="linenos">2095</span></a>
</span><span id="concat_file-2096"><a href="#concat_file-2096"><span class="linenos">2096</span></a><span class="sd">    :param input_files: A list of file paths to the input files that need to be concatenated</span>
</span><span id="concat_file-2097"><a href="#concat_file-2097"><span class="linenos">2097</span></a><span class="sd">    :type input_files: list</span>
</span><span id="concat_file-2098"><a href="#concat_file-2098"><span class="linenos">2098</span></a><span class="sd">    :param output_file: The parameter &quot;output_file&quot; is a string that represents the name of the file</span>
</span><span id="concat_file-2099"><a href="#concat_file-2099"><span class="linenos">2099</span></a><span class="sd">    that will be created by the function and will contain the concatenated content of all the input</span>
</span><span id="concat_file-2100"><a href="#concat_file-2100"><span class="linenos">2100</span></a><span class="sd">    files</span>
</span><span id="concat_file-2101"><a href="#concat_file-2101"><span class="linenos">2101</span></a><span class="sd">    :type output_file: str</span>
</span><span id="concat_file-2102"><a href="#concat_file-2102"><span class="linenos">2102</span></a><span class="sd">    :return: a boolean value indicating whether the output file was successfully created or not. It</span>
</span><span id="concat_file-2103"><a href="#concat_file-2103"><span class="linenos">2103</span></a><span class="sd">    checks if the output file exists using the `os.path.exists()` function and returns `True` if it</span>
</span><span id="concat_file-2104"><a href="#concat_file-2104"><span class="linenos">2104</span></a><span class="sd">    exists and `False` otherwise.</span>
</span><span id="concat_file-2105"><a href="#concat_file-2105"><span class="linenos">2105</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="concat_file-2106"><a href="#concat_file-2106"><span class="linenos">2106</span></a>
</span><span id="concat_file-2107"><a href="#concat_file-2107"><span class="linenos">2107</span></a>    <span class="c1"># Full path</span>
</span><span id="concat_file-2108"><a href="#concat_file-2108"><span class="linenos">2108</span></a>    <span class="n">output_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</span><span id="concat_file-2109"><a href="#concat_file-2109"><span class="linenos">2109</span></a>
</span><span id="concat_file-2110"><a href="#concat_file-2110"><span class="linenos">2110</span></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
</span><span id="concat_file-2111"><a href="#concat_file-2111"><span class="linenos">2111</span></a>        <span class="k">for</span> <span class="n">input_file</span> <span class="ow">in</span> <span class="n">input_files</span><span class="p">:</span>
</span><span id="concat_file-2112"><a href="#concat_file-2112"><span class="linenos">2112</span></a>            <span class="n">input_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>
</span><span id="concat_file-2113"><a href="#concat_file-2113"><span class="linenos">2113</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
</span><span id="concat_file-2114"><a href="#concat_file-2114"><span class="linenos">2114</span></a>                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">infile</span><span class="p">:</span>
</span><span id="concat_file-2115"><a href="#concat_file-2115"><span class="linenos">2115</span></a>                    <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="concat_file-2116"><a href="#concat_file-2116"><span class="linenos">2116</span></a>
</span><span id="concat_file-2117"><a href="#concat_file-2117"><span class="linenos">2117</span></a>    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This function concatenates multiple input files into a single output file.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>input_files</strong>:  A list of file paths to the input files that need to be concatenated</li>
<li><strong>output_file</strong>:  The parameter "output_file" is a string that represents the name of the file
that will be created by the function and will contain the concatenated content of all the input
files</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a boolean value indicating whether the output file was successfully created or not. It
  checks if the output file exists using the <code>os.path.exists()</code> function and returns <code>True</code> if it
  exists and <code>False</code> otherwise.</p>
</blockquote>
</div>


                </section>
                <section id="compress_file">
                            <input id="compress_file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compress_file</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">input_file</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">output_file</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="compress_file-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#compress_file"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="compress_file-2120"><a href="#compress_file-2120"><span class="linenos">2120</span></a><span class="k">def</span> <span class="nf">compress_file</span><span class="p">(</span><span class="n">input_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">output_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="compress_file-2121"><a href="#compress_file-2121"><span class="linenos">2121</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="compress_file-2122"><a href="#compress_file-2122"><span class="linenos">2122</span></a><span class="sd">    This function compresses a file using the BGZF compression algorithm.</span>
</span><span id="compress_file-2123"><a href="#compress_file-2123"><span class="linenos">2123</span></a>
</span><span id="compress_file-2124"><a href="#compress_file-2124"><span class="linenos">2124</span></a><span class="sd">    :param input_file: The path and name of the input file that needs to be compressed</span>
</span><span id="compress_file-2125"><a href="#compress_file-2125"><span class="linenos">2125</span></a><span class="sd">    :type input_file: str</span>
</span><span id="compress_file-2126"><a href="#compress_file-2126"><span class="linenos">2126</span></a><span class="sd">    :param output_file: The output_file parameter is a string that represents the name and path of</span>
</span><span id="compress_file-2127"><a href="#compress_file-2127"><span class="linenos">2127</span></a><span class="sd">    the file where the compressed data will be written</span>
</span><span id="compress_file-2128"><a href="#compress_file-2128"><span class="linenos">2128</span></a><span class="sd">    :type output_file: str</span>
</span><span id="compress_file-2129"><a href="#compress_file-2129"><span class="linenos">2129</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="compress_file-2130"><a href="#compress_file-2130"><span class="linenos">2130</span></a>
</span><span id="compress_file-2131"><a href="#compress_file-2131"><span class="linenos">2131</span></a>    <span class="c1"># Full path</span>
</span><span id="compress_file-2132"><a href="#compress_file-2132"><span class="linenos">2132</span></a>    <span class="n">output_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</span><span id="compress_file-2133"><a href="#compress_file-2133"><span class="linenos">2133</span></a>
</span><span id="compress_file-2134"><a href="#compress_file-2134"><span class="linenos">2134</span></a>    <span class="c1"># Concat and compress</span>
</span><span id="compress_file-2135"><a href="#compress_file-2135"><span class="linenos">2135</span></a>    <span class="n">concat_and_compress_files</span><span class="p">(</span><span class="n">input_files</span><span class="o">=</span><span class="p">[</span><span class="n">input_file</span><span class="p">],</span> <span class="n">output_file</span><span class="o">=</span><span class="n">output_file</span><span class="p">)</span>
</span><span id="compress_file-2136"><a href="#compress_file-2136"><span class="linenos">2136</span></a>
</span><span id="compress_file-2137"><a href="#compress_file-2137"><span class="linenos">2137</span></a>    <span class="c1"># Return</span>
</span><span id="compress_file-2138"><a href="#compress_file-2138"><span class="linenos">2138</span></a>    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This function compresses a file using the BGZF compression algorithm.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>input_file</strong>:  The path and name of the input file that needs to be compressed</li>
<li><strong>output_file</strong>:  The output_file parameter is a string that represents the name and path of
the file where the compressed data will be written</li>
</ul>
</div>


                </section>
                <section id="get_compression_type">
                            <input id="get_compression_type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_compression_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="get_compression_type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_compression_type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_compression_type-2141"><a href="#get_compression_type-2141"><span class="linenos">2141</span></a><span class="k">def</span> <span class="nf">get_compression_type</span><span class="p">(</span><span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="get_compression_type-2142"><a href="#get_compression_type-2142"><span class="linenos">2142</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_compression_type-2143"><a href="#get_compression_type-2143"><span class="linenos">2143</span></a><span class="sd">    The function `get_compression_type` determines the compression type of a file based on its first few</span>
</span><span id="get_compression_type-2144"><a href="#get_compression_type-2144"><span class="linenos">2144</span></a><span class="sd">    bytes.</span>
</span><span id="get_compression_type-2145"><a href="#get_compression_type-2145"><span class="linenos">2145</span></a>
</span><span id="get_compression_type-2146"><a href="#get_compression_type-2146"><span class="linenos">2146</span></a><span class="sd">    :param filepath: The `filepath` parameter is a string that represents the path to the file for which</span>
</span><span id="get_compression_type-2147"><a href="#get_compression_type-2147"><span class="linenos">2147</span></a><span class="sd">    we want to determine the compression type</span>
</span><span id="get_compression_type-2148"><a href="#get_compression_type-2148"><span class="linenos">2148</span></a><span class="sd">    :type filepath: str</span>
</span><span id="get_compression_type-2149"><a href="#get_compression_type-2149"><span class="linenos">2149</span></a><span class="sd">    :return: The function `get_compression_type` returns a string indicating the compression type of the</span>
</span><span id="get_compression_type-2150"><a href="#get_compression_type-2150"><span class="linenos">2150</span></a><span class="sd">    file specified by the `filepath` parameter. The possible return values are &quot;gzip&quot; if the file is</span>
</span><span id="get_compression_type-2151"><a href="#get_compression_type-2151"><span class="linenos">2151</span></a><span class="sd">    compressed using gzip, &quot;bgzip&quot; if the file is compressed using bgzip, &quot;unknown&quot; if the compression</span>
</span><span id="get_compression_type-2152"><a href="#get_compression_type-2152"><span class="linenos">2152</span></a><span class="sd">    type is unknown, and &quot;none&quot; if the file is not compressed.</span>
</span><span id="get_compression_type-2153"><a href="#get_compression_type-2153"><span class="linenos">2153</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_compression_type-2154"><a href="#get_compression_type-2154"><span class="linenos">2154</span></a>
</span><span id="get_compression_type-2155"><a href="#get_compression_type-2155"><span class="linenos">2155</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="get_compression_type-2156"><a href="#get_compression_type-2156"><span class="linenos">2156</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">test_f</span><span class="p">:</span>
</span><span id="get_compression_type-2157"><a href="#get_compression_type-2157"><span class="linenos">2157</span></a>            <span class="c1"># Firsts bits</span>
</span><span id="get_compression_type-2158"><a href="#get_compression_type-2158"><span class="linenos">2158</span></a>            <span class="n">bit_1</span> <span class="o">=</span> <span class="n">test_f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="get_compression_type-2159"><a href="#get_compression_type-2159"><span class="linenos">2159</span></a>            <span class="n">bit_2</span> <span class="o">=</span> <span class="n">test_f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="get_compression_type-2160"><a href="#get_compression_type-2160"><span class="linenos">2160</span></a>            <span class="n">bit_3</span> <span class="o">=</span> <span class="n">test_f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="get_compression_type-2161"><a href="#get_compression_type-2161"><span class="linenos">2161</span></a>            <span class="n">bit_4</span> <span class="o">=</span> <span class="n">test_f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="get_compression_type-2162"><a href="#get_compression_type-2162"><span class="linenos">2162</span></a>            <span class="c1"># If bit is compress</span>
</span><span id="get_compression_type-2163"><a href="#get_compression_type-2163"><span class="linenos">2163</span></a>            <span class="k">if</span> <span class="n">bit_1</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x1f</span><span class="s2">&quot;</span> <span class="ow">and</span> <span class="n">bit_2</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x8b</span><span class="s2">&quot;</span> <span class="ow">and</span> <span class="n">bit_3</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x08</span><span class="s2">&quot;</span><span class="p">:</span>
</span><span id="get_compression_type-2164"><a href="#get_compression_type-2164"><span class="linenos">2164</span></a>                <span class="c1"># If bit 4 == x04 is compress &#39;bgzip&#39; type</span>
</span><span id="get_compression_type-2165"><a href="#get_compression_type-2165"><span class="linenos">2165</span></a>                <span class="k">if</span> <span class="n">bit_4</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x04</span><span class="s2">&quot;</span><span class="p">:</span>
</span><span id="get_compression_type-2166"><a href="#get_compression_type-2166"><span class="linenos">2166</span></a>                    <span class="k">return</span> <span class="s2">&quot;bgzip&quot;</span>
</span><span id="get_compression_type-2167"><a href="#get_compression_type-2167"><span class="linenos">2167</span></a>                <span class="c1"># else is compress &#39;gzip&#39; type</span>
</span><span id="get_compression_type-2168"><a href="#get_compression_type-2168"><span class="linenos">2168</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="get_compression_type-2169"><a href="#get_compression_type-2169"><span class="linenos">2169</span></a>                    <span class="k">return</span> <span class="s2">&quot;gzip&quot;</span>
</span><span id="get_compression_type-2170"><a href="#get_compression_type-2170"><span class="linenos">2170</span></a>            <span class="c1"># If no compress type</span>
</span><span id="get_compression_type-2171"><a href="#get_compression_type-2171"><span class="linenos">2171</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="get_compression_type-2172"><a href="#get_compression_type-2172"><span class="linenos">2172</span></a>                <span class="k">return</span> <span class="s2">&quot;none&quot;</span>
</span><span id="get_compression_type-2173"><a href="#get_compression_type-2173"><span class="linenos">2173</span></a>    <span class="k">except</span><span class="p">:</span>
</span><span id="get_compression_type-2174"><a href="#get_compression_type-2174"><span class="linenos">2174</span></a>        <span class="k">return</span> <span class="s2">&quot;unknown&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#get_compression_type">get_compression_type</a></code> determines the compression type of a file based on its first few
bytes.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>filepath</strong>:  The <code>filepath</code> parameter is a string that represents the path to the file for which
we want to determine the compression type</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#get_compression_type">get_compression_type</a></code> returns a string indicating the compression type of the
  file specified by the <code>filepath</code> parameter. The possible return values are "gzip" if the file is
  compressed using gzip, "bgzip" if the file is compressed using bgzip, "unknown" if the compression
  type is unknown, and "none" if the file is not compressed.</p>
</blockquote>
</div>


                </section>
                <section id="get_file_compressed">
                            <input id="get_file_compressed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_file_compressed</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="get_file_compressed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_file_compressed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_file_compressed-2177"><a href="#get_file_compressed-2177"><span class="linenos">2177</span></a><span class="k">def</span> <span class="nf">get_file_compressed</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="get_file_compressed-2178"><a href="#get_file_compressed-2178"><span class="linenos">2178</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_file_compressed-2179"><a href="#get_file_compressed-2179"><span class="linenos">2179</span></a><span class="sd">    This function takes a filename as input and returns True if the file is compressed (in bgzip) and False if it</span>
</span><span id="get_file_compressed-2180"><a href="#get_file_compressed-2180"><span class="linenos">2180</span></a><span class="sd">    is not</span>
</span><span id="get_file_compressed-2181"><a href="#get_file_compressed-2181"><span class="linenos">2181</span></a>
</span><span id="get_file_compressed-2182"><a href="#get_file_compressed-2182"><span class="linenos">2182</span></a><span class="sd">    :param filename: the name of the file to be checked</span>
</span><span id="get_file_compressed-2183"><a href="#get_file_compressed-2183"><span class="linenos">2183</span></a><span class="sd">    :type filename: str</span>
</span><span id="get_file_compressed-2184"><a href="#get_file_compressed-2184"><span class="linenos">2184</span></a><span class="sd">    :return: A boolean value.</span>
</span><span id="get_file_compressed-2185"><a href="#get_file_compressed-2185"><span class="linenos">2185</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_file_compressed-2186"><a href="#get_file_compressed-2186"><span class="linenos">2186</span></a>
</span><span id="get_file_compressed-2187"><a href="#get_file_compressed-2187"><span class="linenos">2187</span></a>    <span class="c1"># Full path</span>
</span><span id="get_file_compressed-2188"><a href="#get_file_compressed-2188"><span class="linenos">2188</span></a>    <span class="n">filename</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="get_file_compressed-2189"><a href="#get_file_compressed-2189"><span class="linenos">2189</span></a>
</span><span id="get_file_compressed-2190"><a href="#get_file_compressed-2190"><span class="linenos">2190</span></a>    <span class="n">compression_type</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="get_file_compressed-2191"><a href="#get_file_compressed-2191"><span class="linenos">2191</span></a>    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
</span><span id="get_file_compressed-2192"><a href="#get_file_compressed-2192"><span class="linenos">2192</span></a>        <span class="c1"># If filename exists, try to detect compression within content (first bits)</span>
</span><span id="get_file_compressed-2193"><a href="#get_file_compressed-2193"><span class="linenos">2193</span></a>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
</span><span id="get_file_compressed-2194"><a href="#get_file_compressed-2194"><span class="linenos">2194</span></a>            <span class="n">compression_type</span> <span class="o">=</span> <span class="n">get_compression_type</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="get_file_compressed-2195"><a href="#get_file_compressed-2195"><span class="linenos">2195</span></a>        <span class="c1"># If filename does not exists, use extension to determine if it is compressed</span>
</span><span id="get_file_compressed-2196"><a href="#get_file_compressed-2196"><span class="linenos">2196</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="get_file_compressed-2197"><a href="#get_file_compressed-2197"><span class="linenos">2197</span></a>            <span class="n">filename_name</span><span class="p">,</span> <span class="n">filename_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="get_file_compressed-2198"><a href="#get_file_compressed-2198"><span class="linenos">2198</span></a>            <span class="n">compress_format</span> <span class="o">=</span> <span class="n">filename_extension</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="get_file_compressed-2199"><a href="#get_file_compressed-2199"><span class="linenos">2199</span></a>            <span class="k">if</span> <span class="n">compress_format</span> <span class="ow">in</span> <span class="n">file_compressed_format</span><span class="p">:</span>
</span><span id="get_file_compressed-2200"><a href="#get_file_compressed-2200"><span class="linenos">2200</span></a>                <span class="n">compression_type</span> <span class="o">=</span> <span class="s2">&quot;bgzip&quot;</span>
</span><span id="get_file_compressed-2201"><a href="#get_file_compressed-2201"><span class="linenos">2201</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="get_file_compressed-2202"><a href="#get_file_compressed-2202"><span class="linenos">2202</span></a>                <span class="n">compression_type</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
</span><span id="get_file_compressed-2203"><a href="#get_file_compressed-2203"><span class="linenos">2203</span></a>    <span class="k">return</span> <span class="n">compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;gzip&quot;</span><span class="p">,</span> <span class="s2">&quot;bgzip&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>This function takes a filename as input and returns True if the file is compressed (in bgzip) and False if it
is not</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>filename</strong>:  the name of the file to be checked</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>A boolean value.</p>
</blockquote>
</div>


                </section>
                <section id="concat_into_infile">
                            <input id="concat_into_infile-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">concat_into_infile</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">input_files</span><span class="p">:</span> <span class="nb">list</span>,</span><span class="param">	<span class="n">compressed_file</span><span class="p">:</span> <span class="nb">object</span>,</span><span class="param">	<span class="n">compression_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span>,</span><span class="param">	<span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>,</span><span class="param">	<span class="n">block</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000000</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="concat_into_infile-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#concat_into_infile"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="concat_into_infile-2206"><a href="#concat_into_infile-2206"><span class="linenos">2206</span></a><span class="k">def</span> <span class="nf">concat_into_infile</span><span class="p">(</span>
</span><span id="concat_into_infile-2207"><a href="#concat_into_infile-2207"><span class="linenos">2207</span></a>    <span class="n">input_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
</span><span id="concat_into_infile-2208"><a href="#concat_into_infile-2208"><span class="linenos">2208</span></a>    <span class="n">compressed_file</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span>
</span><span id="concat_into_infile-2209"><a href="#concat_into_infile-2209"><span class="linenos">2209</span></a>    <span class="n">compression_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
</span><span id="concat_into_infile-2210"><a href="#concat_into_infile-2210"><span class="linenos">2210</span></a>    <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="concat_into_infile-2211"><a href="#concat_into_infile-2211"><span class="linenos">2211</span></a>    <span class="n">block</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span>
</span><span id="concat_into_infile-2212"><a href="#concat_into_infile-2212"><span class="linenos">2212</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="concat_into_infile-2213"><a href="#concat_into_infile-2213"><span class="linenos">2213</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="concat_into_infile-2214"><a href="#concat_into_infile-2214"><span class="linenos">2214</span></a><span class="sd">    The function `concat_into_infile` concatenates multiple input files into a compressed output file,</span>
</span><span id="concat_into_infile-2215"><a href="#concat_into_infile-2215"><span class="linenos">2215</span></a><span class="sd">    with support for different compression types and multi-threading.</span>
</span><span id="concat_into_infile-2216"><a href="#concat_into_infile-2216"><span class="linenos">2216</span></a>
</span><span id="concat_into_infile-2217"><a href="#concat_into_infile-2217"><span class="linenos">2217</span></a><span class="sd">    :param input_files: A list of input file paths that need to be concatenated into the compressed file</span>
</span><span id="concat_into_infile-2218"><a href="#concat_into_infile-2218"><span class="linenos">2218</span></a><span class="sd">    :type input_files: list</span>
</span><span id="concat_into_infile-2219"><a href="#concat_into_infile-2219"><span class="linenos">2219</span></a><span class="sd">    :param compressed_file: The `compressed_file` parameter is an object that represents the file where</span>
</span><span id="concat_into_infile-2220"><a href="#concat_into_infile-2220"><span class="linenos">2220</span></a><span class="sd">    the concatenated contents of the input files will be written. It is expected to be a file object</span>
</span><span id="concat_into_infile-2221"><a href="#concat_into_infile-2221"><span class="linenos">2221</span></a><span class="sd">    that has write capabilities</span>
</span><span id="concat_into_infile-2222"><a href="#concat_into_infile-2222"><span class="linenos">2222</span></a><span class="sd">    :type compressed_file: object</span>
</span><span id="concat_into_infile-2223"><a href="#concat_into_infile-2223"><span class="linenos">2223</span></a><span class="sd">    :param compression_type: The `compression_type` parameter specifies the type of compression to be</span>
</span><span id="concat_into_infile-2224"><a href="#concat_into_infile-2224"><span class="linenos">2224</span></a><span class="sd">    used for the output file. The default value is &quot;none&quot;, which means no compression will be applied.</span>
</span><span id="concat_into_infile-2225"><a href="#concat_into_infile-2225"><span class="linenos">2225</span></a><span class="sd">    Other possible values include &quot;bgzip&quot; and &quot;gzip&quot;, which indicate that the output file should be</span>
</span><span id="concat_into_infile-2226"><a href="#concat_into_infile-2226"><span class="linenos">2226</span></a><span class="sd">    compressed using the bgzip and, defaults to none</span>
</span><span id="concat_into_infile-2227"><a href="#concat_into_infile-2227"><span class="linenos">2227</span></a><span class="sd">    :type compression_type: str (optional)</span>
</span><span id="concat_into_infile-2228"><a href="#concat_into_infile-2228"><span class="linenos">2228</span></a><span class="sd">    :param threads: The &quot;threads&quot; parameter specifies the number of threads to use for compression or</span>
</span><span id="concat_into_infile-2229"><a href="#concat_into_infile-2229"><span class="linenos">2229</span></a><span class="sd">    decompression. It determines how many parallel processes can be executed simultaneously, which can</span>
</span><span id="concat_into_infile-2230"><a href="#concat_into_infile-2230"><span class="linenos">2230</span></a><span class="sd">    help improve performance when dealing with large files or multiple files, defaults to 1</span>
</span><span id="concat_into_infile-2231"><a href="#concat_into_infile-2231"><span class="linenos">2231</span></a><span class="sd">    :type threads: int (optional)</span>
</span><span id="concat_into_infile-2232"><a href="#concat_into_infile-2232"><span class="linenos">2232</span></a><span class="sd">    :param block: The `block` parameter is used to specify the size of the block when reading the input</span>
</span><span id="concat_into_infile-2233"><a href="#concat_into_infile-2233"><span class="linenos">2233</span></a><span class="sd">    files. It is set to `10 ** 6`, which means 1 million bytes. This parameter determines how much data</span>
</span><span id="concat_into_infile-2234"><a href="#concat_into_infile-2234"><span class="linenos">2234</span></a><span class="sd">    is read from the input files at a time</span>
</span><span id="concat_into_infile-2235"><a href="#concat_into_infile-2235"><span class="linenos">2235</span></a><span class="sd">    :type block: int</span>
</span><span id="concat_into_infile-2236"><a href="#concat_into_infile-2236"><span class="linenos">2236</span></a><span class="sd">    :return: a boolean value, specifically `True`.</span>
</span><span id="concat_into_infile-2237"><a href="#concat_into_infile-2237"><span class="linenos">2237</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="concat_into_infile-2238"><a href="#concat_into_infile-2238"><span class="linenos">2238</span></a>
</span><span id="concat_into_infile-2239"><a href="#concat_into_infile-2239"><span class="linenos">2239</span></a>    <span class="c1"># Output file compressions type</span>
</span><span id="concat_into_infile-2240"><a href="#concat_into_infile-2240"><span class="linenos">2240</span></a>    <span class="k">if</span> <span class="n">compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;none&quot;</span><span class="p">]:</span>
</span><span id="concat_into_infile-2241"><a href="#concat_into_infile-2241"><span class="linenos">2241</span></a>        <span class="n">open_type</span> <span class="o">=</span> <span class="s2">&quot;t&quot;</span>
</span><span id="concat_into_infile-2242"><a href="#concat_into_infile-2242"><span class="linenos">2242</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="concat_into_infile-2243"><a href="#concat_into_infile-2243"><span class="linenos">2243</span></a>        <span class="n">open_type</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span>
</span><span id="concat_into_infile-2244"><a href="#concat_into_infile-2244"><span class="linenos">2244</span></a>
</span><span id="concat_into_infile-2245"><a href="#concat_into_infile-2245"><span class="linenos">2245</span></a>    <span class="c1"># Open input files</span>
</span><span id="concat_into_infile-2246"><a href="#concat_into_infile-2246"><span class="linenos">2246</span></a>    <span class="k">for</span> <span class="n">input_file</span> <span class="ow">in</span> <span class="n">input_files</span><span class="p">:</span>
</span><span id="concat_into_infile-2247"><a href="#concat_into_infile-2247"><span class="linenos">2247</span></a>
</span><span id="concat_into_infile-2248"><a href="#concat_into_infile-2248"><span class="linenos">2248</span></a>        <span class="c1"># Full path</span>
</span><span id="concat_into_infile-2249"><a href="#concat_into_infile-2249"><span class="linenos">2249</span></a>        <span class="n">input_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>
</span><span id="concat_into_infile-2250"><a href="#concat_into_infile-2250"><span class="linenos">2250</span></a>
</span><span id="concat_into_infile-2251"><a href="#concat_into_infile-2251"><span class="linenos">2251</span></a>        <span class="c1"># Input file compression type</span>
</span><span id="concat_into_infile-2252"><a href="#concat_into_infile-2252"><span class="linenos">2252</span></a>        <span class="n">input_compression_type</span> <span class="o">=</span> <span class="n">get_compression_type</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>
</span><span id="concat_into_infile-2253"><a href="#concat_into_infile-2253"><span class="linenos">2253</span></a>        <span class="k">if</span> <span class="n">input_compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;bgzip&quot;</span><span class="p">]:</span>
</span><span id="concat_into_infile-2254"><a href="#concat_into_infile-2254"><span class="linenos">2254</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">raw</span><span class="p">:</span>
</span><span id="concat_into_infile-2255"><a href="#concat_into_infile-2255"><span class="linenos">2255</span></a>                <span class="k">with</span> <span class="n">bgzip</span><span class="o">.</span><span class="n">BGZipReader</span><span class="p">(</span>
</span><span id="concat_into_infile-2256"><a href="#concat_into_infile-2256"><span class="linenos">2256</span></a>                    <span class="n">raw</span><span class="p">,</span> <span class="n">num_threads</span><span class="o">=</span><span class="n">threads</span><span class="p">,</span> <span class="n">raw_read_chunk_size</span><span class="o">=</span><span class="n">block</span>
</span><span id="concat_into_infile-2257"><a href="#concat_into_infile-2257"><span class="linenos">2257</span></a>                <span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
</span><span id="concat_into_infile-2258"><a href="#concat_into_infile-2258"><span class="linenos">2258</span></a>                    <span class="k">if</span> <span class="n">open_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;t&quot;</span><span class="p">]:</span>
</span><span id="concat_into_infile-2259"><a href="#concat_into_infile-2259"><span class="linenos">2259</span></a>                        <span class="n">compressed_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">infile</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
</span><span id="concat_into_infile-2260"><a href="#concat_into_infile-2260"><span class="linenos">2260</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="concat_into_infile-2261"><a href="#concat_into_infile-2261"><span class="linenos">2261</span></a>                        <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="n">compressed_file</span><span class="p">)</span>
</span><span id="concat_into_infile-2262"><a href="#concat_into_infile-2262"><span class="linenos">2262</span></a>        <span class="k">elif</span> <span class="n">input_compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;gzip&quot;</span><span class="p">]:</span>
</span><span id="concat_into_infile-2263"><a href="#concat_into_infile-2263"><span class="linenos">2263</span></a>            <span class="c1"># See https://pypi.org/project/mgzip/</span>
</span><span id="concat_into_infile-2264"><a href="#concat_into_infile-2264"><span class="linenos">2264</span></a>            <span class="k">with</span> <span class="n">mgzip</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span> <span class="o">+</span> <span class="n">open_type</span><span class="p">,</span> <span class="n">thread</span><span class="o">=</span><span class="n">threads</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
</span><span id="concat_into_infile-2265"><a href="#concat_into_infile-2265"><span class="linenos">2265</span></a>                <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="n">compressed_file</span><span class="p">)</span>
</span><span id="concat_into_infile-2266"><a href="#concat_into_infile-2266"><span class="linenos">2266</span></a>        <span class="k">elif</span> <span class="n">input_compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;none&quot;</span><span class="p">]:</span>
</span><span id="concat_into_infile-2267"><a href="#concat_into_infile-2267"><span class="linenos">2267</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span> <span class="o">+</span> <span class="n">open_type</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
</span><span id="concat_into_infile-2268"><a href="#concat_into_infile-2268"><span class="linenos">2268</span></a>                <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="n">compressed_file</span><span class="p">)</span>
</span><span id="concat_into_infile-2269"><a href="#concat_into_infile-2269"><span class="linenos">2269</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="concat_into_infile-2270"><a href="#concat_into_infile-2270"><span class="linenos">2270</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input file compression type unknown: </span><span class="si">{</span><span class="n">input_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="concat_into_infile-2271"><a href="#concat_into_infile-2271"><span class="linenos">2271</span></a>
</span><span id="concat_into_infile-2272"><a href="#concat_into_infile-2272"><span class="linenos">2272</span></a>    <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#concat_into_infile">concat_into_infile</a></code> concatenates multiple input files into a compressed output file,
with support for different compression types and multi-threading.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>input_files</strong>:  A list of input file paths that need to be concatenated into the compressed file</li>
<li><strong>compressed_file</strong>:  The <code>compressed_file</code> parameter is an object that represents the file where
the concatenated contents of the input files will be written. It is expected to be a file object
that has write capabilities</li>
<li><strong>compression_type</strong>:  The <code>compression_type</code> parameter specifies the type of compression to be
used for the output file. The default value is "none", which means no compression will be applied.
Other possible values include "bgzip" and "gzip", which indicate that the output file should be
compressed using the bgzip and, defaults to none</li>
<li><strong>threads</strong>:  The "threads" parameter specifies the number of threads to use for compression or
decompression. It determines how many parallel processes can be executed simultaneously, which can
help improve performance when dealing with large files or multiple files, defaults to 1</li>
<li><strong>block</strong>:  The <code>block</code> parameter is used to specify the size of the block when reading the input
files. It is set to <code>10 ** 6</code>, which means 1 million bytes. This parameter determines how much data
is read from the input files at a time</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a boolean value, specifically <code>True</code>.</p>
</blockquote>
</div>


                </section>
                <section id="concat_and_compress_files">
                            <input id="concat_and_compress_files-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">concat_and_compress_files</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">input_files</span><span class="p">:</span> <span class="nb">list</span>,</span><span class="param">	<span class="n">output_file</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">compression_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;bgzip&#39;</span>,</span><span class="param">	<span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>,</span><span class="param">	<span class="n">memory</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>,</span><span class="param">	<span class="n">block</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000000</span>,</span><span class="param">	<span class="n">compression_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span>,</span><span class="param">	<span class="n">sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">index</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="concat_and_compress_files-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#concat_and_compress_files"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="concat_and_compress_files-2275"><a href="#concat_and_compress_files-2275"><span class="linenos">2275</span></a><span class="k">def</span> <span class="nf">concat_and_compress_files</span><span class="p">(</span>
</span><span id="concat_and_compress_files-2276"><a href="#concat_and_compress_files-2276"><span class="linenos">2276</span></a>    <span class="n">input_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2277"><a href="#concat_and_compress_files-2277"><span class="linenos">2277</span></a>    <span class="n">output_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2278"><a href="#concat_and_compress_files-2278"><span class="linenos">2278</span></a>    <span class="n">compression_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bgzip&quot;</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2279"><a href="#concat_and_compress_files-2279"><span class="linenos">2279</span></a>    <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2280"><a href="#concat_and_compress_files-2280"><span class="linenos">2280</span></a>    <span class="n">memory</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2281"><a href="#concat_and_compress_files-2281"><span class="linenos">2281</span></a>    <span class="n">block</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2282"><a href="#concat_and_compress_files-2282"><span class="linenos">2282</span></a>    <span class="n">compression_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2283"><a href="#concat_and_compress_files-2283"><span class="linenos">2283</span></a>    <span class="n">sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2284"><a href="#concat_and_compress_files-2284"><span class="linenos">2284</span></a>    <span class="n">index</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2285"><a href="#concat_and_compress_files-2285"><span class="linenos">2285</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="concat_and_compress_files-2286"><a href="#concat_and_compress_files-2286"><span class="linenos">2286</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="concat_and_compress_files-2287"><a href="#concat_and_compress_files-2287"><span class="linenos">2287</span></a><span class="sd">    The function `concat_and_compress_files` takes a list of input files, an output file name, and</span>
</span><span id="concat_and_compress_files-2288"><a href="#concat_and_compress_files-2288"><span class="linenos">2288</span></a><span class="sd">    optional parameters for compression type, number of threads, block size, compression level, sorting,</span>
</span><span id="concat_and_compress_files-2289"><a href="#concat_and_compress_files-2289"><span class="linenos">2289</span></a><span class="sd">    and indexing, and concatenates and compresses the input files into the output file.</span>
</span><span id="concat_and_compress_files-2290"><a href="#concat_and_compress_files-2290"><span class="linenos">2290</span></a>
</span><span id="concat_and_compress_files-2291"><a href="#concat_and_compress_files-2291"><span class="linenos">2291</span></a><span class="sd">    :param input_files: A list of input file paths that need to be concatenated and compressed</span>
</span><span id="concat_and_compress_files-2292"><a href="#concat_and_compress_files-2292"><span class="linenos">2292</span></a><span class="sd">    :type input_files: list</span>
</span><span id="concat_and_compress_files-2293"><a href="#concat_and_compress_files-2293"><span class="linenos">2293</span></a><span class="sd">    :param output_file: The `output_file` parameter is a string that specifies the path and name of the</span>
</span><span id="concat_and_compress_files-2294"><a href="#concat_and_compress_files-2294"><span class="linenos">2294</span></a><span class="sd">    output file that will be created after concatenating and compressing the input files</span>
</span><span id="concat_and_compress_files-2295"><a href="#concat_and_compress_files-2295"><span class="linenos">2295</span></a><span class="sd">    :type output_file: str</span>
</span><span id="concat_and_compress_files-2296"><a href="#concat_and_compress_files-2296"><span class="linenos">2296</span></a><span class="sd">    :param compression_type: The `compression_type` parameter specifies the type of compression to be</span>
</span><span id="concat_and_compress_files-2297"><a href="#concat_and_compress_files-2297"><span class="linenos">2297</span></a><span class="sd">    applied to the output file. It can take one of three values: &quot;bgzip&quot;, &quot;gzip&quot;, or &quot;none&quot;, defaults to</span>
</span><span id="concat_and_compress_files-2298"><a href="#concat_and_compress_files-2298"><span class="linenos">2298</span></a><span class="sd">    bgzip</span>
</span><span id="concat_and_compress_files-2299"><a href="#concat_and_compress_files-2299"><span class="linenos">2299</span></a><span class="sd">    :type compression_type: str (optional)</span>
</span><span id="concat_and_compress_files-2300"><a href="#concat_and_compress_files-2300"><span class="linenos">2300</span></a><span class="sd">    :param threads: The `threads` parameter specifies the number of threads to use for compression and</span>
</span><span id="concat_and_compress_files-2301"><a href="#concat_and_compress_files-2301"><span class="linenos">2301</span></a><span class="sd">    decompression. It determines the level of parallelism in the compression process, allowing for</span>
</span><span id="concat_and_compress_files-2302"><a href="#concat_and_compress_files-2302"><span class="linenos">2302</span></a><span class="sd">    faster execution when multiple threads are used, defaults to 1</span>
</span><span id="concat_and_compress_files-2303"><a href="#concat_and_compress_files-2303"><span class="linenos">2303</span></a><span class="sd">    :type threads: int (optional)</span>
</span><span id="concat_and_compress_files-2304"><a href="#concat_and_compress_files-2304"><span class="linenos">2304</span></a><span class="sd">    :param memory: The `memory` parameter specifies the amount of max memory (in Gb) to use for sorting.</span>
</span><span id="concat_and_compress_files-2305"><a href="#concat_and_compress_files-2305"><span class="linenos">2305</span></a><span class="sd">    defaults to 1</span>
</span><span id="concat_and_compress_files-2306"><a href="#concat_and_compress_files-2306"><span class="linenos">2306</span></a><span class="sd">    :type memory: int (optional)</span>
</span><span id="concat_and_compress_files-2307"><a href="#concat_and_compress_files-2307"><span class="linenos">2307</span></a><span class="sd">    :param block: The `block` parameter specifies the size of the block used for reading and writing</span>
</span><span id="concat_and_compress_files-2308"><a href="#concat_and_compress_files-2308"><span class="linenos">2308</span></a><span class="sd">    data during compression. It is set to a default value of 10^6 (1 million) bytes</span>
</span><span id="concat_and_compress_files-2309"><a href="#concat_and_compress_files-2309"><span class="linenos">2309</span></a><span class="sd">    :type block: int</span>
</span><span id="concat_and_compress_files-2310"><a href="#concat_and_compress_files-2310"><span class="linenos">2310</span></a><span class="sd">    :param compression_level: The `compression_level` parameter determines the level of compression to</span>
</span><span id="concat_and_compress_files-2311"><a href="#concat_and_compress_files-2311"><span class="linenos">2311</span></a><span class="sd">    be used when compressing the output file. It is an integer value ranging from 0 to 9, where 0</span>
</span><span id="concat_and_compress_files-2312"><a href="#concat_and_compress_files-2312"><span class="linenos">2312</span></a><span class="sd">    indicates no compression and 9 indicates maximum compression. The higher the compression level, the</span>
</span><span id="concat_and_compress_files-2313"><a href="#concat_and_compress_files-2313"><span class="linenos">2313</span></a><span class="sd">    smaller the resulting compressed file size, defaults to 6</span>
</span><span id="concat_and_compress_files-2314"><a href="#concat_and_compress_files-2314"><span class="linenos">2314</span></a><span class="sd">    :type compression_level: int (optional)</span>
</span><span id="concat_and_compress_files-2315"><a href="#concat_and_compress_files-2315"><span class="linenos">2315</span></a><span class="sd">    :param sort: The `sort` parameter is a boolean flag that determines whether the output file should</span>
</span><span id="concat_and_compress_files-2316"><a href="#concat_and_compress_files-2316"><span class="linenos">2316</span></a><span class="sd">    be sorted or not. If `sort` is set to `True`, the output file will be sorted using</span>
</span><span id="concat_and_compress_files-2317"><a href="#concat_and_compress_files-2317"><span class="linenos">2317</span></a><span class="sd">    `pysam.bcftools.sort` before renaming it. If `sort` is set to `False, defaults to False</span>
</span><span id="concat_and_compress_files-2318"><a href="#concat_and_compress_files-2318"><span class="linenos">2318</span></a><span class="sd">    :type sort: bool (optional)</span>
</span><span id="concat_and_compress_files-2319"><a href="#concat_and_compress_files-2319"><span class="linenos">2319</span></a><span class="sd">    :param index: The `index` parameter is a boolean flag that determines whether or not to index the</span>
</span><span id="concat_and_compress_files-2320"><a href="#concat_and_compress_files-2320"><span class="linenos">2320</span></a><span class="sd">    output file after concatenation and compression. If `index` is set to `True`, the output file will</span>
</span><span id="concat_and_compress_files-2321"><a href="#concat_and_compress_files-2321"><span class="linenos">2321</span></a><span class="sd">    be indexed using the `pysam.tabix_index` function with the preset &quot;vcf&quot;. Make sure VCF is sorted.</span>
</span><span id="concat_and_compress_files-2322"><a href="#concat_and_compress_files-2322"><span class="linenos">2322</span></a><span class="sd">    Defaults to False</span>
</span><span id="concat_and_compress_files-2323"><a href="#concat_and_compress_files-2323"><span class="linenos">2323</span></a><span class="sd">    :type index: bool (optional)</span>
</span><span id="concat_and_compress_files-2324"><a href="#concat_and_compress_files-2324"><span class="linenos">2324</span></a><span class="sd">    :return: a boolean value indicating whether the output file exists or not.</span>
</span><span id="concat_and_compress_files-2325"><a href="#concat_and_compress_files-2325"><span class="linenos">2325</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="concat_and_compress_files-2326"><a href="#concat_and_compress_files-2326"><span class="linenos">2326</span></a>
</span><span id="concat_and_compress_files-2327"><a href="#concat_and_compress_files-2327"><span class="linenos">2327</span></a>    <span class="c1"># Prevent compression type not available</span>
</span><span id="concat_and_compress_files-2328"><a href="#concat_and_compress_files-2328"><span class="linenos">2328</span></a>    <span class="k">if</span> <span class="n">compression_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;bgzip&quot;</span><span class="p">,</span> <span class="s2">&quot;gzip&quot;</span><span class="p">,</span> <span class="s2">&quot;none&quot;</span><span class="p">]:</span>
</span><span id="concat_and_compress_files-2329"><a href="#concat_and_compress_files-2329"><span class="linenos">2329</span></a>        <span class="n">compression_type</span> <span class="o">=</span> <span class="s2">&quot;bgzip&quot;</span>
</span><span id="concat_and_compress_files-2330"><a href="#concat_and_compress_files-2330"><span class="linenos">2330</span></a>
</span><span id="concat_and_compress_files-2331"><a href="#concat_and_compress_files-2331"><span class="linenos">2331</span></a>    <span class="c1"># Output file compressions type</span>
</span><span id="concat_and_compress_files-2332"><a href="#concat_and_compress_files-2332"><span class="linenos">2332</span></a>    <span class="k">if</span> <span class="n">compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;none&quot;</span><span class="p">]:</span>
</span><span id="concat_and_compress_files-2333"><a href="#concat_and_compress_files-2333"><span class="linenos">2333</span></a>        <span class="n">open_type</span> <span class="o">=</span> <span class="s2">&quot;t&quot;</span>
</span><span id="concat_and_compress_files-2334"><a href="#concat_and_compress_files-2334"><span class="linenos">2334</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="concat_and_compress_files-2335"><a href="#concat_and_compress_files-2335"><span class="linenos">2335</span></a>        <span class="n">open_type</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span>
</span><span id="concat_and_compress_files-2336"><a href="#concat_and_compress_files-2336"><span class="linenos">2336</span></a>
</span><span id="concat_and_compress_files-2337"><a href="#concat_and_compress_files-2337"><span class="linenos">2337</span></a>    <span class="c1"># Full path</span>
</span><span id="concat_and_compress_files-2338"><a href="#concat_and_compress_files-2338"><span class="linenos">2338</span></a>    <span class="n">output_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</span><span id="concat_and_compress_files-2339"><a href="#concat_and_compress_files-2339"><span class="linenos">2339</span></a>
</span><span id="concat_and_compress_files-2340"><a href="#concat_and_compress_files-2340"><span class="linenos">2340</span></a>    <span class="c1"># Tmp file</span>
</span><span id="concat_and_compress_files-2341"><a href="#concat_and_compress_files-2341"><span class="linenos">2341</span></a>    <span class="n">output_file_tmp</span> <span class="o">=</span> <span class="n">output_file</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;.tmp&quot;</span>
</span><span id="concat_and_compress_files-2342"><a href="#concat_and_compress_files-2342"><span class="linenos">2342</span></a>
</span><span id="concat_and_compress_files-2343"><a href="#concat_and_compress_files-2343"><span class="linenos">2343</span></a>    <span class="k">if</span> <span class="n">compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;gzip&quot;</span><span class="p">]:</span>
</span><span id="concat_and_compress_files-2344"><a href="#concat_and_compress_files-2344"><span class="linenos">2344</span></a>        <span class="c1"># See https://pypi.org/project/mgzip/</span>
</span><span id="concat_and_compress_files-2345"><a href="#concat_and_compress_files-2345"><span class="linenos">2345</span></a>        <span class="k">with</span> <span class="n">pgzip</span><span class="o">.</span><span class="n">open</span><span class="p">(</span>
</span><span id="concat_and_compress_files-2346"><a href="#concat_and_compress_files-2346"><span class="linenos">2346</span></a>            <span class="n">output_file_tmp</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2347"><a href="#concat_and_compress_files-2347"><span class="linenos">2347</span></a>            <span class="s2">&quot;w&quot;</span> <span class="o">+</span> <span class="n">open_type</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2348"><a href="#concat_and_compress_files-2348"><span class="linenos">2348</span></a>            <span class="n">thread</span><span class="o">=</span><span class="n">threads</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2349"><a href="#concat_and_compress_files-2349"><span class="linenos">2349</span></a>            <span class="n">blocksize</span><span class="o">=</span><span class="n">threads</span> <span class="o">*</span> <span class="n">block</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2350"><a href="#concat_and_compress_files-2350"><span class="linenos">2350</span></a>            <span class="n">compresslevel</span><span class="o">=</span><span class="n">compression_level</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2351"><a href="#concat_and_compress_files-2351"><span class="linenos">2351</span></a>        <span class="p">)</span> <span class="k">as</span> <span class="n">compressed_file</span><span class="p">:</span>
</span><span id="concat_and_compress_files-2352"><a href="#concat_and_compress_files-2352"><span class="linenos">2352</span></a>            <span class="n">concat_into_infile</span><span class="p">(</span>
</span><span id="concat_and_compress_files-2353"><a href="#concat_and_compress_files-2353"><span class="linenos">2353</span></a>                <span class="n">input_files</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2354"><a href="#concat_and_compress_files-2354"><span class="linenos">2354</span></a>                <span class="n">compressed_file</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2355"><a href="#concat_and_compress_files-2355"><span class="linenos">2355</span></a>                <span class="n">compression_type</span><span class="o">=</span><span class="n">compression_type</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2356"><a href="#concat_and_compress_files-2356"><span class="linenos">2356</span></a>                <span class="n">threads</span><span class="o">=</span><span class="n">threads</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2357"><a href="#concat_and_compress_files-2357"><span class="linenos">2357</span></a>                <span class="n">block</span><span class="o">=</span><span class="n">block</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2358"><a href="#concat_and_compress_files-2358"><span class="linenos">2358</span></a>            <span class="p">)</span>
</span><span id="concat_and_compress_files-2359"><a href="#concat_and_compress_files-2359"><span class="linenos">2359</span></a>    <span class="k">elif</span> <span class="n">compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;bgzip&quot;</span><span class="p">]:</span>
</span><span id="concat_and_compress_files-2360"><a href="#concat_and_compress_files-2360"><span class="linenos">2360</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_file_tmp</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span> <span class="o">+</span> <span class="n">open_type</span><span class="p">)</span> <span class="k">as</span> <span class="n">compressed_file_raw</span><span class="p">:</span>
</span><span id="concat_and_compress_files-2361"><a href="#concat_and_compress_files-2361"><span class="linenos">2361</span></a>            <span class="k">with</span> <span class="n">bgzip</span><span class="o">.</span><span class="n">BGZipWriter</span><span class="p">(</span>
</span><span id="concat_and_compress_files-2362"><a href="#concat_and_compress_files-2362"><span class="linenos">2362</span></a>                <span class="n">compressed_file_raw</span><span class="p">,</span> <span class="n">num_threads</span><span class="o">=</span><span class="n">threads</span>
</span><span id="concat_and_compress_files-2363"><a href="#concat_and_compress_files-2363"><span class="linenos">2363</span></a>            <span class="p">)</span> <span class="k">as</span> <span class="n">compressed_file</span><span class="p">:</span>
</span><span id="concat_and_compress_files-2364"><a href="#concat_and_compress_files-2364"><span class="linenos">2364</span></a>                <span class="n">concat_into_infile</span><span class="p">(</span>
</span><span id="concat_and_compress_files-2365"><a href="#concat_and_compress_files-2365"><span class="linenos">2365</span></a>                    <span class="n">input_files</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2366"><a href="#concat_and_compress_files-2366"><span class="linenos">2366</span></a>                    <span class="n">compressed_file</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2367"><a href="#concat_and_compress_files-2367"><span class="linenos">2367</span></a>                    <span class="n">compression_type</span><span class="o">=</span><span class="n">compression_type</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2368"><a href="#concat_and_compress_files-2368"><span class="linenos">2368</span></a>                    <span class="n">threads</span><span class="o">=</span><span class="n">threads</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2369"><a href="#concat_and_compress_files-2369"><span class="linenos">2369</span></a>                    <span class="n">block</span><span class="o">=</span><span class="n">block</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2370"><a href="#concat_and_compress_files-2370"><span class="linenos">2370</span></a>                <span class="p">)</span>
</span><span id="concat_and_compress_files-2371"><a href="#concat_and_compress_files-2371"><span class="linenos">2371</span></a>    <span class="k">elif</span> <span class="n">compression_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;none&quot;</span><span class="p">]:</span>
</span><span id="concat_and_compress_files-2372"><a href="#concat_and_compress_files-2372"><span class="linenos">2372</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_file_tmp</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span> <span class="o">+</span> <span class="n">open_type</span><span class="p">)</span> <span class="k">as</span> <span class="n">compressed_file</span><span class="p">:</span>
</span><span id="concat_and_compress_files-2373"><a href="#concat_and_compress_files-2373"><span class="linenos">2373</span></a>            <span class="n">concat_into_infile</span><span class="p">(</span>
</span><span id="concat_and_compress_files-2374"><a href="#concat_and_compress_files-2374"><span class="linenos">2374</span></a>                <span class="n">input_files</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2375"><a href="#concat_and_compress_files-2375"><span class="linenos">2375</span></a>                <span class="n">compressed_file</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2376"><a href="#concat_and_compress_files-2376"><span class="linenos">2376</span></a>                <span class="n">compression_type</span><span class="o">=</span><span class="n">compression_type</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2377"><a href="#concat_and_compress_files-2377"><span class="linenos">2377</span></a>                <span class="n">threads</span><span class="o">=</span><span class="n">threads</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2378"><a href="#concat_and_compress_files-2378"><span class="linenos">2378</span></a>                <span class="n">block</span><span class="o">=</span><span class="n">block</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2379"><a href="#concat_and_compress_files-2379"><span class="linenos">2379</span></a>            <span class="p">)</span>
</span><span id="concat_and_compress_files-2380"><a href="#concat_and_compress_files-2380"><span class="linenos">2380</span></a>
</span><span id="concat_and_compress_files-2381"><a href="#concat_and_compress_files-2381"><span class="linenos">2381</span></a>    <span class="c1"># Output file</span>
</span><span id="concat_and_compress_files-2382"><a href="#concat_and_compress_files-2382"><span class="linenos">2382</span></a>    <span class="k">if</span> <span class="n">sort</span><span class="p">:</span>
</span><span id="concat_and_compress_files-2383"><a href="#concat_and_compress_files-2383"><span class="linenos">2383</span></a>        <span class="c1"># Sort with pysam</span>
</span><span id="concat_and_compress_files-2384"><a href="#concat_and_compress_files-2384"><span class="linenos">2384</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="concat_and_compress_files-2385"><a href="#concat_and_compress_files-2385"><span class="linenos">2385</span></a>            <span class="n">pysam</span><span class="o">.</span><span class="n">bcftools</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span>
</span><span id="concat_and_compress_files-2386"><a href="#concat_and_compress_files-2386"><span class="linenos">2386</span></a>                <span class="sa">f</span><span class="s2">&quot;-Oz</span><span class="si">{</span><span class="n">compression_level</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2387"><a href="#concat_and_compress_files-2387"><span class="linenos">2387</span></a>                <span class="s2">&quot;-o&quot;</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2388"><a href="#concat_and_compress_files-2388"><span class="linenos">2388</span></a>                <span class="n">output_file</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2389"><a href="#concat_and_compress_files-2389"><span class="linenos">2389</span></a>                <span class="s2">&quot;-T&quot;</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2390"><a href="#concat_and_compress_files-2390"><span class="linenos">2390</span></a>                <span class="n">output_file_tmp</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2391"><a href="#concat_and_compress_files-2391"><span class="linenos">2391</span></a>                <span class="n">output_file_tmp</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2392"><a href="#concat_and_compress_files-2392"><span class="linenos">2392</span></a>                <span class="s2">&quot;-m&quot;</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2393"><a href="#concat_and_compress_files-2393"><span class="linenos">2393</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">memory</span><span class="si">}</span><span class="s2">G&quot;</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2394"><a href="#concat_and_compress_files-2394"><span class="linenos">2394</span></a>                <span class="n">threads</span><span class="o">=</span><span class="n">threads</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2395"><a href="#concat_and_compress_files-2395"><span class="linenos">2395</span></a>                <span class="n">catch_stdout</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="concat_and_compress_files-2396"><a href="#concat_and_compress_files-2396"><span class="linenos">2396</span></a>            <span class="p">)</span>
</span><span id="concat_and_compress_files-2397"><a href="#concat_and_compress_files-2397"><span class="linenos">2397</span></a>            <span class="c1"># Remove tmp file</span>
</span><span id="concat_and_compress_files-2398"><a href="#concat_and_compress_files-2398"><span class="linenos">2398</span></a>            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">output_file_tmp</span><span class="p">)</span>
</span><span id="concat_and_compress_files-2399"><a href="#concat_and_compress_files-2399"><span class="linenos">2399</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="concat_and_compress_files-2400"><a href="#concat_and_compress_files-2400"><span class="linenos">2400</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Output file sorting failed: </span><span class="si">{</span><span class="n">output_file_tmp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="concat_and_compress_files-2401"><a href="#concat_and_compress_files-2401"><span class="linenos">2401</span></a>
</span><span id="concat_and_compress_files-2402"><a href="#concat_and_compress_files-2402"><span class="linenos">2402</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="concat_and_compress_files-2403"><a href="#concat_and_compress_files-2403"><span class="linenos">2403</span></a>        <span class="c1"># Rename tmp file</span>
</span><span id="concat_and_compress_files-2404"><a href="#concat_and_compress_files-2404"><span class="linenos">2404</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">output_file_tmp</span><span class="p">,</span> <span class="n">output_file</span><span class="p">)</span>
</span><span id="concat_and_compress_files-2405"><a href="#concat_and_compress_files-2405"><span class="linenos">2405</span></a>
</span><span id="concat_and_compress_files-2406"><a href="#concat_and_compress_files-2406"><span class="linenos">2406</span></a>    <span class="c1"># Index file</span>
</span><span id="concat_and_compress_files-2407"><a href="#concat_and_compress_files-2407"><span class="linenos">2407</span></a>    <span class="k">if</span> <span class="n">index</span><span class="p">:</span>
</span><span id="concat_and_compress_files-2408"><a href="#concat_and_compress_files-2408"><span class="linenos">2408</span></a>        <span class="c1"># Index file with tabix</span>
</span><span id="concat_and_compress_files-2409"><a href="#concat_and_compress_files-2409"><span class="linenos">2409</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="concat_and_compress_files-2410"><a href="#concat_and_compress_files-2410"><span class="linenos">2410</span></a>            <span class="n">pysam</span><span class="o">.</span><span class="n">tabix_index</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="n">preset</span><span class="o">=</span><span class="s2">&quot;vcf&quot;</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="concat_and_compress_files-2411"><a href="#concat_and_compress_files-2411"><span class="linenos">2411</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="concat_and_compress_files-2412"><a href="#concat_and_compress_files-2412"><span class="linenos">2412</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Output file indexing failed: </span><span class="si">{</span><span class="n">output_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="concat_and_compress_files-2413"><a href="#concat_and_compress_files-2413"><span class="linenos">2413</span></a>
</span><span id="concat_and_compress_files-2414"><a href="#concat_and_compress_files-2414"><span class="linenos">2414</span></a>    <span class="c1"># Return output file</span>
</span><span id="concat_and_compress_files-2415"><a href="#concat_and_compress_files-2415"><span class="linenos">2415</span></a>    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#concat_and_compress_files">concat_and_compress_files</a></code> takes a list of input files, an output file name, and
optional parameters for compression type, number of threads, block size, compression level, sorting,
and indexing, and concatenates and compresses the input files into the output file.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>input_files</strong>:  A list of input file paths that need to be concatenated and compressed</li>
<li><strong>output_file</strong>:  The <code>output_file</code> parameter is a string that specifies the path and name of the
output file that will be created after concatenating and compressing the input files</li>
<li><strong>compression_type</strong>:  The <code>compression_type</code> parameter specifies the type of compression to be
applied to the output file. It can take one of three values: "bgzip", "gzip", or "none", defaults to
bgzip</li>
<li><strong>threads</strong>:  The <code>threads</code> parameter specifies the number of threads to use for compression and
decompression. It determines the level of parallelism in the compression process, allowing for
faster execution when multiple threads are used, defaults to 1</li>
<li><strong>memory</strong>:  The <code>memory</code> parameter specifies the amount of max memory (in Gb) to use for sorting.
defaults to 1</li>
<li><strong>block</strong>:  The <code>block</code> parameter specifies the size of the block used for reading and writing
data during compression. It is set to a default value of 10^6 (1 million) bytes</li>
<li><strong>compression_level</strong>:  The <code>compression_level</code> parameter determines the level of compression to
be used when compressing the output file. It is an integer value ranging from 0 to 9, where 0
indicates no compression and 9 indicates maximum compression. The higher the compression level, the
smaller the resulting compressed file size, defaults to 6</li>
<li><strong>sort</strong>:  The <code>sort</code> parameter is a boolean flag that determines whether the output file should
be sorted or not. If <code>sort</code> is set to <code>True</code>, the output file will be sorted using
<code>pysam.bcftools.sort</code> before renaming it. If <code>sort</code> is set to `False, defaults to False</li>
<li><strong>index</strong>:  The <code>index</code> parameter is a boolean flag that determines whether or not to index the
output file after concatenation and compression. If <code>index</code> is set to <code>True</code>, the output file will
be indexed using the <code>pysam.tabix_index</code> function with the preset "vcf". Make sure VCF is sorted.
Defaults to False</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a boolean value indicating whether the output file exists or not.</p>
</blockquote>
</div>


                </section>
                <section id="get_plateform_name_from_duckdb">
                            <input id="get_plateform_name_from_duckdb-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_plateform_name_from_duckdb</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">conn</span><span class="p">:</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="get_plateform_name_from_duckdb-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_plateform_name_from_duckdb"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_plateform_name_from_duckdb-2418"><a href="#get_plateform_name_from_duckdb-2418"><span class="linenos">2418</span></a><span class="k">def</span> <span class="nf">get_plateform_name_from_duckdb</span><span class="p">(</span><span class="n">conn</span><span class="p">:</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="get_plateform_name_from_duckdb-2419"><a href="#get_plateform_name_from_duckdb-2419"><span class="linenos">2419</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_plateform_name_from_duckdb-2420"><a href="#get_plateform_name_from_duckdb-2420"><span class="linenos">2420</span></a><span class="sd">    The function `get_plateform_name_from_duckdb` returns the platform information from a DuckDB connection.</span>
</span><span id="get_plateform_name_from_duckdb-2421"><a href="#get_plateform_name_from_duckdb-2421"><span class="linenos">2421</span></a>
</span><span id="get_plateform_name_from_duckdb-2422"><a href="#get_plateform_name_from_duckdb-2422"><span class="linenos">2422</span></a><span class="sd">    :param conn: The `conn` parameter is an instance of the `DuckDBPyConnection` class from the `duckdb`</span>
</span><span id="get_plateform_name_from_duckdb-2423"><a href="#get_plateform_name_from_duckdb-2423"><span class="linenos">2423</span></a><span class="sd">    module. It represents a connection to a DuckDB database</span>
</span><span id="get_plateform_name_from_duckdb-2424"><a href="#get_plateform_name_from_duckdb-2424"><span class="linenos">2424</span></a><span class="sd">    :type conn: duckdb.DuckDBPyConnection</span>
</span><span id="get_plateform_name_from_duckdb-2425"><a href="#get_plateform_name_from_duckdb-2425"><span class="linenos">2425</span></a><span class="sd">    :return: the platform information from the DuckDB connection.</span>
</span><span id="get_plateform_name_from_duckdb-2426"><a href="#get_plateform_name_from_duckdb-2426"><span class="linenos">2426</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_plateform_name_from_duckdb-2427"><a href="#get_plateform_name_from_duckdb-2427"><span class="linenos">2427</span></a>
</span><span id="get_plateform_name_from_duckdb-2428"><a href="#get_plateform_name_from_duckdb-2428"><span class="linenos">2428</span></a>    <span class="k">return</span> <span class="n">conn</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;PRAGMA platform&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">df</span><span class="p">()[</span><span class="s2">&quot;platform&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#get_plateform_name_from_duckdb">get_plateform_name_from_duckdb</a></code> returns the platform information from a DuckDB connection.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>conn</strong>:  The <code>conn</code> parameter is an instance of the <code>DuckDBPyConnection</code> class from the <code>duckdb</code>
module. It represents a connection to a DuckDB database</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>the platform information from the DuckDB connection.</p>
</blockquote>
</div>


                </section>
                <section id="get_duckdb_extension_file">
                            <input id="get_duckdb_extension_file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_duckdb_extension_file</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">extension_name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">conn</span><span class="p">:</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span>,</span><span class="param">	<span class="n">download</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="get_duckdb_extension_file-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_duckdb_extension_file"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_duckdb_extension_file-2431"><a href="#get_duckdb_extension_file-2431"><span class="linenos">2431</span></a><span class="k">def</span> <span class="nf">get_duckdb_extension_file</span><span class="p">(</span>
</span><span id="get_duckdb_extension_file-2432"><a href="#get_duckdb_extension_file-2432"><span class="linenos">2432</span></a>    <span class="n">extension_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">conn</span><span class="p">:</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span><span class="p">,</span> <span class="n">download</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="get_duckdb_extension_file-2433"><a href="#get_duckdb_extension_file-2433"><span class="linenos">2433</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="get_duckdb_extension_file-2434"><a href="#get_duckdb_extension_file-2434"><span class="linenos">2434</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_duckdb_extension_file-2435"><a href="#get_duckdb_extension_file-2435"><span class="linenos">2435</span></a><span class="sd">    This function returns the file path of a DuckDB extension based on the extension name and platform.</span>
</span><span id="get_duckdb_extension_file-2436"><a href="#get_duckdb_extension_file-2436"><span class="linenos">2436</span></a>
</span><span id="get_duckdb_extension_file-2437"><a href="#get_duckdb_extension_file-2437"><span class="linenos">2437</span></a><span class="sd">    :param extension_name: The name of the DuckDB extension file that is being requested</span>
</span><span id="get_duckdb_extension_file-2438"><a href="#get_duckdb_extension_file-2438"><span class="linenos">2438</span></a><span class="sd">    :type extension_name: str</span>
</span><span id="get_duckdb_extension_file-2439"><a href="#get_duckdb_extension_file-2439"><span class="linenos">2439</span></a><span class="sd">    :return: a string that represents the file path of a DuckDB extension file. The file path is</span>
</span><span id="get_duckdb_extension_file-2440"><a href="#get_duckdb_extension_file-2440"><span class="linenos">2440</span></a><span class="sd">    constructed using the constant `DUCKDB_EXTENSION`, the platform name obtained from the</span>
</span><span id="get_duckdb_extension_file-2441"><a href="#get_duckdb_extension_file-2441"><span class="linenos">2441</span></a><span class="sd">    `get_plateform_name_from_duckdb()` function, and the extension name passed as an argument to the function.</span>
</span><span id="get_duckdb_extension_file-2442"><a href="#get_duckdb_extension_file-2442"><span class="linenos">2442</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_duckdb_extension_file-2443"><a href="#get_duckdb_extension_file-2443"><span class="linenos">2443</span></a>
</span><span id="get_duckdb_extension_file-2444"><a href="#get_duckdb_extension_file-2444"><span class="linenos">2444</span></a>    <span class="c1"># Init</span>
</span><span id="get_duckdb_extension_file-2445"><a href="#get_duckdb_extension_file-2445"><span class="linenos">2445</span></a>    <span class="n">release_version_number</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">__version__</span>
</span><span id="get_duckdb_extension_file-2446"><a href="#get_duckdb_extension_file-2446"><span class="linenos">2446</span></a>    <span class="n">platform_name</span> <span class="o">=</span> <span class="n">get_plateform_name_from_duckdb</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</span><span id="get_duckdb_extension_file-2447"><a href="#get_duckdb_extension_file-2447"><span class="linenos">2447</span></a>
</span><span id="get_duckdb_extension_file-2448"><a href="#get_duckdb_extension_file-2448"><span class="linenos">2448</span></a>    <span class="c1"># File</span>
</span><span id="get_duckdb_extension_file-2449"><a href="#get_duckdb_extension_file-2449"><span class="linenos">2449</span></a>    <span class="n">extension_file_path</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="get_duckdb_extension_file-2450"><a href="#get_duckdb_extension_file-2450"><span class="linenos">2450</span></a>        <span class="sa">f</span><span class="s2">&quot;v</span><span class="si">{</span><span class="n">release_version_number</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">platform_name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">extension_name</span><span class="si">}</span><span class="s2">.duckdb_extension&quot;</span>
</span><span id="get_duckdb_extension_file-2451"><a href="#get_duckdb_extension_file-2451"><span class="linenos">2451</span></a>    <span class="p">)</span>
</span><span id="get_duckdb_extension_file-2452"><a href="#get_duckdb_extension_file-2452"><span class="linenos">2452</span></a>    <span class="n">extension_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DUCKDB_EXTENSION</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">extension_file_path</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="get_duckdb_extension_file-2453"><a href="#get_duckdb_extension_file-2453"><span class="linenos">2453</span></a>    <span class="n">extension_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">extension_file</span><span class="p">)</span>
</span><span id="get_duckdb_extension_file-2454"><a href="#get_duckdb_extension_file-2454"><span class="linenos">2454</span></a>    <span class="n">extension_file_gz</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">extension_file</span><span class="si">}</span><span class="s2">.gz&quot;</span>
</span><span id="get_duckdb_extension_file-2455"><a href="#get_duckdb_extension_file-2455"><span class="linenos">2455</span></a>    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;http://extensions.duckdb.org/</span><span class="si">{</span><span class="n">extension_file_path</span><span class="si">}</span><span class="s2">.gz&quot;</span>
</span><span id="get_duckdb_extension_file-2456"><a href="#get_duckdb_extension_file-2456"><span class="linenos">2456</span></a>
</span><span id="get_duckdb_extension_file-2457"><a href="#get_duckdb_extension_file-2457"><span class="linenos">2457</span></a>    <span class="c1"># Download and extract if not exists</span>
</span><span id="get_duckdb_extension_file-2458"><a href="#get_duckdb_extension_file-2458"><span class="linenos">2458</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">extension_file</span><span class="p">)</span> <span class="ow">and</span> <span class="n">download</span><span class="p">:</span>
</span><span id="get_duckdb_extension_file-2459"><a href="#get_duckdb_extension_file-2459"><span class="linenos">2459</span></a>        <span class="c1"># Create folder if not exists</span>
</span><span id="get_duckdb_extension_file-2460"><a href="#get_duckdb_extension_file-2460"><span class="linenos">2460</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">extension_file</span><span class="p">)):</span>
</span><span id="get_duckdb_extension_file-2461"><a href="#get_duckdb_extension_file-2461"><span class="linenos">2461</span></a>            <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">extension_file</span><span class="p">))</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="get_duckdb_extension_file-2462"><a href="#get_duckdb_extension_file-2462"><span class="linenos">2462</span></a>        <span class="c1"># Download extension if not exists</span>
</span><span id="get_duckdb_extension_file-2463"><a href="#get_duckdb_extension_file-2463"><span class="linenos">2463</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">extension_file_gz</span><span class="p">):</span>
</span><span id="get_duckdb_extension_file-2464"><a href="#get_duckdb_extension_file-2464"><span class="linenos">2464</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="get_duckdb_extension_file-2465"><a href="#get_duckdb_extension_file-2465"><span class="linenos">2465</span></a>                <span class="n">download_file</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">extension_file_gz</span><span class="p">)</span>
</span><span id="get_duckdb_extension_file-2466"><a href="#get_duckdb_extension_file-2466"><span class="linenos">2466</span></a>            <span class="k">except</span><span class="p">:</span>
</span><span id="get_duckdb_extension_file-2467"><a href="#get_duckdb_extension_file-2467"><span class="linenos">2467</span></a>                <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fail download &#39;</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="get_duckdb_extension_file-2468"><a href="#get_duckdb_extension_file-2468"><span class="linenos">2468</span></a>        <span class="c1"># Uncompress extention file</span>
</span><span id="get_duckdb_extension_file-2469"><a href="#get_duckdb_extension_file-2469"><span class="linenos">2469</span></a>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">extension_file_gz</span><span class="p">):</span>
</span><span id="get_duckdb_extension_file-2470"><a href="#get_duckdb_extension_file-2470"><span class="linenos">2470</span></a>            <span class="k">with</span> <span class="n">mgzip</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">extension_file_gz</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
</span><span id="get_duckdb_extension_file-2471"><a href="#get_duckdb_extension_file-2471"><span class="linenos">2471</span></a>                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">extension_file</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">compressed_file</span><span class="p">:</span>
</span><span id="get_duckdb_extension_file-2472"><a href="#get_duckdb_extension_file-2472"><span class="linenos">2472</span></a>                    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfileobj</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="n">compressed_file</span><span class="p">)</span>
</span><span id="get_duckdb_extension_file-2473"><a href="#get_duckdb_extension_file-2473"><span class="linenos">2473</span></a>
</span><span id="get_duckdb_extension_file-2474"><a href="#get_duckdb_extension_file-2474"><span class="linenos">2474</span></a>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">extension_file</span><span class="p">):</span>
</span><span id="get_duckdb_extension_file-2475"><a href="#get_duckdb_extension_file-2475"><span class="linenos">2475</span></a>        <span class="k">return</span> <span class="n">extension_file</span>
</span><span id="get_duckdb_extension_file-2476"><a href="#get_duckdb_extension_file-2476"><span class="linenos">2476</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="get_duckdb_extension_file-2477"><a href="#get_duckdb_extension_file-2477"><span class="linenos">2477</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>This function returns the file path of a DuckDB extension based on the extension name and platform.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>extension_name</strong>:  The name of the DuckDB extension file that is being requested</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a string that represents the file path of a DuckDB extension file. The file path is
  constructed using the constant <code><a href="#DUCKDB_EXTENSION">DUCKDB_EXTENSION</a></code>, the platform name obtained from the
  <code><a href="#get_plateform_name_from_duckdb">get_plateform_name_from_duckdb()</a></code> function, and the extension name passed as an argument to the function.</p>
</blockquote>
</div>


                </section>
                <section id="load_duckdb_extension">
                            <input id="load_duckdb_extension-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">load_duckdb_extension</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">conn</span><span class="p">:</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span>, </span><span class="param"><span class="n">duckdb_extensions</span><span class="p">:</span> <span class="nb">list</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="load_duckdb_extension-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#load_duckdb_extension"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="load_duckdb_extension-2480"><a href="#load_duckdb_extension-2480"><span class="linenos">2480</span></a><span class="k">def</span> <span class="nf">load_duckdb_extension</span><span class="p">(</span>
</span><span id="load_duckdb_extension-2481"><a href="#load_duckdb_extension-2481"><span class="linenos">2481</span></a>    <span class="n">conn</span><span class="p">:</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">DuckDBPyConnection</span><span class="p">,</span> <span class="n">duckdb_extensions</span><span class="p">:</span> <span class="nb">list</span>
</span><span id="load_duckdb_extension-2482"><a href="#load_duckdb_extension-2482"><span class="linenos">2482</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="load_duckdb_extension-2483"><a href="#load_duckdb_extension-2483"><span class="linenos">2483</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="load_duckdb_extension-2484"><a href="#load_duckdb_extension-2484"><span class="linenos">2484</span></a><span class="sd">    This function loads DuckDB extensions into a connection object and returns a boolean indicating</span>
</span><span id="load_duckdb_extension-2485"><a href="#load_duckdb_extension-2485"><span class="linenos">2485</span></a><span class="sd">    whether all extensions were successfully loaded.</span>
</span><span id="load_duckdb_extension-2486"><a href="#load_duckdb_extension-2486"><span class="linenos">2486</span></a>
</span><span id="load_duckdb_extension-2487"><a href="#load_duckdb_extension-2487"><span class="linenos">2487</span></a><span class="sd">    :param conn: duckdb.DuckDBPyConnection object representing a connection to a DuckDB database</span>
</span><span id="load_duckdb_extension-2488"><a href="#load_duckdb_extension-2488"><span class="linenos">2488</span></a><span class="sd">    :type conn: duckdb.DuckDBPyConnection</span>
</span><span id="load_duckdb_extension-2489"><a href="#load_duckdb_extension-2489"><span class="linenos">2489</span></a><span class="sd">    :param duckdb_extensions: A list of strings representing the names of the DuckDB extensions to be</span>
</span><span id="load_duckdb_extension-2490"><a href="#load_duckdb_extension-2490"><span class="linenos">2490</span></a><span class="sd">    loaded</span>
</span><span id="load_duckdb_extension-2491"><a href="#load_duckdb_extension-2491"><span class="linenos">2491</span></a><span class="sd">    :type duckdb_extensions: list</span>
</span><span id="load_duckdb_extension-2492"><a href="#load_duckdb_extension-2492"><span class="linenos">2492</span></a><span class="sd">    :return: a boolean value indicating whether all the specified DuckDB extensions were successfully</span>
</span><span id="load_duckdb_extension-2493"><a href="#load_duckdb_extension-2493"><span class="linenos">2493</span></a><span class="sd">    loaded or not.</span>
</span><span id="load_duckdb_extension-2494"><a href="#load_duckdb_extension-2494"><span class="linenos">2494</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="load_duckdb_extension-2495"><a href="#load_duckdb_extension-2495"><span class="linenos">2495</span></a>
</span><span id="load_duckdb_extension-2496"><a href="#load_duckdb_extension-2496"><span class="linenos">2496</span></a>    <span class="n">loaded</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="load_duckdb_extension-2497"><a href="#load_duckdb_extension-2497"><span class="linenos">2497</span></a>
</span><span id="load_duckdb_extension-2498"><a href="#load_duckdb_extension-2498"><span class="linenos">2498</span></a>    <span class="k">for</span> <span class="n">extension_name</span> <span class="ow">in</span> <span class="n">duckdb_extensions</span><span class="p">:</span>
</span><span id="load_duckdb_extension-2499"><a href="#load_duckdb_extension-2499"><span class="linenos">2499</span></a>        <span class="n">duckdb_extension_file</span> <span class="o">=</span> <span class="n">get_duckdb_extension_file</span><span class="p">(</span>
</span><span id="load_duckdb_extension-2500"><a href="#load_duckdb_extension-2500"><span class="linenos">2500</span></a>            <span class="n">extension_name</span><span class="p">,</span> <span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">True</span>
</span><span id="load_duckdb_extension-2501"><a href="#load_duckdb_extension-2501"><span class="linenos">2501</span></a>        <span class="p">)</span>
</span><span id="load_duckdb_extension-2502"><a href="#load_duckdb_extension-2502"><span class="linenos">2502</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="load_duckdb_extension-2503"><a href="#load_duckdb_extension-2503"><span class="linenos">2503</span></a>            <span class="k">if</span> <span class="n">duckdb_extension_file</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">duckdb_extension_file</span><span class="p">):</span>
</span><span id="load_duckdb_extension-2504"><a href="#load_duckdb_extension-2504"><span class="linenos">2504</span></a>                <span class="c1"># Try loading extension by file</span>
</span><span id="load_duckdb_extension-2505"><a href="#load_duckdb_extension-2505"><span class="linenos">2505</span></a>                <span class="n">conn</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
</span><span id="load_duckdb_extension-2506"><a href="#load_duckdb_extension-2506"><span class="linenos">2506</span></a>                    <span class="sa">f</span><span class="s2">&quot;INSTALL &#39;</span><span class="si">{</span><span class="n">duckdb_extension_file</span><span class="si">}</span><span class="s2">&#39;; LOAD </span><span class="si">{</span><span class="n">extension_name</span><span class="si">}</span><span class="s2">; &quot;</span>
</span><span id="load_duckdb_extension-2507"><a href="#load_duckdb_extension-2507"><span class="linenos">2507</span></a>                <span class="p">)</span>
</span><span id="load_duckdb_extension-2508"><a href="#load_duckdb_extension-2508"><span class="linenos">2508</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="load_duckdb_extension-2509"><a href="#load_duckdb_extension-2509"><span class="linenos">2509</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="load_duckdb_extension-2510"><a href="#load_duckdb_extension-2510"><span class="linenos">2510</span></a>                    <span class="k">with</span> <span class="n">time_limit</span><span class="p">(</span><span class="mi">60</span><span class="p">):</span>
</span><span id="load_duckdb_extension-2511"><a href="#load_duckdb_extension-2511"><span class="linenos">2511</span></a>                        <span class="c1"># Try loading extension by name</span>
</span><span id="load_duckdb_extension-2512"><a href="#load_duckdb_extension-2512"><span class="linenos">2512</span></a>                        <span class="n">conn</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
</span><span id="load_duckdb_extension-2513"><a href="#load_duckdb_extension-2513"><span class="linenos">2513</span></a>                            <span class="sa">f</span><span class="s2">&quot;INSTALL &#39;</span><span class="si">{</span><span class="n">extension_name</span><span class="si">}</span><span class="s2">&#39;; LOAD </span><span class="si">{</span><span class="n">extension_name</span><span class="si">}</span><span class="s2">; &quot;</span>
</span><span id="load_duckdb_extension-2514"><a href="#load_duckdb_extension-2514"><span class="linenos">2514</span></a>                        <span class="p">)</span>
</span><span id="load_duckdb_extension-2515"><a href="#load_duckdb_extension-2515"><span class="linenos">2515</span></a>                <span class="k">except</span><span class="p">:</span>
</span><span id="load_duckdb_extension-2516"><a href="#load_duckdb_extension-2516"><span class="linenos">2516</span></a>                    <span class="n">loaded</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="load_duckdb_extension-2517"><a href="#load_duckdb_extension-2517"><span class="linenos">2517</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="load_duckdb_extension-2518"><a href="#load_duckdb_extension-2518"><span class="linenos">2518</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="load_duckdb_extension-2519"><a href="#load_duckdb_extension-2519"><span class="linenos">2519</span></a>                <span class="k">with</span> <span class="n">time_limit</span><span class="p">(</span><span class="mi">60</span><span class="p">):</span>
</span><span id="load_duckdb_extension-2520"><a href="#load_duckdb_extension-2520"><span class="linenos">2520</span></a>                    <span class="c1"># Try loading extension by name</span>
</span><span id="load_duckdb_extension-2521"><a href="#load_duckdb_extension-2521"><span class="linenos">2521</span></a>                    <span class="n">conn</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;INSTALL &#39;</span><span class="si">{</span><span class="n">extension_name</span><span class="si">}</span><span class="s2">&#39;; LOAD </span><span class="si">{</span><span class="n">extension_name</span><span class="si">}</span><span class="s2">; &quot;</span><span class="p">)</span>
</span><span id="load_duckdb_extension-2522"><a href="#load_duckdb_extension-2522"><span class="linenos">2522</span></a>            <span class="k">except</span><span class="p">:</span>
</span><span id="load_duckdb_extension-2523"><a href="#load_duckdb_extension-2523"><span class="linenos">2523</span></a>                <span class="n">loaded</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="load_duckdb_extension-2524"><a href="#load_duckdb_extension-2524"><span class="linenos">2524</span></a>
</span><span id="load_duckdb_extension-2525"><a href="#load_duckdb_extension-2525"><span class="linenos">2525</span></a>    <span class="k">return</span> <span class="n">loaded</span>
</span></pre></div>


            <div class="docstring"><p>This function loads DuckDB extensions into a connection object and returns a boolean indicating
whether all extensions were successfully loaded.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>conn</strong>:  duckdb.DuckDBPyConnection object representing a connection to a DuckDB database</li>
<li><strong>duckdb_extensions</strong>:  A list of strings representing the names of the DuckDB extensions to be
loaded</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a boolean value indicating whether all the specified DuckDB extensions were successfully
  loaded or not.</p>
</blockquote>
</div>


                </section>
                <section id="TimeoutException">
                            <input id="TimeoutException-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">TimeoutException</span><wbr>(<span class="base">builtins.Exception</span>):

                <label class="view-source-button" for="TimeoutException-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#TimeoutException"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="TimeoutException-2528"><a href="#TimeoutException-2528"><span class="linenos">2528</span></a><span class="k">class</span> <span class="nc">TimeoutException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="TimeoutException-2529"><a href="#TimeoutException-2529"><span class="linenos">2529</span></a>    <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Common base class for all non-exit exceptions.</p>
</div>


                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.Exception</dt>
                                <dd id="TimeoutException.__init__" class="function">Exception</dd>

            </div>
            <div><dt>builtins.BaseException</dt>
                                <dd id="TimeoutException.with_traceback" class="function">with_traceback</dd>
                <dd id="TimeoutException.args" class="variable">args</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="time_limit">
                            <input id="time_limit-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">time_limit</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">seconds</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="time_limit-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#time_limit"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="time_limit-2532"><a href="#time_limit-2532"><span class="linenos">2532</span></a><span class="k">def</span> <span class="nf">time_limit</span><span class="p">(</span><span class="n">seconds</span><span class="p">):</span>
</span><span id="time_limit-2533"><a href="#time_limit-2533"><span class="linenos">2533</span></a>    <span class="k">def</span> <span class="nf">signal_handler</span><span class="p">(</span><span class="n">signum</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
</span><span id="time_limit-2534"><a href="#time_limit-2534"><span class="linenos">2534</span></a>        <span class="k">raise</span> <span class="n">TimeoutException</span><span class="p">(</span><span class="s2">&quot;Timed out!&quot;</span><span class="p">)</span>
</span><span id="time_limit-2535"><a href="#time_limit-2535"><span class="linenos">2535</span></a>
</span><span id="time_limit-2536"><a href="#time_limit-2536"><span class="linenos">2536</span></a>    <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGALRM</span><span class="p">,</span> <span class="n">signal_handler</span><span class="p">)</span>
</span><span id="time_limit-2537"><a href="#time_limit-2537"><span class="linenos">2537</span></a>    <span class="n">signal</span><span class="o">.</span><span class="n">alarm</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
</span><span id="time_limit-2538"><a href="#time_limit-2538"><span class="linenos">2538</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="time_limit-2539"><a href="#time_limit-2539"><span class="linenos">2539</span></a>        <span class="k">yield</span>
</span><span id="time_limit-2540"><a href="#time_limit-2540"><span class="linenos">2540</span></a>    <span class="k">finally</span><span class="p">:</span>
</span><span id="time_limit-2541"><a href="#time_limit-2541"><span class="linenos">2541</span></a>        <span class="n">signal</span><span class="o">.</span><span class="n">alarm</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></pre></div>


    

                </section>
                <section id="duckdb_execute">
                            <input id="duckdb_execute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">duckdb_execute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">query</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="duckdb_execute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#duckdb_execute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="duckdb_execute-2544"><a href="#duckdb_execute-2544"><span class="linenos">2544</span></a><span class="k">def</span> <span class="nf">duckdb_execute</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">threads</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="duckdb_execute-2545"><a href="#duckdb_execute-2545"><span class="linenos">2545</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="duckdb_execute-2546"><a href="#duckdb_execute-2546"><span class="linenos">2546</span></a><span class="sd">    The `duckdb_execute` function executes a query using the DuckDB database engine and returns a</span>
</span><span id="duckdb_execute-2547"><a href="#duckdb_execute-2547"><span class="linenos">2547</span></a><span class="sd">    boolean indicating whether the query was successful or not.</span>
</span><span id="duckdb_execute-2548"><a href="#duckdb_execute-2548"><span class="linenos">2548</span></a>
</span><span id="duckdb_execute-2549"><a href="#duckdb_execute-2549"><span class="linenos">2549</span></a><span class="sd">    :param query: The `query` parameter is a string that represents the SQL query you want to execute in</span>
</span><span id="duckdb_execute-2550"><a href="#duckdb_execute-2550"><span class="linenos">2550</span></a><span class="sd">    DuckDB. It can be any valid SQL statement, such as SELECT, INSERT, UPDATE, DELETE, etc</span>
</span><span id="duckdb_execute-2551"><a href="#duckdb_execute-2551"><span class="linenos">2551</span></a><span class="sd">    :type query: str</span>
</span><span id="duckdb_execute-2552"><a href="#duckdb_execute-2552"><span class="linenos">2552</span></a><span class="sd">    :param threads: The &quot;threads&quot; parameter specifies the number of threads to use for executing the</span>
</span><span id="duckdb_execute-2553"><a href="#duckdb_execute-2553"><span class="linenos">2553</span></a><span class="sd">    query. By default, it is set to 1, meaning that the query will be executed using a single thread,</span>
</span><span id="duckdb_execute-2554"><a href="#duckdb_execute-2554"><span class="linenos">2554</span></a><span class="sd">    defaults to 1</span>
</span><span id="duckdb_execute-2555"><a href="#duckdb_execute-2555"><span class="linenos">2555</span></a><span class="sd">    :type threads: int (optional)</span>
</span><span id="duckdb_execute-2556"><a href="#duckdb_execute-2556"><span class="linenos">2556</span></a><span class="sd">    :return: The function `duckdb_execute` returns a boolean value. It returns `True` if the query</span>
</span><span id="duckdb_execute-2557"><a href="#duckdb_execute-2557"><span class="linenos">2557</span></a><span class="sd">    execution is successful, and `False` if it is not successful.</span>
</span><span id="duckdb_execute-2558"><a href="#duckdb_execute-2558"><span class="linenos">2558</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="duckdb_execute-2559"><a href="#duckdb_execute-2559"><span class="linenos">2559</span></a>
</span><span id="duckdb_execute-2560"><a href="#duckdb_execute-2560"><span class="linenos">2560</span></a>    <span class="n">conn</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;threads&quot;</span><span class="p">:</span> <span class="n">threads</span><span class="p">})</span>
</span><span id="duckdb_execute-2561"><a href="#duckdb_execute-2561"><span class="linenos">2561</span></a>    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SET max_expression_depth TO 10000&quot;</span><span class="p">)</span>
</span><span id="duckdb_execute-2562"><a href="#duckdb_execute-2562"><span class="linenos">2562</span></a>    <span class="k">if</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">):</span>
</span><span id="duckdb_execute-2563"><a href="#duckdb_execute-2563"><span class="linenos">2563</span></a>        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="duckdb_execute-2564"><a href="#duckdb_execute-2564"><span class="linenos">2564</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="duckdb_execute-2565"><a href="#duckdb_execute-2565"><span class="linenos">2565</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="duckdb_execute-2566"><a href="#duckdb_execute-2566"><span class="linenos">2566</span></a>        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="duckdb_execute-2567"><a href="#duckdb_execute-2567"><span class="linenos">2567</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#duckdb_execute">duckdb_execute</a></code> function executes a query using the DuckDB database engine and returns a
boolean indicating whether the query was successful or not.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>query</strong>:  The <code>query</code> parameter is a string that represents the SQL query you want to execute in
DuckDB. It can be any valid SQL statement, such as SELECT, INSERT, UPDATE, DELETE, etc</li>
<li><strong>threads</strong>:  The "threads" parameter specifies the number of threads to use for executing the
query. By default, it is set to 1, meaning that the query will be executed using a single thread,
defaults to 1</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#duckdb_execute">duckdb_execute</a></code> returns a boolean value. It returns <code>True</code> if the query
  execution is successful, and <code>False</code> if it is not successful.</p>
</blockquote>
</div>


                </section>
                <section id="genome_build_switch">
                            <input id="genome_build_switch-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">genome_build_switch</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">assembly</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="genome_build_switch-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#genome_build_switch"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="genome_build_switch-2570"><a href="#genome_build_switch-2570"><span class="linenos">2570</span></a><span class="k">def</span> <span class="nf">genome_build_switch</span><span class="p">(</span><span class="n">assembly</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="genome_build_switch-2571"><a href="#genome_build_switch-2571"><span class="linenos">2571</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="genome_build_switch-2572"><a href="#genome_build_switch-2572"><span class="linenos">2572</span></a><span class="sd">    The `genome_build_switch` function takes an assembly name as input and returns a new</span>
</span><span id="genome_build_switch-2573"><a href="#genome_build_switch-2573"><span class="linenos">2573</span></a><span class="sd">    assembly name if a different version of the same genome is available, otherwise it returns</span>
</span><span id="genome_build_switch-2574"><a href="#genome_build_switch-2574"><span class="linenos">2574</span></a><span class="sd">    None.</span>
</span><span id="genome_build_switch-2575"><a href="#genome_build_switch-2575"><span class="linenos">2575</span></a>
</span><span id="genome_build_switch-2576"><a href="#genome_build_switch-2576"><span class="linenos">2576</span></a><span class="sd">    :param assembly: The `assembly` parameter is a string that represents the name or identifier</span>
</span><span id="genome_build_switch-2577"><a href="#genome_build_switch-2577"><span class="linenos">2577</span></a><span class="sd">    of a genome assembly</span>
</span><span id="genome_build_switch-2578"><a href="#genome_build_switch-2578"><span class="linenos">2578</span></a><span class="sd">    :type assembly: str</span>
</span><span id="genome_build_switch-2579"><a href="#genome_build_switch-2579"><span class="linenos">2579</span></a><span class="sd">    :return: The function `genome_build_switch` returns a string.</span>
</span><span id="genome_build_switch-2580"><a href="#genome_build_switch-2580"><span class="linenos">2580</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="genome_build_switch-2581"><a href="#genome_build_switch-2581"><span class="linenos">2581</span></a>
</span><span id="genome_build_switch-2582"><a href="#genome_build_switch-2582"><span class="linenos">2582</span></a>    <span class="kn">import</span> <span class="nn">genomepy</span>
</span><span id="genome_build_switch-2583"><a href="#genome_build_switch-2583"><span class="linenos">2583</span></a>
</span><span id="genome_build_switch-2584"><a href="#genome_build_switch-2584"><span class="linenos">2584</span></a>    <span class="n">genome_list</span> <span class="o">=</span> <span class="n">genomepy</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">assembly</span><span class="p">,</span> <span class="n">exact</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="genome_build_switch-2585"><a href="#genome_build_switch-2585"><span class="linenos">2585</span></a>
</span><span id="genome_build_switch-2586"><a href="#genome_build_switch-2586"><span class="linenos">2586</span></a>    <span class="k">if</span> <span class="n">genome_list</span><span class="p">:</span>
</span><span id="genome_build_switch-2587"><a href="#genome_build_switch-2587"><span class="linenos">2587</span></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">genome_list</span><span class="p">:</span>
</span><span id="genome_build_switch-2588"><a href="#genome_build_switch-2588"><span class="linenos">2588</span></a>            <span class="n">tax_id</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span><span id="genome_build_switch-2589"><a href="#genome_build_switch-2589"><span class="linenos">2589</span></a>            <span class="k">break</span>
</span><span id="genome_build_switch-2590"><a href="#genome_build_switch-2590"><span class="linenos">2590</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="genome_build_switch-2591"><a href="#genome_build_switch-2591"><span class="linenos">2591</span></a>        <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Assembly &#39;</span><span class="si">{</span><span class="n">assembly</span><span class="si">}</span><span class="s2">&#39; NOT found&quot;</span><span class="p">)</span>
</span><span id="genome_build_switch-2592"><a href="#genome_build_switch-2592"><span class="linenos">2592</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="genome_build_switch-2593"><a href="#genome_build_switch-2593"><span class="linenos">2593</span></a>
</span><span id="genome_build_switch-2594"><a href="#genome_build_switch-2594"><span class="linenos">2594</span></a>    <span class="n">genome_list</span> <span class="o">=</span> <span class="n">genomepy</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">assembly</span><span class="p">,</span> <span class="n">exact</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="genome_build_switch-2595"><a href="#genome_build_switch-2595"><span class="linenos">2595</span></a>    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">genome_list</span><span class="p">:</span>
</span><span id="genome_build_switch-2596"><a href="#genome_build_switch-2596"><span class="linenos">2596</span></a>        <span class="n">new_assembly</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="genome_build_switch-2597"><a href="#genome_build_switch-2597"><span class="linenos">2597</span></a>        <span class="n">new_tax_id</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span><span id="genome_build_switch-2598"><a href="#genome_build_switch-2598"><span class="linenos">2598</span></a>        <span class="k">if</span> <span class="n">new_assembly</span> <span class="o">!=</span> <span class="n">assembly</span> <span class="ow">and</span> <span class="n">tax_id</span> <span class="o">==</span> <span class="n">new_tax_id</span><span class="p">:</span>
</span><span id="genome_build_switch-2599"><a href="#genome_build_switch-2599"><span class="linenos">2599</span></a>            <span class="k">return</span> <span class="n">new_assembly</span>
</span><span id="genome_build_switch-2600"><a href="#genome_build_switch-2600"><span class="linenos">2600</span></a>
</span><span id="genome_build_switch-2601"><a href="#genome_build_switch-2601"><span class="linenos">2601</span></a>    <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#genome_build_switch">genome_build_switch</a></code> function takes an assembly name as input and returns a new
assembly name if a different version of the same genome is available, otherwise it returns
None.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>assembly</strong>:  The <code>assembly</code> parameter is a string that represents the name or identifier
of a genome assembly</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#genome_build_switch">genome_build_switch</a></code> returns a string.</p>
</blockquote>
</div>


                </section>
                <section id="get_argument">
                            <input id="get_argument-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_argument</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">arguments</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>,</span><span class="param">	<span class="n">arg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">required</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">remove_infos</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;gooey&#39;</span><span class="p">,</span> <span class="s1">&#39;extra&#39;</span><span class="p">]</span>,</span><span class="param">	<span class="n">add_metavar</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="get_argument-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_argument"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_argument-2605"><a href="#get_argument-2605"><span class="linenos">2605</span></a><span class="k">def</span> <span class="nf">get_argument</span><span class="p">(</span>
</span><span id="get_argument-2606"><a href="#get_argument-2606"><span class="linenos">2606</span></a>    <span class="n">arguments</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="get_argument-2607"><a href="#get_argument-2607"><span class="linenos">2607</span></a>    <span class="n">arg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="get_argument-2608"><a href="#get_argument-2608"><span class="linenos">2608</span></a>    <span class="n">required</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="get_argument-2609"><a href="#get_argument-2609"><span class="linenos">2609</span></a>    <span class="n">remove_infos</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;gooey&quot;</span><span class="p">,</span> <span class="s2">&quot;extra&quot;</span><span class="p">],</span>
</span><span id="get_argument-2610"><a href="#get_argument-2610"><span class="linenos">2610</span></a>    <span class="n">add_metavar</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="get_argument-2611"><a href="#get_argument-2611"><span class="linenos">2611</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="get_argument-2612"><a href="#get_argument-2612"><span class="linenos">2612</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_argument-2613"><a href="#get_argument-2613"><span class="linenos">2613</span></a><span class="sd">    The `get_argument` function retrieves information about a specific argument from a dictionary, and</span>
</span><span id="get_argument-2614"><a href="#get_argument-2614"><span class="linenos">2614</span></a><span class="sd">    can also set its &quot;required&quot; status.</span>
</span><span id="get_argument-2615"><a href="#get_argument-2615"><span class="linenos">2615</span></a>
</span><span id="get_argument-2616"><a href="#get_argument-2616"><span class="linenos">2616</span></a><span class="sd">    :param arguments: A dictionary containing information about the arguments passed to a function or</span>
</span><span id="get_argument-2617"><a href="#get_argument-2617"><span class="linenos">2617</span></a><span class="sd">    method</span>
</span><span id="get_argument-2618"><a href="#get_argument-2618"><span class="linenos">2618</span></a><span class="sd">    :type arguments: dict</span>
</span><span id="get_argument-2619"><a href="#get_argument-2619"><span class="linenos">2619</span></a><span class="sd">    :param arg: The `arg` parameter is a string that represents the name of the argument that you want</span>
</span><span id="get_argument-2620"><a href="#get_argument-2620"><span class="linenos">2620</span></a><span class="sd">    to retrieve information for</span>
</span><span id="get_argument-2621"><a href="#get_argument-2621"><span class="linenos">2621</span></a><span class="sd">    :type arg: str</span>
</span><span id="get_argument-2622"><a href="#get_argument-2622"><span class="linenos">2622</span></a><span class="sd">    :param required: The `required` parameter is a boolean value that determines whether the argument is</span>
</span><span id="get_argument-2623"><a href="#get_argument-2623"><span class="linenos">2623</span></a><span class="sd">    required or not. If set to True, the function will return an empty dictionary if the argument is not</span>
</span><span id="get_argument-2624"><a href="#get_argument-2624"><span class="linenos">2624</span></a><span class="sd">    found in the `arguments` dictionary. If set to False (default), the function will still return an</span>
</span><span id="get_argument-2625"><a href="#get_argument-2625"><span class="linenos">2625</span></a><span class="sd">    empty dictionary if, defaults to False</span>
</span><span id="get_argument-2626"><a href="#get_argument-2626"><span class="linenos">2626</span></a><span class="sd">    :type required: bool (optional)</span>
</span><span id="get_argument-2627"><a href="#get_argument-2627"><span class="linenos">2627</span></a><span class="sd">    :param remove_infos: The `remove_infos` parameter is a list that contains the names of specific</span>
</span><span id="get_argument-2628"><a href="#get_argument-2628"><span class="linenos">2628</span></a><span class="sd">    information that you want to remove from the argument dictionary. In the code, it is used to remove</span>
</span><span id="get_argument-2629"><a href="#get_argument-2629"><span class="linenos">2629</span></a><span class="sd">    specific argument information such as &quot;gooey&quot; from the `arg_infos` dictionary</span>
</span><span id="get_argument-2630"><a href="#get_argument-2630"><span class="linenos">2630</span></a><span class="sd">    :type remove_infos: list</span>
</span><span id="get_argument-2631"><a href="#get_argument-2631"><span class="linenos">2631</span></a><span class="sd">    :return: a dictionary containing information about a specific argument, specified by the `arg`</span>
</span><span id="get_argument-2632"><a href="#get_argument-2632"><span class="linenos">2632</span></a><span class="sd">    parameter. If the argument is found in the `arguments` dictionary, the function returns a dictionary</span>
</span><span id="get_argument-2633"><a href="#get_argument-2633"><span class="linenos">2633</span></a><span class="sd">    containing the information about that argument. If the argument is not found, an empty dictionary is</span>
</span><span id="get_argument-2634"><a href="#get_argument-2634"><span class="linenos">2634</span></a><span class="sd">    returned. The `required` parameter is used to specify whether the argument is required or not, and</span>
</span><span id="get_argument-2635"><a href="#get_argument-2635"><span class="linenos">2635</span></a><span class="sd">    this information is added to</span>
</span><span id="get_argument-2636"><a href="#get_argument-2636"><span class="linenos">2636</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_argument-2637"><a href="#get_argument-2637"><span class="linenos">2637</span></a>
</span><span id="get_argument-2638"><a href="#get_argument-2638"><span class="linenos">2638</span></a>    <span class="k">if</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
</span><span id="get_argument-2639"><a href="#get_argument-2639"><span class="linenos">2639</span></a>        <span class="n">arg_infos</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="get_argument-2640"><a href="#get_argument-2640"><span class="linenos">2640</span></a>        <span class="k">for</span> <span class="n">arg_info</span> <span class="ow">in</span> <span class="n">remove_infos</span><span class="p">:</span>
</span><span id="get_argument-2641"><a href="#get_argument-2641"><span class="linenos">2641</span></a>            <span class="n">arg_infos</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">arg_info</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="get_argument-2642"><a href="#get_argument-2642"><span class="linenos">2642</span></a>        <span class="k">if</span> <span class="n">required</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="get_argument-2643"><a href="#get_argument-2643"><span class="linenos">2643</span></a>            <span class="n">arg_infos</span><span class="p">[</span><span class="s2">&quot;required&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">required</span>
</span><span id="get_argument-2644"><a href="#get_argument-2644"><span class="linenos">2644</span></a>        <span class="k">if</span> <span class="n">add_metavar</span> <span class="ow">and</span> <span class="s2">&quot;metavar&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">arg_infos</span><span class="p">:</span>
</span><span id="get_argument-2645"><a href="#get_argument-2645"><span class="linenos">2645</span></a>            <span class="n">arg_infos</span><span class="p">[</span><span class="s2">&quot;metavar&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span id="get_argument-2646"><a href="#get_argument-2646"><span class="linenos">2646</span></a>        <span class="k">return</span> <span class="n">arg_infos</span>
</span><span id="get_argument-2647"><a href="#get_argument-2647"><span class="linenos">2647</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="get_argument-2648"><a href="#get_argument-2648"><span class="linenos">2648</span></a>        <span class="k">return</span> <span class="p">{}</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#get_argument">get_argument</a></code> function retrieves information about a specific argument from a dictionary, and
can also set its "required" status.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>arguments</strong>:  A dictionary containing information about the arguments passed to a function or
method</li>
<li><strong>arg</strong>:  The <code>arg</code> parameter is a string that represents the name of the argument that you want
to retrieve information for</li>
<li><strong>required</strong>:  The <code>required</code> parameter is a boolean value that determines whether the argument is
required or not. If set to True, the function will return an empty dictionary if the argument is not
found in the <code>arguments</code> dictionary. If set to False (default), the function will still return an
empty dictionary if, defaults to False</li>
<li><strong>remove_infos</strong>:  The <code>remove_infos</code> parameter is a list that contains the names of specific
information that you want to remove from the argument dictionary. In the code, it is used to remove
specific argument information such as "gooey" from the <code>arg_infos</code> dictionary</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a dictionary containing information about a specific argument, specified by the <code>arg</code>
  parameter. If the argument is found in the <code>arguments</code> dictionary, the function returns a dictionary
  containing the information about that argument. If the argument is not found, an empty dictionary is
  returned. The <code>required</code> parameter is used to specify whether the argument is required or not, and
  this information is added to</p>
</blockquote>
</div>


                </section>
                <section id="get_argument_gooey">
                            <input id="get_argument_gooey-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_argument_gooey</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">arguments</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>, </span><span class="param"><span class="n">arg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="get_argument_gooey-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_argument_gooey"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_argument_gooey-2652"><a href="#get_argument_gooey-2652"><span class="linenos">2652</span></a><span class="k">def</span> <span class="nf">get_argument_gooey</span><span class="p">(</span><span class="n">arguments</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">arg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
</span><span id="get_argument_gooey-2653"><a href="#get_argument_gooey-2653"><span class="linenos">2653</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_argument_gooey-2654"><a href="#get_argument_gooey-2654"><span class="linenos">2654</span></a><span class="sd">    The function `get_argument_gooey` takes an argument and returns the corresponding widget and options</span>
</span><span id="get_argument_gooey-2655"><a href="#get_argument_gooey-2655"><span class="linenos">2655</span></a><span class="sd">    for the Gooey library in Python.</span>
</span><span id="get_argument_gooey-2656"><a href="#get_argument_gooey-2656"><span class="linenos">2656</span></a>
</span><span id="get_argument_gooey-2657"><a href="#get_argument_gooey-2657"><span class="linenos">2657</span></a><span class="sd">    :param arg: The `arg` parameter is a string that represents the name of the argument you want to</span>
</span><span id="get_argument_gooey-2658"><a href="#get_argument_gooey-2658"><span class="linenos">2658</span></a><span class="sd">    retrieve information for</span>
</span><span id="get_argument_gooey-2659"><a href="#get_argument_gooey-2659"><span class="linenos">2659</span></a><span class="sd">    :type arg: str</span>
</span><span id="get_argument_gooey-2660"><a href="#get_argument_gooey-2660"><span class="linenos">2660</span></a><span class="sd">    :return: The function `get_argument_gooey` returns two values: `widget` and `options`.</span>
</span><span id="get_argument_gooey-2661"><a href="#get_argument_gooey-2661"><span class="linenos">2661</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_argument_gooey-2662"><a href="#get_argument_gooey-2662"><span class="linenos">2662</span></a>
</span><span id="get_argument_gooey-2663"><a href="#get_argument_gooey-2663"><span class="linenos">2663</span></a>    <span class="c1"># Init</span>
</span><span id="get_argument_gooey-2664"><a href="#get_argument_gooey-2664"><span class="linenos">2664</span></a>    <span class="n">argument</span> <span class="o">=</span> <span class="n">get_argument</span><span class="p">(</span><span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="n">arg</span><span class="p">,</span> <span class="n">remove_infos</span><span class="o">=</span><span class="p">[])</span>
</span><span id="get_argument_gooey-2665"><a href="#get_argument_gooey-2665"><span class="linenos">2665</span></a>    <span class="n">argument_type</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="get_argument_gooey-2666"><a href="#get_argument_gooey-2666"><span class="linenos">2666</span></a>    <span class="n">gooey_argument</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;gooey&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_argument_gooey-2667"><a href="#get_argument_gooey-2667"><span class="linenos">2667</span></a>
</span><span id="get_argument_gooey-2668"><a href="#get_argument_gooey-2668"><span class="linenos">2668</span></a>    <span class="c1"># Widget</span>
</span><span id="get_argument_gooey-2669"><a href="#get_argument_gooey-2669"><span class="linenos">2669</span></a>    <span class="n">widget</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="get_argument_gooey-2670"><a href="#get_argument_gooey-2670"><span class="linenos">2670</span></a>    <span class="k">if</span> <span class="n">gooey_argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;widget&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="get_argument_gooey-2671"><a href="#get_argument_gooey-2671"><span class="linenos">2671</span></a>        <span class="n">widget</span> <span class="o">=</span> <span class="n">gooey_argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;widget&quot;</span><span class="p">)</span>
</span><span id="get_argument_gooey-2672"><a href="#get_argument_gooey-2672"><span class="linenos">2672</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="get_argument_gooey-2673"><a href="#get_argument_gooey-2673"><span class="linenos">2673</span></a>        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">argument_type</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;FileType(&#39;r&#39;)&quot;</span><span class="p">:</span>
</span><span id="get_argument_gooey-2674"><a href="#get_argument_gooey-2674"><span class="linenos">2674</span></a>            <span class="n">widget</span> <span class="o">=</span> <span class="s2">&quot;FileChooser&quot;</span>
</span><span id="get_argument_gooey-2675"><a href="#get_argument_gooey-2675"><span class="linenos">2675</span></a>        <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">argument_type</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;FileType(&#39;w&#39;)&quot;</span><span class="p">:</span>
</span><span id="get_argument_gooey-2676"><a href="#get_argument_gooey-2676"><span class="linenos">2676</span></a>            <span class="n">widget</span> <span class="o">=</span> <span class="s2">&quot;FileSaver&quot;</span>
</span><span id="get_argument_gooey-2677"><a href="#get_argument_gooey-2677"><span class="linenos">2677</span></a>
</span><span id="get_argument_gooey-2678"><a href="#get_argument_gooey-2678"><span class="linenos">2678</span></a>    <span class="c1"># options</span>
</span><span id="get_argument_gooey-2679"><a href="#get_argument_gooey-2679"><span class="linenos">2679</span></a>    <span class="n">options</span> <span class="o">=</span> <span class="n">gooey_argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;options&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="get_argument_gooey-2680"><a href="#get_argument_gooey-2680"><span class="linenos">2680</span></a>
</span><span id="get_argument_gooey-2681"><a href="#get_argument_gooey-2681"><span class="linenos">2681</span></a>    <span class="c1"># Return</span>
</span><span id="get_argument_gooey-2682"><a href="#get_argument_gooey-2682"><span class="linenos">2682</span></a>    <span class="k">return</span> <span class="n">widget</span><span class="p">,</span> <span class="n">options</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#get_argument_gooey">get_argument_gooey</a></code> takes an argument and returns the corresponding widget and options
for the Gooey library in Python.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>arg</strong>:  The <code>arg</code> parameter is a string that represents the name of the argument you want to
retrieve information for</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#get_argument_gooey">get_argument_gooey</a></code> returns two values: <code>widget</code> and <code>options</code>.</p>
</blockquote>
</div>


                </section>
                <section id="get_argument_to_mk">
                            <input id="get_argument_to_mk-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_argument_to_mk</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">arg</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">argument</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>, </span><span class="param"><span class="n">mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;mk&#39;</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="get_argument_to_mk-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_argument_to_mk"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_argument_to_mk-2686"><a href="#get_argument_to_mk-2686"><span class="linenos">2686</span></a><span class="k">def</span> <span class="nf">get_argument_to_mk</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">argument</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mk&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="get_argument_to_mk-2687"><a href="#get_argument_to_mk-2687"><span class="linenos">2687</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_argument_to_mk-2688"><a href="#get_argument_to_mk-2688"><span class="linenos">2688</span></a><span class="sd">    The function `get_argument_to_mk` generates a formatted string containing information about a</span>
</span><span id="get_argument_to_mk-2689"><a href="#get_argument_to_mk-2689"><span class="linenos">2689</span></a><span class="sd">    command line argument, which can be output in either Markdown or HTML format.</span>
</span><span id="get_argument_to_mk-2690"><a href="#get_argument_to_mk-2690"><span class="linenos">2690</span></a>
</span><span id="get_argument_to_mk-2691"><a href="#get_argument_to_mk-2691"><span class="linenos">2691</span></a><span class="sd">    :param arg: The `arg` parameter is a string that represents the name of the argument. It is used to</span>
</span><span id="get_argument_to_mk-2692"><a href="#get_argument_to_mk-2692"><span class="linenos">2692</span></a><span class="sd">    generate the header and text for the argument</span>
</span><span id="get_argument_to_mk-2693"><a href="#get_argument_to_mk-2693"><span class="linenos">2693</span></a><span class="sd">    :type arg: str</span>
</span><span id="get_argument_to_mk-2694"><a href="#get_argument_to_mk-2694"><span class="linenos">2694</span></a><span class="sd">    :param argument: The `argument` parameter is a dictionary that contains information about the</span>
</span><span id="get_argument_to_mk-2695"><a href="#get_argument_to_mk-2695"><span class="linenos">2695</span></a><span class="sd">    argument. It has the following keys:</span>
</span><span id="get_argument_to_mk-2696"><a href="#get_argument_to_mk-2696"><span class="linenos">2696</span></a><span class="sd">    :type argument: dict</span>
</span><span id="get_argument_to_mk-2697"><a href="#get_argument_to_mk-2697"><span class="linenos">2697</span></a><span class="sd">    :param mode: The `mode` parameter is used to specify the format of the output. It can have two</span>
</span><span id="get_argument_to_mk-2698"><a href="#get_argument_to_mk-2698"><span class="linenos">2698</span></a><span class="sd">    possible values: &quot;mk&quot; or &quot;html&quot;. If &quot;mk&quot; is specified, the output will be formatted using Markdown</span>
</span><span id="get_argument_to_mk-2699"><a href="#get_argument_to_mk-2699"><span class="linenos">2699</span></a><span class="sd">    syntax. If &quot;html&quot; is specified, the output will be formatted using HTML syntax, defaults to mk</span>
</span><span id="get_argument_to_mk-2700"><a href="#get_argument_to_mk-2700"><span class="linenos">2700</span></a><span class="sd">    :type mode: str (optional)</span>
</span><span id="get_argument_to_mk-2701"><a href="#get_argument_to_mk-2701"><span class="linenos">2701</span></a><span class="sd">    :return: a formatted string that provides information about a command line argument. The format of</span>
</span><span id="get_argument_to_mk-2702"><a href="#get_argument_to_mk-2702"><span class="linenos">2702</span></a><span class="sd">    the string depends on the value of the `mode` parameter. If `mode` is set to &quot;html&quot;, the string is</span>
</span><span id="get_argument_to_mk-2703"><a href="#get_argument_to_mk-2703"><span class="linenos">2703</span></a><span class="sd">    formatted as an HTML `&lt;pre&gt;` block. Otherwise, the string is formatted as a Markdown code block. The</span>
</span><span id="get_argument_to_mk-2704"><a href="#get_argument_to_mk-2704"><span class="linenos">2704</span></a><span class="sd">    string includes the argument name, metavariable, help text, required</span>
</span><span id="get_argument_to_mk-2705"><a href="#get_argument_to_mk-2705"><span class="linenos">2705</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_argument_to_mk-2706"><a href="#get_argument_to_mk-2706"><span class="linenos">2706</span></a>
</span><span id="get_argument_to_mk-2707"><a href="#get_argument_to_mk-2707"><span class="linenos">2707</span></a>    <span class="kn">from</span> <span class="nn">html</span> <span class="kn">import</span> <span class="n">escape</span>
</span><span id="get_argument_to_mk-2708"><a href="#get_argument_to_mk-2708"><span class="linenos">2708</span></a>
</span><span id="get_argument_to_mk-2709"><a href="#get_argument_to_mk-2709"><span class="linenos">2709</span></a>    <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="get_argument_to_mk-2710"><a href="#get_argument_to_mk-2710"><span class="linenos">2710</span></a>
</span><span id="get_argument_to_mk-2711"><a href="#get_argument_to_mk-2711"><span class="linenos">2711</span></a>    <span class="c1"># Option info</span>
</span><span id="get_argument_to_mk-2712"><a href="#get_argument_to_mk-2712"><span class="linenos">2712</span></a>    <span class="n">metavar</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metavar&quot;</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="get_argument_to_mk-2713"><a href="#get_argument_to_mk-2713"><span class="linenos">2713</span></a>    <span class="n">help</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="get_argument_to_mk-2714"><a href="#get_argument_to_mk-2714"><span class="linenos">2714</span></a>    <span class="n">required</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;required&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="get_argument_to_mk-2715"><a href="#get_argument_to_mk-2715"><span class="linenos">2715</span></a>    <span class="n">choices</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;choices&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="get_argument_to_mk-2716"><a href="#get_argument_to_mk-2716"><span class="linenos">2716</span></a>    <span class="n">default</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="get_argument_to_mk-2717"><a href="#get_argument_to_mk-2717"><span class="linenos">2717</span></a>    <span class="n">action</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;action&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="get_argument_to_mk-2718"><a href="#get_argument_to_mk-2718"><span class="linenos">2718</span></a>
</span><span id="get_argument_to_mk-2719"><a href="#get_argument_to_mk-2719"><span class="linenos">2719</span></a>    <span class="c1"># header</span>
</span><span id="get_argument_to_mk-2720"><a href="#get_argument_to_mk-2720"><span class="linenos">2720</span></a>    <span class="n">text_header</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="get_argument_to_mk-2721"><a href="#get_argument_to_mk-2721"><span class="linenos">2721</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">action</span><span class="p">:</span>
</span><span id="get_argument_to_mk-2722"><a href="#get_argument_to_mk-2722"><span class="linenos">2722</span></a>        <span class="n">text_header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;=&lt;</span><span class="si">{</span><span class="n">metavar</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
</span><span id="get_argument_to_mk-2723"><a href="#get_argument_to_mk-2723"><span class="linenos">2723</span></a>    <span class="k">if</span> <span class="n">choices</span><span class="p">:</span>
</span><span id="get_argument_to_mk-2724"><a href="#get_argument_to_mk-2724"><span class="linenos">2724</span></a>        <span class="n">text_header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">choices</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="get_argument_to_mk-2725"><a href="#get_argument_to_mk-2725"><span class="linenos">2725</span></a>    <span class="k">if</span> <span class="n">default</span><span class="p">:</span>
</span><span id="get_argument_to_mk-2726"><a href="#get_argument_to_mk-2726"><span class="linenos">2726</span></a>        <span class="n">text_header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; (default: </span><span class="si">{</span><span class="n">default</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="get_argument_to_mk-2727"><a href="#get_argument_to_mk-2727"><span class="linenos">2727</span></a>    <span class="k">if</span> <span class="n">required</span><span class="p">:</span>
</span><span id="get_argument_to_mk-2728"><a href="#get_argument_to_mk-2728"><span class="linenos">2728</span></a>        <span class="n">text_header</span> <span class="o">+=</span> <span class="s2">&quot; | required&quot;</span>
</span><span id="get_argument_to_mk-2729"><a href="#get_argument_to_mk-2729"><span class="linenos">2729</span></a>
</span><span id="get_argument_to_mk-2730"><a href="#get_argument_to_mk-2730"><span class="linenos">2730</span></a>    <span class="c1"># text</span>
</span><span id="get_argument_to_mk-2731"><a href="#get_argument_to_mk-2731"><span class="linenos">2731</span></a>    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;html&quot;</span><span class="p">:</span>
</span><span id="get_argument_to_mk-2732"><a href="#get_argument_to_mk-2732"><span class="linenos">2732</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&lt;pre&gt;&quot;</span>
</span><span id="get_argument_to_mk-2733"><a href="#get_argument_to_mk-2733"><span class="linenos">2733</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="n">escape</span><span class="p">(</span><span class="n">text_header</span><span class="p">)</span>
</span><span id="get_argument_to_mk-2734"><a href="#get_argument_to_mk-2734"><span class="linenos">2734</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="get_argument_to_mk-2735"><a href="#get_argument_to_mk-2735"><span class="linenos">2735</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="n">escape</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">help</span><span class="p">))</span>
</span><span id="get_argument_to_mk-2736"><a href="#get_argument_to_mk-2736"><span class="linenos">2736</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="get_argument_to_mk-2737"><a href="#get_argument_to_mk-2737"><span class="linenos">2737</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&lt;/pre&gt;&quot;</span>
</span><span id="get_argument_to_mk-2738"><a href="#get_argument_to_mk-2738"><span class="linenos">2738</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="get_argument_to_mk-2739"><a href="#get_argument_to_mk-2739"><span class="linenos">2739</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&lt;small&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="get_argument_to_mk-2740"><a href="#get_argument_to_mk-2740"><span class="linenos">2740</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&gt; ```</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="get_argument_to_mk-2741"><a href="#get_argument_to_mk-2741"><span class="linenos">2741</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&gt;     </span><span class="si">{</span><span class="n">text_header</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="get_argument_to_mk-2742"><a href="#get_argument_to_mk-2742"><span class="linenos">2742</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&gt; </span><span class="se">\n</span><span class="s2">&gt; &quot;</span>
</span><span id="get_argument_to_mk-2743"><a href="#get_argument_to_mk-2743"><span class="linenos">2743</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">help</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&gt; &quot;</span><span class="p">)</span>
</span><span id="get_argument_to_mk-2744"><a href="#get_argument_to_mk-2744"><span class="linenos">2744</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&gt; ```</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="get_argument_to_mk-2745"><a href="#get_argument_to_mk-2745"><span class="linenos">2745</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&lt;/small&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="get_argument_to_mk-2746"><a href="#get_argument_to_mk-2746"><span class="linenos">2746</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="get_argument_to_mk-2747"><a href="#get_argument_to_mk-2747"><span class="linenos">2747</span></a>        <span class="n">text</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span>
</span><span id="get_argument_to_mk-2748"><a href="#get_argument_to_mk-2748"><span class="linenos">2748</span></a>
</span><span id="get_argument_to_mk-2749"><a href="#get_argument_to_mk-2749"><span class="linenos">2749</span></a>    <span class="k">return</span> <span class="n">text</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#get_argument_to_mk">get_argument_to_mk</a></code> generates a formatted string containing information about a
command line argument, which can be output in either Markdown or HTML format.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>arg</strong>:  The <code>arg</code> parameter is a string that represents the name of the argument. It is used to
generate the header and text for the argument</li>
<li><strong>argument</strong>:  The <code>argument</code> parameter is a dictionary that contains information about the
argument. It has the following keys:</li>
<li><strong>mode</strong>:  The <code>mode</code> parameter is used to specify the format of the output. It can have two
possible values: "mk" or "html". If "mk" is specified, the output will be formatted using Markdown
syntax. If "html" is specified, the output will be formatted using HTML syntax, defaults to mk</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a formatted string that provides information about a command line argument. The format of
  the string depends on the value of the <code>mode</code> parameter. If <code>mode</code> is set to "html", the string is
  formatted as an HTML <code>&lt;pre&gt;</code> block. Otherwise, the string is formatted as a Markdown code block. The
  string includes the argument name, metavariable, help text, required</p>
</blockquote>
</div>


                </section>
                <section id="help_generation_from_dict">
                            <input id="help_generation_from_dict-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">help_generation_from_dict</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">element</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">help_dict</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">previous</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">output_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;markdown&#39;</span>,</span><span class="param">	<span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>,</span><span class="param">	<span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">generate_table</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">code_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">auto_default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">previous_sections</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="help_generation_from_dict-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#help_generation_from_dict"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="help_generation_from_dict-2752"><a href="#help_generation_from_dict-2752"><span class="linenos">2752</span></a><span class="k">def</span> <span class="nf">help_generation_from_dict</span><span class="p">(</span>
</span><span id="help_generation_from_dict-2753"><a href="#help_generation_from_dict-2753"><span class="linenos">2753</span></a>    <span class="n">element</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2754"><a href="#help_generation_from_dict-2754"><span class="linenos">2754</span></a>    <span class="n">help_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2755"><a href="#help_generation_from_dict-2755"><span class="linenos">2755</span></a>    <span class="n">previous</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2756"><a href="#help_generation_from_dict-2756"><span class="linenos">2756</span></a>    <span class="n">output_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;markdown&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2757"><a href="#help_generation_from_dict-2757"><span class="linenos">2757</span></a>    <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2758"><a href="#help_generation_from_dict-2758"><span class="linenos">2758</span></a>    <span class="n">table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2759"><a href="#help_generation_from_dict-2759"><span class="linenos">2759</span></a>    <span class="n">generate_table</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2760"><a href="#help_generation_from_dict-2760"><span class="linenos">2760</span></a>    <span class="n">code_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2761"><a href="#help_generation_from_dict-2761"><span class="linenos">2761</span></a>    <span class="n">auto_default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2762"><a href="#help_generation_from_dict-2762"><span class="linenos">2762</span></a>    <span class="n">previous_sections</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2763"><a href="#help_generation_from_dict-2763"><span class="linenos">2763</span></a><span class="p">):</span>
</span><span id="help_generation_from_dict-2764"><a href="#help_generation_from_dict-2764"><span class="linenos">2764</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="help_generation_from_dict-2765"><a href="#help_generation_from_dict-2765"><span class="linenos">2765</span></a><span class="sd">    The `help_generation_from_dict` function generates help documentation from a dictionary input,</span>
</span><span id="help_generation_from_dict-2766"><a href="#help_generation_from_dict-2766"><span class="linenos">2766</span></a><span class="sd">    supporting markdown and HTML output formats with specific sections like &quot;__help&quot;, &quot;__format&quot;,</span>
</span><span id="help_generation_from_dict-2767"><a href="#help_generation_from_dict-2767"><span class="linenos">2767</span></a><span class="sd">    &quot;__default&quot;, &quot;__examples&quot;, &quot;__code&quot;, and &quot;__examples_code&quot;.</span>
</span><span id="help_generation_from_dict-2768"><a href="#help_generation_from_dict-2768"><span class="linenos">2768</span></a>
</span><span id="help_generation_from_dict-2769"><a href="#help_generation_from_dict-2769"><span class="linenos">2769</span></a><span class="sd">    :param element: The `element` parameter in the `help_generation_from_dict` function is a string that</span>
</span><span id="help_generation_from_dict-2770"><a href="#help_generation_from_dict-2770"><span class="linenos">2770</span></a><span class="sd">    represents the current element or key in the dictionary for which help documentation is being</span>
</span><span id="help_generation_from_dict-2771"><a href="#help_generation_from_dict-2771"><span class="linenos">2771</span></a><span class="sd">    generated. It is the specific key or element within the dictionary that you want to generate help</span>
</span><span id="help_generation_from_dict-2772"><a href="#help_generation_from_dict-2772"><span class="linenos">2772</span></a><span class="sd">    documentation for</span>
</span><span id="help_generation_from_dict-2773"><a href="#help_generation_from_dict-2773"><span class="linenos">2773</span></a><span class="sd">    :type element: str</span>
</span><span id="help_generation_from_dict-2774"><a href="#help_generation_from_dict-2774"><span class="linenos">2774</span></a><span class="sd">    :param help_dict: The `help_dict` parameter in the `help_generation_from_dict` function is a</span>
</span><span id="help_generation_from_dict-2775"><a href="#help_generation_from_dict-2775"><span class="linenos">2775</span></a><span class="sd">    dictionary that contains the help documentation for various elements or keys. This dictionary</span>
</span><span id="help_generation_from_dict-2776"><a href="#help_generation_from_dict-2776"><span class="linenos">2776</span></a><span class="sd">    structure allows for organizing and storing information related to each element, such as help text,</span>
</span><span id="help_generation_from_dict-2777"><a href="#help_generation_from_dict-2777"><span class="linenos">2777</span></a><span class="sd">    formatting details, default values, and examples. The function processes</span>
</span><span id="help_generation_from_dict-2778"><a href="#help_generation_from_dict-2778"><span class="linenos">2778</span></a><span class="sd">    :type help_dict: dict</span>
</span><span id="help_generation_from_dict-2779"><a href="#help_generation_from_dict-2779"><span class="linenos">2779</span></a><span class="sd">    :param previous: The `previous` parameter in the `help_generation_from_dict` function is used to</span>
</span><span id="help_generation_from_dict-2780"><a href="#help_generation_from_dict-2780"><span class="linenos">2780</span></a><span class="sd">    keep track of the previous elements in the hierarchy. It is a string that represents the path to the</span>
</span><span id="help_generation_from_dict-2781"><a href="#help_generation_from_dict-2781"><span class="linenos">2781</span></a><span class="sd">    current element being processed. This parameter helps in maintaining the correct hierarchy level</span>
</span><span id="help_generation_from_dict-2782"><a href="#help_generation_from_dict-2782"><span class="linenos">2782</span></a><span class="sd">    when generating help documentation for nested elements in a</span>
</span><span id="help_generation_from_dict-2783"><a href="#help_generation_from_dict-2783"><span class="linenos">2783</span></a><span class="sd">    :type previous: str</span>
</span><span id="help_generation_from_dict-2784"><a href="#help_generation_from_dict-2784"><span class="linenos">2784</span></a><span class="sd">    :param output_type: The `output_type` parameter in the `help_generation_from_dict` function</span>
</span><span id="help_generation_from_dict-2785"><a href="#help_generation_from_dict-2785"><span class="linenos">2785</span></a><span class="sd">    specifies the type of output format that you want the generated help documentation to be in. It can</span>
</span><span id="help_generation_from_dict-2786"><a href="#help_generation_from_dict-2786"><span class="linenos">2786</span></a><span class="sd">    take two possible values: &quot;markdown&quot; or &quot;html&quot;. By default, the output type is set to markdown,</span>
</span><span id="help_generation_from_dict-2787"><a href="#help_generation_from_dict-2787"><span class="linenos">2787</span></a><span class="sd">    defaults to markdown</span>
</span><span id="help_generation_from_dict-2788"><a href="#help_generation_from_dict-2788"><span class="linenos">2788</span></a><span class="sd">    :type output_type: str (optional)</span>
</span><span id="help_generation_from_dict-2789"><a href="#help_generation_from_dict-2789"><span class="linenos">2789</span></a><span class="sd">    :param level: The `level` parameter in the `help_generation_from_dict` function is used to keep</span>
</span><span id="help_generation_from_dict-2790"><a href="#help_generation_from_dict-2790"><span class="linenos">2790</span></a><span class="sd">    track of the depth or level of recursion in the generation process. It starts at 1 for the initial</span>
</span><span id="help_generation_from_dict-2791"><a href="#help_generation_from_dict-2791"><span class="linenos">2791</span></a><span class="sd">    call and increments by 1 for each level of recursion into sub-elements. This parameter helps in</span>
</span><span id="help_generation_from_dict-2792"><a href="#help_generation_from_dict-2792"><span class="linenos">2792</span></a><span class="sd">    formatting the, defaults to 1</span>
</span><span id="help_generation_from_dict-2793"><a href="#help_generation_from_dict-2793"><span class="linenos">2793</span></a><span class="sd">    :type level: int (optional)</span>
</span><span id="help_generation_from_dict-2794"><a href="#help_generation_from_dict-2794"><span class="linenos">2794</span></a><span class="sd">    :param table: The `table` parameter in the `help_generation_from_dict` function is used to store the</span>
</span><span id="help_generation_from_dict-2795"><a href="#help_generation_from_dict-2795"><span class="linenos">2795</span></a><span class="sd">    table of contents for the generated help documentation. It is a string that contains the formatted</span>
</span><span id="help_generation_from_dict-2796"><a href="#help_generation_from_dict-2796"><span class="linenos">2796</span></a><span class="sd">    table of contents with links to different sections or elements within the documentation. This table</span>
</span><span id="help_generation_from_dict-2797"><a href="#help_generation_from_dict-2797"><span class="linenos">2797</span></a><span class="sd">    helps users navigate through the documentation easily</span>
</span><span id="help_generation_from_dict-2798"><a href="#help_generation_from_dict-2798"><span class="linenos">2798</span></a><span class="sd">    :type table: str</span>
</span><span id="help_generation_from_dict-2799"><a href="#help_generation_from_dict-2799"><span class="linenos">2799</span></a><span class="sd">    :param generate_table: The `generate_table` parameter in the `help_generation_from_dict` function is</span>
</span><span id="help_generation_from_dict-2800"><a href="#help_generation_from_dict-2800"><span class="linenos">2800</span></a><span class="sd">    a boolean flag that determines whether the function should generate a table of contents for the help</span>
</span><span id="help_generation_from_dict-2801"><a href="#help_generation_from_dict-2801"><span class="linenos">2801</span></a><span class="sd">    documentation. When set to `True`, the function will include a table of contents in the output based</span>
</span><span id="help_generation_from_dict-2802"><a href="#help_generation_from_dict-2802"><span class="linenos">2802</span></a><span class="sd">    on the hierarchy of elements in the, defaults to False</span>
</span><span id="help_generation_from_dict-2803"><a href="#help_generation_from_dict-2803"><span class="linenos">2803</span></a><span class="sd">    :type generate_table: bool (optional)</span>
</span><span id="help_generation_from_dict-2804"><a href="#help_generation_from_dict-2804"><span class="linenos">2804</span></a><span class="sd">    :param code_type: The `code_type` parameter in the `help_generation_from_dict` function specifies</span>
</span><span id="help_generation_from_dict-2805"><a href="#help_generation_from_dict-2805"><span class="linenos">2805</span></a><span class="sd">    the type of code examples that will be included in the generated help documentation. It defaults to</span>
</span><span id="help_generation_from_dict-2806"><a href="#help_generation_from_dict-2806"><span class="linenos">2806</span></a><span class="sd">    &quot;json&quot;, meaning that the code examples provided in the &quot;__examples_code&quot; section of the dictionary</span>
</span><span id="help_generation_from_dict-2807"><a href="#help_generation_from_dict-2807"><span class="linenos">2807</span></a><span class="sd">    will be in JSON format</span>
</span><span id="help_generation_from_dict-2808"><a href="#help_generation_from_dict-2808"><span class="linenos">2808</span></a><span class="sd">    :type code_type: str</span>
</span><span id="help_generation_from_dict-2809"><a href="#help_generation_from_dict-2809"><span class="linenos">2809</span></a><span class="sd">    :param auto_default: The `auto_default` parameter in the `help_generation_from_dict` function is a</span>
</span><span id="help_generation_from_dict-2810"><a href="#help_generation_from_dict-2810"><span class="linenos">2810</span></a><span class="sd">    boolean flag that determines whether the function should automatically populate certain sections of</span>
</span><span id="help_generation_from_dict-2811"><a href="#help_generation_from_dict-2811"><span class="linenos">2811</span></a><span class="sd">    the help documentation based on the information available in the dictionary and the element&#39;s</span>
</span><span id="help_generation_from_dict-2812"><a href="#help_generation_from_dict-2812"><span class="linenos">2812</span></a><span class="sd">    arguments. When set to `True`, the function will automatically fill in sections, defaults to True</span>
</span><span id="help_generation_from_dict-2813"><a href="#help_generation_from_dict-2813"><span class="linenos">2813</span></a><span class="sd">    :type auto_default: bool (optional)</span>
</span><span id="help_generation_from_dict-2814"><a href="#help_generation_from_dict-2814"><span class="linenos">2814</span></a><span class="sd">    :param previous_sections: The `previous_sections` parameter in the `help_generation_from_dict`</span>
</span><span id="help_generation_from_dict-2815"><a href="#help_generation_from_dict-2815"><span class="linenos">2815</span></a><span class="sd">    function is a boolean flag that determines whether the function should include previous sections in</span>
</span><span id="help_generation_from_dict-2816"><a href="#help_generation_from_dict-2816"><span class="linenos">2816</span></a><span class="sd">    the hierarchy when generating help documentation for nested elements. When set to `True`, the</span>
</span><span id="help_generation_from_dict-2817"><a href="#help_generation_from_dict-2817"><span class="linenos">2817</span></a><span class="sd">    function will maintain the previous sections in the hierarchy path, helping to provide, defaults to</span>
</span><span id="help_generation_from_dict-2818"><a href="#help_generation_from_dict-2818"><span class="linenos">2818</span></a><span class="sd">    False</span>
</span><span id="help_generation_from_dict-2819"><a href="#help_generation_from_dict-2819"><span class="linenos">2819</span></a><span class="sd">    :type previous_sections: bool (optional)</span>
</span><span id="help_generation_from_dict-2820"><a href="#help_generation_from_dict-2820"><span class="linenos">2820</span></a><span class="sd">    :return: The `help_generation_from_dict` function returns the generated help documentation based on</span>
</span><span id="help_generation_from_dict-2821"><a href="#help_generation_from_dict-2821"><span class="linenos">2821</span></a><span class="sd">    the input `help_dict` dictionary. The output is formatted based on the specified `output_type`</span>
</span><span id="help_generation_from_dict-2822"><a href="#help_generation_from_dict-2822"><span class="linenos">2822</span></a><span class="sd">    (either &quot;markdown&quot; or &quot;html&quot;) and includes sections such as &quot;__help&quot;, &quot;__format&quot;, &quot;__default&quot;, and</span>
</span><span id="help_generation_from_dict-2823"><a href="#help_generation_from_dict-2823"><span class="linenos">2823</span></a><span class="sd">    &quot;__examples&quot; if they are present in the `help_dict`.</span>
</span><span id="help_generation_from_dict-2824"><a href="#help_generation_from_dict-2824"><span class="linenos">2824</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="help_generation_from_dict-2825"><a href="#help_generation_from_dict-2825"><span class="linenos">2825</span></a>
</span><span id="help_generation_from_dict-2826"><a href="#help_generation_from_dict-2826"><span class="linenos">2826</span></a>    <span class="kn">from</span> <span class="nn">howard.tools.tools</span> <span class="kn">import</span> <span class="n">arguments</span>
</span><span id="help_generation_from_dict-2827"><a href="#help_generation_from_dict-2827"><span class="linenos">2827</span></a>
</span><span id="help_generation_from_dict-2828"><a href="#help_generation_from_dict-2828"><span class="linenos">2828</span></a>    <span class="n">element_argument_infos</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="help_generation_from_dict-2829"><a href="#help_generation_from_dict-2829"><span class="linenos">2829</span></a>        <span class="n">element</span><span class="p">,</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">),</span> <span class="p">{})</span>
</span><span id="help_generation_from_dict-2830"><a href="#help_generation_from_dict-2830"><span class="linenos">2830</span></a>    <span class="p">)</span>
</span><span id="help_generation_from_dict-2831"><a href="#help_generation_from_dict-2831"><span class="linenos">2831</span></a>
</span><span id="help_generation_from_dict-2832"><a href="#help_generation_from_dict-2832"><span class="linenos">2832</span></a>    <span class="c1"># Level marker</span>
</span><span id="help_generation_from_dict-2833"><a href="#help_generation_from_dict-2833"><span class="linenos">2833</span></a>    <span class="n">level_marker</span> <span class="o">=</span> <span class="s2">&quot;::&quot;</span>
</span><span id="help_generation_from_dict-2834"><a href="#help_generation_from_dict-2834"><span class="linenos">2834</span></a>
</span><span id="help_generation_from_dict-2835"><a href="#help_generation_from_dict-2835"><span class="linenos">2835</span></a>    <span class="c1"># Output</span>
</span><span id="help_generation_from_dict-2836"><a href="#help_generation_from_dict-2836"><span class="linenos">2836</span></a>    <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation_from_dict-2837"><a href="#help_generation_from_dict-2837"><span class="linenos">2837</span></a>    <span class="n">output_table</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation_from_dict-2838"><a href="#help_generation_from_dict-2838"><span class="linenos">2838</span></a>
</span><span id="help_generation_from_dict-2839"><a href="#help_generation_from_dict-2839"><span class="linenos">2839</span></a>    <span class="c1"># Specific help sections</span>
</span><span id="help_generation_from_dict-2840"><a href="#help_generation_from_dict-2840"><span class="linenos">2840</span></a>    <span class="n">section_list</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="help_generation_from_dict-2841"><a href="#help_generation_from_dict-2841"><span class="linenos">2841</span></a>        <span class="s2">&quot;__help&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2842"><a href="#help_generation_from_dict-2842"><span class="linenos">2842</span></a>        <span class="s2">&quot;__type&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2843"><a href="#help_generation_from_dict-2843"><span class="linenos">2843</span></a>        <span class="s2">&quot;__choices&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2844"><a href="#help_generation_from_dict-2844"><span class="linenos">2844</span></a>        <span class="s2">&quot;__format&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2845"><a href="#help_generation_from_dict-2845"><span class="linenos">2845</span></a>        <span class="s2">&quot;__default&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2846"><a href="#help_generation_from_dict-2846"><span class="linenos">2846</span></a>        <span class="s2">&quot;__default_eval&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2847"><a href="#help_generation_from_dict-2847"><span class="linenos">2847</span></a>        <span class="s2">&quot;__examples&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2848"><a href="#help_generation_from_dict-2848"><span class="linenos">2848</span></a>        <span class="s2">&quot;__code&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2849"><a href="#help_generation_from_dict-2849"><span class="linenos">2849</span></a>        <span class="s2">&quot;__examples_code&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_dict-2850"><a href="#help_generation_from_dict-2850"><span class="linenos">2850</span></a>    <span class="p">]</span>
</span><span id="help_generation_from_dict-2851"><a href="#help_generation_from_dict-2851"><span class="linenos">2851</span></a>
</span><span id="help_generation_from_dict-2852"><a href="#help_generation_from_dict-2852"><span class="linenos">2852</span></a>    <span class="c1"># Previous level</span>
</span><span id="help_generation_from_dict-2853"><a href="#help_generation_from_dict-2853"><span class="linenos">2853</span></a>    <span class="k">if</span> <span class="n">previous</span> <span class="ow">and</span> <span class="n">previous_sections</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2854"><a href="#help_generation_from_dict-2854"><span class="linenos">2854</span></a>        <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">previous</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="help_generation_from_dict-2855"><a href="#help_generation_from_dict-2855"><span class="linenos">2855</span></a>        <span class="n">previous</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">level_marker</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="help_generation_from_dict-2856"><a href="#help_generation_from_dict-2856"><span class="linenos">2856</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2857"><a href="#help_generation_from_dict-2857"><span class="linenos">2857</span></a>        <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">element</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="help_generation_from_dict-2858"><a href="#help_generation_from_dict-2858"><span class="linenos">2858</span></a>        <span class="n">previous</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation_from_dict-2859"><a href="#help_generation_from_dict-2859"><span class="linenos">2859</span></a>
</span><span id="help_generation_from_dict-2860"><a href="#help_generation_from_dict-2860"><span class="linenos">2860</span></a>    <span class="k">if</span> <span class="s2">&quot;__code_type&quot;</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2861"><a href="#help_generation_from_dict-2861"><span class="linenos">2861</span></a>        <span class="n">code_type</span> <span class="o">=</span> <span class="n">help_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;__code_type&quot;</span><span class="p">,</span> <span class="n">code_type</span><span class="p">)</span>
</span><span id="help_generation_from_dict-2862"><a href="#help_generation_from_dict-2862"><span class="linenos">2862</span></a>
</span><span id="help_generation_from_dict-2863"><a href="#help_generation_from_dict-2863"><span class="linenos">2863</span></a>    <span class="k">if</span> <span class="s2">&quot;__auto&quot;</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2864"><a href="#help_generation_from_dict-2864"><span class="linenos">2864</span></a>        <span class="n">auto_default</span> <span class="o">=</span> <span class="n">help_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;__auto&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="help_generation_from_dict-2865"><a href="#help_generation_from_dict-2865"><span class="linenos">2865</span></a>
</span><span id="help_generation_from_dict-2866"><a href="#help_generation_from_dict-2866"><span class="linenos">2866</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2867"><a href="#help_generation_from_dict-2867"><span class="linenos">2867</span></a>        <span class="n">auto_default</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="help_generation_from_dict-2868"><a href="#help_generation_from_dict-2868"><span class="linenos">2868</span></a>
</span><span id="help_generation_from_dict-2869"><a href="#help_generation_from_dict-2869"><span class="linenos">2869</span></a>    <span class="k">if</span> <span class="n">auto_default</span> <span class="ow">and</span> <span class="n">level</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2870"><a href="#help_generation_from_dict-2870"><span class="linenos">2870</span></a>
</span><span id="help_generation_from_dict-2871"><a href="#help_generation_from_dict-2871"><span class="linenos">2871</span></a>        <span class="c1"># default</span>
</span><span id="help_generation_from_dict-2872"><a href="#help_generation_from_dict-2872"><span class="linenos">2872</span></a>        <span class="k">if</span> <span class="s2">&quot;__help&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2873"><a href="#help_generation_from_dict-2873"><span class="linenos">2873</span></a>            <span class="k">if</span> <span class="s2">&quot;help&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2874"><a href="#help_generation_from_dict-2874"><span class="linenos">2874</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>  <span class="c1">#</span>
</span><span id="help_generation_from_dict-2875"><a href="#help_generation_from_dict-2875"><span class="linenos">2875</span></a>                <span class="c1"># Clean help</span>
</span><span id="help_generation_from_dict-2876"><a href="#help_generation_from_dict-2876"><span class="linenos">2876</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_arg_help</span><span class="p">(</span><span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__help&quot;</span><span class="p">])</span>
</span><span id="help_generation_from_dict-2877"><a href="#help_generation_from_dict-2877"><span class="linenos">2877</span></a>
</span><span id="help_generation_from_dict-2878"><a href="#help_generation_from_dict-2878"><span class="linenos">2878</span></a>        <span class="c1"># default</span>
</span><span id="help_generation_from_dict-2879"><a href="#help_generation_from_dict-2879"><span class="linenos">2879</span></a>        <span class="k">if</span> <span class="s2">&quot;__default&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2880"><a href="#help_generation_from_dict-2880"><span class="linenos">2880</span></a>            <span class="k">if</span> <span class="s2">&quot;default&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2881"><a href="#help_generation_from_dict-2881"><span class="linenos">2881</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="help_generation_from_dict-2882"><a href="#help_generation_from_dict-2882"><span class="linenos">2882</span></a>
</span><span id="help_generation_from_dict-2883"><a href="#help_generation_from_dict-2883"><span class="linenos">2883</span></a>        <span class="c1"># type</span>
</span><span id="help_generation_from_dict-2884"><a href="#help_generation_from_dict-2884"><span class="linenos">2884</span></a>        <span class="k">if</span> <span class="s2">&quot;__type&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2885"><a href="#help_generation_from_dict-2885"><span class="linenos">2885</span></a>            <span class="k">if</span> <span class="s2">&quot;type&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2886"><a href="#help_generation_from_dict-2886"><span class="linenos">2886</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
</span><span id="help_generation_from_dict-2887"><a href="#help_generation_from_dict-2887"><span class="linenos">2887</span></a>
</span><span id="help_generation_from_dict-2888"><a href="#help_generation_from_dict-2888"><span class="linenos">2888</span></a>        <span class="c1"># format</span>
</span><span id="help_generation_from_dict-2889"><a href="#help_generation_from_dict-2889"><span class="linenos">2889</span></a>        <span class="k">if</span> <span class="s2">&quot;__format&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2890"><a href="#help_generation_from_dict-2890"><span class="linenos">2890</span></a>            <span class="k">if</span> <span class="s2">&quot;format&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2891"><a href="#help_generation_from_dict-2891"><span class="linenos">2891</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__format&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="help_generation_from_dict-2892"><a href="#help_generation_from_dict-2892"><span class="linenos">2892</span></a>
</span><span id="help_generation_from_dict-2893"><a href="#help_generation_from_dict-2893"><span class="linenos">2893</span></a>        <span class="c1"># choices</span>
</span><span id="help_generation_from_dict-2894"><a href="#help_generation_from_dict-2894"><span class="linenos">2894</span></a>        <span class="k">if</span> <span class="s2">&quot;__choices&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2895"><a href="#help_generation_from_dict-2895"><span class="linenos">2895</span></a>            <span class="k">if</span> <span class="s2">&quot;choices&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2896"><a href="#help_generation_from_dict-2896"><span class="linenos">2896</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__choices&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;choices&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="help_generation_from_dict-2897"><a href="#help_generation_from_dict-2897"><span class="linenos">2897</span></a>
</span><span id="help_generation_from_dict-2898"><a href="#help_generation_from_dict-2898"><span class="linenos">2898</span></a>        <span class="c1"># format</span>
</span><span id="help_generation_from_dict-2899"><a href="#help_generation_from_dict-2899"><span class="linenos">2899</span></a>        <span class="k">if</span> <span class="s2">&quot;__format&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2900"><a href="#help_generation_from_dict-2900"><span class="linenos">2900</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="help_generation_from_dict-2901"><a href="#help_generation_from_dict-2901"><span class="linenos">2901</span></a>                <span class="s2">&quot;extra&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span>
</span><span id="help_generation_from_dict-2902"><a href="#help_generation_from_dict-2902"><span class="linenos">2902</span></a>                <span class="ow">and</span> <span class="s2">&quot;format&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;extra&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="help_generation_from_dict-2903"><a href="#help_generation_from_dict-2903"><span class="linenos">2903</span></a>            <span class="p">):</span>
</span><span id="help_generation_from_dict-2904"><a href="#help_generation_from_dict-2904"><span class="linenos">2904</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__format&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;extra&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="help_generation_from_dict-2905"><a href="#help_generation_from_dict-2905"><span class="linenos">2905</span></a>                    <span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="kc">None</span>
</span><span id="help_generation_from_dict-2906"><a href="#help_generation_from_dict-2906"><span class="linenos">2906</span></a>                <span class="p">)</span>
</span><span id="help_generation_from_dict-2907"><a href="#help_generation_from_dict-2907"><span class="linenos">2907</span></a>
</span><span id="help_generation_from_dict-2908"><a href="#help_generation_from_dict-2908"><span class="linenos">2908</span></a>        <span class="c1"># example (code)</span>
</span><span id="help_generation_from_dict-2909"><a href="#help_generation_from_dict-2909"><span class="linenos">2909</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="help_generation_from_dict-2910"><a href="#help_generation_from_dict-2910"><span class="linenos">2910</span></a>            <span class="s2">&quot;__examples&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span>
</span><span id="help_generation_from_dict-2911"><a href="#help_generation_from_dict-2911"><span class="linenos">2911</span></a>            <span class="ow">and</span> <span class="s2">&quot;__examples_code&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span>
</span><span id="help_generation_from_dict-2912"><a href="#help_generation_from_dict-2912"><span class="linenos">2912</span></a>            <span class="ow">and</span> <span class="s2">&quot;__code&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span>
</span><span id="help_generation_from_dict-2913"><a href="#help_generation_from_dict-2913"><span class="linenos">2913</span></a>        <span class="p">):</span>
</span><span id="help_generation_from_dict-2914"><a href="#help_generation_from_dict-2914"><span class="linenos">2914</span></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="help_generation_from_dict-2915"><a href="#help_generation_from_dict-2915"><span class="linenos">2915</span></a>                <span class="s2">&quot;extra&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span>
</span><span id="help_generation_from_dict-2916"><a href="#help_generation_from_dict-2916"><span class="linenos">2916</span></a>                <span class="ow">and</span> <span class="s2">&quot;examples&quot;</span> <span class="ow">in</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;extra&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="help_generation_from_dict-2917"><a href="#help_generation_from_dict-2917"><span class="linenos">2917</span></a>            <span class="p">):</span>
</span><span id="help_generation_from_dict-2918"><a href="#help_generation_from_dict-2918"><span class="linenos">2918</span></a>                <span class="n">help_dict</span><span class="p">[</span><span class="s2">&quot;__examples&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_argument_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;extra&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="help_generation_from_dict-2919"><a href="#help_generation_from_dict-2919"><span class="linenos">2919</span></a>                    <span class="s2">&quot;examples&quot;</span><span class="p">,</span> <span class="kc">None</span>
</span><span id="help_generation_from_dict-2920"><a href="#help_generation_from_dict-2920"><span class="linenos">2920</span></a>                <span class="p">)</span>
</span><span id="help_generation_from_dict-2921"><a href="#help_generation_from_dict-2921"><span class="linenos">2921</span></a>
</span><span id="help_generation_from_dict-2922"><a href="#help_generation_from_dict-2922"><span class="linenos">2922</span></a>    <span class="c1"># If no section &quot;__help&quot; (mandatory)</span>
</span><span id="help_generation_from_dict-2923"><a href="#help_generation_from_dict-2923"><span class="linenos">2923</span></a>    <span class="k">if</span> <span class="s2">&quot;__help&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2924"><a href="#help_generation_from_dict-2924"><span class="linenos">2924</span></a>        <span class="k">return</span> <span class="n">output</span>
</span><span id="help_generation_from_dict-2925"><a href="#help_generation_from_dict-2925"><span class="linenos">2925</span></a>
</span><span id="help_generation_from_dict-2926"><a href="#help_generation_from_dict-2926"><span class="linenos">2926</span></a>    <span class="c1"># For each help section</span>
</span><span id="help_generation_from_dict-2927"><a href="#help_generation_from_dict-2927"><span class="linenos">2927</span></a>    <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">section_list</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2928"><a href="#help_generation_from_dict-2928"><span class="linenos">2928</span></a>
</span><span id="help_generation_from_dict-2929"><a href="#help_generation_from_dict-2929"><span class="linenos">2929</span></a>        <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2930"><a href="#help_generation_from_dict-2930"><span class="linenos">2930</span></a>
</span><span id="help_generation_from_dict-2931"><a href="#help_generation_from_dict-2931"><span class="linenos">2931</span></a>            <span class="c1"># If content not empty</span>
</span><span id="help_generation_from_dict-2932"><a href="#help_generation_from_dict-2932"><span class="linenos">2932</span></a>            <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2933"><a href="#help_generation_from_dict-2933"><span class="linenos">2933</span></a>
</span><span id="help_generation_from_dict-2934"><a href="#help_generation_from_dict-2934"><span class="linenos">2934</span></a>                <span class="c1"># element content</span>
</span><span id="help_generation_from_dict-2935"><a href="#help_generation_from_dict-2935"><span class="linenos">2935</span></a>                <span class="n">help_dict_content</span> <span class="o">=</span> <span class="n">help_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="help_generation_from_dict-2936"><a href="#help_generation_from_dict-2936"><span class="linenos">2936</span></a>
</span><span id="help_generation_from_dict-2937"><a href="#help_generation_from_dict-2937"><span class="linenos">2937</span></a>                <span class="c1"># Break section</span>
</span><span id="help_generation_from_dict-2938"><a href="#help_generation_from_dict-2938"><span class="linenos">2938</span></a>                <span class="n">section_break</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation_from_dict-2939"><a href="#help_generation_from_dict-2939"><span class="linenos">2939</span></a>
</span><span id="help_generation_from_dict-2940"><a href="#help_generation_from_dict-2940"><span class="linenos">2940</span></a>                <span class="c1"># Output variables</span>
</span><span id="help_generation_from_dict-2941"><a href="#help_generation_from_dict-2941"><span class="linenos">2941</span></a>                <span class="n">output_header</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation_from_dict-2942"><a href="#help_generation_from_dict-2942"><span class="linenos">2942</span></a>                <span class="n">output_header_table</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation_from_dict-2943"><a href="#help_generation_from_dict-2943"><span class="linenos">2943</span></a>                <span class="n">output_content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation_from_dict-2944"><a href="#help_generation_from_dict-2944"><span class="linenos">2944</span></a>
</span><span id="help_generation_from_dict-2945"><a href="#help_generation_from_dict-2945"><span class="linenos">2945</span></a>                <span class="c1"># Markdown</span>
</span><span id="help_generation_from_dict-2946"><a href="#help_generation_from_dict-2946"><span class="linenos">2946</span></a>                <span class="k">if</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;markdown&quot;</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2947"><a href="#help_generation_from_dict-2947"><span class="linenos">2947</span></a>
</span><span id="help_generation_from_dict-2948"><a href="#help_generation_from_dict-2948"><span class="linenos">2948</span></a>                    <span class="c1"># Level</span>
</span><span id="help_generation_from_dict-2949"><a href="#help_generation_from_dict-2949"><span class="linenos">2949</span></a>                    <span class="n">level_md</span> <span class="o">=</span> <span class="s2">&quot;#&quot;</span> <span class="o">*</span> <span class="n">level</span>
</span><span id="help_generation_from_dict-2950"><a href="#help_generation_from_dict-2950"><span class="linenos">2950</span></a>
</span><span id="help_generation_from_dict-2951"><a href="#help_generation_from_dict-2951"><span class="linenos">2951</span></a>                    <span class="c1"># line break</span>
</span><span id="help_generation_from_dict-2952"><a href="#help_generation_from_dict-2952"><span class="linenos">2952</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples_code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples&quot;</span><span class="p">]:</span>
</span><span id="help_generation_from_dict-2953"><a href="#help_generation_from_dict-2953"><span class="linenos">2953</span></a>                        <span class="n">line_break</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="help_generation_from_dict-2954"><a href="#help_generation_from_dict-2954"><span class="linenos">2954</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2955"><a href="#help_generation_from_dict-2955"><span class="linenos">2955</span></a>                        <span class="n">line_break</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="help_generation_from_dict-2956"><a href="#help_generation_from_dict-2956"><span class="linenos">2956</span></a>
</span><span id="help_generation_from_dict-2957"><a href="#help_generation_from_dict-2957"><span class="linenos">2957</span></a>                    <span class="c1"># Help content from type</span>
</span><span id="help_generation_from_dict-2958"><a href="#help_generation_from_dict-2958"><span class="linenos">2958</span></a>                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="help_generation_from_dict-2959"><a href="#help_generation_from_dict-2959"><span class="linenos">2959</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="n">help_dict_content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">line_break</span><span class="p">)</span>
</span><span id="help_generation_from_dict-2960"><a href="#help_generation_from_dict-2960"><span class="linenos">2960</span></a>                    <span class="c1"># elif isinstance(help_dict_content, list) and section not in [&quot;__choices&quot;]:</span>
</span><span id="help_generation_from_dict-2961"><a href="#help_generation_from_dict-2961"><span class="linenos">2961</span></a>                    <span class="k">elif</span> <span class="p">(</span>
</span><span id="help_generation_from_dict-2962"><a href="#help_generation_from_dict-2962"><span class="linenos">2962</span></a>                        <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
</span><span id="help_generation_from_dict-2963"><a href="#help_generation_from_dict-2963"><span class="linenos">2963</span></a>                        <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">,</span> <span class="nb">set</span><span class="p">)</span>
</span><span id="help_generation_from_dict-2964"><a href="#help_generation_from_dict-2964"><span class="linenos">2964</span></a>                    <span class="p">)</span> <span class="ow">and</span> <span class="n">section</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__choices&quot;</span><span class="p">]:</span>
</span><span id="help_generation_from_dict-2965"><a href="#help_generation_from_dict-2965"><span class="linenos">2965</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="n">line_break</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">)</span>
</span><span id="help_generation_from_dict-2966"><a href="#help_generation_from_dict-2966"><span class="linenos">2966</span></a>                        <span class="n">section_break</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="help_generation_from_dict-2967"><a href="#help_generation_from_dict-2967"><span class="linenos">2967</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2968"><a href="#help_generation_from_dict-2968"><span class="linenos">2968</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="n">help_dict_content</span>
</span><span id="help_generation_from_dict-2969"><a href="#help_generation_from_dict-2969"><span class="linenos">2969</span></a>
</span><span id="help_generation_from_dict-2970"><a href="#help_generation_from_dict-2970"><span class="linenos">2970</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples_code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples&quot;</span><span class="p">]:</span>
</span><span id="help_generation_from_dict-2971"><a href="#help_generation_from_dict-2971"><span class="linenos">2971</span></a>
</span><span id="help_generation_from_dict-2972"><a href="#help_generation_from_dict-2972"><span class="linenos">2972</span></a>                        <span class="c1"># Format help dict</span>
</span><span id="help_generation_from_dict-2973"><a href="#help_generation_from_dict-2973"><span class="linenos">2973</span></a>                        <span class="c1"># if isinstance(help_md, set):</span>
</span><span id="help_generation_from_dict-2974"><a href="#help_generation_from_dict-2974"><span class="linenos">2974</span></a>                        <span class="c1">#     help_md = list(help_md)</span>
</span><span id="help_generation_from_dict-2975"><a href="#help_generation_from_dict-2975"><span class="linenos">2975</span></a>                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_md</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="help_generation_from_dict-2976"><a href="#help_generation_from_dict-2976"><span class="linenos">2976</span></a>                            <span class="n">help_md_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="help_generation_from_dict-2977"><a href="#help_generation_from_dict-2977"><span class="linenos">2977</span></a>                            <span class="n">example_header</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation_from_dict-2978"><a href="#help_generation_from_dict-2978"><span class="linenos">2978</span></a>                            <span class="k">for</span> <span class="n">example_line</span> <span class="ow">in</span> <span class="n">help_md</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
</span><span id="help_generation_from_dict-2979"><a href="#help_generation_from_dict-2979"><span class="linenos">2979</span></a>                                <span class="k">if</span> <span class="n">example_line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">):</span>
</span><span id="help_generation_from_dict-2980"><a href="#help_generation_from_dict-2980"><span class="linenos">2980</span></a>                                    <span class="n">example_header</span> <span class="o">=</span> <span class="n">example_line</span>
</span><span id="help_generation_from_dict-2981"><a href="#help_generation_from_dict-2981"><span class="linenos">2981</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2982"><a href="#help_generation_from_dict-2982"><span class="linenos">2982</span></a>
</span><span id="help_generation_from_dict-2983"><a href="#help_generation_from_dict-2983"><span class="linenos">2983</span></a>                                    <span class="k">if</span> <span class="n">example_header</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">help_md_dict</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2984"><a href="#help_generation_from_dict-2984"><span class="linenos">2984</span></a>                                        <span class="n">help_md_dict</span><span class="p">[</span><span class="n">example_header</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation_from_dict-2985"><a href="#help_generation_from_dict-2985"><span class="linenos">2985</span></a>                                        <span class="n">example_sep</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation_from_dict-2986"><a href="#help_generation_from_dict-2986"><span class="linenos">2986</span></a>                                    <span class="n">help_md_dict</span><span class="p">[</span><span class="n">example_header</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="help_generation_from_dict-2987"><a href="#help_generation_from_dict-2987"><span class="linenos">2987</span></a>                                        <span class="n">example_sep</span> <span class="o">+</span> <span class="n">example_line</span>
</span><span id="help_generation_from_dict-2988"><a href="#help_generation_from_dict-2988"><span class="linenos">2988</span></a>                                    <span class="p">)</span>
</span><span id="help_generation_from_dict-2989"><a href="#help_generation_from_dict-2989"><span class="linenos">2989</span></a>                                    <span class="n">example_sep</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="help_generation_from_dict-2990"><a href="#help_generation_from_dict-2990"><span class="linenos">2990</span></a>                        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_md</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="help_generation_from_dict-2991"><a href="#help_generation_from_dict-2991"><span class="linenos">2991</span></a>                            <span class="n">help_md_dict</span> <span class="o">=</span> <span class="n">help_md</span>
</span><span id="help_generation_from_dict-2992"><a href="#help_generation_from_dict-2992"><span class="linenos">2992</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2993"><a href="#help_generation_from_dict-2993"><span class="linenos">2993</span></a>                            <span class="n">help_md_dict</span> <span class="o">=</span> <span class="n">help_md</span>
</span><span id="help_generation_from_dict-2994"><a href="#help_generation_from_dict-2994"><span class="linenos">2994</span></a>
</span><span id="help_generation_from_dict-2995"><a href="#help_generation_from_dict-2995"><span class="linenos">2995</span></a>                        <span class="c1"># Format examples</span>
</span><span id="help_generation_from_dict-2996"><a href="#help_generation_from_dict-2996"><span class="linenos">2996</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation_from_dict-2997"><a href="#help_generation_from_dict-2997"><span class="linenos">2997</span></a>                        <span class="k">for</span> <span class="n">example</span> <span class="ow">in</span> <span class="n">help_md_dict</span><span class="p">:</span>
</span><span id="help_generation_from_dict-2998"><a href="#help_generation_from_dict-2998"><span class="linenos">2998</span></a>                            <span class="n">example_code</span> <span class="o">=</span> <span class="n">help_md_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">example</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="help_generation_from_dict-2999"><a href="#help_generation_from_dict-2999"><span class="linenos">2999</span></a>                            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">example_code</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="help_generation_from_dict-3000"><a href="#help_generation_from_dict-3000"><span class="linenos">3000</span></a>                                <span class="n">example_code</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">example_code</span><span class="p">)</span>
</span><span id="help_generation_from_dict-3001"><a href="#help_generation_from_dict-3001"><span class="linenos">3001</span></a>                            <span class="n">example</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^#*\s*&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">example</span><span class="p">)</span>
</span><span id="help_generation_from_dict-3002"><a href="#help_generation_from_dict-3002"><span class="linenos">3002</span></a>                            <span class="n">help_md</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="se">\n\n</span><span class="s2">&gt; </span><span class="si">{</span><span class="n">example</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="help_generation_from_dict-3003"><a href="#help_generation_from_dict-3003"><span class="linenos">3003</span></a>                            <span class="c1"># Clean example code</span>
</span><span id="help_generation_from_dict-3004"><a href="#help_generation_from_dict-3004"><span class="linenos">3004</span></a>                            <span class="k">if</span> <span class="p">(</span>
</span><span id="help_generation_from_dict-3005"><a href="#help_generation_from_dict-3005"><span class="linenos">3005</span></a>                                <span class="nb">len</span><span class="p">(</span><span class="n">example_code</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="help_generation_from_dict-3006"><a href="#help_generation_from_dict-3006"><span class="linenos">3006</span></a>                                <span class="ow">and</span> <span class="n">code_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;JSON&quot;</span>
</span><span id="help_generation_from_dict-3007"><a href="#help_generation_from_dict-3007"><span class="linenos">3007</span></a>                                <span class="ow">and</span> <span class="n">example_code</span><span class="o">.</span><span class="n">strip</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;{&quot;</span>
</span><span id="help_generation_from_dict-3008"><a href="#help_generation_from_dict-3008"><span class="linenos">3008</span></a>                            <span class="p">):</span>
</span><span id="help_generation_from_dict-3009"><a href="#help_generation_from_dict-3009"><span class="linenos">3009</span></a>                                <span class="n">example_code</span> <span class="o">=</span> <span class="n">example_code</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">   &quot;</span><span class="p">)</span>
</span><span id="help_generation_from_dict-3010"><a href="#help_generation_from_dict-3010"><span class="linenos">3010</span></a>                                <span class="n">example_code</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="se">{{\n</span><span class="s2">   </span><span class="si">{</span><span class="n">example_code</span><span class="si">}</span><span class="se">\n}}</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="help_generation_from_dict-3011"><a href="#help_generation_from_dict-3011"><span class="linenos">3011</span></a>                            <span class="n">example_code</span> <span class="o">=</span> <span class="n">example_code</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&gt; &quot;</span><span class="p">)</span>
</span><span id="help_generation_from_dict-3012"><a href="#help_generation_from_dict-3012"><span class="linenos">3012</span></a>                            <span class="c1"># Add example code</span>
</span><span id="help_generation_from_dict-3013"><a href="#help_generation_from_dict-3013"><span class="linenos">3013</span></a>                            <span class="n">help_md</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="help_generation_from_dict-3014"><a href="#help_generation_from_dict-3014"><span class="linenos">3014</span></a>                                <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="se">\n</span><span class="s2">&gt; ```</span><span class="si">{</span><span class="n">code_type</span><span class="si">}</span><span class="se">\n</span><span class="s2">&gt; </span><span class="si">{</span><span class="n">example_code</span><span class="si">}</span><span class="se">\n</span><span class="s2">&gt; ```&quot;&quot;&quot;</span>
</span><span id="help_generation_from_dict-3015"><a href="#help_generation_from_dict-3015"><span class="linenos">3015</span></a>                            <span class="p">)</span>
</span><span id="help_generation_from_dict-3016"><a href="#help_generation_from_dict-3016"><span class="linenos">3016</span></a>
</span><span id="help_generation_from_dict-3017"><a href="#help_generation_from_dict-3017"><span class="linenos">3017</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__default&quot;</span><span class="p">]:</span>
</span><span id="help_generation_from_dict-3018"><a href="#help_generation_from_dict-3018"><span class="linenos">3018</span></a>                        <span class="k">if</span> <span class="n">help_md</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]:</span>
</span><span id="help_generation_from_dict-3019"><a href="#help_generation_from_dict-3019"><span class="linenos">3019</span></a>                            <span class="n">help_md</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>
</span><span id="help_generation_from_dict-3020"><a href="#help_generation_from_dict-3020"><span class="linenos">3020</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;```</span><span class="si">{</span><span class="n">help_md</span><span class="si">}</span><span class="s2">```&quot;</span>
</span><span id="help_generation_from_dict-3021"><a href="#help_generation_from_dict-3021"><span class="linenos">3021</span></a>
</span><span id="help_generation_from_dict-3022"><a href="#help_generation_from_dict-3022"><span class="linenos">3022</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__default_eval&quot;</span><span class="p">]:</span>
</span><span id="help_generation_from_dict-3023"><a href="#help_generation_from_dict-3023"><span class="linenos">3023</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="s2">&quot;```&quot;</span> <span class="o">+</span> <span class="nb">eval</span><span class="p">(</span><span class="n">help_md</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;```&quot;</span>
</span><span id="help_generation_from_dict-3024"><a href="#help_generation_from_dict-3024"><span class="linenos">3024</span></a>
</span><span id="help_generation_from_dict-3025"><a href="#help_generation_from_dict-3025"><span class="linenos">3025</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__type&quot;</span><span class="p">]:</span>
</span><span id="help_generation_from_dict-3026"><a href="#help_generation_from_dict-3026"><span class="linenos">3026</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;```</span><span class="si">{</span><span class="n">help_md</span><span class="si">}</span><span class="s2">```&quot;</span>
</span><span id="help_generation_from_dict-3027"><a href="#help_generation_from_dict-3027"><span class="linenos">3027</span></a>
</span><span id="help_generation_from_dict-3028"><a href="#help_generation_from_dict-3028"><span class="linenos">3028</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__format&quot;</span><span class="p">]:</span>
</span><span id="help_generation_from_dict-3029"><a href="#help_generation_from_dict-3029"><span class="linenos">3029</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;```</span><span class="si">{</span><span class="n">help_md</span><span class="si">}</span><span class="s2">```&quot;</span>
</span><span id="help_generation_from_dict-3030"><a href="#help_generation_from_dict-3030"><span class="linenos">3030</span></a>
</span><span id="help_generation_from_dict-3031"><a href="#help_generation_from_dict-3031"><span class="linenos">3031</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__choices&quot;</span><span class="p">]:</span>
</span><span id="help_generation_from_dict-3032"><a href="#help_generation_from_dict-3032"><span class="linenos">3032</span></a>                        <span class="n">help_md</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;```</span><span class="si">{</span><span class="n">help_md</span><span class="si">}</span><span class="s2">```&quot;</span>
</span><span id="help_generation_from_dict-3033"><a href="#help_generation_from_dict-3033"><span class="linenos">3033</span></a>
</span><span id="help_generation_from_dict-3034"><a href="#help_generation_from_dict-3034"><span class="linenos">3034</span></a>                    <span class="c1"># Output variables</span>
</span><span id="help_generation_from_dict-3035"><a href="#help_generation_from_dict-3035"><span class="linenos">3035</span></a>                    <span class="n">output_header</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">level_md</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="help_generation_from_dict-3036"><a href="#help_generation_from_dict-3036"><span class="linenos">3036</span></a>                    <span class="n">output_header_table</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="help_generation_from_dict-3037"><a href="#help_generation_from_dict-3037"><span class="linenos">3037</span></a>                        <span class="sa">f</span><span class="s2">&quot;#</span><span class="si">{</span><span class="n">level_md</span><span class="si">}</span><span class="s2"> Table of contents</span><span class="se">\n\n</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="help_generation_from_dict-3038"><a href="#help_generation_from_dict-3038"><span class="linenos">3038</span></a>                    <span class="p">)</span>
</span><span id="help_generation_from_dict-3039"><a href="#help_generation_from_dict-3039"><span class="linenos">3039</span></a>                    <span class="n">output_content</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">help_md</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="help_generation_from_dict-3040"><a href="#help_generation_from_dict-3040"><span class="linenos">3040</span></a>
</span><span id="help_generation_from_dict-3041"><a href="#help_generation_from_dict-3041"><span class="linenos">3041</span></a>                <span class="c1"># HTML</span>
</span><span id="help_generation_from_dict-3042"><a href="#help_generation_from_dict-3042"><span class="linenos">3042</span></a>                <span class="k">elif</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;html&quot;</span><span class="p">:</span>
</span><span id="help_generation_from_dict-3043"><a href="#help_generation_from_dict-3043"><span class="linenos">3043</span></a>
</span><span id="help_generation_from_dict-3044"><a href="#help_generation_from_dict-3044"><span class="linenos">3044</span></a>                    <span class="c1"># Level</span>
</span><span id="help_generation_from_dict-3045"><a href="#help_generation_from_dict-3045"><span class="linenos">3045</span></a>                    <span class="n">level_html</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;H</span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="help_generation_from_dict-3046"><a href="#help_generation_from_dict-3046"><span class="linenos">3046</span></a>
</span><span id="help_generation_from_dict-3047"><a href="#help_generation_from_dict-3047"><span class="linenos">3047</span></a>                    <span class="c1"># Help content from type</span>
</span><span id="help_generation_from_dict-3048"><a href="#help_generation_from_dict-3048"><span class="linenos">3048</span></a>                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="help_generation_from_dict-3049"><a href="#help_generation_from_dict-3049"><span class="linenos">3049</span></a>                        <span class="n">help_html</span> <span class="o">=</span> <span class="n">help_dict_content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span>
</span><span id="help_generation_from_dict-3050"><a href="#help_generation_from_dict-3050"><span class="linenos">3050</span></a>                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="help_generation_from_dict-3051"><a href="#help_generation_from_dict-3051"><span class="linenos">3051</span></a>                        <span class="n">help_dict_content</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">help_dict_content</span><span class="p">)</span>
</span><span id="help_generation_from_dict-3052"><a href="#help_generation_from_dict-3052"><span class="linenos">3052</span></a>                        <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples_code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples&quot;</span><span class="p">]:</span>
</span><span id="help_generation_from_dict-3053"><a href="#help_generation_from_dict-3053"><span class="linenos">3053</span></a>                            <span class="n">help_html</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">)</span>
</span><span id="help_generation_from_dict-3054"><a href="#help_generation_from_dict-3054"><span class="linenos">3054</span></a>                            <span class="n">section_break</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation_from_dict-3055"><a href="#help_generation_from_dict-3055"><span class="linenos">3055</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="help_generation_from_dict-3056"><a href="#help_generation_from_dict-3056"><span class="linenos">3056</span></a>                            <span class="n">help_html</span> <span class="o">=</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">)</span>
</span><span id="help_generation_from_dict-3057"><a href="#help_generation_from_dict-3057"><span class="linenos">3057</span></a>                            <span class="n">section_break</span> <span class="o">=</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
</span><span id="help_generation_from_dict-3058"><a href="#help_generation_from_dict-3058"><span class="linenos">3058</span></a>                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">help_dict_content</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="help_generation_from_dict-3059"><a href="#help_generation_from_dict-3059"><span class="linenos">3059</span></a>                        <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples_code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples&quot;</span><span class="p">]:</span>
</span><span id="help_generation_from_dict-3060"><a href="#help_generation_from_dict-3060"><span class="linenos">3060</span></a>                            <span class="k">for</span> <span class="n">example_header</span> <span class="ow">in</span> <span class="n">help_dict_content</span><span class="p">:</span>
</span><span id="help_generation_from_dict-3061"><a href="#help_generation_from_dict-3061"><span class="linenos">3061</span></a>                                <span class="n">help_html</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">example_header</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="help_generation_from_dict-3062"><a href="#help_generation_from_dict-3062"><span class="linenos">3062</span></a>                                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="help_generation_from_dict-3063"><a href="#help_generation_from_dict-3063"><span class="linenos">3063</span></a>                                    <span class="n">help_dict_content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">example_header</span><span class="p">,</span> <span class="p">[]),</span> <span class="nb">list</span>
</span><span id="help_generation_from_dict-3064"><a href="#help_generation_from_dict-3064"><span class="linenos">3064</span></a>                                <span class="p">):</span>
</span><span id="help_generation_from_dict-3065"><a href="#help_generation_from_dict-3065"><span class="linenos">3065</span></a>                                    <span class="n">help_html</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="help_generation_from_dict-3066"><a href="#help_generation_from_dict-3066"><span class="linenos">3066</span></a>                                        <span class="n">help_dict_content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">example_header</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="help_generation_from_dict-3067"><a href="#help_generation_from_dict-3067"><span class="linenos">3067</span></a>                                    <span class="p">)</span>
</span><span id="help_generation_from_dict-3068"><a href="#help_generation_from_dict-3068"><span class="linenos">3068</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="help_generation_from_dict-3069"><a href="#help_generation_from_dict-3069"><span class="linenos">3069</span></a>                                    <span class="n">help_html</span> <span class="o">+=</span> <span class="n">help_dict_content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="help_generation_from_dict-3070"><a href="#help_generation_from_dict-3070"><span class="linenos">3070</span></a>                                        <span class="n">example_header</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation_from_dict-3071"><a href="#help_generation_from_dict-3071"><span class="linenos">3071</span></a>                                    <span class="p">)</span>
</span><span id="help_generation_from_dict-3072"><a href="#help_generation_from_dict-3072"><span class="linenos">3072</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="help_generation_from_dict-3073"><a href="#help_generation_from_dict-3073"><span class="linenos">3073</span></a>                        <span class="n">help_html</span> <span class="o">=</span> <span class="n">help_dict_content</span>
</span><span id="help_generation_from_dict-3074"><a href="#help_generation_from_dict-3074"><span class="linenos">3074</span></a>
</span><span id="help_generation_from_dict-3075"><a href="#help_generation_from_dict-3075"><span class="linenos">3075</span></a>                    <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;__code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples_code&quot;</span><span class="p">,</span> <span class="s2">&quot;__examples&quot;</span><span class="p">]:</span>
</span><span id="help_generation_from_dict-3076"><a href="#help_generation_from_dict-3076"><span class="linenos">3076</span></a>                        <span class="n">help_html</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&lt;xmp&gt;</span><span class="si">{</span><span class="n">help_html</span><span class="si">}</span><span class="s2">&lt;/xmp&gt;&quot;</span>
</span><span id="help_generation_from_dict-3077"><a href="#help_generation_from_dict-3077"><span class="linenos">3077</span></a>
</span><span id="help_generation_from_dict-3078"><a href="#help_generation_from_dict-3078"><span class="linenos">3078</span></a>                    <span class="c1"># Output variables</span>
</span><span id="help_generation_from_dict-3079"><a href="#help_generation_from_dict-3079"><span class="linenos">3079</span></a>                    <span class="n">output_header</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="help_generation_from_dict-3080"><a href="#help_generation_from_dict-3080"><span class="linenos">3080</span></a>                        <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="n">level_html</span><span class="si">}</span><span class="s2"> id=&#39;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&#39;&gt;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&lt;/</span><span class="si">{</span><span class="n">level_html</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
</span><span id="help_generation_from_dict-3081"><a href="#help_generation_from_dict-3081"><span class="linenos">3081</span></a>                    <span class="p">)</span>
</span><span id="help_generation_from_dict-3082"><a href="#help_generation_from_dict-3082"><span class="linenos">3082</span></a>                    <span class="n">output_header_table</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="help_generation_from_dict-3083"><a href="#help_generation_from_dict-3083"><span class="linenos">3083</span></a><span class="s2">                    &lt;H</span><span class="si">{</span><span class="n">level</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&gt;Table of contents&lt;/</span><span class="si">{</span><span class="n">level_html</span><span class="si">}</span><span class="s2">&gt;</span>
</span><span id="help_generation_from_dict-3084"><a href="#help_generation_from_dict-3084"><span class="linenos">3084</span></a><span class="s2">                    </span><span class="si">{</span><span class="n">table</span><span class="si">}</span>
</span><span id="help_generation_from_dict-3085"><a href="#help_generation_from_dict-3085"><span class="linenos">3085</span></a><span class="s2">                    &lt;br&gt;</span>
</span><span id="help_generation_from_dict-3086"><a href="#help_generation_from_dict-3086"><span class="linenos">3086</span></a><span class="s2">                    &quot;&quot;&quot;</span>
</span><span id="help_generation_from_dict-3087"><a href="#help_generation_from_dict-3087"><span class="linenos">3087</span></a>                    <span class="n">output_content</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">help_html</span><span class="si">}</span><span class="s2">&lt;br&gt;&quot;</span>
</span><span id="help_generation_from_dict-3088"><a href="#help_generation_from_dict-3088"><span class="linenos">3088</span></a>
</span><span id="help_generation_from_dict-3089"><a href="#help_generation_from_dict-3089"><span class="linenos">3089</span></a>                <span class="c1"># Output section</span>
</span><span id="help_generation_from_dict-3090"><a href="#help_generation_from_dict-3090"><span class="linenos">3090</span></a>                <span class="n">output_section</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^__&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">section</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
</span><span id="help_generation_from_dict-3091"><a href="#help_generation_from_dict-3091"><span class="linenos">3091</span></a>
</span><span id="help_generation_from_dict-3092"><a href="#help_generation_from_dict-3092"><span class="linenos">3092</span></a>                <span class="c1"># Output construction</span>
</span><span id="help_generation_from_dict-3093"><a href="#help_generation_from_dict-3093"><span class="linenos">3093</span></a>                <span class="k">if</span> <span class="n">section</span> <span class="o">==</span> <span class="s2">&quot;__help&quot;</span><span class="p">:</span>
</span><span id="help_generation_from_dict-3094"><a href="#help_generation_from_dict-3094"><span class="linenos">3094</span></a>                    <span class="n">output</span> <span class="o">+=</span> <span class="n">output_header</span>
</span><span id="help_generation_from_dict-3095"><a href="#help_generation_from_dict-3095"><span class="linenos">3095</span></a>                    <span class="n">output</span> <span class="o">+=</span> <span class="n">output_content</span>
</span><span id="help_generation_from_dict-3096"><a href="#help_generation_from_dict-3096"><span class="linenos">3096</span></a>                    <span class="k">if</span> <span class="n">table</span> <span class="ow">and</span> <span class="n">level</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="help_generation_from_dict-3097"><a href="#help_generation_from_dict-3097"><span class="linenos">3097</span></a>                        <span class="n">output</span> <span class="o">+=</span> <span class="n">output_header_table</span>
</span><span id="help_generation_from_dict-3098"><a href="#help_generation_from_dict-3098"><span class="linenos">3098</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="help_generation_from_dict-3099"><a href="#help_generation_from_dict-3099"><span class="linenos">3099</span></a>                    <span class="n">output_section</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="help_generation_from_dict-3100"><a href="#help_generation_from_dict-3100"><span class="linenos">3100</span></a>                        <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^__&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">section</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
</span><span id="help_generation_from_dict-3101"><a href="#help_generation_from_dict-3101"><span class="linenos">3101</span></a>                    <span class="p">)</span>
</span><span id="help_generation_from_dict-3102"><a href="#help_generation_from_dict-3102"><span class="linenos">3102</span></a>                    <span class="n">output</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">output_section</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">section_break</span><span class="si">}{</span><span class="n">output_content</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="help_generation_from_dict-3103"><a href="#help_generation_from_dict-3103"><span class="linenos">3103</span></a>
</span><span id="help_generation_from_dict-3104"><a href="#help_generation_from_dict-3104"><span class="linenos">3104</span></a>    <span class="c1"># Output table construction</span>
</span><span id="help_generation_from_dict-3105"><a href="#help_generation_from_dict-3105"><span class="linenos">3105</span></a>    <span class="k">if</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;markdown&quot;</span><span class="p">:</span>
</span><span id="help_generation_from_dict-3106"><a href="#help_generation_from_dict-3106"><span class="linenos">3106</span></a>        <span class="n">output_table</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="help_generation_from_dict-3107"><a href="#help_generation_from_dict-3107"><span class="linenos">3107</span></a>            <span class="s2">&quot;   &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">level</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="help_generation_from_dict-3108"><a href="#help_generation_from_dict-3108"><span class="linenos">3108</span></a>            <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;- [</span><span class="si">{</span><span class="n">element</span><span class="si">}</span><span class="s2">](#</span><span class="si">{</span><span class="n">prefix</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="help_generation_from_dict-3109"><a href="#help_generation_from_dict-3109"><span class="linenos">3109</span></a>        <span class="p">)</span>
</span><span id="help_generation_from_dict-3110"><a href="#help_generation_from_dict-3110"><span class="linenos">3110</span></a>    <span class="k">elif</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;html&quot;</span><span class="p">:</span>
</span><span id="help_generation_from_dict-3111"><a href="#help_generation_from_dict-3111"><span class="linenos">3111</span></a>        <span class="n">output_table</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="help_generation_from_dict-3112"><a href="#help_generation_from_dict-3112"><span class="linenos">3112</span></a>            <span class="s2">&quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">level</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="help_generation_from_dict-3113"><a href="#help_generation_from_dict-3113"><span class="linenos">3113</span></a>            <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;- &lt;a href=&#39;#</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&#39;&gt;</span><span class="si">{</span><span class="n">element</span><span class="si">}</span><span class="s2">&lt;/a&gt;&lt;BR&gt;&quot;</span>
</span><span id="help_generation_from_dict-3114"><a href="#help_generation_from_dict-3114"><span class="linenos">3114</span></a>        <span class="p">)</span>
</span><span id="help_generation_from_dict-3115"><a href="#help_generation_from_dict-3115"><span class="linenos">3115</span></a>
</span><span id="help_generation_from_dict-3116"><a href="#help_generation_from_dict-3116"><span class="linenos">3116</span></a>    <span class="c1"># Recusivity to other sub-element</span>
</span><span id="help_generation_from_dict-3117"><a href="#help_generation_from_dict-3117"><span class="linenos">3117</span></a>    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">help_dict</span><span class="p">:</span>
</span><span id="help_generation_from_dict-3118"><a href="#help_generation_from_dict-3118"><span class="linenos">3118</span></a>
</span><span id="help_generation_from_dict-3119"><a href="#help_generation_from_dict-3119"><span class="linenos">3119</span></a>        <span class="c1"># If element is a sub-element</span>
</span><span id="help_generation_from_dict-3120"><a href="#help_generation_from_dict-3120"><span class="linenos">3120</span></a>        <span class="k">if</span> <span class="n">element</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">section_list</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="help_generation_from_dict-3121"><a href="#help_generation_from_dict-3121"><span class="linenos">3121</span></a>            <span class="n">help_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="nb">dict</span>
</span><span id="help_generation_from_dict-3122"><a href="#help_generation_from_dict-3122"><span class="linenos">3122</span></a>        <span class="p">):</span>
</span><span id="help_generation_from_dict-3123"><a href="#help_generation_from_dict-3123"><span class="linenos">3123</span></a>
</span><span id="help_generation_from_dict-3124"><a href="#help_generation_from_dict-3124"><span class="linenos">3124</span></a>            <span class="c1"># output_tabl</span>
</span><span id="help_generation_from_dict-3125"><a href="#help_generation_from_dict-3125"><span class="linenos">3125</span></a>            <span class="n">output_table</span> <span class="o">+=</span> <span class="n">help_generation_from_dict</span><span class="p">(</span>
</span><span id="help_generation_from_dict-3126"><a href="#help_generation_from_dict-3126"><span class="linenos">3126</span></a>                <span class="n">element</span><span class="o">=</span><span class="n">element</span><span class="p">,</span>
</span><span id="help_generation_from_dict-3127"><a href="#help_generation_from_dict-3127"><span class="linenos">3127</span></a>                <span class="n">help_dict</span><span class="o">=</span><span class="n">help_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
</span><span id="help_generation_from_dict-3128"><a href="#help_generation_from_dict-3128"><span class="linenos">3128</span></a>                <span class="n">previous</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">previous</span><span class="si">}{</span><span class="n">element</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_dict-3129"><a href="#help_generation_from_dict-3129"><span class="linenos">3129</span></a>                <span class="n">output_type</span><span class="o">=</span><span class="n">output_type</span><span class="p">,</span>
</span><span id="help_generation_from_dict-3130"><a href="#help_generation_from_dict-3130"><span class="linenos">3130</span></a>                <span class="n">level</span><span class="o">=</span><span class="n">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="help_generation_from_dict-3131"><a href="#help_generation_from_dict-3131"><span class="linenos">3131</span></a>                <span class="n">table</span><span class="o">=</span><span class="n">output_table</span><span class="p">,</span>
</span><span id="help_generation_from_dict-3132"><a href="#help_generation_from_dict-3132"><span class="linenos">3132</span></a>                <span class="n">generate_table</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="help_generation_from_dict-3133"><a href="#help_generation_from_dict-3133"><span class="linenos">3133</span></a>                <span class="n">code_type</span><span class="o">=</span><span class="n">code_type</span><span class="p">,</span>
</span><span id="help_generation_from_dict-3134"><a href="#help_generation_from_dict-3134"><span class="linenos">3134</span></a>            <span class="p">)</span>
</span><span id="help_generation_from_dict-3135"><a href="#help_generation_from_dict-3135"><span class="linenos">3135</span></a>
</span><span id="help_generation_from_dict-3136"><a href="#help_generation_from_dict-3136"><span class="linenos">3136</span></a>            <span class="c1"># Add sub-element output</span>
</span><span id="help_generation_from_dict-3137"><a href="#help_generation_from_dict-3137"><span class="linenos">3137</span></a>            <span class="n">output</span> <span class="o">+=</span> <span class="n">help_generation_from_dict</span><span class="p">(</span>
</span><span id="help_generation_from_dict-3138"><a href="#help_generation_from_dict-3138"><span class="linenos">3138</span></a>                <span class="n">element</span><span class="o">=</span><span class="n">element</span><span class="p">,</span>
</span><span id="help_generation_from_dict-3139"><a href="#help_generation_from_dict-3139"><span class="linenos">3139</span></a>                <span class="n">help_dict</span><span class="o">=</span><span class="n">help_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
</span><span id="help_generation_from_dict-3140"><a href="#help_generation_from_dict-3140"><span class="linenos">3140</span></a>                <span class="n">previous</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">previous</span><span class="si">}{</span><span class="n">element</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_dict-3141"><a href="#help_generation_from_dict-3141"><span class="linenos">3141</span></a>                <span class="n">output_type</span><span class="o">=</span><span class="n">output_type</span><span class="p">,</span>
</span><span id="help_generation_from_dict-3142"><a href="#help_generation_from_dict-3142"><span class="linenos">3142</span></a>                <span class="n">level</span><span class="o">=</span><span class="n">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="help_generation_from_dict-3143"><a href="#help_generation_from_dict-3143"><span class="linenos">3143</span></a>                <span class="n">table</span><span class="o">=</span><span class="n">output_table</span><span class="p">,</span>
</span><span id="help_generation_from_dict-3144"><a href="#help_generation_from_dict-3144"><span class="linenos">3144</span></a>                <span class="n">code_type</span><span class="o">=</span><span class="n">code_type</span><span class="p">,</span>
</span><span id="help_generation_from_dict-3145"><a href="#help_generation_from_dict-3145"><span class="linenos">3145</span></a>            <span class="p">)</span>
</span><span id="help_generation_from_dict-3146"><a href="#help_generation_from_dict-3146"><span class="linenos">3146</span></a>
</span><span id="help_generation_from_dict-3147"><a href="#help_generation_from_dict-3147"><span class="linenos">3147</span></a>    <span class="c1"># Return output</span>
</span><span id="help_generation_from_dict-3148"><a href="#help_generation_from_dict-3148"><span class="linenos">3148</span></a>    <span class="k">if</span> <span class="n">generate_table</span><span class="p">:</span>
</span><span id="help_generation_from_dict-3149"><a href="#help_generation_from_dict-3149"><span class="linenos">3149</span></a>        <span class="k">return</span> <span class="n">output_table</span>
</span><span id="help_generation_from_dict-3150"><a href="#help_generation_from_dict-3150"><span class="linenos">3150</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="help_generation_from_dict-3151"><a href="#help_generation_from_dict-3151"><span class="linenos">3151</span></a>        <span class="k">return</span> <span class="n">output</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#help_generation_from_dict">help_generation_from_dict</a></code> function generates help documentation from a dictionary input,
supporting markdown and HTML output formats with specific sections like "__help", "__format",
"__default", "__examples", "__code", and "__examples_code".</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>element</strong>:  The <code>element</code> parameter in the <code><a href="#help_generation_from_dict">help_generation_from_dict</a></code> function is a string that
represents the current element or key in the dictionary for which help documentation is being
generated. It is the specific key or element within the dictionary that you want to generate help
documentation for</li>
<li><strong>help_dict</strong>:  The <code>help_dict</code> parameter in the <code><a href="#help_generation_from_dict">help_generation_from_dict</a></code> function is a
dictionary that contains the help documentation for various elements or keys. This dictionary
structure allows for organizing and storing information related to each element, such as help text,
formatting details, default values, and examples. The function processes</li>
<li><strong>previous</strong>:  The <code>previous</code> parameter in the <code><a href="#help_generation_from_dict">help_generation_from_dict</a></code> function is used to
keep track of the previous elements in the hierarchy. It is a string that represents the path to the
current element being processed. This parameter helps in maintaining the correct hierarchy level
when generating help documentation for nested elements in a</li>
<li><strong>output_type</strong>:  The <code>output_type</code> parameter in the <code><a href="#help_generation_from_dict">help_generation_from_dict</a></code> function
specifies the type of output format that you want the generated help documentation to be in. It can
take two possible values: "markdown" or "html". By default, the output type is set to markdown,
defaults to markdown</li>
<li><strong>level</strong>:  The <code>level</code> parameter in the <code><a href="#help_generation_from_dict">help_generation_from_dict</a></code> function is used to keep
track of the depth or level of recursion in the generation process. It starts at 1 for the initial
call and increments by 1 for each level of recursion into sub-elements. This parameter helps in
formatting the, defaults to 1</li>
<li><strong>table</strong>:  The <code>table</code> parameter in the <code><a href="#help_generation_from_dict">help_generation_from_dict</a></code> function is used to store the
table of contents for the generated help documentation. It is a string that contains the formatted
table of contents with links to different sections or elements within the documentation. This table
helps users navigate through the documentation easily</li>
<li><strong>generate_table</strong>:  The <code>generate_table</code> parameter in the <code><a href="#help_generation_from_dict">help_generation_from_dict</a></code> function is
a boolean flag that determines whether the function should generate a table of contents for the help
documentation. When set to <code>True</code>, the function will include a table of contents in the output based
on the hierarchy of elements in the, defaults to False</li>
<li><strong>code_type</strong>:  The <code>code_type</code> parameter in the <code><a href="#help_generation_from_dict">help_generation_from_dict</a></code> function specifies
the type of code examples that will be included in the generated help documentation. It defaults to
"json", meaning that the code examples provided in the "__examples_code" section of the dictionary
will be in JSON format</li>
<li><strong>auto_default</strong>:  The <code>auto_default</code> parameter in the <code><a href="#help_generation_from_dict">help_generation_from_dict</a></code> function is a
boolean flag that determines whether the function should automatically populate certain sections of
the help documentation based on the information available in the dictionary and the element's
arguments. When set to <code>True</code>, the function will automatically fill in sections, defaults to True</li>
<li><strong>previous_sections</strong>:  The <code>previous_sections</code> parameter in the <code><a href="#help_generation_from_dict">help_generation_from_dict</a></code>
function is a boolean flag that determines whether the function should include previous sections in
the hierarchy when generating help documentation for nested elements. When set to <code>True</code>, the
function will maintain the previous sections in the hierarchy path, helping to provide, defaults to
False</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The <code><a href="#help_generation_from_dict">help_generation_from_dict</a></code> function returns the generated help documentation based on
  the input <code>help_dict</code> dictionary. The output is formatted based on the specified <code>output_type</code>
  (either "markdown" or "html") and includes sections such as "__help", "__format", "__default", and
  "__examples" if they are present in the <code>help_dict</code>.</p>
</blockquote>
</div>


                </section>
                <section id="help_generation_from_json">
                            <input id="help_generation_from_json-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">help_generation_from_json</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">help_json_file</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">output_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;markdown&#39;</span>,</span><span class="param">	<span class="n">title</span><span class="o">=</span><span class="s1">&#39;Help&#39;</span>,</span><span class="param">	<span class="n">code_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">include_toc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="help_generation_from_json-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#help_generation_from_json"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="help_generation_from_json-3154"><a href="#help_generation_from_json-3154"><span class="linenos">3154</span></a><span class="k">def</span> <span class="nf">help_generation_from_json</span><span class="p">(</span>
</span><span id="help_generation_from_json-3155"><a href="#help_generation_from_json-3155"><span class="linenos">3155</span></a>    <span class="n">help_json_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="help_generation_from_json-3156"><a href="#help_generation_from_json-3156"><span class="linenos">3156</span></a>    <span class="n">output_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;markdown&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_json-3157"><a href="#help_generation_from_json-3157"><span class="linenos">3157</span></a>    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Help&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_json-3158"><a href="#help_generation_from_json-3158"><span class="linenos">3158</span></a>    <span class="n">code_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_json-3159"><a href="#help_generation_from_json-3159"><span class="linenos">3159</span></a>    <span class="n">include_toc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="help_generation_from_json-3160"><a href="#help_generation_from_json-3160"><span class="linenos">3160</span></a><span class="p">):</span>
</span><span id="help_generation_from_json-3161"><a href="#help_generation_from_json-3161"><span class="linenos">3161</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="help_generation_from_json-3162"><a href="#help_generation_from_json-3162"><span class="linenos">3162</span></a><span class="sd">    The `help_generation_from_json` function reads a JSON file containing help information, converts it</span>
</span><span id="help_generation_from_json-3163"><a href="#help_generation_from_json-3163"><span class="linenos">3163</span></a><span class="sd">    into a specified output format, and returns the generated help content.</span>
</span><span id="help_generation_from_json-3164"><a href="#help_generation_from_json-3164"><span class="linenos">3164</span></a>
</span><span id="help_generation_from_json-3165"><a href="#help_generation_from_json-3165"><span class="linenos">3165</span></a><span class="sd">    :param help_json_file: The `help_json_file` parameter is a string that should contain the file path</span>
</span><span id="help_generation_from_json-3166"><a href="#help_generation_from_json-3166"><span class="linenos">3166</span></a><span class="sd">    to the JSON file from which help information will be extracted. This JSON file likely contains</span>
</span><span id="help_generation_from_json-3167"><a href="#help_generation_from_json-3167"><span class="linenos">3167</span></a><span class="sd">    structured data that will be used to generate the help content</span>
</span><span id="help_generation_from_json-3168"><a href="#help_generation_from_json-3168"><span class="linenos">3168</span></a><span class="sd">    :type help_json_file: str</span>
</span><span id="help_generation_from_json-3169"><a href="#help_generation_from_json-3169"><span class="linenos">3169</span></a><span class="sd">    :param output_type: The `output_type` parameter in the `help_generation_from_json` function</span>
</span><span id="help_generation_from_json-3170"><a href="#help_generation_from_json-3170"><span class="linenos">3170</span></a><span class="sd">    specifies the format in which the generated help content will be output. By default, it is set to</span>
</span><span id="help_generation_from_json-3171"><a href="#help_generation_from_json-3171"><span class="linenos">3171</span></a><span class="sd">    &quot;markdown&quot;, which means the help content will be formatted using Markdown syntax. However, you can</span>
</span><span id="help_generation_from_json-3172"><a href="#help_generation_from_json-3172"><span class="linenos">3172</span></a><span class="sd">    also specify other output formats such, defaults to markdown</span>
</span><span id="help_generation_from_json-3173"><a href="#help_generation_from_json-3173"><span class="linenos">3173</span></a><span class="sd">    :type output_type: str (optional)</span>
</span><span id="help_generation_from_json-3174"><a href="#help_generation_from_json-3174"><span class="linenos">3174</span></a><span class="sd">    :param title: The `title` parameter in the `help_generation_from_json` function is a string that</span>
</span><span id="help_generation_from_json-3175"><a href="#help_generation_from_json-3175"><span class="linenos">3175</span></a><span class="sd">    represents the title of the help documentation that will be generated. It is used to provide a title</span>
</span><span id="help_generation_from_json-3176"><a href="#help_generation_from_json-3176"><span class="linenos">3176</span></a><span class="sd">    for the help content to make it more organized and informative. By default, the title is set to</span>
</span><span id="help_generation_from_json-3177"><a href="#help_generation_from_json-3177"><span class="linenos">3177</span></a><span class="sd">    &quot;Help&quot;, defaults to Help (optional)</span>
</span><span id="help_generation_from_json-3178"><a href="#help_generation_from_json-3178"><span class="linenos">3178</span></a><span class="sd">    :param code_type: The `code_type` parameter in the `help_generation_from_json` function is used to</span>
</span><span id="help_generation_from_json-3179"><a href="#help_generation_from_json-3179"><span class="linenos">3179</span></a><span class="sd">    specify the type of code examples that will be included in the generated help content. This</span>
</span><span id="help_generation_from_json-3180"><a href="#help_generation_from_json-3180"><span class="linenos">3180</span></a><span class="sd">    parameter allows you to define the format or language of the code examples to be displayed alongside</span>
</span><span id="help_generation_from_json-3181"><a href="#help_generation_from_json-3181"><span class="linenos">3181</span></a><span class="sd">    the help information extracted from the JSON</span>
</span><span id="help_generation_from_json-3182"><a href="#help_generation_from_json-3182"><span class="linenos">3182</span></a><span class="sd">    :type code_type: str</span>
</span><span id="help_generation_from_json-3183"><a href="#help_generation_from_json-3183"><span class="linenos">3183</span></a><span class="sd">    :param include_toc: The `include_toc` parameter in the `help_generation_from_json` function is a</span>
</span><span id="help_generation_from_json-3184"><a href="#help_generation_from_json-3184"><span class="linenos">3184</span></a><span class="sd">    boolean flag that determines whether a table of contents (TOC) should be included in the generated</span>
</span><span id="help_generation_from_json-3185"><a href="#help_generation_from_json-3185"><span class="linenos">3185</span></a><span class="sd">    help content. If `include_toc` is set to `True`, a table of contents will be generated based,</span>
</span><span id="help_generation_from_json-3186"><a href="#help_generation_from_json-3186"><span class="linenos">3186</span></a><span class="sd">    defaults to False</span>
</span><span id="help_generation_from_json-3187"><a href="#help_generation_from_json-3187"><span class="linenos">3187</span></a><span class="sd">    :type include_toc: bool (optional)</span>
</span><span id="help_generation_from_json-3188"><a href="#help_generation_from_json-3188"><span class="linenos">3188</span></a><span class="sd">    :return: The function `help_generation_from_json` returns the generated help content based on the</span>
</span><span id="help_generation_from_json-3189"><a href="#help_generation_from_json-3189"><span class="linenos">3189</span></a><span class="sd">    information stored in the JSON file provided as input.</span>
</span><span id="help_generation_from_json-3190"><a href="#help_generation_from_json-3190"><span class="linenos">3190</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="help_generation_from_json-3191"><a href="#help_generation_from_json-3191"><span class="linenos">3191</span></a>
</span><span id="help_generation_from_json-3192"><a href="#help_generation_from_json-3192"><span class="linenos">3192</span></a>    <span class="c1"># Read JSON file</span>
</span><span id="help_generation_from_json-3193"><a href="#help_generation_from_json-3193"><span class="linenos">3193</span></a>    <span class="n">help_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="help_generation_from_json-3194"><a href="#help_generation_from_json-3194"><span class="linenos">3194</span></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">help_json_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="help_generation_from_json-3195"><a href="#help_generation_from_json-3195"><span class="linenos">3195</span></a>        <span class="n">help_dict</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span id="help_generation_from_json-3196"><a href="#help_generation_from_json-3196"><span class="linenos">3196</span></a>
</span><span id="help_generation_from_json-3197"><a href="#help_generation_from_json-3197"><span class="linenos">3197</span></a>    <span class="c1"># Generate help table of content</span>
</span><span id="help_generation_from_json-3198"><a href="#help_generation_from_json-3198"><span class="linenos">3198</span></a>    <span class="k">if</span> <span class="n">include_toc</span><span class="p">:</span>
</span><span id="help_generation_from_json-3199"><a href="#help_generation_from_json-3199"><span class="linenos">3199</span></a>        <span class="n">output_table</span> <span class="o">=</span> <span class="n">help_generation_from_dict</span><span class="p">(</span>
</span><span id="help_generation_from_json-3200"><a href="#help_generation_from_json-3200"><span class="linenos">3200</span></a>            <span class="n">element</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
</span><span id="help_generation_from_json-3201"><a href="#help_generation_from_json-3201"><span class="linenos">3201</span></a>            <span class="n">help_dict</span><span class="o">=</span><span class="n">help_dict</span><span class="p">,</span>
</span><span id="help_generation_from_json-3202"><a href="#help_generation_from_json-3202"><span class="linenos">3202</span></a>            <span class="n">previous</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_json-3203"><a href="#help_generation_from_json-3203"><span class="linenos">3203</span></a>            <span class="n">output_type</span><span class="o">=</span><span class="n">output_type</span><span class="p">,</span>
</span><span id="help_generation_from_json-3204"><a href="#help_generation_from_json-3204"><span class="linenos">3204</span></a>            <span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="help_generation_from_json-3205"><a href="#help_generation_from_json-3205"><span class="linenos">3205</span></a>            <span class="n">generate_table</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="help_generation_from_json-3206"><a href="#help_generation_from_json-3206"><span class="linenos">3206</span></a>            <span class="n">code_type</span><span class="o">=</span><span class="n">code_type</span><span class="p">,</span>
</span><span id="help_generation_from_json-3207"><a href="#help_generation_from_json-3207"><span class="linenos">3207</span></a>        <span class="p">)</span>
</span><span id="help_generation_from_json-3208"><a href="#help_generation_from_json-3208"><span class="linenos">3208</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="help_generation_from_json-3209"><a href="#help_generation_from_json-3209"><span class="linenos">3209</span></a>        <span class="n">output_table</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="help_generation_from_json-3210"><a href="#help_generation_from_json-3210"><span class="linenos">3210</span></a>
</span><span id="help_generation_from_json-3211"><a href="#help_generation_from_json-3211"><span class="linenos">3211</span></a>    <span class="c1"># Generate help</span>
</span><span id="help_generation_from_json-3212"><a href="#help_generation_from_json-3212"><span class="linenos">3212</span></a>    <span class="n">output</span> <span class="o">=</span> <span class="n">help_generation_from_dict</span><span class="p">(</span>
</span><span id="help_generation_from_json-3213"><a href="#help_generation_from_json-3213"><span class="linenos">3213</span></a>        <span class="n">element</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
</span><span id="help_generation_from_json-3214"><a href="#help_generation_from_json-3214"><span class="linenos">3214</span></a>        <span class="n">help_dict</span><span class="o">=</span><span class="n">help_dict</span><span class="p">,</span>
</span><span id="help_generation_from_json-3215"><a href="#help_generation_from_json-3215"><span class="linenos">3215</span></a>        <span class="n">previous</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="help_generation_from_json-3216"><a href="#help_generation_from_json-3216"><span class="linenos">3216</span></a>        <span class="n">output_type</span><span class="o">=</span><span class="n">output_type</span><span class="p">,</span>
</span><span id="help_generation_from_json-3217"><a href="#help_generation_from_json-3217"><span class="linenos">3217</span></a>        <span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="help_generation_from_json-3218"><a href="#help_generation_from_json-3218"><span class="linenos">3218</span></a>        <span class="n">table</span><span class="o">=</span><span class="n">output_table</span><span class="p">,</span>
</span><span id="help_generation_from_json-3219"><a href="#help_generation_from_json-3219"><span class="linenos">3219</span></a>        <span class="n">code_type</span><span class="o">=</span><span class="n">code_type</span><span class="p">,</span>
</span><span id="help_generation_from_json-3220"><a href="#help_generation_from_json-3220"><span class="linenos">3220</span></a>    <span class="p">)</span>
</span><span id="help_generation_from_json-3221"><a href="#help_generation_from_json-3221"><span class="linenos">3221</span></a>
</span><span id="help_generation_from_json-3222"><a href="#help_generation_from_json-3222"><span class="linenos">3222</span></a>    <span class="c1"># Return help</span>
</span><span id="help_generation_from_json-3223"><a href="#help_generation_from_json-3223"><span class="linenos">3223</span></a>    <span class="k">return</span> <span class="n">output</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#help_generation_from_json">help_generation_from_json</a></code> function reads a JSON file containing help information, converts it
into a specified output format, and returns the generated help content.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>help_json_file</strong>:  The <code>help_json_file</code> parameter is a string that should contain the file path
to the JSON file from which help information will be extracted. This JSON file likely contains
structured data that will be used to generate the help content</li>
<li><strong>output_type</strong>:  The <code>output_type</code> parameter in the <code><a href="#help_generation_from_json">help_generation_from_json</a></code> function
specifies the format in which the generated help content will be output. By default, it is set to
"markdown", which means the help content will be formatted using Markdown syntax. However, you can
also specify other output formats such, defaults to markdown</li>
<li><strong>title</strong>:  The <code>title</code> parameter in the <code><a href="#help_generation_from_json">help_generation_from_json</a></code> function is a string that
represents the title of the help documentation that will be generated. It is used to provide a title
for the help content to make it more organized and informative. By default, the title is set to
"Help", defaults to Help (optional)</li>
<li><strong>code_type</strong>:  The <code>code_type</code> parameter in the <code><a href="#help_generation_from_json">help_generation_from_json</a></code> function is used to
specify the type of code examples that will be included in the generated help content. This
parameter allows you to define the format or language of the code examples to be displayed alongside
the help information extracted from the JSON</li>
<li><strong>include_toc</strong>:  The <code>include_toc</code> parameter in the <code><a href="#help_generation_from_json">help_generation_from_json</a></code> function is a
boolean flag that determines whether a table of contents (TOC) should be included in the generated
help content. If <code>include_toc</code> is set to <code>True</code>, a table of contents will be generated based,
defaults to False</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#help_generation_from_json">help_generation_from_json</a></code> returns the generated help content based on the
  information stored in the JSON file provided as input.</p>
</blockquote>
</div>


                </section>
                <section id="RawTextArgumentDefaultsHelpFormatter">
                            <input id="RawTextArgumentDefaultsHelpFormatter-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">RawTextArgumentDefaultsHelpFormatter</span><wbr>(<span class="base">argparse.ArgumentDefaultsHelpFormatter</span>, <span class="base">argparse.RawTextHelpFormatter</span>):

                <label class="view-source-button" for="RawTextArgumentDefaultsHelpFormatter-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RawTextArgumentDefaultsHelpFormatter"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RawTextArgumentDefaultsHelpFormatter-3226"><a href="#RawTextArgumentDefaultsHelpFormatter-3226"><span class="linenos">3226</span></a><span class="k">class</span> <span class="nc">RawTextArgumentDefaultsHelpFormatter</span><span class="p">(</span>
</span><span id="RawTextArgumentDefaultsHelpFormatter-3227"><a href="#RawTextArgumentDefaultsHelpFormatter-3227"><span class="linenos">3227</span></a>    <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentDefaultsHelpFormatter</span><span class="p">,</span> <span class="n">argparse</span><span class="o">.</span><span class="n">RawTextHelpFormatter</span>
</span><span id="RawTextArgumentDefaultsHelpFormatter-3228"><a href="#RawTextArgumentDefaultsHelpFormatter-3228"><span class="linenos">3228</span></a><span class="p">):</span>
</span><span id="RawTextArgumentDefaultsHelpFormatter-3229"><a href="#RawTextArgumentDefaultsHelpFormatter-3229"><span class="linenos">3229</span></a>    <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Help message formatter which adds default values to argument help.</p>

<p>Only the name of this class is considered a public API. All the methods
provided by the class are considered an implementation detail.</p>
</div>


                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>argparse.HelpFormatter</dt>
                                <dd id="RawTextArgumentDefaultsHelpFormatter.__init__" class="function">HelpFormatter</dd>
                <dd id="RawTextArgumentDefaultsHelpFormatter.start_section" class="function">start_section</dd>
                <dd id="RawTextArgumentDefaultsHelpFormatter.end_section" class="function">end_section</dd>
                <dd id="RawTextArgumentDefaultsHelpFormatter.add_text" class="function">add_text</dd>
                <dd id="RawTextArgumentDefaultsHelpFormatter.add_usage" class="function">add_usage</dd>
                <dd id="RawTextArgumentDefaultsHelpFormatter.add_argument" class="function">add_argument</dd>
                <dd id="RawTextArgumentDefaultsHelpFormatter.add_arguments" class="function">add_arguments</dd>
                <dd id="RawTextArgumentDefaultsHelpFormatter.format_help" class="function">format_help</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="help_header">
                            <input id="help_header-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">help_header</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">setup</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="help_header-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#help_header"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="help_header-3232"><a href="#help_header-3232"><span class="linenos">3232</span></a><span class="k">def</span> <span class="nf">help_header</span><span class="p">(</span><span class="n">setup</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="help_header-3233"><a href="#help_header-3233"><span class="linenos">3233</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="help_header-3234"><a href="#help_header-3234"><span class="linenos">3234</span></a><span class="sd">    The `help_header` function generates a header for the help documentation based on the metadata</span>
</span><span id="help_header-3235"><a href="#help_header-3235"><span class="linenos">3235</span></a><span class="sd">    information provided in the setup file.</span>
</span><span id="help_header-3236"><a href="#help_header-3236"><span class="linenos">3236</span></a>
</span><span id="help_header-3237"><a href="#help_header-3237"><span class="linenos">3237</span></a><span class="sd">    :param setup: The `setup` parameter is a string that represents the path to a configuration file.</span>
</span><span id="help_header-3238"><a href="#help_header-3238"><span class="linenos">3238</span></a><span class="sd">    This file contains metadata about the program, such as its name, version, description, and long</span>
</span><span id="help_header-3239"><a href="#help_header-3239"><span class="linenos">3239</span></a><span class="sd">    description content type</span>
</span><span id="help_header-3240"><a href="#help_header-3240"><span class="linenos">3240</span></a><span class="sd">    :type setup: str</span>
</span><span id="help_header-3241"><a href="#help_header-3241"><span class="linenos">3241</span></a><span class="sd">    :return: The function `help_header` returns a string that represents the header for the help</span>
</span><span id="help_header-3242"><a href="#help_header-3242"><span class="linenos">3242</span></a><span class="sd">    documentation. The header includes the program name, version, authors, and description.</span>
</span><span id="help_header-3243"><a href="#help_header-3243"><span class="linenos">3243</span></a>
</span><span id="help_header-3244"><a href="#help_header-3244"><span class="linenos">3244</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="help_header-3245"><a href="#help_header-3245"><span class="linenos">3245</span></a>
</span><span id="help_header-3246"><a href="#help_header-3246"><span class="linenos">3246</span></a>    <span class="c1"># Config Parser</span>
</span><span id="help_header-3247"><a href="#help_header-3247"><span class="linenos">3247</span></a>    <span class="c1"># setup = &quot;/tmp/config&quot;</span>
</span><span id="help_header-3248"><a href="#help_header-3248"><span class="linenos">3248</span></a>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">setup</span><span class="p">):</span>
</span><span id="help_header-3249"><a href="#help_header-3249"><span class="linenos">3249</span></a>        <span class="n">cf</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="p">()</span>
</span><span id="help_header-3250"><a href="#help_header-3250"><span class="linenos">3250</span></a>        <span class="n">cf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">setup</span><span class="p">)</span>
</span><span id="help_header-3251"><a href="#help_header-3251"><span class="linenos">3251</span></a>        <span class="n">prog_name</span> <span class="o">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="s2">&quot;Unknown Program&quot;</span><span class="p">)</span>
</span><span id="help_header-3252"><a href="#help_header-3252"><span class="linenos">3252</span></a>        <span class="n">prog_version</span> <span class="o">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="s2">&quot;0.0.0&quot;</span><span class="p">)</span>
</span><span id="help_header-3253"><a href="#help_header-3253"><span class="linenos">3253</span></a>        <span class="n">prog_authors</span> <span class="o">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="s2">&quot;0.0.0&quot;</span><span class="p">)</span>
</span><span id="help_header-3254"><a href="#help_header-3254"><span class="linenos">3254</span></a>        <span class="n">prog_description</span> <span class="o">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
</span><span id="help_header-3255"><a href="#help_header-3255"><span class="linenos">3255</span></a>            <span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="s2">&quot;No description available.&quot;</span>
</span><span id="help_header-3256"><a href="#help_header-3256"><span class="linenos">3256</span></a>        <span class="p">)</span>
</span><span id="help_header-3257"><a href="#help_header-3257"><span class="linenos">3257</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="help_header-3258"><a href="#help_header-3258"><span class="linenos">3258</span></a>        <span class="c1"># meta</span>
</span><span id="help_header-3259"><a href="#help_header-3259"><span class="linenos">3259</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="help_header-3260"><a href="#help_header-3260"><span class="linenos">3260</span></a>            <span class="n">meta</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">(</span><span class="s2">&quot;howard-ann&quot;</span><span class="p">)</span>
</span><span id="help_header-3261"><a href="#help_header-3261"><span class="linenos">3261</span></a>            <span class="n">prog_name</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">)</span>
</span><span id="help_header-3262"><a href="#help_header-3262"><span class="linenos">3262</span></a>            <span class="n">prog_version</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Version&quot;</span><span class="p">)</span>
</span><span id="help_header-3263"><a href="#help_header-3263"><span class="linenos">3263</span></a>            <span class="n">prog_authors</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;author&quot;</span><span class="p">)</span>
</span><span id="help_header-3264"><a href="#help_header-3264"><span class="linenos">3264</span></a>            <span class="n">prog_description</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Summary&quot;</span><span class="p">)</span>
</span><span id="help_header-3265"><a href="#help_header-3265"><span class="linenos">3265</span></a>        <span class="c1"># Default</span>
</span><span id="help_header-3266"><a href="#help_header-3266"><span class="linenos">3266</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="help_header-3267"><a href="#help_header-3267"><span class="linenos">3267</span></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Erreur : </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="help_header-3268"><a href="#help_header-3268"><span class="linenos">3268</span></a>            <span class="n">prog_name</span> <span class="o">=</span> <span class="s2">&quot;HOWARD&quot;</span>
</span><span id="help_header-3269"><a href="#help_header-3269"><span class="linenos">3269</span></a>            <span class="n">prog_version</span> <span class="o">=</span> <span class="s2">&quot;0.0.0&quot;</span>
</span><span id="help_header-3270"><a href="#help_header-3270"><span class="linenos">3270</span></a>            <span class="n">prog_authors</span> <span class="o">=</span> <span class="s2">&quot;ALB&quot;</span>
</span><span id="help_header-3271"><a href="#help_header-3271"><span class="linenos">3271</span></a>            <span class="n">prog_description</span> <span class="o">=</span> <span class="s2">&quot;HOWARD - Highly Open Workflow for Annotation &amp; Ranking toward genomic variant Discovery&quot;</span>
</span><span id="help_header-3272"><a href="#help_header-3272"><span class="linenos">3272</span></a>
</span><span id="help_header-3273"><a href="#help_header-3273"><span class="linenos">3273</span></a>    <span class="c1"># Logo</span>
</span><span id="help_header-3274"><a href="#help_header-3274"><span class="linenos">3274</span></a>    <span class="kn">import</span> <span class="nn">pyfiglet</span>
</span><span id="help_header-3275"><a href="#help_header-3275"><span class="linenos">3275</span></a>
</span><span id="help_header-3276"><a href="#help_header-3276"><span class="linenos">3276</span></a>    <span class="n">ascii_logo</span> <span class="o">=</span> <span class="n">pyfiglet</span><span class="o">.</span><span class="n">figlet_format</span><span class="p">(</span>
</span><span id="help_header-3277"><a href="#help_header-3277"><span class="linenos">3277</span></a>        <span class="n">prog_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span><span id="help_header-3278"><a href="#help_header-3278"><span class="linenos">3278</span></a>    <span class="p">)</span>  <span class="c1"># , font=&quot;slant&quot;)</span>
</span><span id="help_header-3279"><a href="#help_header-3279"><span class="linenos">3279</span></a>
</span><span id="help_header-3280"><a href="#help_header-3280"><span class="linenos">3280</span></a>    <span class="c1"># Header</span>
</span><span id="help_header-3281"><a href="#help_header-3281"><span class="linenos">3281</span></a>    <span class="n">header</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">ascii_logo</span><span class="si">}{</span><span class="n">prog_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">::</span><span class="si">{</span><span class="n">prog_version</span><span class="si">}</span><span class="s2"> [</span><span class="si">{</span><span class="n">prog_authors</span><span class="si">}</span><span class="s2">]</span><span class="se">\n</span><span class="si">{</span><span class="n">prog_description</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="help_header-3282"><a href="#help_header-3282"><span class="linenos">3282</span></a>
</span><span id="help_header-3283"><a href="#help_header-3283"><span class="linenos">3283</span></a>    <span class="c1"># Return</span>
</span><span id="help_header-3284"><a href="#help_header-3284"><span class="linenos">3284</span></a>    <span class="k">return</span> <span class="n">header</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#help_header">help_header</a></code> function generates a header for the help documentation based on the metadata
information provided in the setup file.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>setup</strong>:  The <code>setup</code> parameter is a string that represents the path to a configuration file.
This file contains metadata about the program, such as its name, version, description, and long
description content type</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#help_header">help_header</a></code> returns a string that represents the header for the help
  documentation. The header includes the program name, version, authors, and description.</p>
</blockquote>
</div>


                </section>
                <section id="help_generation">
                            <input id="help_generation-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">help_generation</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">arguments_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>, </span><span class="param"><span class="n">parser</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">output_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;parser&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="help_generation-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#help_generation"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="help_generation-3287"><a href="#help_generation-3287"><span class="linenos">3287</span></a><span class="k">def</span> <span class="nf">help_generation</span><span class="p">(</span>
</span><span id="help_generation-3288"><a href="#help_generation-3288"><span class="linenos">3288</span></a>    <span class="n">arguments_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="help_generation-3289"><a href="#help_generation-3289"><span class="linenos">3289</span></a>    <span class="n">parser</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="help_generation-3290"><a href="#help_generation-3290"><span class="linenos">3290</span></a>    <span class="n">output_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;parser&quot;</span><span class="p">,</span>
</span><span id="help_generation-3291"><a href="#help_generation-3291"><span class="linenos">3291</span></a><span class="p">):</span>
</span><span id="help_generation-3292"><a href="#help_generation-3292"><span class="linenos">3292</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="help_generation-3293"><a href="#help_generation-3293"><span class="linenos">3293</span></a><span class="sd">    The `help_generation` function generates a parser object for command-line arguments, as well as</span>
</span><span id="help_generation-3294"><a href="#help_generation-3294"><span class="linenos">3294</span></a><span class="sd">    markdown or HTML help documentation for those arguments.</span>
</span><span id="help_generation-3295"><a href="#help_generation-3295"><span class="linenos">3295</span></a>
</span><span id="help_generation-3296"><a href="#help_generation-3296"><span class="linenos">3296</span></a><span class="sd">    :param arguments_dict: A dictionary containing the arguments for the function. It has three keys:</span>
</span><span id="help_generation-3297"><a href="#help_generation-3297"><span class="linenos">3297</span></a><span class="sd">    :type arguments_dict: dict</span>
</span><span id="help_generation-3298"><a href="#help_generation-3298"><span class="linenos">3298</span></a><span class="sd">    :param parser: The `parser` parameter is an instance of the `argparse.ArgumentParser` class. It is</span>
</span><span id="help_generation-3299"><a href="#help_generation-3299"><span class="linenos">3299</span></a><span class="sd">    used to define the command-line interface and parse the command-line arguments. If no `parser` is</span>
</span><span id="help_generation-3300"><a href="#help_generation-3300"><span class="linenos">3300</span></a><span class="sd">    provided, a new instance of `argparse.ArgumentParser` will be created</span>
</span><span id="help_generation-3301"><a href="#help_generation-3301"><span class="linenos">3301</span></a><span class="sd">    :param setup: The `setup` parameter is a string that represents the path to a configuration file.</span>
</span><span id="help_generation-3302"><a href="#help_generation-3302"><span class="linenos">3302</span></a><span class="sd">    This file contains metadata about the program, such as its name, version, description, and long</span>
</span><span id="help_generation-3303"><a href="#help_generation-3303"><span class="linenos">3303</span></a><span class="sd">    description content type</span>
</span><span id="help_generation-3304"><a href="#help_generation-3304"><span class="linenos">3304</span></a><span class="sd">    :type setup: str</span>
</span><span id="help_generation-3305"><a href="#help_generation-3305"><span class="linenos">3305</span></a><span class="sd">    :param output_type: The `output_type` parameter determines the format of the output. It can be one</span>
</span><span id="help_generation-3306"><a href="#help_generation-3306"><span class="linenos">3306</span></a><span class="sd">    of the following values:, defaults to parser</span>
</span><span id="help_generation-3307"><a href="#help_generation-3307"><span class="linenos">3307</span></a><span class="sd">    :type output_type: str (optional)</span>
</span><span id="help_generation-3308"><a href="#help_generation-3308"><span class="linenos">3308</span></a><span class="sd">    :return: The function `help_generation` returns different outputs based on the value of the</span>
</span><span id="help_generation-3309"><a href="#help_generation-3309"><span class="linenos">3309</span></a><span class="sd">    `output_type` parameter.</span>
</span><span id="help_generation-3310"><a href="#help_generation-3310"><span class="linenos">3310</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="help_generation-3311"><a href="#help_generation-3311"><span class="linenos">3311</span></a>
</span><span id="help_generation-3312"><a href="#help_generation-3312"><span class="linenos">3312</span></a>    <span class="c1"># Arguments</span>
</span><span id="help_generation-3313"><a href="#help_generation-3313"><span class="linenos">3313</span></a>    <span class="n">arguments</span> <span class="o">=</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;arguments&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="help_generation-3314"><a href="#help_generation-3314"><span class="linenos">3314</span></a>    <span class="n">commands_arguments</span> <span class="o">=</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;commands_arguments&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="help_generation-3315"><a href="#help_generation-3315"><span class="linenos">3315</span></a>    <span class="n">shared_arguments</span> <span class="o">=</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;shared_arguments&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="help_generation-3316"><a href="#help_generation-3316"><span class="linenos">3316</span></a>
</span><span id="help_generation-3317"><a href="#help_generation-3317"><span class="linenos">3317</span></a>    <span class="c1"># Parser default</span>
</span><span id="help_generation-3318"><a href="#help_generation-3318"><span class="linenos">3318</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">parser</span><span class="p">:</span>
</span><span id="help_generation-3319"><a href="#help_generation-3319"><span class="linenos">3319</span></a>        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
</span><span id="help_generation-3320"><a href="#help_generation-3320"><span class="linenos">3320</span></a>
</span><span id="help_generation-3321"><a href="#help_generation-3321"><span class="linenos">3321</span></a>    <span class="c1"># Parser information</span>
</span><span id="help_generation-3322"><a href="#help_generation-3322"><span class="linenos">3322</span></a>    <span class="n">parser</span><span class="o">.</span><span class="n">prog</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">(</span><span class="s2">&quot;howard-ann&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="help_generation-3323"><a href="#help_generation-3323"><span class="linenos">3323</span></a>    <span class="n">parser</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation-3324"><a href="#help_generation-3324"><span class="linenos">3324</span></a>    <span class="n">parser</span><span class="o">.</span><span class="n">epilog</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="help_generation-3325"><a href="#help_generation-3325"><span class="linenos">3325</span></a>        <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Usage examples:</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3326"><a href="#help_generation-3326"><span class="linenos">3326</span></a>        <span class="o">+</span> <span class="s2">&quot;&quot;&quot;   howard process --input=tests/data/example.vcf.gz --output=/tmp/example.annotated.vcf.gz --param=config/param.json </span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="help_generation-3327"><a href="#help_generation-3327"><span class="linenos">3327</span></a>        <span class="o">+</span> <span class="s2">&quot;&quot;&quot;   howard annotation --input=tests/data/example.vcf.gz --output=/tmp/example.howard.vcf.gz --annotations=&#39;tests/databases/annotations/current/hg19/dbnsfp42a.parquet,tests/databases/annotations/current/hg19/gnomad211_genome.parquet&#39; </span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="help_generation-3328"><a href="#help_generation-3328"><span class="linenos">3328</span></a>        <span class="o">+</span> <span class="s2">&quot;&quot;&quot;   howard calculation --input=tests/data/example.full.vcf --output=/tmp/example.calculation.tsv --calculations=&#39;vartype&#39; </span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="help_generation-3329"><a href="#help_generation-3329"><span class="linenos">3329</span></a>        <span class="o">+</span> <span class="s2">&quot;&quot;&quot;   howard prioritization --input=tests/data/example.vcf.gz --output=/tmp/example.prioritized.vcf.gz --prioritization_config=config/prioritization_profiles.json --prioritizations=&#39;default,GERMLINE&#39; </span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="help_generation-3330"><a href="#help_generation-3330"><span class="linenos">3330</span></a>        <span class="o">+</span> <span class="s2">&quot;&quot;&quot;   howard query --input=tests/data/example.vcf.gz --explode_infos --query=&#39;SELECT &quot;#CHROM&quot;, POS, REF, ALT, &quot;DP&quot;, &quot;CLNSIG&quot;, sample2, sample3 FROM variants WHERE &quot;DP&quot; &gt;= 50 OR &quot;CLNSIG&quot; NOT NULL ORDER BY &quot;CLNSIG&quot; DESC, &quot;DP&quot; DESC&#39; </span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="help_generation-3331"><a href="#help_generation-3331"><span class="linenos">3331</span></a>        <span class="o">+</span> <span class="s2">&quot;&quot;&quot;   howard stats --input=tests/data/example.vcf.gz </span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="help_generation-3332"><a href="#help_generation-3332"><span class="linenos">3332</span></a>        <span class="o">+</span> <span class="s2">&quot;&quot;&quot;   howard convert --input=tests/data/example.vcf.gz --output=/tmp/example.tsv --explode_infos &amp;&amp; cat /tmp/example.tsv </span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="help_generation-3333"><a href="#help_generation-3333"><span class="linenos">3333</span></a>    <span class="p">)</span>
</span><span id="help_generation-3334"><a href="#help_generation-3334"><span class="linenos">3334</span></a>    <span class="n">parser</span><span class="o">.</span><span class="n">formatter_class</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">RawTextHelpFormatter</span>
</span><span id="help_generation-3335"><a href="#help_generation-3335"><span class="linenos">3335</span></a>
</span><span id="help_generation-3336"><a href="#help_generation-3336"><span class="linenos">3336</span></a>    <span class="c1"># Optionals</span>
</span><span id="help_generation-3337"><a href="#help_generation-3337"><span class="linenos">3337</span></a>    <span class="n">parser</span><span class="o">.</span><span class="n">_optionals</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Shared arguments&quot;</span>
</span><span id="help_generation-3338"><a href="#help_generation-3338"><span class="linenos">3338</span></a>
</span><span id="help_generation-3339"><a href="#help_generation-3339"><span class="linenos">3339</span></a>    <span class="c1"># Sub parser</span>
</span><span id="help_generation-3340"><a href="#help_generation-3340"><span class="linenos">3340</span></a>    <span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Tools&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;command&quot;</span><span class="p">)</span>
</span><span id="help_generation-3341"><a href="#help_generation-3341"><span class="linenos">3341</span></a>
</span><span id="help_generation-3342"><a href="#help_generation-3342"><span class="linenos">3342</span></a>    <span class="c1"># Help options</span>
</span><span id="help_generation-3343"><a href="#help_generation-3343"><span class="linenos">3343</span></a>    <span class="n">options_md</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation-3344"><a href="#help_generation-3344"><span class="linenos">3344</span></a>    <span class="n">options_html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation-3345"><a href="#help_generation-3345"><span class="linenos">3345</span></a>
</span><span id="help_generation-3346"><a href="#help_generation-3346"><span class="linenos">3346</span></a>    <span class="c1"># Options for markdown</span>
</span><span id="help_generation-3347"><a href="#help_generation-3347"><span class="linenos">3347</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;# HOWARD Help&quot;</span>
</span><span id="help_generation-3348"><a href="#help_generation-3348"><span class="linenos">3348</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3349"><a href="#help_generation-3349"><span class="linenos">3349</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;## Introduction&quot;</span>
</span><span id="help_generation-3350"><a href="#help_generation-3350"><span class="linenos">3350</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3351"><a href="#help_generation-3351"><span class="linenos">3351</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;&lt;!--TOC--&gt;&quot;</span>
</span><span id="help_generation-3352"><a href="#help_generation-3352"><span class="linenos">3352</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3353"><a href="#help_generation-3353"><span class="linenos">3353</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="n">parser</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="help_generation-3354"><a href="#help_generation-3354"><span class="linenos">3354</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
</span><span id="help_generation-3355"><a href="#help_generation-3355"><span class="linenos">3355</span></a>        <span class="sa">r</span><span class="s2">&quot;&gt; $&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">parser</span><span class="o">.</span><span class="n">epilog</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;   &quot;</span><span class="p">,</span> <span class="s2">&quot;&gt; &quot;</span><span class="p">)</span>
</span><span id="help_generation-3356"><a href="#help_generation-3356"><span class="linenos">3356</span></a>    <span class="p">)</span>
</span><span id="help_generation-3357"><a href="#help_generation-3357"><span class="linenos">3357</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3358"><a href="#help_generation-3358"><span class="linenos">3358</span></a>
</span><span id="help_generation-3359"><a href="#help_generation-3359"><span class="linenos">3359</span></a>    <span class="c1"># Options for HTML</span>
</span><span id="help_generation-3360"><a href="#help_generation-3360"><span class="linenos">3360</span></a>    <span class="n">options_html</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&lt;H1&gt;HOWARD Help&lt;/h1&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3361"><a href="#help_generation-3361"><span class="linenos">3361</span></a>    <span class="n">options_html</span> <span class="o">+=</span> <span class="s2">&quot;&lt;p&gt;&quot;</span> <span class="o">+</span> <span class="n">parser</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/p&gt;&quot;</span>
</span><span id="help_generation-3362"><a href="#help_generation-3362"><span class="linenos">3362</span></a>    <span class="n">options_html</span> <span class="o">+=</span> <span class="n">parser</span><span class="o">.</span><span class="n">epilog</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
</span><span id="help_generation-3363"><a href="#help_generation-3363"><span class="linenos">3363</span></a>        <span class="s2">&quot;   &quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;</span>
</span><span id="help_generation-3364"><a href="#help_generation-3364"><span class="linenos">3364</span></a>    <span class="p">)</span>
</span><span id="help_generation-3365"><a href="#help_generation-3365"><span class="linenos">3365</span></a>
</span><span id="help_generation-3366"><a href="#help_generation-3366"><span class="linenos">3366</span></a>    <span class="c1"># Create commands arguments</span>
</span><span id="help_generation-3367"><a href="#help_generation-3367"><span class="linenos">3367</span></a>    <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">commands_arguments</span><span class="p">:</span>
</span><span id="help_generation-3368"><a href="#help_generation-3368"><span class="linenos">3368</span></a>
</span><span id="help_generation-3369"><a href="#help_generation-3369"><span class="linenos">3369</span></a>        <span class="c1"># Command description</span>
</span><span id="help_generation-3370"><a href="#help_generation-3370"><span class="linenos">3370</span></a>        <span class="n">command_description</span> <span class="o">=</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="help_generation-3371"><a href="#help_generation-3371"><span class="linenos">3371</span></a>        <span class="n">command_help</span> <span class="o">=</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="help_generation-3372"><a href="#help_generation-3372"><span class="linenos">3372</span></a>        <span class="n">command_epilog</span> <span class="o">=</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;epilog&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="help_generation-3373"><a href="#help_generation-3373"><span class="linenos">3373</span></a>
</span><span id="help_generation-3374"><a href="#help_generation-3374"><span class="linenos">3374</span></a>        <span class="c1"># Command parser</span>
</span><span id="help_generation-3375"><a href="#help_generation-3375"><span class="linenos">3375</span></a>        <span class="n">command_parser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span>
</span><span id="help_generation-3376"><a href="#help_generation-3376"><span class="linenos">3376</span></a>            <span class="n">command</span><span class="p">,</span>
</span><span id="help_generation-3377"><a href="#help_generation-3377"><span class="linenos">3377</span></a>            <span class="n">description</span><span class="o">=</span><span class="n">command_description</span><span class="p">,</span>
</span><span id="help_generation-3378"><a href="#help_generation-3378"><span class="linenos">3378</span></a>            <span class="n">help</span><span class="o">=</span><span class="n">command_help</span><span class="p">,</span>
</span><span id="help_generation-3379"><a href="#help_generation-3379"><span class="linenos">3379</span></a>            <span class="n">epilog</span><span class="o">=</span><span class="n">command_epilog</span><span class="p">,</span>
</span><span id="help_generation-3380"><a href="#help_generation-3380"><span class="linenos">3380</span></a>            <span class="c1"># formatter_class=argparse.RawTextHelpFormatter</span>
</span><span id="help_generation-3381"><a href="#help_generation-3381"><span class="linenos">3381</span></a>            <span class="c1"># formatter_class=argparse.ArgumentDefaultsHelpFormatter</span>
</span><span id="help_generation-3382"><a href="#help_generation-3382"><span class="linenos">3382</span></a>            <span class="n">formatter_class</span><span class="o">=</span><span class="n">RawTextArgumentDefaultsHelpFormatter</span><span class="p">,</span>
</span><span id="help_generation-3383"><a href="#help_generation-3383"><span class="linenos">3383</span></a>        <span class="p">)</span>
</span><span id="help_generation-3384"><a href="#help_generation-3384"><span class="linenos">3384</span></a>
</span><span id="help_generation-3385"><a href="#help_generation-3385"><span class="linenos">3385</span></a>        <span class="c1"># Markdown</span>
</span><span id="help_generation-3386"><a href="#help_generation-3386"><span class="linenos">3386</span></a>        <span class="n">options_md</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="n">command</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2"> tool</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3387"><a href="#help_generation-3387"><span class="linenos">3387</span></a>        <span class="n">options_md</span> <span class="o">+=</span> <span class="n">command_description</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="help_generation-3388"><a href="#help_generation-3388"><span class="linenos">3388</span></a>        <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3389"><a href="#help_generation-3389"><span class="linenos">3389</span></a>        <span class="n">options_md</span> <span class="o">+=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
</span><span id="help_generation-3390"><a href="#help_generation-3390"><span class="linenos">3390</span></a>            <span class="sa">r</span><span class="s2">&quot;&gt; $&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">command_epilog</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;   &quot;</span><span class="p">,</span> <span class="s2">&quot;&gt; &quot;</span><span class="p">)</span>
</span><span id="help_generation-3391"><a href="#help_generation-3391"><span class="linenos">3391</span></a>        <span class="p">)</span>
</span><span id="help_generation-3392"><a href="#help_generation-3392"><span class="linenos">3392</span></a>        <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3393"><a href="#help_generation-3393"><span class="linenos">3393</span></a>
</span><span id="help_generation-3394"><a href="#help_generation-3394"><span class="linenos">3394</span></a>        <span class="c1"># HTML</span>
</span><span id="help_generation-3395"><a href="#help_generation-3395"><span class="linenos">3395</span></a>        <span class="n">options_html</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&lt;H2&gt;</span><span class="si">{</span><span class="n">command</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">&lt;/H2&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3396"><a href="#help_generation-3396"><span class="linenos">3396</span></a>        <span class="n">options_html</span> <span class="o">+=</span> <span class="s2">&quot;&lt;p&gt;&quot;</span> <span class="o">+</span> <span class="n">command_description</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/p&gt;&quot;</span>
</span><span id="help_generation-3397"><a href="#help_generation-3397"><span class="linenos">3397</span></a>        <span class="n">options_html</span> <span class="o">+=</span> <span class="n">command_epilog</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;br&gt;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
</span><span id="help_generation-3398"><a href="#help_generation-3398"><span class="linenos">3398</span></a>            <span class="s2">&quot;   &quot;</span><span class="p">,</span> <span class="s2">&quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;</span>
</span><span id="help_generation-3399"><a href="#help_generation-3399"><span class="linenos">3399</span></a>        <span class="p">)</span>
</span><span id="help_generation-3400"><a href="#help_generation-3400"><span class="linenos">3400</span></a>
</span><span id="help_generation-3401"><a href="#help_generation-3401"><span class="linenos">3401</span></a>        <span class="c1"># Gooey - add metavar</span>
</span><span id="help_generation-3402"><a href="#help_generation-3402"><span class="linenos">3402</span></a>        <span class="k">if</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;gooey&quot;</span><span class="p">:</span>
</span><span id="help_generation-3403"><a href="#help_generation-3403"><span class="linenos">3403</span></a>            <span class="n">add_metavar</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="help_generation-3404"><a href="#help_generation-3404"><span class="linenos">3404</span></a>            <span class="n">command_group_suffix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="help_generation-3405"><a href="#help_generation-3405"><span class="linenos">3405</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="help_generation-3406"><a href="#help_generation-3406"><span class="linenos">3406</span></a>            <span class="n">add_metavar</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="help_generation-3407"><a href="#help_generation-3407"><span class="linenos">3407</span></a>            <span class="n">command_group_suffix</span> <span class="o">=</span> <span class="s2">&quot; options&quot;</span>
</span><span id="help_generation-3408"><a href="#help_generation-3408"><span class="linenos">3408</span></a>
</span><span id="help_generation-3409"><a href="#help_generation-3409"><span class="linenos">3409</span></a>        <span class="c1"># Main args</span>
</span><span id="help_generation-3410"><a href="#help_generation-3410"><span class="linenos">3410</span></a>        <span class="n">command_parser</span><span class="o">.</span><span class="n">_optionals</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Options&quot;</span>
</span><span id="help_generation-3411"><a href="#help_generation-3411"><span class="linenos">3411</span></a>        <span class="k">if</span> <span class="s2">&quot;main&quot;</span> <span class="ow">in</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">][</span><span class="s2">&quot;groups&quot;</span><span class="p">]:</span>
</span><span id="help_generation-3412"><a href="#help_generation-3412"><span class="linenos">3412</span></a>            <span class="n">group</span> <span class="o">=</span> <span class="s2">&quot;main&quot;</span>
</span><span id="help_generation-3413"><a href="#help_generation-3413"><span class="linenos">3413</span></a>            <span class="n">options_md</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;### Main options</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3414"><a href="#help_generation-3414"><span class="linenos">3414</span></a>            <span class="n">options_html</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&lt;H3&gt;Main options&lt;/H3&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3415"><a href="#help_generation-3415"><span class="linenos">3415</span></a>            <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">][</span><span class="s2">&quot;groups&quot;</span><span class="p">][</span><span class="n">group</span><span class="p">]:</span>
</span><span id="help_generation-3416"><a href="#help_generation-3416"><span class="linenos">3416</span></a>                <span class="n">required</span> <span class="o">=</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">][</span><span class="s2">&quot;groups&quot;</span><span class="p">][</span><span class="n">group</span><span class="p">][</span><span class="n">arg</span><span class="p">]</span>
</span><span id="help_generation-3417"><a href="#help_generation-3417"><span class="linenos">3417</span></a>                <span class="n">argument</span> <span class="o">=</span> <span class="n">get_argument</span><span class="p">(</span>
</span><span id="help_generation-3418"><a href="#help_generation-3418"><span class="linenos">3418</span></a>                    <span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="help_generation-3419"><a href="#help_generation-3419"><span class="linenos">3419</span></a>                    <span class="n">arg</span><span class="o">=</span><span class="n">arg</span><span class="p">,</span>
</span><span id="help_generation-3420"><a href="#help_generation-3420"><span class="linenos">3420</span></a>                    <span class="n">required</span><span class="o">=</span><span class="n">required</span><span class="p">,</span>
</span><span id="help_generation-3421"><a href="#help_generation-3421"><span class="linenos">3421</span></a>                    <span class="n">add_metavar</span><span class="o">=</span><span class="n">add_metavar</span><span class="p">,</span>
</span><span id="help_generation-3422"><a href="#help_generation-3422"><span class="linenos">3422</span></a>                <span class="p">)</span>
</span><span id="help_generation-3423"><a href="#help_generation-3423"><span class="linenos">3423</span></a>                <span class="k">if</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;gooey&quot;</span><span class="p">:</span>
</span><span id="help_generation-3424"><a href="#help_generation-3424"><span class="linenos">3424</span></a>                    <span class="n">widget</span><span class="p">,</span> <span class="n">options</span> <span class="o">=</span> <span class="n">get_argument_gooey</span><span class="p">(</span><span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="n">arg</span><span class="p">)</span>
</span><span id="help_generation-3425"><a href="#help_generation-3425"><span class="linenos">3425</span></a>                    <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">widget</span>
</span><span id="help_generation-3426"><a href="#help_generation-3426"><span class="linenos">3426</span></a>                    <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;gooey_options&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="help_generation-3427"><a href="#help_generation-3427"><span class="linenos">3427</span></a>                    <span class="k">if</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;==SUPPRESS==&quot;</span><span class="p">]:</span>
</span><span id="help_generation-3428"><a href="#help_generation-3428"><span class="linenos">3428</span></a>                        <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span>
</span><span id="help_generation-3429"><a href="#help_generation-3429"><span class="linenos">3429</span></a>                    <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_arg_help</span><span class="p">(</span>
</span><span id="help_generation-3430"><a href="#help_generation-3430"><span class="linenos">3430</span></a>                        <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span><span id="help_generation-3431"><a href="#help_generation-3431"><span class="linenos">3431</span></a>                    <span class="p">)</span>
</span><span id="help_generation-3432"><a href="#help_generation-3432"><span class="linenos">3432</span></a>                <span class="n">command_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">argument</span><span class="p">)</span>
</span><span id="help_generation-3433"><a href="#help_generation-3433"><span class="linenos">3433</span></a>                <span class="n">options_md</span> <span class="o">+=</span> <span class="n">get_argument_to_mk</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span>
</span><span id="help_generation-3434"><a href="#help_generation-3434"><span class="linenos">3434</span></a>                <span class="n">options_html</span> <span class="o">+=</span> <span class="n">get_argument_to_mk</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">argument</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="p">)</span>
</span><span id="help_generation-3435"><a href="#help_generation-3435"><span class="linenos">3435</span></a>
</span><span id="help_generation-3436"><a href="#help_generation-3436"><span class="linenos">3436</span></a>        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">][</span><span class="s2">&quot;groups&quot;</span><span class="p">]:</span>
</span><span id="help_generation-3437"><a href="#help_generation-3437"><span class="linenos">3437</span></a>            <span class="k">if</span> <span class="n">group</span> <span class="o">!=</span> <span class="s2">&quot;main&quot;</span><span class="p">:</span>
</span><span id="help_generation-3438"><a href="#help_generation-3438"><span class="linenos">3438</span></a>                <span class="n">options_md</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;### </span><span class="si">{</span><span class="n">group</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3439"><a href="#help_generation-3439"><span class="linenos">3439</span></a>                <span class="n">options_html</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&lt;H3&gt;</span><span class="si">{</span><span class="n">group</span><span class="si">}</span><span class="s2">&lt;/H3&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3440"><a href="#help_generation-3440"><span class="linenos">3440</span></a>                <span class="n">command_group</span> <span class="o">=</span> <span class="n">command_parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span>
</span><span id="help_generation-3441"><a href="#help_generation-3441"><span class="linenos">3441</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">group</span><span class="si">}{</span><span class="n">command_group_suffix</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="help_generation-3442"><a href="#help_generation-3442"><span class="linenos">3442</span></a>                <span class="p">)</span>
</span><span id="help_generation-3443"><a href="#help_generation-3443"><span class="linenos">3443</span></a>                <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">][</span><span class="s2">&quot;groups&quot;</span><span class="p">][</span><span class="n">group</span><span class="p">]:</span>
</span><span id="help_generation-3444"><a href="#help_generation-3444"><span class="linenos">3444</span></a>                    <span class="n">required</span> <span class="o">=</span> <span class="n">commands_arguments</span><span class="p">[</span><span class="n">command</span><span class="p">][</span><span class="s2">&quot;groups&quot;</span><span class="p">][</span><span class="n">group</span><span class="p">][</span><span class="n">arg</span><span class="p">]</span>
</span><span id="help_generation-3445"><a href="#help_generation-3445"><span class="linenos">3445</span></a>                    <span class="n">argument</span> <span class="o">=</span> <span class="n">get_argument</span><span class="p">(</span>
</span><span id="help_generation-3446"><a href="#help_generation-3446"><span class="linenos">3446</span></a>                        <span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span>
</span><span id="help_generation-3447"><a href="#help_generation-3447"><span class="linenos">3447</span></a>                        <span class="n">arg</span><span class="o">=</span><span class="n">arg</span><span class="p">,</span>
</span><span id="help_generation-3448"><a href="#help_generation-3448"><span class="linenos">3448</span></a>                        <span class="n">required</span><span class="o">=</span><span class="n">required</span><span class="p">,</span>
</span><span id="help_generation-3449"><a href="#help_generation-3449"><span class="linenos">3449</span></a>                        <span class="n">add_metavar</span><span class="o">=</span><span class="n">add_metavar</span><span class="p">,</span>
</span><span id="help_generation-3450"><a href="#help_generation-3450"><span class="linenos">3450</span></a>                    <span class="p">)</span>
</span><span id="help_generation-3451"><a href="#help_generation-3451"><span class="linenos">3451</span></a>                    <span class="k">if</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;gooey&quot;</span><span class="p">:</span>
</span><span id="help_generation-3452"><a href="#help_generation-3452"><span class="linenos">3452</span></a>                        <span class="n">widget</span><span class="p">,</span> <span class="n">options</span> <span class="o">=</span> <span class="n">get_argument_gooey</span><span class="p">(</span>
</span><span id="help_generation-3453"><a href="#help_generation-3453"><span class="linenos">3453</span></a>                            <span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="n">arg</span>
</span><span id="help_generation-3454"><a href="#help_generation-3454"><span class="linenos">3454</span></a>                        <span class="p">)</span>
</span><span id="help_generation-3455"><a href="#help_generation-3455"><span class="linenos">3455</span></a>                        <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">widget</span>
</span><span id="help_generation-3456"><a href="#help_generation-3456"><span class="linenos">3456</span></a>                        <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;gooey_options&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="help_generation-3457"><a href="#help_generation-3457"><span class="linenos">3457</span></a>                        <span class="k">if</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;==SUPPRESS==&quot;</span><span class="p">]:</span>
</span><span id="help_generation-3458"><a href="#help_generation-3458"><span class="linenos">3458</span></a>                            <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span>
</span><span id="help_generation-3459"><a href="#help_generation-3459"><span class="linenos">3459</span></a>                        <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_arg_help</span><span class="p">(</span>
</span><span id="help_generation-3460"><a href="#help_generation-3460"><span class="linenos">3460</span></a>                            <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span><span id="help_generation-3461"><a href="#help_generation-3461"><span class="linenos">3461</span></a>                        <span class="p">)</span>
</span><span id="help_generation-3462"><a href="#help_generation-3462"><span class="linenos">3462</span></a>                    <span class="n">command_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">argument</span><span class="p">)</span>
</span><span id="help_generation-3463"><a href="#help_generation-3463"><span class="linenos">3463</span></a>                    <span class="n">options_md</span> <span class="o">+=</span> <span class="n">get_argument_to_mk</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span>
</span><span id="help_generation-3464"><a href="#help_generation-3464"><span class="linenos">3464</span></a>                    <span class="n">options_html</span> <span class="o">+=</span> <span class="n">get_argument_to_mk</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">argument</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="p">)</span>
</span><span id="help_generation-3465"><a href="#help_generation-3465"><span class="linenos">3465</span></a>
</span><span id="help_generation-3466"><a href="#help_generation-3466"><span class="linenos">3466</span></a>        <span class="c1"># Shared arguments</span>
</span><span id="help_generation-3467"><a href="#help_generation-3467"><span class="linenos">3467</span></a>        <span class="n">shared_group</span> <span class="o">=</span> <span class="n">command_parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s2">&quot;Shared options&quot;</span><span class="p">)</span>
</span><span id="help_generation-3468"><a href="#help_generation-3468"><span class="linenos">3468</span></a>        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">shared_arguments</span><span class="p">:</span>
</span><span id="help_generation-3469"><a href="#help_generation-3469"><span class="linenos">3469</span></a>            <span class="n">argument</span> <span class="o">=</span> <span class="n">get_argument</span><span class="p">(</span>
</span><span id="help_generation-3470"><a href="#help_generation-3470"><span class="linenos">3470</span></a>                <span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="n">arg</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_metavar</span><span class="o">=</span><span class="n">add_metavar</span>
</span><span id="help_generation-3471"><a href="#help_generation-3471"><span class="linenos">3471</span></a>            <span class="p">)</span>
</span><span id="help_generation-3472"><a href="#help_generation-3472"><span class="linenos">3472</span></a>            <span class="k">if</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;gooey&quot;</span><span class="p">:</span>
</span><span id="help_generation-3473"><a href="#help_generation-3473"><span class="linenos">3473</span></a>                <span class="n">widget</span><span class="p">,</span> <span class="n">options</span> <span class="o">=</span> <span class="n">get_argument_gooey</span><span class="p">(</span><span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="p">,</span> <span class="n">arg</span><span class="o">=</span><span class="n">arg</span><span class="p">)</span>
</span><span id="help_generation-3474"><a href="#help_generation-3474"><span class="linenos">3474</span></a>                <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">widget</span>
</span><span id="help_generation-3475"><a href="#help_generation-3475"><span class="linenos">3475</span></a>                <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;gooey_options&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">options</span>
</span><span id="help_generation-3476"><a href="#help_generation-3476"><span class="linenos">3476</span></a>                <span class="k">if</span> <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;==SUPPRESS==&quot;</span><span class="p">]:</span>
</span><span id="help_generation-3477"><a href="#help_generation-3477"><span class="linenos">3477</span></a>                    <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span>
</span><span id="help_generation-3478"><a href="#help_generation-3478"><span class="linenos">3478</span></a>                <span class="n">argument</span><span class="p">[</span><span class="s2">&quot;help&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_arg_help</span><span class="p">(</span>
</span><span id="help_generation-3479"><a href="#help_generation-3479"><span class="linenos">3479</span></a>                    <span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">argument</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span><span id="help_generation-3480"><a href="#help_generation-3480"><span class="linenos">3480</span></a>                <span class="p">)</span>
</span><span id="help_generation-3481"><a href="#help_generation-3481"><span class="linenos">3481</span></a>            <span class="n">shared_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">argument</span><span class="p">)</span>
</span><span id="help_generation-3482"><a href="#help_generation-3482"><span class="linenos">3482</span></a>
</span><span id="help_generation-3483"><a href="#help_generation-3483"><span class="linenos">3483</span></a>        <span class="n">options_md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3484"><a href="#help_generation-3484"><span class="linenos">3484</span></a>
</span><span id="help_generation-3485"><a href="#help_generation-3485"><span class="linenos">3485</span></a>    <span class="c1"># Shared arguments for help files</span>
</span><span id="help_generation-3486"><a href="#help_generation-3486"><span class="linenos">3486</span></a>    <span class="n">options_md</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;## Shared arguments</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="help_generation-3487"><a href="#help_generation-3487"><span class="linenos">3487</span></a>    <span class="n">options_html</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;&lt;H2&gt;Shared arguments&lt;/H2&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span><span id="help_generation-3488"><a href="#help_generation-3488"><span class="linenos">3488</span></a>    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">shared_arguments</span><span class="p">:</span>
</span><span id="help_generation-3489"><a href="#help_generation-3489"><span class="linenos">3489</span></a>        <span class="n">required</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="help_generation-3490"><a href="#help_generation-3490"><span class="linenos">3490</span></a>        <span class="n">argument</span> <span class="o">=</span> <span class="n">get_argument</span><span class="p">(</span><span class="n">arguments</span><span class="o">=</span><span class="n">arguments</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">arg</span><span class="o">=</span><span class="n">arg</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="n">required</span><span class="p">)</span>
</span><span id="help_generation-3491"><a href="#help_generation-3491"><span class="linenos">3491</span></a>        <span class="n">options_md</span> <span class="o">+=</span> <span class="n">get_argument_to_mk</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span>
</span><span id="help_generation-3492"><a href="#help_generation-3492"><span class="linenos">3492</span></a>        <span class="n">options_html</span> <span class="o">+=</span> <span class="n">get_argument_to_mk</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">argument</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;html&quot;</span><span class="p">)</span>
</span><span id="help_generation-3493"><a href="#help_generation-3493"><span class="linenos">3493</span></a>
</span><span id="help_generation-3494"><a href="#help_generation-3494"><span class="linenos">3494</span></a>    <span class="c1"># Output</span>
</span><span id="help_generation-3495"><a href="#help_generation-3495"><span class="linenos">3495</span></a>    <span class="k">if</span> <span class="n">output_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;parser&quot;</span><span class="p">,</span> <span class="s2">&quot;gooey&quot;</span><span class="p">]:</span>
</span><span id="help_generation-3496"><a href="#help_generation-3496"><span class="linenos">3496</span></a>        <span class="k">return</span> <span class="n">parser</span>
</span><span id="help_generation-3497"><a href="#help_generation-3497"><span class="linenos">3497</span></a>    <span class="k">elif</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;markdown&quot;</span><span class="p">:</span>
</span><span id="help_generation-3498"><a href="#help_generation-3498"><span class="linenos">3498</span></a>        <span class="k">return</span> <span class="n">options_md</span>
</span><span id="help_generation-3499"><a href="#help_generation-3499"><span class="linenos">3499</span></a>    <span class="k">elif</span> <span class="n">output_type</span> <span class="o">==</span> <span class="s2">&quot;html&quot;</span><span class="p">:</span>
</span><span id="help_generation-3500"><a href="#help_generation-3500"><span class="linenos">3500</span></a>        <span class="k">return</span> <span class="n">options_html</span>
</span><span id="help_generation-3501"><a href="#help_generation-3501"><span class="linenos">3501</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="help_generation-3502"><a href="#help_generation-3502"><span class="linenos">3502</span></a>        <span class="k">return</span> <span class="n">parser</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#help_generation">help_generation</a></code> function generates a parser object for command-line arguments, as well as
markdown or HTML help documentation for those arguments.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>arguments_dict: A dictionary containing the arguments for the function. It has three keys</strong>: </li>
<li><strong>parser</strong>:  The <code>parser</code> parameter is an instance of the <code>argparse.ArgumentParser</code> class. It is
used to define the command-line interface and parse the command-line arguments. If no <code>parser</code> is
provided, a new instance of <code>argparse.ArgumentParser</code> will be created</li>
<li><strong>setup</strong>:  The <code>setup</code> parameter is a string that represents the path to a configuration file.
This file contains metadata about the program, such as its name, version, description, and long
description content type</li>
<li><strong>output_type</strong>:  The <code>output_type</code> parameter determines the format of the output. It can be one
of the following values:, defaults to parser</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#help_generation">help_generation</a></code> returns different outputs based on the value of the
  <code>output_type</code> parameter.</p>
</blockquote>
</div>


                </section>
                <section id="format_arg_help">
                            <input id="format_arg_help-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">format_arg_help</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">help_message</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">default_value</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="format_arg_help-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#format_arg_help"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="format_arg_help-3505"><a href="#format_arg_help-3505"><span class="linenos">3505</span></a><span class="k">def</span> <span class="nf">format_arg_help</span><span class="p">(</span><span class="n">help_message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default_value</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="format_arg_help-3506"><a href="#format_arg_help-3506"><span class="linenos">3506</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="format_arg_help-3507"><a href="#format_arg_help-3507"><span class="linenos">3507</span></a><span class="sd">    The function `format_arg_help` formats a help message for a function argument, including a default</span>
</span><span id="format_arg_help-3508"><a href="#format_arg_help-3508"><span class="linenos">3508</span></a><span class="sd">    value if provided.</span>
</span><span id="format_arg_help-3509"><a href="#format_arg_help-3509"><span class="linenos">3509</span></a>
</span><span id="format_arg_help-3510"><a href="#format_arg_help-3510"><span class="linenos">3510</span></a><span class="sd">    :param help_message: The `help_message` parameter is a string that contains the description or help</span>
</span><span id="format_arg_help-3511"><a href="#format_arg_help-3511"><span class="linenos">3511</span></a><span class="sd">    message for a function or method argument. It provides information about the purpose or usage of the</span>
</span><span id="format_arg_help-3512"><a href="#format_arg_help-3512"><span class="linenos">3512</span></a><span class="sd">    argument</span>
</span><span id="format_arg_help-3513"><a href="#format_arg_help-3513"><span class="linenos">3513</span></a><span class="sd">    :type help_message: str</span>
</span><span id="format_arg_help-3514"><a href="#format_arg_help-3514"><span class="linenos">3514</span></a><span class="sd">    :param default_value: The `default_value` parameter in the `format_arg_help` function is an optional</span>
</span><span id="format_arg_help-3515"><a href="#format_arg_help-3515"><span class="linenos">3515</span></a><span class="sd">    parameter that specifies a default value for the argument being described in the help message. If a</span>
</span><span id="format_arg_help-3516"><a href="#format_arg_help-3516"><span class="linenos">3516</span></a><span class="sd">    default value is provided, it will be included in the formatted help message to indicate the default</span>
</span><span id="format_arg_help-3517"><a href="#format_arg_help-3517"><span class="linenos">3517</span></a><span class="sd">    value for that argument</span>
</span><span id="format_arg_help-3518"><a href="#format_arg_help-3518"><span class="linenos">3518</span></a><span class="sd">    :type default_value: object</span>
</span><span id="format_arg_help-3519"><a href="#format_arg_help-3519"><span class="linenos">3519</span></a><span class="sd">    :return: The function `format_arg_help` returns a formatted help message with a default value</span>
</span><span id="format_arg_help-3520"><a href="#format_arg_help-3520"><span class="linenos">3520</span></a><span class="sd">    appended at the end if provided.</span>
</span><span id="format_arg_help-3521"><a href="#format_arg_help-3521"><span class="linenos">3521</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="format_arg_help-3522"><a href="#format_arg_help-3522"><span class="linenos">3522</span></a>
</span><span id="format_arg_help-3523"><a href="#format_arg_help-3523"><span class="linenos">3523</span></a>    <span class="n">help_return</span> <span class="o">=</span> <span class="n">help_message</span>
</span><span id="format_arg_help-3524"><a href="#format_arg_help-3524"><span class="linenos">3524</span></a>
</span><span id="format_arg_help-3525"><a href="#format_arg_help-3525"><span class="linenos">3525</span></a>    <span class="n">random_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="format_arg_help-3526"><a href="#format_arg_help-3526"><span class="linenos">3526</span></a>        <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">ascii_uppercase</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">digits</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="format_arg_help-3527"><a href="#format_arg_help-3527"><span class="linenos">3527</span></a>    <span class="p">)</span>
</span><span id="format_arg_help-3528"><a href="#format_arg_help-3528"><span class="linenos">3528</span></a>    <span class="n">help_return</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="format_arg_help-3529"><a href="#format_arg_help-3529"><span class="linenos">3529</span></a>        <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\n\s*-&quot;</span><span class="p">,</span> <span class="n">random_string</span><span class="p">,</span> <span class="n">help_return</span><span class="p">)</span>
</span><span id="format_arg_help-3530"><a href="#format_arg_help-3530"><span class="linenos">3530</span></a>        <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span id="format_arg_help-3531"><a href="#format_arg_help-3531"><span class="linenos">3531</span></a>        <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">random_string</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">-&quot;</span><span class="p">)</span>
</span><span id="format_arg_help-3532"><a href="#format_arg_help-3532"><span class="linenos">3532</span></a>    <span class="p">)</span>
</span><span id="format_arg_help-3533"><a href="#format_arg_help-3533"><span class="linenos">3533</span></a>    <span class="k">if</span> <span class="n">default_value</span><span class="p">:</span>
</span><span id="format_arg_help-3534"><a href="#format_arg_help-3534"><span class="linenos">3534</span></a>        <span class="n">help_return</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">(default: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">default_value</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
</span><span id="format_arg_help-3535"><a href="#format_arg_help-3535"><span class="linenos">3535</span></a>
</span><span id="format_arg_help-3536"><a href="#format_arg_help-3536"><span class="linenos">3536</span></a>    <span class="k">return</span> <span class="n">help_return</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#format_arg_help">format_arg_help</a></code> formats a help message for a function argument, including a default
value if provided.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>help_message</strong>:  The <code>help_message</code> parameter is a string that contains the description or help
message for a function or method argument. It provides information about the purpose or usage of the
argument</li>
<li><strong>default_value</strong>:  The <code>default_value</code> parameter in the <code><a href="#format_arg_help">format_arg_help</a></code> function is an optional
parameter that specifies a default value for the argument being described in the help message. If a
default value is provided, it will be included in the formatted help message to indicate the default
value for that argument</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#format_arg_help">format_arg_help</a></code> returns a formatted help message with a default value
  appended at the end if provided.</p>
</blockquote>
</div>


                </section>
                <section id="bed_sort">
                            <input id="bed_sort-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">bed_sort</span><span class="signature pdoc-code condensed">(<span class="param"><span class="nb">input</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">output</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="bed_sort-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#bed_sort"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="bed_sort-3539"><a href="#bed_sort-3539"><span class="linenos">3539</span></a><span class="k">def</span> <span class="nf">bed_sort</span><span class="p">(</span><span class="nb">input</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">output</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="bed_sort-3540"><a href="#bed_sort-3540"><span class="linenos">3540</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="bed_sort-3541"><a href="#bed_sort-3541"><span class="linenos">3541</span></a><span class="sd">    The `bed_sort` function reads a tab-separated input file, sorts the data based on columns 0, 1, and</span>
</span><span id="bed_sort-3542"><a href="#bed_sort-3542"><span class="linenos">3542</span></a><span class="sd">    2 in ascending order, and writes the sorted data to a tab-separated output file.</span>
</span><span id="bed_sort-3543"><a href="#bed_sort-3543"><span class="linenos">3543</span></a>
</span><span id="bed_sort-3544"><a href="#bed_sort-3544"><span class="linenos">3544</span></a><span class="sd">    :param input: The `input` parameter is the path to the input file that contains the data to be</span>
</span><span id="bed_sort-3545"><a href="#bed_sort-3545"><span class="linenos">3545</span></a><span class="sd">    sorted. This file should be in a tab-separated format</span>
</span><span id="bed_sort-3546"><a href="#bed_sort-3546"><span class="linenos">3546</span></a><span class="sd">    :type input: str</span>
</span><span id="bed_sort-3547"><a href="#bed_sort-3547"><span class="linenos">3547</span></a><span class="sd">    :param output: The `output` parameter is a string that specifies the path and filename of the output</span>
</span><span id="bed_sort-3548"><a href="#bed_sort-3548"><span class="linenos">3548</span></a><span class="sd">    file where the sorted data will be saved</span>
</span><span id="bed_sort-3549"><a href="#bed_sort-3549"><span class="linenos">3549</span></a><span class="sd">    :type output: str</span>
</span><span id="bed_sort-3550"><a href="#bed_sort-3550"><span class="linenos">3550</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="bed_sort-3551"><a href="#bed_sort-3551"><span class="linenos">3551</span></a>
</span><span id="bed_sort-3552"><a href="#bed_sort-3552"><span class="linenos">3552</span></a>    <span class="c1"># Read input BED (uncompressed)</span>
</span><span id="bed_sort-3553"><a href="#bed_sort-3553"><span class="linenos">3553</span></a>    <span class="c1"># data = pd.read_csv(input, sep=&quot;\t&quot;, dtype={&quot;chr&quot;: &quot;string&quot;, &quot;start&quot;: &quot;int&quot;, &quot;end&quot;: &quot;int&quot;}, header=None)</span>
</span><span id="bed_sort-3554"><a href="#bed_sort-3554"><span class="linenos">3554</span></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="bed_sort-3555"><a href="#bed_sort-3555"><span class="linenos">3555</span></a>
</span><span id="bed_sort-3556"><a href="#bed_sort-3556"><span class="linenos">3556</span></a>    <span class="c1"># Sort BED regions</span>
</span><span id="bed_sort-3557"><a href="#bed_sort-3557"><span class="linenos">3557</span></a>    <span class="n">data_sorted</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span>
</span><span id="bed_sort-3558"><a href="#bed_sort-3558"><span class="linenos">3558</span></a>        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">na_position</span><span class="o">=</span><span class="s2">&quot;first&quot;</span>
</span><span id="bed_sort-3559"><a href="#bed_sort-3559"><span class="linenos">3559</span></a>    <span class="p">)</span>
</span><span id="bed_sort-3560"><a href="#bed_sort-3560"><span class="linenos">3560</span></a>
</span><span id="bed_sort-3561"><a href="#bed_sort-3561"><span class="linenos">3561</span></a>    <span class="c1"># Write output BED (uncompressed)</span>
</span><span id="bed_sort-3562"><a href="#bed_sort-3562"><span class="linenos">3562</span></a>    <span class="n">data_sorted</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#bed_sort">bed_sort</a></code> function reads a tab-separated input file, sorts the data based on columns 0, 1, and
2 in ascending order, and writes the sorted data to a tab-separated output file.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>input</strong>:  The <code>input</code> parameter is the path to the input file that contains the data to be
sorted. This file should be in a tab-separated format</li>
<li><strong>output</strong>:  The <code>output</code> parameter is a string that specifies the path and filename of the output
file where the sorted data will be saved</li>
</ul>
</div>


                </section>
                <section id="full_path">
                            <input id="full_path-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">full_path</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">path</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="full_path-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#full_path"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="full_path-3565"><a href="#full_path-3565"><span class="linenos">3565</span></a><span class="k">def</span> <span class="nf">full_path</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="full_path-3566"><a href="#full_path-3566"><span class="linenos">3566</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="full_path-3567"><a href="#full_path-3567"><span class="linenos">3567</span></a><span class="sd">    The function `full_path` takes a path string as input and returns the full expanded path.</span>
</span><span id="full_path-3568"><a href="#full_path-3568"><span class="linenos">3568</span></a>
</span><span id="full_path-3569"><a href="#full_path-3569"><span class="linenos">3569</span></a><span class="sd">    :param path: The `full_path` function takes a string `path` as input and returns the full path by</span>
</span><span id="full_path-3570"><a href="#full_path-3570"><span class="linenos">3570</span></a><span class="sd">    expanding the user&#39;s home directory in the path if it is not None</span>
</span><span id="full_path-3571"><a href="#full_path-3571"><span class="linenos">3571</span></a><span class="sd">    :type path: str</span>
</span><span id="full_path-3572"><a href="#full_path-3572"><span class="linenos">3572</span></a><span class="sd">    :return: The function `full_path` is returning the expanded version of the input `path` using</span>
</span><span id="full_path-3573"><a href="#full_path-3573"><span class="linenos">3573</span></a><span class="sd">    `os.path.expanduser(path)`. This function expands the `~` character in the path to the user&#39;s home</span>
</span><span id="full_path-3574"><a href="#full_path-3574"><span class="linenos">3574</span></a><span class="sd">    directory.</span>
</span><span id="full_path-3575"><a href="#full_path-3575"><span class="linenos">3575</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="full_path-3576"><a href="#full_path-3576"><span class="linenos">3576</span></a>
</span><span id="full_path-3577"><a href="#full_path-3577"><span class="linenos">3577</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="full_path-3578"><a href="#full_path-3578"><span class="linenos">3578</span></a>        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expandvars</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">path</span><span class="p">)))</span>
</span><span id="full_path-3579"><a href="#full_path-3579"><span class="linenos">3579</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="full_path-3580"><a href="#full_path-3580"><span class="linenos">3580</span></a>        <span class="k">return</span> <span class="n">path</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#full_path">full_path</a></code> takes a path string as input and returns the full expanded path.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>path</strong>:  The <code><a href="#full_path">full_path</a></code> function takes a string <code>path</code> as input and returns the full path by
expanding the user's home directory in the path if it is not None</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#full_path">full_path</a></code> is returning the expanded version of the input <code>path</code> using
  <code>os.path.expanduser(path)</code>. This function expands the <code>~</code> character in the path to the user's home
  directory.</p>
</blockquote>
</div>


                </section>
                <section id="get_default_argument">
                            <input id="get_default_argument-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_default_argument</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">arguments_dict</span><span class="p">:</span> <span class="nb">dict</span>, </span><span class="param"><span class="n">argument</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="get_default_argument-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_default_argument"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_default_argument-3583"><a href="#get_default_argument-3583"><span class="linenos">3583</span></a><span class="k">def</span> <span class="nf">get_default_argument</span><span class="p">(</span><span class="n">arguments_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">argument</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="get_default_argument-3584"><a href="#get_default_argument-3584"><span class="linenos">3584</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_default_argument-3585"><a href="#get_default_argument-3585"><span class="linenos">3585</span></a><span class="sd">    The function `get_default_argument` retrieves the default value of a specified argument from a</span>
</span><span id="get_default_argument-3586"><a href="#get_default_argument-3586"><span class="linenos">3586</span></a><span class="sd">    dictionary of arguments.</span>
</span><span id="get_default_argument-3587"><a href="#get_default_argument-3587"><span class="linenos">3587</span></a>
</span><span id="get_default_argument-3588"><a href="#get_default_argument-3588"><span class="linenos">3588</span></a><span class="sd">    :param arguments_dict: The `arguments_dict` parameter is a dictionary that contains information</span>
</span><span id="get_default_argument-3589"><a href="#get_default_argument-3589"><span class="linenos">3589</span></a><span class="sd">    about arguments</span>
</span><span id="get_default_argument-3590"><a href="#get_default_argument-3590"><span class="linenos">3590</span></a><span class="sd">    :type arguments_dict: dict</span>
</span><span id="get_default_argument-3591"><a href="#get_default_argument-3591"><span class="linenos">3591</span></a><span class="sd">    :param argument: The `get_default_argument` function takes in two parameters:</span>
</span><span id="get_default_argument-3592"><a href="#get_default_argument-3592"><span class="linenos">3592</span></a><span class="sd">    :type argument: str</span>
</span><span id="get_default_argument-3593"><a href="#get_default_argument-3593"><span class="linenos">3593</span></a><span class="sd">    :return: The function is attempting to return the default value of a specific argument from a</span>
</span><span id="get_default_argument-3594"><a href="#get_default_argument-3594"><span class="linenos">3594</span></a><span class="sd">    dictionary of arguments. However, there is a mistake in the code. The correct key to access the</span>
</span><span id="get_default_argument-3595"><a href="#get_default_argument-3595"><span class="linenos">3595</span></a><span class="sd">    argument&#39;s default value should be &quot;argument&quot; instead of &quot;arguments&quot;. Therefore, the function will</span>
</span><span id="get_default_argument-3596"><a href="#get_default_argument-3596"><span class="linenos">3596</span></a><span class="sd">    return the default value of the specified argument if it exists, otherwise it will return None.</span>
</span><span id="get_default_argument-3597"><a href="#get_default_argument-3597"><span class="linenos">3597</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_default_argument-3598"><a href="#get_default_argument-3598"><span class="linenos">3598</span></a>
</span><span id="get_default_argument-3599"><a href="#get_default_argument-3599"><span class="linenos">3599</span></a>    <span class="k">return</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;arguments&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#get_default_argument">get_default_argument</a></code> retrieves the default value of a specified argument from a
dictionary of arguments.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>arguments_dict</strong>:  The <code>arguments_dict</code> parameter is a dictionary that contains information
about arguments</li>
<li><strong>argument: The <code><a href="#get_default_argument">get_default_argument</a></code> function takes in two parameters</strong>: </li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function is attempting to return the default value of a specific argument from a
  dictionary of arguments. However, there is a mistake in the code. The correct key to access the
  argument's default value should be "argument" instead of "arguments". Therefore, the function will
  return the default value of the specified argument if it exists, otherwise it will return None.</p>
</blockquote>
</div>


                </section>
                <section id="set_param">
                            <input id="set_param-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_param</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">param</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">args</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">module</span> <span class="s1">&#39;argparse&#39;</span> <span class="kn">from</span> <span class="s1">&#39;/Users/lebechea/miniconda/envs/howard_devel/lib/python3.10/argparse.py&#39;</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">arguments_dict</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">argument</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">section</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="set_param-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#set_param"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="set_param-3602"><a href="#set_param-3602"><span class="linenos">3602</span></a><span class="k">def</span> <span class="nf">set_param</span><span class="p">(</span>
</span><span id="set_param-3603"><a href="#set_param-3603"><span class="linenos">3603</span></a>    <span class="n">param</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="set_param-3604"><a href="#set_param-3604"><span class="linenos">3604</span></a>    <span class="n">args</span><span class="p">:</span> <span class="n">argparse</span><span class="p">,</span>
</span><span id="set_param-3605"><a href="#set_param-3605"><span class="linenos">3605</span></a>    <span class="n">arguments_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="set_param-3606"><a href="#set_param-3606"><span class="linenos">3606</span></a>    <span class="n">argument</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="set_param-3607"><a href="#set_param-3607"><span class="linenos">3607</span></a>    <span class="n">section</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="set_param-3608"><a href="#set_param-3608"><span class="linenos">3608</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="set_param-3609"><a href="#set_param-3609"><span class="linenos">3609</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="set_param-3610"><a href="#set_param-3610"><span class="linenos">3610</span></a><span class="sd">    The function `set_param` takes input arguments and adds them to a dictionary based on certain</span>
</span><span id="set_param-3611"><a href="#set_param-3611"><span class="linenos">3611</span></a><span class="sd">    conditions.</span>
</span><span id="set_param-3612"><a href="#set_param-3612"><span class="linenos">3612</span></a>
</span><span id="set_param-3613"><a href="#set_param-3613"><span class="linenos">3613</span></a><span class="sd">    :param param: The `param` parameter is a dictionary that stores configuration parameters or</span>
</span><span id="set_param-3614"><a href="#set_param-3614"><span class="linenos">3614</span></a><span class="sd">    settings. It is used to collect and store various arguments and their values based on the conditions</span>
</span><span id="set_param-3615"><a href="#set_param-3615"><span class="linenos">3615</span></a><span class="sd">    specified in the `set_param` function</span>
</span><span id="set_param-3616"><a href="#set_param-3616"><span class="linenos">3616</span></a><span class="sd">    :type param: dict</span>
</span><span id="set_param-3617"><a href="#set_param-3617"><span class="linenos">3617</span></a><span class="sd">    :param args: The `args` parameter in the `set_param` function is likely an instance of the</span>
</span><span id="set_param-3618"><a href="#set_param-3618"><span class="linenos">3618</span></a><span class="sd">    `argparse.Namespace` class, which is typically used to store the command-line arguments parsed by</span>
</span><span id="set_param-3619"><a href="#set_param-3619"><span class="linenos">3619</span></a><span class="sd">    the `argparse` module in Python. It contains the values of the arguments provided by the user when</span>
</span><span id="set_param-3620"><a href="#set_param-3620"><span class="linenos">3620</span></a><span class="sd">    the script</span>
</span><span id="set_param-3621"><a href="#set_param-3621"><span class="linenos">3621</span></a><span class="sd">    :type args: argparse</span>
</span><span id="set_param-3622"><a href="#set_param-3622"><span class="linenos">3622</span></a><span class="sd">    :param arguments_dict: The `arguments_dict` parameter seems to be a dictionary that likely contains</span>
</span><span id="set_param-3623"><a href="#set_param-3623"><span class="linenos">3623</span></a><span class="sd">    information about arguments and their default values. This dictionary is used in the function</span>
</span><span id="set_param-3624"><a href="#set_param-3624"><span class="linenos">3624</span></a><span class="sd">    `set_param` to determine whether a specific argument should be included in the `param` dictionary</span>
</span><span id="set_param-3625"><a href="#set_param-3625"><span class="linenos">3625</span></a><span class="sd">    based on certain conditions</span>
</span><span id="set_param-3626"><a href="#set_param-3626"><span class="linenos">3626</span></a><span class="sd">    :type arguments_dict: dict</span>
</span><span id="set_param-3627"><a href="#set_param-3627"><span class="linenos">3627</span></a><span class="sd">    :param argument: The `argument` parameter in the `set_param` function represents the specific</span>
</span><span id="set_param-3628"><a href="#set_param-3628"><span class="linenos">3628</span></a><span class="sd">    argument that you want to set in the `param` dictionary. It is the key that will be used to store</span>
</span><span id="set_param-3629"><a href="#set_param-3629"><span class="linenos">3629</span></a><span class="sd">    the value in the dictionary</span>
</span><span id="set_param-3630"><a href="#set_param-3630"><span class="linenos">3630</span></a><span class="sd">    :type argument: str</span>
</span><span id="set_param-3631"><a href="#set_param-3631"><span class="linenos">3631</span></a><span class="sd">    :param section: The `section` parameter in the `set_param` function is used to specify a section</span>
</span><span id="set_param-3632"><a href="#set_param-3632"><span class="linenos">3632</span></a><span class="sd">    within the `param` dictionary where the argument value should be stored. If a `section` is provided,</span>
</span><span id="set_param-3633"><a href="#set_param-3633"><span class="linenos">3633</span></a><span class="sd">    the argument value will be stored under that section in the `param` dictionary. If no `section</span>
</span><span id="set_param-3634"><a href="#set_param-3634"><span class="linenos">3634</span></a><span class="sd">    :type section: str</span>
</span><span id="set_param-3635"><a href="#set_param-3635"><span class="linenos">3635</span></a><span class="sd">    :return: the updated `param` dictionary after setting the specified argument value based on the</span>
</span><span id="set_param-3636"><a href="#set_param-3636"><span class="linenos">3636</span></a><span class="sd">    conditions provided in the function.</span>
</span><span id="set_param-3637"><a href="#set_param-3637"><span class="linenos">3637</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="set_param-3638"><a href="#set_param-3638"><span class="linenos">3638</span></a>
</span><span id="set_param-3639"><a href="#set_param-3639"><span class="linenos">3639</span></a>    <span class="c1"># Argument value</span>
</span><span id="set_param-3640"><a href="#set_param-3640"><span class="linenos">3640</span></a>    <span class="n">value</span> <span class="o">=</span> <span class="nb">vars</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="set_param-3641"><a href="#set_param-3641"><span class="linenos">3641</span></a>
</span><span id="set_param-3642"><a href="#set_param-3642"><span class="linenos">3642</span></a>    <span class="c1"># Sections</span>
</span><span id="set_param-3643"><a href="#set_param-3643"><span class="linenos">3643</span></a>    <span class="k">if</span> <span class="n">section</span><span class="p">:</span>
</span><span id="set_param-3644"><a href="#set_param-3644"><span class="linenos">3644</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="set_param-3645"><a href="#set_param-3645"><span class="linenos">3645</span></a>            <span class="n">sections</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="set_param-3646"><a href="#set_param-3646"><span class="linenos">3646</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="set_param-3647"><a href="#set_param-3647"><span class="linenos">3647</span></a>            <span class="n">sections</span> <span class="o">=</span> <span class="n">section</span>
</span><span id="set_param-3648"><a href="#set_param-3648"><span class="linenos">3648</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="set_param-3649"><a href="#set_param-3649"><span class="linenos">3649</span></a>        <span class="n">sections</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="set_param-3650"><a href="#set_param-3650"><span class="linenos">3650</span></a>
</span><span id="set_param-3651"><a href="#set_param-3651"><span class="linenos">3651</span></a>    <span class="c1"># Check if to include in param</span>
</span><span id="set_param-3652"><a href="#set_param-3652"><span class="linenos">3652</span></a>    <span class="k">if</span> <span class="n">argument</span> <span class="ow">in</span> <span class="n">args</span> <span class="ow">and</span> <span class="p">(</span>
</span><span id="set_param-3653"><a href="#set_param-3653"><span class="linenos">3653</span></a>        <span class="ow">not</span> <span class="n">arguments_dict</span>
</span><span id="set_param-3654"><a href="#set_param-3654"><span class="linenos">3654</span></a>        <span class="ow">or</span> <span class="n">value</span>
</span><span id="set_param-3655"><a href="#set_param-3655"><span class="linenos">3655</span></a>        <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">get_default_argument</span><span class="p">(</span><span class="n">arguments_dict</span><span class="o">=</span><span class="n">arguments_dict</span><span class="p">,</span> <span class="n">argument</span><span class="o">=</span><span class="n">argument</span><span class="p">)]</span>
</span><span id="set_param-3656"><a href="#set_param-3656"><span class="linenos">3656</span></a>    <span class="p">):</span>
</span><span id="set_param-3657"><a href="#set_param-3657"><span class="linenos">3657</span></a>        <span class="n">sections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
</span><span id="set_param-3658"><a href="#set_param-3658"><span class="linenos">3658</span></a>        <span class="n">param</span> <span class="o">=</span> <span class="n">add_value_into_dict</span><span class="p">(</span><span class="n">dict_tree</span><span class="o">=</span><span class="n">param</span><span class="p">,</span> <span class="n">sections</span><span class="o">=</span><span class="n">sections</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
</span><span id="set_param-3659"><a href="#set_param-3659"><span class="linenos">3659</span></a>
</span><span id="set_param-3660"><a href="#set_param-3660"><span class="linenos">3660</span></a>    <span class="k">return</span> <span class="n">param</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#set_param">set_param</a></code> takes input arguments and adds them to a dictionary based on certain
conditions.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>param</strong>:  The <code>param</code> parameter is a dictionary that stores configuration parameters or
settings. It is used to collect and store various arguments and their values based on the conditions
specified in the <code><a href="#set_param">set_param</a></code> function</li>
<li><strong>args</strong>:  The <code>args</code> parameter in the <code><a href="#set_param">set_param</a></code> function is likely an instance of the
<code>argparse.Namespace</code> class, which is typically used to store the command-line arguments parsed by
the <code>argparse</code> module in Python. It contains the values of the arguments provided by the user when
the script</li>
<li><strong>arguments_dict</strong>:  The <code>arguments_dict</code> parameter seems to be a dictionary that likely contains
information about arguments and their default values. This dictionary is used in the function
<code><a href="#set_param">set_param</a></code> to determine whether a specific argument should be included in the <code>param</code> dictionary
based on certain conditions</li>
<li><strong>argument</strong>:  The <code>argument</code> parameter in the <code><a href="#set_param">set_param</a></code> function represents the specific
argument that you want to set in the <code>param</code> dictionary. It is the key that will be used to store
the value in the dictionary</li>
<li><strong>section</strong>:  The <code>section</code> parameter in the <code><a href="#set_param">set_param</a></code> function is used to specify a section
within the <code>param</code> dictionary where the argument value should be stored. If a <code>section</code> is provided,
the argument value will be stored under that section in the <code>param</code> dictionary. If no `section</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>the updated <code>param</code> dictionary after setting the specified argument value based on the
  conditions provided in the function.</p>
</blockquote>
</div>


                </section>
                <section id="add_value_into_dict">
                            <input id="add_value_into_dict-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_value_into_dict</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">dict_tree</span><span class="p">:</span> <span class="nb">dict</span>, </span><span class="param"><span class="n">sections</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>, </span><span class="param"><span class="n">value</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="add_value_into_dict-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#add_value_into_dict"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="add_value_into_dict-3663"><a href="#add_value_into_dict-3663"><span class="linenos">3663</span></a><span class="k">def</span> <span class="nf">add_value_into_dict</span><span class="p">(</span><span class="n">dict_tree</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">sections</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="add_value_into_dict-3664"><a href="#add_value_into_dict-3664"><span class="linenos">3664</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="add_value_into_dict-3665"><a href="#add_value_into_dict-3665"><span class="linenos">3665</span></a><span class="sd">    The function `add_value_into_dict` adds a value into a dictionary tree based on the provided</span>
</span><span id="add_value_into_dict-3666"><a href="#add_value_into_dict-3666"><span class="linenos">3666</span></a><span class="sd">    sections.</span>
</span><span id="add_value_into_dict-3667"><a href="#add_value_into_dict-3667"><span class="linenos">3667</span></a>
</span><span id="add_value_into_dict-3668"><a href="#add_value_into_dict-3668"><span class="linenos">3668</span></a><span class="sd">    :param dict_tree: The `dict_tree` parameter is a dictionary representing a tree structure. It serves</span>
</span><span id="add_value_into_dict-3669"><a href="#add_value_into_dict-3669"><span class="linenos">3669</span></a><span class="sd">    as the starting point for adding a value based on the provided sections</span>
</span><span id="add_value_into_dict-3670"><a href="#add_value_into_dict-3670"><span class="linenos">3670</span></a><span class="sd">    :type dict_tree: dict</span>
</span><span id="add_value_into_dict-3671"><a href="#add_value_into_dict-3671"><span class="linenos">3671</span></a><span class="sd">    :param sections: The `sections` parameter in the `add_value_into_dict` function represents a list of</span>
</span><span id="add_value_into_dict-3672"><a href="#add_value_into_dict-3672"><span class="linenos">3672</span></a><span class="sd">    sections corresponding to successive keys in the dictionary. These sections are used to traverse the</span>
</span><span id="add_value_into_dict-3673"><a href="#add_value_into_dict-3673"><span class="linenos">3673</span></a><span class="sd">    dictionary tree and determine the location where the value should be added. Each element in the</span>
</span><span id="add_value_into_dict-3674"><a href="#add_value_into_dict-3674"><span class="linenos">3674</span></a><span class="sd">    `sections` list corresponds to a key in</span>
</span><span id="add_value_into_dict-3675"><a href="#add_value_into_dict-3675"><span class="linenos">3675</span></a><span class="sd">    :type sections: list</span>
</span><span id="add_value_into_dict-3676"><a href="#add_value_into_dict-3676"><span class="linenos">3676</span></a><span class="sd">    :param value: The `value` parameter in the `add_value_into_dict` function represents the value that</span>
</span><span id="add_value_into_dict-3677"><a href="#add_value_into_dict-3677"><span class="linenos">3677</span></a><span class="sd">    you want to add into the dictionary tree at the specified location determined by the `sections`</span>
</span><span id="add_value_into_dict-3678"><a href="#add_value_into_dict-3678"><span class="linenos">3678</span></a><span class="sd">    list. This value can be of any data type (e.g., int, str, list, dict, etc.)</span>
</span><span id="add_value_into_dict-3679"><a href="#add_value_into_dict-3679"><span class="linenos">3679</span></a><span class="sd">    :return: The function `add_value_into_dict` returns the updated dictionary tree after adding the</span>
</span><span id="add_value_into_dict-3680"><a href="#add_value_into_dict-3680"><span class="linenos">3680</span></a><span class="sd">    value based on the given sections.</span>
</span><span id="add_value_into_dict-3681"><a href="#add_value_into_dict-3681"><span class="linenos">3681</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="add_value_into_dict-3682"><a href="#add_value_into_dict-3682"><span class="linenos">3682</span></a>
</span><span id="add_value_into_dict-3683"><a href="#add_value_into_dict-3683"><span class="linenos">3683</span></a>    <span class="c1"># Pointer to traverse the tree</span>
</span><span id="add_value_into_dict-3684"><a href="#add_value_into_dict-3684"><span class="linenos">3684</span></a>    <span class="n">current_node</span> <span class="o">=</span> <span class="n">dict_tree</span>
</span><span id="add_value_into_dict-3685"><a href="#add_value_into_dict-3685"><span class="linenos">3685</span></a>
</span><span id="add_value_into_dict-3686"><a href="#add_value_into_dict-3686"><span class="linenos">3686</span></a>    <span class="c1"># If sections is empty, add the value to the root of the dictionary tree</span>
</span><span id="add_value_into_dict-3687"><a href="#add_value_into_dict-3687"><span class="linenos">3687</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">sections</span><span class="p">:</span>
</span><span id="add_value_into_dict-3688"><a href="#add_value_into_dict-3688"><span class="linenos">3688</span></a>        <span class="k">return</span> <span class="n">current_node</span>
</span><span id="add_value_into_dict-3689"><a href="#add_value_into_dict-3689"><span class="linenos">3689</span></a>
</span><span id="add_value_into_dict-3690"><a href="#add_value_into_dict-3690"><span class="linenos">3690</span></a>    <span class="c1"># Traverse the tree based on sections to find the appropriate location for the value</span>
</span><span id="add_value_into_dict-3691"><a href="#add_value_into_dict-3691"><span class="linenos">3691</span></a>    <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">sections</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="add_value_into_dict-3692"><a href="#add_value_into_dict-3692"><span class="linenos">3692</span></a>        <span class="c1"># If the section does not exist yet in the current dictionary, create it</span>
</span><span id="add_value_into_dict-3693"><a href="#add_value_into_dict-3693"><span class="linenos">3693</span></a>        <span class="k">if</span> <span class="n">section</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">current_node</span><span class="p">:</span>
</span><span id="add_value_into_dict-3694"><a href="#add_value_into_dict-3694"><span class="linenos">3694</span></a>            <span class="n">current_node</span><span class="p">[</span><span class="n">section</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="add_value_into_dict-3695"><a href="#add_value_into_dict-3695"><span class="linenos">3695</span></a>        <span class="c1"># Move down the tree following the current section</span>
</span><span id="add_value_into_dict-3696"><a href="#add_value_into_dict-3696"><span class="linenos">3696</span></a>        <span class="n">current_node</span> <span class="o">=</span> <span class="n">current_node</span><span class="p">[</span><span class="n">section</span><span class="p">]</span>
</span><span id="add_value_into_dict-3697"><a href="#add_value_into_dict-3697"><span class="linenos">3697</span></a>
</span><span id="add_value_into_dict-3698"><a href="#add_value_into_dict-3698"><span class="linenos">3698</span></a>    <span class="c1"># Add the value to the last section</span>
</span><span id="add_value_into_dict-3699"><a href="#add_value_into_dict-3699"><span class="linenos">3699</span></a>    <span class="n">last_section</span> <span class="o">=</span> <span class="n">sections</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="add_value_into_dict-3700"><a href="#add_value_into_dict-3700"><span class="linenos">3700</span></a>    <span class="n">current_node</span><span class="p">[</span><span class="n">last_section</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="add_value_into_dict-3701"><a href="#add_value_into_dict-3701"><span class="linenos">3701</span></a>
</span><span id="add_value_into_dict-3702"><a href="#add_value_into_dict-3702"><span class="linenos">3702</span></a>    <span class="k">return</span> <span class="n">dict_tree</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#add_value_into_dict">add_value_into_dict</a></code> adds a value into a dictionary tree based on the provided
sections.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>dict_tree</strong>:  The <code>dict_tree</code> parameter is a dictionary representing a tree structure. It serves
as the starting point for adding a value based on the provided sections</li>
<li><strong>sections</strong>:  The <code>sections</code> parameter in the <code><a href="#add_value_into_dict">add_value_into_dict</a></code> function represents a list of
sections corresponding to successive keys in the dictionary. These sections are used to traverse the
dictionary tree and determine the location where the value should be added. Each element in the
<code>sections</code> list corresponds to a key in</li>
<li><strong>value</strong>:  The <code>value</code> parameter in the <code><a href="#add_value_into_dict">add_value_into_dict</a></code> function represents the value that
you want to add into the dictionary tree at the specified location determined by the <code>sections</code>
list. This value can be of any data type (e.g., int, str, list, dict, etc.)</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#add_value_into_dict">add_value_into_dict</a></code> returns the updated dictionary tree after adding the
  value based on the given sections.</p>
</blockquote>
</div>


                </section>
                <section id="load_param">
                            <input id="load_param-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">load_param</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">args</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">module</span> <span class="s1">&#39;argparse&#39;</span> <span class="kn">from</span> <span class="s1">&#39;/Users/lebechea/miniconda/envs/howard_devel/lib/python3.10/argparse.py&#39;</span><span class="o">&gt;</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="load_param-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#load_param"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="load_param-3705"><a href="#load_param-3705"><span class="linenos">3705</span></a><span class="k">def</span> <span class="nf">load_param</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="n">argparse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="load_param-3706"><a href="#load_param-3706"><span class="linenos">3706</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="load_param-3707"><a href="#load_param-3707"><span class="linenos">3707</span></a><span class="sd">    The function `load_param` takes command line arguments and returns a dictionary containing</span>
</span><span id="load_param-3708"><a href="#load_param-3708"><span class="linenos">3708</span></a><span class="sd">    parameters loaded from a file or as JSON.</span>
</span><span id="load_param-3709"><a href="#load_param-3709"><span class="linenos">3709</span></a>
</span><span id="load_param-3710"><a href="#load_param-3710"><span class="linenos">3710</span></a><span class="sd">    :param args: It seems like the code snippet you provided is a function named `load_param` that takes</span>
</span><span id="load_param-3711"><a href="#load_param-3711"><span class="linenos">3711</span></a><span class="sd">    an argument `args` of type `argparse` and returns a dictionary. The function is intended to load</span>
</span><span id="load_param-3712"><a href="#load_param-3712"><span class="linenos">3712</span></a><span class="sd">    parameters from a file or a string</span>
</span><span id="load_param-3713"><a href="#load_param-3713"><span class="linenos">3713</span></a><span class="sd">    :type args: argparse</span>
</span><span id="load_param-3714"><a href="#load_param-3714"><span class="linenos">3714</span></a><span class="sd">    :return: A dictionary containing the loaded parameters is being returned.</span>
</span><span id="load_param-3715"><a href="#load_param-3715"><span class="linenos">3715</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="load_param-3716"><a href="#load_param-3716"><span class="linenos">3716</span></a>
</span><span id="load_param-3717"><a href="#load_param-3717"><span class="linenos">3717</span></a>    <span class="n">param</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="load_param-3718"><a href="#load_param-3718"><span class="linenos">3718</span></a>    <span class="k">if</span> <span class="s2">&quot;param&quot;</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span><span id="load_param-3719"><a href="#load_param-3719"><span class="linenos">3719</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">param</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">full_path</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">param</span><span class="p">)):</span>
</span><span id="load_param-3720"><a href="#load_param-3720"><span class="linenos">3720</span></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">full_path</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">param</span><span class="p">))</span> <span class="k">as</span> <span class="n">param_file</span><span class="p">:</span>
</span><span id="load_param-3721"><a href="#load_param-3721"><span class="linenos">3721</span></a>                <span class="n">param</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">param_file</span><span class="p">)</span>
</span><span id="load_param-3722"><a href="#load_param-3722"><span class="linenos">3722</span></a>
</span><span id="load_param-3723"><a href="#load_param-3723"><span class="linenos">3723</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="load_param-3724"><a href="#load_param-3724"><span class="linenos">3724</span></a>            <span class="n">param</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">param</span><span class="p">)</span>
</span><span id="load_param-3725"><a href="#load_param-3725"><span class="linenos">3725</span></a>
</span><span id="load_param-3726"><a href="#load_param-3726"><span class="linenos">3726</span></a>    <span class="k">return</span> <span class="n">param</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#load_param">load_param</a></code> takes command line arguments and returns a dictionary containing
parameters loaded from a file or as JSON.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>args</strong>:  It seems like the code snippet you provided is a function named <code><a href="#load_param">load_param</a></code> that takes
an argument <code>args</code> of type <code>argparse</code> and returns a dictionary. The function is intended to load
parameters from a file or a string</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>A dictionary containing the loaded parameters is being returned.</p>
</blockquote>
</div>


                </section>
                <section id="load_config_args">
                            <input id="load_config_args-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">load_config_args</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">args</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="load_config_args-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#load_config_args"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="load_config_args-3729"><a href="#load_config_args-3729"><span class="linenos">3729</span></a><span class="k">def</span> <span class="nf">load_config_args</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
</span><span id="load_config_args-3730"><a href="#load_config_args-3730"><span class="linenos">3730</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="load_config_args-3731"><a href="#load_config_args-3731"><span class="linenos">3731</span></a><span class="sd">    The function `load_config_args` takes in arguments, extracts specific keys from them, and loads</span>
</span><span id="load_config_args-3732"><a href="#load_config_args-3732"><span class="linenos">3732</span></a><span class="sd">    parameters in JSON format.</span>
</span><span id="load_config_args-3733"><a href="#load_config_args-3733"><span class="linenos">3733</span></a>
</span><span id="load_config_args-3734"><a href="#load_config_args-3734"><span class="linenos">3734</span></a><span class="sd">    :param args: The `load_config_args` function takes in an `args` object as input. This `args` object</span>
</span><span id="load_config_args-3735"><a href="#load_config_args-3735"><span class="linenos">3735</span></a><span class="sd">    seems to contain various configuration parameters that the function will use to load and return</span>
</span><span id="load_config_args-3736"><a href="#load_config_args-3736"><span class="linenos">3736</span></a><span class="sd">    specific values</span>
</span><span id="load_config_args-3737"><a href="#load_config_args-3737"><span class="linenos">3737</span></a><span class="sd">    :return: The function `load_config_args` returns the variables `arguments_dict`, `setup_cfg`,</span>
</span><span id="load_config_args-3738"><a href="#load_config_args-3738"><span class="linenos">3738</span></a><span class="sd">    `config`, and `param`.</span>
</span><span id="load_config_args-3739"><a href="#load_config_args-3739"><span class="linenos">3739</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="load_config_args-3740"><a href="#load_config_args-3740"><span class="linenos">3740</span></a>
</span><span id="load_config_args-3741"><a href="#load_config_args-3741"><span class="linenos">3741</span></a>    <span class="c1"># Arguments dict</span>
</span><span id="load_config_args-3742"><a href="#load_config_args-3742"><span class="linenos">3742</span></a>    <span class="k">if</span> <span class="s2">&quot;arguments_dict&quot;</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span><span id="load_config_args-3743"><a href="#load_config_args-3743"><span class="linenos">3743</span></a>        <span class="n">arguments_dict</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">arguments_dict</span>
</span><span id="load_config_args-3744"><a href="#load_config_args-3744"><span class="linenos">3744</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="load_config_args-3745"><a href="#load_config_args-3745"><span class="linenos">3745</span></a>        <span class="n">arguments_dict</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="load_config_args-3746"><a href="#load_config_args-3746"><span class="linenos">3746</span></a>
</span><span id="load_config_args-3747"><a href="#load_config_args-3747"><span class="linenos">3747</span></a>    <span class="c1"># Setup config</span>
</span><span id="load_config_args-3748"><a href="#load_config_args-3748"><span class="linenos">3748</span></a>    <span class="k">if</span> <span class="s2">&quot;setup_cfg&quot;</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span><span id="load_config_args-3749"><a href="#load_config_args-3749"><span class="linenos">3749</span></a>        <span class="n">setup_cfg</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">setup_cfg</span>
</span><span id="load_config_args-3750"><a href="#load_config_args-3750"><span class="linenos">3750</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="load_config_args-3751"><a href="#load_config_args-3751"><span class="linenos">3751</span></a>        <span class="n">setup_cfg</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="load_config_args-3752"><a href="#load_config_args-3752"><span class="linenos">3752</span></a>
</span><span id="load_config_args-3753"><a href="#load_config_args-3753"><span class="linenos">3753</span></a>    <span class="c1"># Config</span>
</span><span id="load_config_args-3754"><a href="#load_config_args-3754"><span class="linenos">3754</span></a>    <span class="k">if</span> <span class="s2">&quot;config&quot;</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span><span id="load_config_args-3755"><a href="#load_config_args-3755"><span class="linenos">3755</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">config</span>
</span><span id="load_config_args-3756"><a href="#load_config_args-3756"><span class="linenos">3756</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="load_config_args-3757"><a href="#load_config_args-3757"><span class="linenos">3757</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="load_config_args-3758"><a href="#load_config_args-3758"><span class="linenos">3758</span></a>
</span><span id="load_config_args-3759"><a href="#load_config_args-3759"><span class="linenos">3759</span></a>    <span class="c1"># Load parameters in JSON format</span>
</span><span id="load_config_args-3760"><a href="#load_config_args-3760"><span class="linenos">3760</span></a>    <span class="n">param</span> <span class="o">=</span> <span class="n">load_param</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="load_config_args-3761"><a href="#load_config_args-3761"><span class="linenos">3761</span></a>
</span><span id="load_config_args-3762"><a href="#load_config_args-3762"><span class="linenos">3762</span></a>    <span class="k">return</span> <span class="n">arguments_dict</span><span class="p">,</span> <span class="n">setup_cfg</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">param</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#load_config_args">load_config_args</a></code> takes in arguments, extracts specific keys from them, and loads
parameters in JSON format.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>args</strong>:  The <code><a href="#load_config_args">load_config_args</a></code> function takes in an <code>args</code> object as input. This <code>args</code> object
seems to contain various configuration parameters that the function will use to load and return
specific values</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#load_config_args">load_config_args</a></code> returns the variables <code>arguments_dict</code>, <code>setup_cfg</code>,
  <code>config</code>, and <code>param</code>.</p>
</blockquote>
</div>


                </section>
                <section id="load_args">
                            <input id="load_args-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">load_args</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">param</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">args</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">module</span> <span class="s1">&#39;argparse&#39;</span> <span class="kn">from</span> <span class="s1">&#39;/Users/lebechea/miniconda/envs/howard_devel/lib/python3.10/argparse.py&#39;</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">arguments_dict</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">command</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">arguments_list</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>,</span><span class="param">	<span class="n">strict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">section_prefix</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="load_args-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#load_args"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="load_args-3765"><a href="#load_args-3765"><span class="linenos">3765</span></a><span class="k">def</span> <span class="nf">load_args</span><span class="p">(</span>
</span><span id="load_args-3766"><a href="#load_args-3766"><span class="linenos">3766</span></a>    <span class="n">param</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="load_args-3767"><a href="#load_args-3767"><span class="linenos">3767</span></a>    <span class="n">args</span><span class="p">:</span> <span class="n">argparse</span><span class="p">,</span>
</span><span id="load_args-3768"><a href="#load_args-3768"><span class="linenos">3768</span></a>    <span class="n">arguments_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
</span><span id="load_args-3769"><a href="#load_args-3769"><span class="linenos">3769</span></a>    <span class="n">command</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="load_args-3770"><a href="#load_args-3770"><span class="linenos">3770</span></a>    <span class="n">arguments_list</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="load_args-3771"><a href="#load_args-3771"><span class="linenos">3771</span></a>    <span class="n">strict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="load_args-3772"><a href="#load_args-3772"><span class="linenos">3772</span></a>    <span class="n">section_prefix</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
</span><span id="load_args-3773"><a href="#load_args-3773"><span class="linenos">3773</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="load_args-3774"><a href="#load_args-3774"><span class="linenos">3774</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="load_args-3775"><a href="#load_args-3775"><span class="linenos">3775</span></a><span class="sd">    The `load_args` function processes arguments based on specified parameters and conditions, raising</span>
</span><span id="load_args-3776"><a href="#load_args-3776"><span class="linenos">3776</span></a><span class="sd">    an error if a specified argument is not found.</span>
</span><span id="load_args-3777"><a href="#load_args-3777"><span class="linenos">3777</span></a>
</span><span id="load_args-3778"><a href="#load_args-3778"><span class="linenos">3778</span></a><span class="sd">    :param param: The `param` parameter in the `load_args` function is a dictionary that stores the</span>
</span><span id="load_args-3779"><a href="#load_args-3779"><span class="linenos">3779</span></a><span class="sd">    arguments and their values. It is used to keep track of the arguments that have been loaded or</span>
</span><span id="load_args-3780"><a href="#load_args-3780"><span class="linenos">3780</span></a><span class="sd">    processed during the argument parsing process</span>
</span><span id="load_args-3781"><a href="#load_args-3781"><span class="linenos">3781</span></a><span class="sd">    :type param: dict</span>
</span><span id="load_args-3782"><a href="#load_args-3782"><span class="linenos">3782</span></a><span class="sd">    :param args: The `args` parameter in the `load_args` function is an instance of the</span>
</span><span id="load_args-3783"><a href="#load_args-3783"><span class="linenos">3783</span></a><span class="sd">    `argparse.ArgumentParser` class from the `argparse` module in Python. This object is used to parse</span>
</span><span id="load_args-3784"><a href="#load_args-3784"><span class="linenos">3784</span></a><span class="sd">    command-line arguments and options. It contains information about the arguments passed to the script</span>
</span><span id="load_args-3785"><a href="#load_args-3785"><span class="linenos">3785</span></a><span class="sd">    when it was executed</span>
</span><span id="load_args-3786"><a href="#load_args-3786"><span class="linenos">3786</span></a><span class="sd">    :type args: argparse</span>
</span><span id="load_args-3787"><a href="#load_args-3787"><span class="linenos">3787</span></a><span class="sd">    :param arguments_dict: The `arguments_dict` parameter in the `load_args` function is a dictionary</span>
</span><span id="load_args-3788"><a href="#load_args-3788"><span class="linenos">3788</span></a><span class="sd">    that likely contains information about the arguments expected by the script. It may include details</span>
</span><span id="load_args-3789"><a href="#load_args-3789"><span class="linenos">3789</span></a><span class="sd">    such as the argument names, their corresponding sections, and any additional parameters related to</span>
</span><span id="load_args-3790"><a href="#load_args-3790"><span class="linenos">3790</span></a><span class="sd">    each argument. This dictionary is used within the `load_args</span>
</span><span id="load_args-3791"><a href="#load_args-3791"><span class="linenos">3791</span></a><span class="sd">    :type arguments_dict: dict</span>
</span><span id="load_args-3792"><a href="#load_args-3792"><span class="linenos">3792</span></a><span class="sd">    :param command: The `command` parameter in the `load_args` function is a string that represents a</span>
</span><span id="load_args-3793"><a href="#load_args-3793"><span class="linenos">3793</span></a><span class="sd">    specific command or action for which arguments need to be loaded. This parameter is used to identify</span>
</span><span id="load_args-3794"><a href="#load_args-3794"><span class="linenos">3794</span></a><span class="sd">    the command-specific arguments that should be processed during argument parsing</span>
</span><span id="load_args-3795"><a href="#load_args-3795"><span class="linenos">3795</span></a><span class="sd">    :type command: str</span>
</span><span id="load_args-3796"><a href="#load_args-3796"><span class="linenos">3796</span></a><span class="sd">    :param arguments_list: The `arguments_list` parameter in the `load_args` function is a dictionary</span>
</span><span id="load_args-3797"><a href="#load_args-3797"><span class="linenos">3797</span></a><span class="sd">    that contains the names of arguments that are expected to be present in the `args` object. This list</span>
</span><span id="load_args-3798"><a href="#load_args-3798"><span class="linenos">3798</span></a><span class="sd">    is used to specify which arguments should be processed by the function `load_args` during the</span>
</span><span id="load_args-3799"><a href="#load_args-3799"><span class="linenos">3799</span></a><span class="sd">    argument parsing process</span>
</span><span id="load_args-3800"><a href="#load_args-3800"><span class="linenos">3800</span></a><span class="sd">    :type arguments_list: dict</span>
</span><span id="load_args-3801"><a href="#load_args-3801"><span class="linenos">3801</span></a><span class="sd">    :param strict: The `strict` parameter in the `load_args` function is a boolean flag that determines</span>
</span><span id="load_args-3802"><a href="#load_args-3802"><span class="linenos">3802</span></a><span class="sd">    whether an error should be raised if an argument specified in the `arguments_list` list is not found</span>
</span><span id="load_args-3803"><a href="#load_args-3803"><span class="linenos">3803</span></a><span class="sd">    in the `args` object. If `strict` is set to `True`, an error will be raised, defaults to False</span>
</span><span id="load_args-3804"><a href="#load_args-3804"><span class="linenos">3804</span></a><span class="sd">    :type strict: bool (optional)</span>
</span><span id="load_args-3805"><a href="#load_args-3805"><span class="linenos">3805</span></a><span class="sd">    :return: The function `load_args` is returning a dictionary named `param` after processing the</span>
</span><span id="load_args-3806"><a href="#load_args-3806"><span class="linenos">3806</span></a><span class="sd">    arguments based on the input parameters and conditions specified in the function.</span>
</span><span id="load_args-3807"><a href="#load_args-3807"><span class="linenos">3807</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="load_args-3808"><a href="#load_args-3808"><span class="linenos">3808</span></a>
</span><span id="load_args-3809"><a href="#load_args-3809"><span class="linenos">3809</span></a>    <span class="c1"># Variables</span>
</span><span id="load_args-3810"><a href="#load_args-3810"><span class="linenos">3810</span></a>    <span class="n">arguments_list_to_load</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="load_args-3811"><a href="#load_args-3811"><span class="linenos">3811</span></a>    <span class="n">param_section_not_found</span> <span class="o">=</span> <span class="n">get_random</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
</span><span id="load_args-3812"><a href="#load_args-3812"><span class="linenos">3812</span></a>
</span><span id="load_args-3813"><a href="#load_args-3813"><span class="linenos">3813</span></a>    <span class="c1"># List from command</span>
</span><span id="load_args-3814"><a href="#load_args-3814"><span class="linenos">3814</span></a>    <span class="k">if</span> <span class="n">command</span><span class="p">:</span>
</span><span id="load_args-3815"><a href="#load_args-3815"><span class="linenos">3815</span></a>        <span class="n">command_infos</span> <span class="o">=</span> <span class="n">arguments_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;commands_arguments&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="load_args-3816"><a href="#load_args-3816"><span class="linenos">3816</span></a>        <span class="k">for</span> <span class="n">command_group</span> <span class="ow">in</span> <span class="n">command_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;groups&quot;</span><span class="p">,</span> <span class="p">{}):</span>
</span><span id="load_args-3817"><a href="#load_args-3817"><span class="linenos">3817</span></a>            <span class="k">for</span> <span class="n">command_argument</span> <span class="ow">in</span> <span class="n">command_infos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;groups&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">command_group</span><span class="p">):</span>
</span><span id="load_args-3818"><a href="#load_args-3818"><span class="linenos">3818</span></a>                <span class="n">command_group_clean</span> <span class="o">=</span> <span class="n">command_group</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="load_args-3819"><a href="#load_args-3819"><span class="linenos">3819</span></a>                <span class="k">if</span> <span class="n">command_group_clean</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;main&quot;</span><span class="p">]:</span>
</span><span id="load_args-3820"><a href="#load_args-3820"><span class="linenos">3820</span></a>                    <span class="n">command_group_clean</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="load_args-3821"><a href="#load_args-3821"><span class="linenos">3821</span></a>                <span class="n">command_argument</span> <span class="o">=</span> <span class="n">command_argument</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
</span><span id="load_args-3822"><a href="#load_args-3822"><span class="linenos">3822</span></a>                <span class="n">arguments_list_to_load</span><span class="p">[</span><span class="n">command_argument</span><span class="p">]</span> <span class="o">=</span> <span class="n">command_group_clean</span>
</span><span id="load_args-3823"><a href="#load_args-3823"><span class="linenos">3823</span></a>
</span><span id="load_args-3824"><a href="#load_args-3824"><span class="linenos">3824</span></a>    <span class="c1"># Add arguments from arguments</span>
</span><span id="load_args-3825"><a href="#load_args-3825"><span class="linenos">3825</span></a>    <span class="k">if</span> <span class="n">arguments_list</span><span class="p">:</span>
</span><span id="load_args-3826"><a href="#load_args-3826"><span class="linenos">3826</span></a>        <span class="k">for</span> <span class="n">argument</span> <span class="ow">in</span> <span class="n">arguments_list</span><span class="p">:</span>
</span><span id="load_args-3827"><a href="#load_args-3827"><span class="linenos">3827</span></a>            <span class="n">arguments_list_to_load</span><span class="p">[</span><span class="n">argument</span><span class="p">]</span> <span class="o">=</span> <span class="n">arguments_list</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
</span><span id="load_args-3828"><a href="#load_args-3828"><span class="linenos">3828</span></a>
</span><span id="load_args-3829"><a href="#load_args-3829"><span class="linenos">3829</span></a>    <span class="c1"># Load arguments</span>
</span><span id="load_args-3830"><a href="#load_args-3830"><span class="linenos">3830</span></a>    <span class="k">if</span> <span class="n">arguments_list_to_load</span><span class="p">:</span>
</span><span id="load_args-3831"><a href="#load_args-3831"><span class="linenos">3831</span></a>        <span class="k">for</span> <span class="n">argument</span> <span class="ow">in</span> <span class="n">arguments_list_to_load</span><span class="p">:</span>
</span><span id="load_args-3832"><a href="#load_args-3832"><span class="linenos">3832</span></a>            <span class="k">if</span> <span class="n">argument</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
</span><span id="load_args-3833"><a href="#load_args-3833"><span class="linenos">3833</span></a>                <span class="n">section</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="load_args-3834"><a href="#load_args-3834"><span class="linenos">3834</span></a>                    <span class="n">arguments_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;arguments&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="load_args-3835"><a href="#load_args-3835"><span class="linenos">3835</span></a>                    <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="load_args-3836"><a href="#load_args-3836"><span class="linenos">3836</span></a>                    <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;extra&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="load_args-3837"><a href="#load_args-3837"><span class="linenos">3837</span></a>                    <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;param_section&quot;</span><span class="p">,</span> <span class="n">param_section_not_found</span><span class="p">)</span>
</span><span id="load_args-3838"><a href="#load_args-3838"><span class="linenos">3838</span></a>                <span class="p">)</span>
</span><span id="load_args-3839"><a href="#load_args-3839"><span class="linenos">3839</span></a>                <span class="k">if</span> <span class="n">section</span> <span class="ow">in</span> <span class="p">[</span><span class="n">param_section_not_found</span><span class="p">]:</span>
</span><span id="load_args-3840"><a href="#load_args-3840"><span class="linenos">3840</span></a>                    <span class="n">section</span> <span class="o">=</span> <span class="n">arguments_list_to_load</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="load_args-3841"><a href="#load_args-3841"><span class="linenos">3841</span></a>                <span class="c1"># section str to list</span>
</span><span id="load_args-3842"><a href="#load_args-3842"><span class="linenos">3842</span></a>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="load_args-3843"><a href="#load_args-3843"><span class="linenos">3843</span></a>                    <span class="n">section</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="load_args-3844"><a href="#load_args-3844"><span class="linenos">3844</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="load_args-3845"><a href="#load_args-3845"><span class="linenos">3845</span></a>                    <span class="n">section</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="load_args-3846"><a href="#load_args-3846"><span class="linenos">3846</span></a>                <span class="k">if</span> <span class="n">section_prefix</span><span class="p">:</span>
</span><span id="load_args-3847"><a href="#load_args-3847"><span class="linenos">3847</span></a>                    <span class="n">section</span> <span class="o">=</span> <span class="n">section_prefix</span> <span class="o">+</span> <span class="n">section</span>
</span><span id="load_args-3848"><a href="#load_args-3848"><span class="linenos">3848</span></a>                <span class="n">param</span> <span class="o">=</span> <span class="n">set_param</span><span class="p">(</span>
</span><span id="load_args-3849"><a href="#load_args-3849"><span class="linenos">3849</span></a>                    <span class="n">param</span><span class="o">=</span><span class="n">param</span><span class="p">,</span>
</span><span id="load_args-3850"><a href="#load_args-3850"><span class="linenos">3850</span></a>                    <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
</span><span id="load_args-3851"><a href="#load_args-3851"><span class="linenos">3851</span></a>                    <span class="n">arguments_dict</span><span class="o">=</span><span class="n">arguments_dict</span><span class="p">,</span>
</span><span id="load_args-3852"><a href="#load_args-3852"><span class="linenos">3852</span></a>                    <span class="n">section</span><span class="o">=</span><span class="n">section</span><span class="p">,</span>
</span><span id="load_args-3853"><a href="#load_args-3853"><span class="linenos">3853</span></a>                    <span class="n">argument</span><span class="o">=</span><span class="n">argument</span><span class="p">,</span>
</span><span id="load_args-3854"><a href="#load_args-3854"><span class="linenos">3854</span></a>                <span class="p">)</span>
</span><span id="load_args-3855"><a href="#load_args-3855"><span class="linenos">3855</span></a>
</span><span id="load_args-3856"><a href="#load_args-3856"><span class="linenos">3856</span></a>            <span class="k">elif</span> <span class="n">strict</span><span class="p">:</span>
</span><span id="load_args-3857"><a href="#load_args-3857"><span class="linenos">3857</span></a>                <span class="n">msg_error</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Argument &#39;</span><span class="si">{</span><span class="n">argument</span><span class="si">}</span><span class="s2">&#39; not found in list of aguments&quot;</span>
</span><span id="load_args-3858"><a href="#load_args-3858"><span class="linenos">3858</span></a>                <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg_error</span><span class="p">)</span>
</span><span id="load_args-3859"><a href="#load_args-3859"><span class="linenos">3859</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg_error</span><span class="p">)</span>
</span><span id="load_args-3860"><a href="#load_args-3860"><span class="linenos">3860</span></a>
</span><span id="load_args-3861"><a href="#load_args-3861"><span class="linenos">3861</span></a>    <span class="k">return</span> <span class="n">param</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#load_args">load_args</a></code> function processes arguments based on specified parameters and conditions, raising
an error if a specified argument is not found.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>param</strong>:  The <code>param</code> parameter in the <code><a href="#load_args">load_args</a></code> function is a dictionary that stores the
arguments and their values. It is used to keep track of the arguments that have been loaded or
processed during the argument parsing process</li>
<li><strong>args</strong>:  The <code>args</code> parameter in the <code><a href="#load_args">load_args</a></code> function is an instance of the
<code>argparse.ArgumentParser</code> class from the <code>argparse</code> module in Python. This object is used to parse
command-line arguments and options. It contains information about the arguments passed to the script
when it was executed</li>
<li><strong>arguments_dict</strong>:  The <code>arguments_dict</code> parameter in the <code><a href="#load_args">load_args</a></code> function is a dictionary
that likely contains information about the arguments expected by the script. It may include details
such as the argument names, their corresponding sections, and any additional parameters related to
each argument. This dictionary is used within the `load_args</li>
<li><strong>command</strong>:  The <code><a href="#command">command</a></code> parameter in the <code><a href="#load_args">load_args</a></code> function is a string that represents a
specific command or action for which arguments need to be loaded. This parameter is used to identify
the command-specific arguments that should be processed during argument parsing</li>
<li><strong>arguments_list</strong>:  The <code>arguments_list</code> parameter in the <code><a href="#load_args">load_args</a></code> function is a dictionary
that contains the names of arguments that are expected to be present in the <code>args</code> object. This list
is used to specify which arguments should be processed by the function <code><a href="#load_args">load_args</a></code> during the
argument parsing process</li>
<li><strong>strict</strong>:  The <code>strict</code> parameter in the <code><a href="#load_args">load_args</a></code> function is a boolean flag that determines
whether an error should be raised if an argument specified in the <code>arguments_list</code> list is not found
in the <code>args</code> object. If <code>strict</code> is set to <code>True</code>, an error will be raised, defaults to False</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#load_args">load_args</a></code> is returning a dictionary named <code>param</code> after processing the
  arguments based on the input parameters and conditions specified in the function.</p>
</blockquote>
</div>


                </section>
                <section id="get_random">
                            <input id="get_random-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_random</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">N</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="get_random-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_random"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_random-3864"><a href="#get_random-3864"><span class="linenos">3864</span></a><span class="k">def</span> <span class="nf">get_random</span><span class="p">(</span><span class="n">N</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="get_random-3865"><a href="#get_random-3865"><span class="linenos">3865</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="get_random-3866"><a href="#get_random-3866"><span class="linenos">3866</span></a><span class="sd">    The function `get_random` generates a random string of uppercase letters and digits with a default</span>
</span><span id="get_random-3867"><a href="#get_random-3867"><span class="linenos">3867</span></a><span class="sd">    length of 10.</span>
</span><span id="get_random-3868"><a href="#get_random-3868"><span class="linenos">3868</span></a>
</span><span id="get_random-3869"><a href="#get_random-3869"><span class="linenos">3869</span></a><span class="sd">    :param N: The parameter `N` in the `get_random` function represents the length of the random string</span>
</span><span id="get_random-3870"><a href="#get_random-3870"><span class="linenos">3870</span></a><span class="sd">    that will be generated. By default, if no value is provided for `N`, it will generate a random</span>
</span><span id="get_random-3871"><a href="#get_random-3871"><span class="linenos">3871</span></a><span class="sd">    string of length 10 consisting of uppercase letters and digits, defaults to 10</span>
</span><span id="get_random-3872"><a href="#get_random-3872"><span class="linenos">3872</span></a><span class="sd">    :type N: int (optional)</span>
</span><span id="get_random-3873"><a href="#get_random-3873"><span class="linenos">3873</span></a><span class="sd">    :return: A random string of length N consisting of uppercase letters and digits.</span>
</span><span id="get_random-3874"><a href="#get_random-3874"><span class="linenos">3874</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_random-3875"><a href="#get_random-3875"><span class="linenos">3875</span></a>
</span><span id="get_random-3876"><a href="#get_random-3876"><span class="linenos">3876</span></a>    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">ascii_uppercase</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">digits</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">N</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#get_random">get_random</a></code> generates a random string of uppercase letters and digits with a default
length of 10.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>N</strong>:  The parameter <code>N</code> in the <code><a href="#get_random">get_random</a></code> function represents the length of the random string
that will be generated. By default, if no value is provided for <code>N</code>, it will generate a random
string of length 10 consisting of uppercase letters and digits, defaults to 10</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>A random string of length N consisting of uppercase letters and digits.</p>
</blockquote>
</div>


                </section>
                <section id="transcripts_file_to_df">
                            <input id="transcripts_file_to_df-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">transcripts_file_to_df</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">transcripts_file</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">column_names</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;transcript&#39;</span><span class="p">,</span> <span class="s1">&#39;gene&#39;</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span>:</span></span>

                <label class="view-source-button" for="transcripts_file_to_df-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#transcripts_file_to_df"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="transcripts_file_to_df-3879"><a href="#transcripts_file_to_df-3879"><span class="linenos">3879</span></a><span class="k">def</span> <span class="nf">transcripts_file_to_df</span><span class="p">(</span>
</span><span id="transcripts_file_to_df-3880"><a href="#transcripts_file_to_df-3880"><span class="linenos">3880</span></a>    <span class="n">transcripts_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">column_names</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;transcript&quot;</span><span class="p">,</span> <span class="s2">&quot;gene&quot;</span><span class="p">]</span>
</span><span id="transcripts_file_to_df-3881"><a href="#transcripts_file_to_df-3881"><span class="linenos">3881</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
</span><span id="transcripts_file_to_df-3882"><a href="#transcripts_file_to_df-3882"><span class="linenos">3882</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="transcripts_file_to_df-3883"><a href="#transcripts_file_to_df-3883"><span class="linenos">3883</span></a><span class="sd">    This Python function reads a transcripts file into a pandas DataFrame, filtering out comment lines.</span>
</span><span id="transcripts_file_to_df-3884"><a href="#transcripts_file_to_df-3884"><span class="linenos">3884</span></a>
</span><span id="transcripts_file_to_df-3885"><a href="#transcripts_file_to_df-3885"><span class="linenos">3885</span></a><span class="sd">    :param transcripts_file: The `transcripts_file` parameter is a string that represents the file path</span>
</span><span id="transcripts_file_to_df-3886"><a href="#transcripts_file_to_df-3886"><span class="linenos">3886</span></a><span class="sd">    to a file containing transcript information. This function is designed to read the contents of this</span>
</span><span id="transcripts_file_to_df-3887"><a href="#transcripts_file_to_df-3887"><span class="linenos">3887</span></a><span class="sd">    file and convert it into a pandas DataFrame. The file is expected to be tab-separated with two</span>
</span><span id="transcripts_file_to_df-3888"><a href="#transcripts_file_to_df-3888"><span class="linenos">3888</span></a><span class="sd">    columns: &quot;transcript&quot; and &quot;gene</span>
</span><span id="transcripts_file_to_df-3889"><a href="#transcripts_file_to_df-3889"><span class="linenos">3889</span></a><span class="sd">    :type transcripts_file: str</span>
</span><span id="transcripts_file_to_df-3890"><a href="#transcripts_file_to_df-3890"><span class="linenos">3890</span></a><span class="sd">    :param column_names: The `column_names` parameter is a list that specifies the column names expected</span>
</span><span id="transcripts_file_to_df-3891"><a href="#transcripts_file_to_df-3891"><span class="linenos">3891</span></a><span class="sd">    in the transcripts file. By default, it is set to `[&quot;transcript&quot;, &quot;gene&quot;]`, indicating that the file</span>
</span><span id="transcripts_file_to_df-3892"><a href="#transcripts_file_to_df-3892"><span class="linenos">3892</span></a><span class="sd">    should have two columns named &quot;transcript&quot; and &quot;gene&quot;. If the actual column names in the</span>
</span><span id="transcripts_file_to_df-3893"><a href="#transcripts_file_to_df-3893"><span class="linenos">3893</span></a><span class="sd">    :type column_names: list</span>
</span><span id="transcripts_file_to_df-3894"><a href="#transcripts_file_to_df-3894"><span class="linenos">3894</span></a><span class="sd">    :return: A pandas DataFrame containing transcript and gene information read from the specified file</span>
</span><span id="transcripts_file_to_df-3895"><a href="#transcripts_file_to_df-3895"><span class="linenos">3895</span></a><span class="sd">    after filtering out comment lines is being returned.</span>
</span><span id="transcripts_file_to_df-3896"><a href="#transcripts_file_to_df-3896"><span class="linenos">3896</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="transcripts_file_to_df-3897"><a href="#transcripts_file_to_df-3897"><span class="linenos">3897</span></a>
</span><span id="transcripts_file_to_df-3898"><a href="#transcripts_file_to_df-3898"><span class="linenos">3898</span></a>    <span class="c1"># Full path</span>
</span><span id="transcripts_file_to_df-3899"><a href="#transcripts_file_to_df-3899"><span class="linenos">3899</span></a>    <span class="n">transcripts_file</span> <span class="o">=</span> <span class="n">full_path</span><span class="p">(</span><span class="n">transcripts_file</span><span class="p">)</span>
</span><span id="transcripts_file_to_df-3900"><a href="#transcripts_file_to_df-3900"><span class="linenos">3900</span></a>
</span><span id="transcripts_file_to_df-3901"><a href="#transcripts_file_to_df-3901"><span class="linenos">3901</span></a>    <span class="c1"># Transcript dataframe</span>
</span><span id="transcripts_file_to_df-3902"><a href="#transcripts_file_to_df-3902"><span class="linenos">3902</span></a>    <span class="n">transcripts_dataframe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">column_names</span><span class="p">)</span>
</span><span id="transcripts_file_to_df-3903"><a href="#transcripts_file_to_df-3903"><span class="linenos">3903</span></a>
</span><span id="transcripts_file_to_df-3904"><a href="#transcripts_file_to_df-3904"><span class="linenos">3904</span></a>    <span class="c1"># If file exists</span>
</span><span id="transcripts_file_to_df-3905"><a href="#transcripts_file_to_df-3905"><span class="linenos">3905</span></a>    <span class="k">if</span> <span class="n">transcripts_file</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">transcripts_file</span><span class="p">):</span>
</span><span id="transcripts_file_to_df-3906"><a href="#transcripts_file_to_df-3906"><span class="linenos">3906</span></a>
</span><span id="transcripts_file_to_df-3907"><a href="#transcripts_file_to_df-3907"><span class="linenos">3907</span></a>        <span class="c1"># Data</span>
</span><span id="transcripts_file_to_df-3908"><a href="#transcripts_file_to_df-3908"><span class="linenos">3908</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="transcripts_file_to_df-3909"><a href="#transcripts_file_to_df-3909"><span class="linenos">3909</span></a>
</span><span id="transcripts_file_to_df-3910"><a href="#transcripts_file_to_df-3910"><span class="linenos">3910</span></a>        <span class="c1"># Check column names length by reading all lines</span>
</span><span id="transcripts_file_to_df-3911"><a href="#transcripts_file_to_df-3911"><span class="linenos">3911</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">transcripts_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="transcripts_file_to_df-3912"><a href="#transcripts_file_to_df-3912"><span class="linenos">3912</span></a>            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
</span><span id="transcripts_file_to_df-3913"><a href="#transcripts_file_to_df-3913"><span class="linenos">3913</span></a>                <span class="c1"># Split line by tab</span>
</span><span id="transcripts_file_to_df-3914"><a href="#transcripts_file_to_df-3914"><span class="linenos">3914</span></a>                <span class="n">values</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="transcripts_file_to_df-3915"><a href="#transcripts_file_to_df-3915"><span class="linenos">3915</span></a>                <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="transcripts_file_to_df-3916"><a href="#transcripts_file_to_df-3916"><span class="linenos">3916</span></a>
</span><span id="transcripts_file_to_df-3917"><a href="#transcripts_file_to_df-3917"><span class="linenos">3917</span></a>        <span class="c1"># Convert into DataFrame</span>
</span><span id="transcripts_file_to_df-3918"><a href="#transcripts_file_to_df-3918"><span class="linenos">3918</span></a>        <span class="n">transcripts_dataframe_nb_columns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="transcripts_file_to_df-3919"><a href="#transcripts_file_to_df-3919"><span class="linenos">3919</span></a>
</span><span id="transcripts_file_to_df-3920"><a href="#transcripts_file_to_df-3920"><span class="linenos">3920</span></a>        <span class="c1"># If dataframe not with the same len than input name columns</span>
</span><span id="transcripts_file_to_df-3921"><a href="#transcripts_file_to_df-3921"><span class="linenos">3921</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">transcripts_dataframe_nb_columns</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">column_names</span><span class="p">):</span>
</span><span id="transcripts_file_to_df-3922"><a href="#transcripts_file_to_df-3922"><span class="linenos">3922</span></a>            <span class="n">column_names_new</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="transcripts_file_to_df-3923"><a href="#transcripts_file_to_df-3923"><span class="linenos">3923</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">transcripts_dataframe_nb_columns</span><span class="o">.</span><span class="n">columns</span><span class="p">)):</span>
</span><span id="transcripts_file_to_df-3924"><a href="#transcripts_file_to_df-3924"><span class="linenos">3924</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">column_names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>
</span><span id="transcripts_file_to_df-3925"><a href="#transcripts_file_to_df-3925"><span class="linenos">3925</span></a>                    <span class="n">column_names_new</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">column_names</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="transcripts_file_to_df-3926"><a href="#transcripts_file_to_df-3926"><span class="linenos">3926</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="transcripts_file_to_df-3927"><a href="#transcripts_file_to_df-3927"><span class="linenos">3927</span></a>                    <span class="n">column_names_new</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;column_</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="transcripts_file_to_df-3928"><a href="#transcripts_file_to_df-3928"><span class="linenos">3928</span></a>            <span class="n">column_names</span> <span class="o">=</span> <span class="n">column_names_new</span>
</span><span id="transcripts_file_to_df-3929"><a href="#transcripts_file_to_df-3929"><span class="linenos">3929</span></a>
</span><span id="transcripts_file_to_df-3930"><a href="#transcripts_file_to_df-3930"><span class="linenos">3930</span></a>        <span class="c1"># Create dataframe</span>
</span><span id="transcripts_file_to_df-3931"><a href="#transcripts_file_to_df-3931"><span class="linenos">3931</span></a>        <span class="n">transcripts_dataframe</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
</span><span id="transcripts_file_to_df-3932"><a href="#transcripts_file_to_df-3932"><span class="linenos">3932</span></a>            <span class="n">transcripts_file</span><span class="p">,</span>
</span><span id="transcripts_file_to_df-3933"><a href="#transcripts_file_to_df-3933"><span class="linenos">3933</span></a>            <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span>
</span><span id="transcripts_file_to_df-3934"><a href="#transcripts_file_to_df-3934"><span class="linenos">3934</span></a>            <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="transcripts_file_to_df-3935"><a href="#transcripts_file_to_df-3935"><span class="linenos">3935</span></a>            <span class="n">names</span><span class="o">=</span><span class="n">column_names</span><span class="p">,</span>
</span><span id="transcripts_file_to_df-3936"><a href="#transcripts_file_to_df-3936"><span class="linenos">3936</span></a>            <span class="n">index_col</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="transcripts_file_to_df-3937"><a href="#transcripts_file_to_df-3937"><span class="linenos">3937</span></a>        <span class="p">)</span>
</span><span id="transcripts_file_to_df-3938"><a href="#transcripts_file_to_df-3938"><span class="linenos">3938</span></a>
</span><span id="transcripts_file_to_df-3939"><a href="#transcripts_file_to_df-3939"><span class="linenos">3939</span></a>        <span class="c1"># First column</span>
</span><span id="transcripts_file_to_df-3940"><a href="#transcripts_file_to_df-3940"><span class="linenos">3940</span></a>        <span class="n">first_column</span> <span class="o">=</span> <span class="n">column_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="transcripts_file_to_df-3941"><a href="#transcripts_file_to_df-3941"><span class="linenos">3941</span></a>
</span><span id="transcripts_file_to_df-3942"><a href="#transcripts_file_to_df-3942"><span class="linenos">3942</span></a>        <span class="c1"># Filter comment on lines</span>
</span><span id="transcripts_file_to_df-3943"><a href="#transcripts_file_to_df-3943"><span class="linenos">3943</span></a>        <span class="n">transcripts_dataframe</span> <span class="o">=</span> <span class="n">transcripts_dataframe</span><span class="p">[</span>
</span><span id="transcripts_file_to_df-3944"><a href="#transcripts_file_to_df-3944"><span class="linenos">3944</span></a>            <span class="n">transcripts_dataframe</span><span class="p">[</span><span class="n">first_column</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;^[^#]+&quot;</span><span class="p">)</span>
</span><span id="transcripts_file_to_df-3945"><a href="#transcripts_file_to_df-3945"><span class="linenos">3945</span></a>        <span class="p">]</span>
</span><span id="transcripts_file_to_df-3946"><a href="#transcripts_file_to_df-3946"><span class="linenos">3946</span></a>
</span><span id="transcripts_file_to_df-3947"><a href="#transcripts_file_to_df-3947"><span class="linenos">3947</span></a>    <span class="c1"># Return</span>
</span><span id="transcripts_file_to_df-3948"><a href="#transcripts_file_to_df-3948"><span class="linenos">3948</span></a>    <span class="k">return</span> <span class="n">transcripts_dataframe</span>
</span></pre></div>


            <div class="docstring"><p>This Python function reads a transcripts file into a pandas DataFrame, filtering out comment lines.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>transcripts_file</strong>:  The <code>transcripts_file</code> parameter is a string that represents the file path
to a file containing transcript information. This function is designed to read the contents of this
file and convert it into a pandas DataFrame. The file is expected to be tab-separated with two
columns: "transcript" and "gene</li>
<li><strong>column_names</strong>:  The <code>column_names</code> parameter is a list that specifies the column names expected
in the transcripts file. By default, it is set to <code>["transcript", "gene"]</code>, indicating that the file
should have two columns named "transcript" and "gene". If the actual column names in the</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>A pandas DataFrame containing transcript and gene information read from the specified file
  after filtering out comment lines is being returned.</p>
</blockquote>
</div>


                </section>
                <section id="identical">
                            <input id="identical-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">identical</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">vcf_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>, </span><span class="param"><span class="n">begin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;##&#39;</span>, </span><span class="param"><span class="n">line_strip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="identical-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#identical"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="identical-3951"><a href="#identical-3951"><span class="linenos">3951</span></a><span class="k">def</span> <span class="nf">identical</span><span class="p">(</span>
</span><span id="identical-3952"><a href="#identical-3952"><span class="linenos">3952</span></a>    <span class="n">vcf_list</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">begin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;##&quot;</span><span class="p">,</span> <span class="n">line_strip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="identical-3953"><a href="#identical-3953"><span class="linenos">3953</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="identical-3954"><a href="#identical-3954"><span class="linenos">3954</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="identical-3955"><a href="#identical-3955"><span class="linenos">3955</span></a><span class="sd">    The `identical` function compares the contents of multiple VCF files to determine if they are</span>
</span><span id="identical-3956"><a href="#identical-3956"><span class="linenos">3956</span></a><span class="sd">    identical.</span>
</span><span id="identical-3957"><a href="#identical-3957"><span class="linenos">3957</span></a>
</span><span id="identical-3958"><a href="#identical-3958"><span class="linenos">3958</span></a><span class="sd">    :param vcf_list: The `vcf_list` parameter is a list of file paths to VCF (Variant Call Format) files</span>
</span><span id="identical-3959"><a href="#identical-3959"><span class="linenos">3959</span></a><span class="sd">    that you want to compare for identity. The function reads the contents of these files and checks if</span>
</span><span id="identical-3960"><a href="#identical-3960"><span class="linenos">3960</span></a><span class="sd">    they are identical based on the specified conditions</span>
</span><span id="identical-3961"><a href="#identical-3961"><span class="linenos">3961</span></a><span class="sd">    :type vcf_list: typing.List[str]</span>
</span><span id="identical-3962"><a href="#identical-3962"><span class="linenos">3962</span></a><span class="sd">    :param begin: The `begin` parameter in the `identical` function is used to specify a string that</span>
</span><span id="identical-3963"><a href="#identical-3963"><span class="linenos">3963</span></a><span class="sd">    indicates the beginning of a line in the input files. If a line in the input file starts with the</span>
</span><span id="identical-3964"><a href="#identical-3964"><span class="linenos">3964</span></a><span class="sd">    specified `begin` string, it will be skipped and not included in the comparison process. By default,</span>
</span><span id="identical-3965"><a href="#identical-3965"><span class="linenos">3965</span></a><span class="sd">    defaults to ##</span>
</span><span id="identical-3966"><a href="#identical-3966"><span class="linenos">3966</span></a><span class="sd">    :type begin: str (optional)</span>
</span><span id="identical-3967"><a href="#identical-3967"><span class="linenos">3967</span></a><span class="sd">    :param line_strip: The `line_strip` parameter in the `identical` function is a boolean flag that</span>
</span><span id="identical-3968"><a href="#identical-3968"><span class="linenos">3968</span></a><span class="sd">    determines whether each line read from the input files should be stripped of leading and trailing</span>
</span><span id="identical-3969"><a href="#identical-3969"><span class="linenos">3969</span></a><span class="sd">    whitespaces before being compared. If `line_strip` is set to `True`, each line will be stripped</span>
</span><span id="identical-3970"><a href="#identical-3970"><span class="linenos">3970</span></a><span class="sd">    using the `strip, defaults to True</span>
</span><span id="identical-3971"><a href="#identical-3971"><span class="linenos">3971</span></a><span class="sd">    :type line_strip: bool (optional)</span>
</span><span id="identical-3972"><a href="#identical-3972"><span class="linenos">3972</span></a><span class="sd">    :return: The function `identical` is returning a boolean value. It returns `True` if all the lines</span>
</span><span id="identical-3973"><a href="#identical-3973"><span class="linenos">3973</span></a><span class="sd">    in the VCF files provided in the `vcf_list` are identical, and `False` otherwise.</span>
</span><span id="identical-3974"><a href="#identical-3974"><span class="linenos">3974</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="identical-3975"><a href="#identical-3975"><span class="linenos">3975</span></a>
</span><span id="identical-3976"><a href="#identical-3976"><span class="linenos">3976</span></a>    <span class="n">vcfs_lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="identical-3977"><a href="#identical-3977"><span class="linenos">3977</span></a>    <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="identical-3978"><a href="#identical-3978"><span class="linenos">3978</span></a>    <span class="k">for</span> <span class="n">vcf</span> <span class="ow">in</span> <span class="n">vcf_list</span><span class="p">:</span>
</span><span id="identical-3979"><a href="#identical-3979"><span class="linenos">3979</span></a>        <span class="n">vcfs_lines</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</span><span id="identical-3980"><a href="#identical-3980"><span class="linenos">3980</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">vcf</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="identical-3981"><a href="#identical-3981"><span class="linenos">3981</span></a>            <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
</span><span id="identical-3982"><a href="#identical-3982"><span class="linenos">3982</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">l</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">begin</span><span class="p">)</span> <span class="ow">or</span> <span class="n">begin</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="identical-3983"><a href="#identical-3983"><span class="linenos">3983</span></a>                    <span class="k">if</span> <span class="n">line_strip</span><span class="p">:</span>
</span><span id="identical-3984"><a href="#identical-3984"><span class="linenos">3984</span></a>                        <span class="n">l</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="identical-3985"><a href="#identical-3985"><span class="linenos">3985</span></a>                    <span class="n">vcfs_lines</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
</span><span id="identical-3986"><a href="#identical-3986"><span class="linenos">3986</span></a>        <span class="n">k</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="identical-3987"><a href="#identical-3987"><span class="linenos">3987</span></a>
</span><span id="identical-3988"><a href="#identical-3988"><span class="linenos">3988</span></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vcf_list</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="identical-3989"><a href="#identical-3989"><span class="linenos">3989</span></a>        <span class="k">if</span> <span class="n">vcfs_lines</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">vcfs_lines</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
</span><span id="identical-3990"><a href="#identical-3990"><span class="linenos">3990</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="identical-3991"><a href="#identical-3991"><span class="linenos">3991</span></a>    <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#identical">identical</a></code> function compares the contents of multiple VCF files to determine if they are
identical.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>vcf_list</strong>:  The <code>vcf_list</code> parameter is a list of file paths to VCF (Variant Call Format) files
that you want to compare for identity. The function reads the contents of these files and checks if
they are identical based on the specified conditions</li>
<li><strong>begin</strong>:  The <code>begin</code> parameter in the <code><a href="#identical">identical</a></code> function is used to specify a string that
indicates the beginning of a line in the input files. If a line in the input file starts with the
specified <code>begin</code> string, it will be skipped and not included in the comparison process. By default,
defaults to ##</li>
<li><strong>line_strip</strong>:  The <code>line_strip</code> parameter in the <code><a href="#identical">identical</a></code> function is a boolean flag that
determines whether each line read from the input files should be stripped of leading and trailing
whitespaces before being compared. If <code>line_strip</code> is set to <code>True</code>, each line will be stripped
using the `strip, defaults to True</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#identical">identical</a></code> is returning a boolean value. It returns <code>True</code> if all the lines
  in the VCF files provided in the <code>vcf_list</code> are identical, and <code>False</code> otherwise.</p>
</blockquote>
</div>


                </section>
                <section id="check_docker_image_exists">
                            <input id="check_docker_image_exists-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">check_docker_image_exists</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">image_with_tag</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="check_docker_image_exists-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#check_docker_image_exists"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="check_docker_image_exists-3994"><a href="#check_docker_image_exists-3994"><span class="linenos">3994</span></a><span class="k">def</span> <span class="nf">check_docker_image_exists</span><span class="p">(</span><span class="n">image_with_tag</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="check_docker_image_exists-3995"><a href="#check_docker_image_exists-3995"><span class="linenos">3995</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="check_docker_image_exists-3996"><a href="#check_docker_image_exists-3996"><span class="linenos">3996</span></a><span class="sd">    Checks if a Docker image with a specific tag exists in the local repository.</span>
</span><span id="check_docker_image_exists-3997"><a href="#check_docker_image_exists-3997"><span class="linenos">3997</span></a>
</span><span id="check_docker_image_exists-3998"><a href="#check_docker_image_exists-3998"><span class="linenos">3998</span></a><span class="sd">    :param image_with_tag: Image name with tag (e.g., &quot;image:version&quot;)</span>
</span><span id="check_docker_image_exists-3999"><a href="#check_docker_image_exists-3999"><span class="linenos">3999</span></a><span class="sd">    :return: True if the image exists, False otherwise</span>
</span><span id="check_docker_image_exists-4000"><a href="#check_docker_image_exists-4000"><span class="linenos">4000</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="check_docker_image_exists-4001"><a href="#check_docker_image_exists-4001"><span class="linenos">4001</span></a>    <span class="n">image_name</span><span class="p">,</span> <span class="n">image_tag</span> <span class="o">=</span> <span class="n">image_with_tag</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="check_docker_image_exists-4002"><a href="#check_docker_image_exists-4002"><span class="linenos">4002</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="check_docker_image_exists-4003"><a href="#check_docker_image_exists-4003"><span class="linenos">4003</span></a>        <span class="c1"># Run the `docker images` command and capture the output</span>
</span><span id="check_docker_image_exists-4004"><a href="#check_docker_image_exists-4004"><span class="linenos">4004</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
</span><span id="check_docker_image_exists-4005"><a href="#check_docker_image_exists-4005"><span class="linenos">4005</span></a>            <span class="p">[</span><span class="s2">&quot;docker&quot;</span><span class="p">,</span> <span class="s2">&quot;images&quot;</span><span class="p">,</span> <span class="s2">&quot;--format&quot;</span><span class="p">,</span> <span class="s2">&quot;{{json . }}&quot;</span><span class="p">],</span>
</span><span id="check_docker_image_exists-4006"><a href="#check_docker_image_exists-4006"><span class="linenos">4006</span></a>            <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="check_docker_image_exists-4007"><a href="#check_docker_image_exists-4007"><span class="linenos">4007</span></a>            <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
</span><span id="check_docker_image_exists-4008"><a href="#check_docker_image_exists-4008"><span class="linenos">4008</span></a>            <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="check_docker_image_exists-4009"><a href="#check_docker_image_exists-4009"><span class="linenos">4009</span></a>        <span class="p">)</span>
</span><span id="check_docker_image_exists-4010"><a href="#check_docker_image_exists-4010"><span class="linenos">4010</span></a>        <span class="c1"># Check for errors</span>
</span><span id="check_docker_image_exists-4011"><a href="#check_docker_image_exists-4011"><span class="linenos">4011</span></a>        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="check_docker_image_exists-4012"><a href="#check_docker_image_exists-4012"><span class="linenos">4012</span></a>            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error running Docker command: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">stderr</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="check_docker_image_exists-4013"><a href="#check_docker_image_exists-4013"><span class="linenos">4013</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="check_docker_image_exists-4014"><a href="#check_docker_image_exists-4014"><span class="linenos">4014</span></a>
</span><span id="check_docker_image_exists-4015"><a href="#check_docker_image_exists-4015"><span class="linenos">4015</span></a>        <span class="c1"># Search for the image with the specified tag in the command output</span>
</span><span id="check_docker_image_exists-4016"><a href="#check_docker_image_exists-4016"><span class="linenos">4016</span></a>        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
</span><span id="check_docker_image_exists-4017"><a href="#check_docker_image_exists-4017"><span class="linenos">4017</span></a>            <span class="k">if</span> <span class="n">image</span><span class="p">:</span>
</span><span id="check_docker_image_exists-4018"><a href="#check_docker_image_exists-4018"><span class="linenos">4018</span></a>                <span class="n">image_dict</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</span><span id="check_docker_image_exists-4019"><a href="#check_docker_image_exists-4019"><span class="linenos">4019</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="check_docker_image_exists-4020"><a href="#check_docker_image_exists-4020"><span class="linenos">4020</span></a>                    <span class="n">image_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Repository&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">image_name</span>
</span><span id="check_docker_image_exists-4021"><a href="#check_docker_image_exists-4021"><span class="linenos">4021</span></a>                    <span class="ow">and</span> <span class="n">image_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Tag&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">image_tag</span>
</span><span id="check_docker_image_exists-4022"><a href="#check_docker_image_exists-4022"><span class="linenos">4022</span></a>                <span class="p">):</span>
</span><span id="check_docker_image_exists-4023"><a href="#check_docker_image_exists-4023"><span class="linenos">4023</span></a>                    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Find locally </span><span class="si">{</span><span class="n">image_with_tag</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="check_docker_image_exists-4024"><a href="#check_docker_image_exists-4024"><span class="linenos">4024</span></a>                    <span class="k">return</span> <span class="kc">True</span>
</span><span id="check_docker_image_exists-4025"><a href="#check_docker_image_exists-4025"><span class="linenos">4025</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="check_docker_image_exists-4026"><a href="#check_docker_image_exists-4026"><span class="linenos">4026</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="check_docker_image_exists-4027"><a href="#check_docker_image_exists-4027"><span class="linenos">4027</span></a>        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Docker image check: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="check_docker_image_exists-4028"><a href="#check_docker_image_exists-4028"><span class="linenos">4028</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Checks if a Docker image with a specific tag exists in the local repository.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>image_with_tag: Image name with tag (e.g., "image</strong>: version")</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True if the image exists, False otherwise</p>
</blockquote>
</div>


                </section>
                <section id="params_string_to_dict">
                            <input id="params_string_to_dict-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">params_string_to_dict</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">params</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">param_sep</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;:&#39;</span>,</span><span class="param">	<span class="n">var_val_sep</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;=&#39;</span>,</span><span class="param">	<span class="n">val_clear</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;+&#39;</span><span class="p">:</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>,</span><span class="param">	<span class="n">header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span><span class="return-annotation">) -> <span class="nb">dict</span>:</span></span>

                <label class="view-source-button" for="params_string_to_dict-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#params_string_to_dict"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="params_string_to_dict-4031"><a href="#params_string_to_dict-4031"><span class="linenos">4031</span></a><span class="k">def</span> <span class="nf">params_string_to_dict</span><span class="p">(</span>
</span><span id="params_string_to_dict-4032"><a href="#params_string_to_dict-4032"><span class="linenos">4032</span></a>    <span class="n">params</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="params_string_to_dict-4033"><a href="#params_string_to_dict-4033"><span class="linenos">4033</span></a>    <span class="n">param_sep</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span>
</span><span id="params_string_to_dict-4034"><a href="#params_string_to_dict-4034"><span class="linenos">4034</span></a>    <span class="n">var_val_sep</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span>
</span><span id="params_string_to_dict-4035"><a href="#params_string_to_dict-4035"><span class="linenos">4035</span></a>    <span class="n">val_clear</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;+&quot;</span><span class="p">:</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">},</span>
</span><span id="params_string_to_dict-4036"><a href="#params_string_to_dict-4036"><span class="linenos">4036</span></a>    <span class="n">header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="params_string_to_dict-4037"><a href="#params_string_to_dict-4037"><span class="linenos">4037</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="params_string_to_dict-4038"><a href="#params_string_to_dict-4038"><span class="linenos">4038</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="params_string_to_dict-4039"><a href="#params_string_to_dict-4039"><span class="linenos">4039</span></a><span class="sd">    The `params_string_to_dict` function in Python converts a string of parameters into a dictionary</span>
</span><span id="params_string_to_dict-4040"><a href="#params_string_to_dict-4040"><span class="linenos">4040</span></a><span class="sd">    using specified separators and clears certain characters from the parameter values.</span>
</span><span id="params_string_to_dict-4041"><a href="#params_string_to_dict-4041"><span class="linenos">4041</span></a>
</span><span id="params_string_to_dict-4042"><a href="#params_string_to_dict-4042"><span class="linenos">4042</span></a><span class="sd">    :param params: The `params` parameter in the `params_string_to_dict` function is a string of</span>
</span><span id="params_string_to_dict-4043"><a href="#params_string_to_dict-4043"><span class="linenos">4043</span></a><span class="sd">    parameters that you want to convert into a dictionary. It contains the information you want to parse</span>
</span><span id="params_string_to_dict-4044"><a href="#params_string_to_dict-4044"><span class="linenos">4044</span></a><span class="sd">    and organize into key-value pairs</span>
</span><span id="params_string_to_dict-4045"><a href="#params_string_to_dict-4045"><span class="linenos">4045</span></a><span class="sd">    :type params: str</span>
</span><span id="params_string_to_dict-4046"><a href="#params_string_to_dict-4046"><span class="linenos">4046</span></a><span class="sd">    :param param_sep: The `param_sep` parameter in the `params_string_to_dict` function is used to</span>
</span><span id="params_string_to_dict-4047"><a href="#params_string_to_dict-4047"><span class="linenos">4047</span></a><span class="sd">    specify the separator that separates different parameters in the input string `params`. By default,</span>
</span><span id="params_string_to_dict-4048"><a href="#params_string_to_dict-4048"><span class="linenos">4048</span></a><span class="sd">    the `param_sep` is set to &quot;:&quot; in the function definition. This means that the function expects the</span>
</span><span id="params_string_to_dict-4049"><a href="#params_string_to_dict-4049"><span class="linenos">4049</span></a><span class="sd">    parameters in the input, defaults to :</span>
</span><span id="params_string_to_dict-4050"><a href="#params_string_to_dict-4050"><span class="linenos">4050</span></a><span class="sd">    :type param_sep: str (optional)</span>
</span><span id="params_string_to_dict-4051"><a href="#params_string_to_dict-4051"><span class="linenos">4051</span></a><span class="sd">    :param var_val_sep: The `var_val_sep` parameter in the `params_string_to_dict` function is used to</span>
</span><span id="params_string_to_dict-4052"><a href="#params_string_to_dict-4052"><span class="linenos">4052</span></a><span class="sd">    specify the separator between the variable and value in the input string `params`. By default, it is</span>
</span><span id="params_string_to_dict-4053"><a href="#params_string_to_dict-4053"><span class="linenos">4053</span></a><span class="sd">    set to `&quot;=&quot;`, which means that the function expects the format of each parameter in the `params`,</span>
</span><span id="params_string_to_dict-4054"><a href="#params_string_to_dict-4054"><span class="linenos">4054</span></a><span class="sd">    defaults to =</span>
</span><span id="params_string_to_dict-4055"><a href="#params_string_to_dict-4055"><span class="linenos">4055</span></a><span class="sd">    :type var_val_sep: str (optional)</span>
</span><span id="params_string_to_dict-4056"><a href="#params_string_to_dict-4056"><span class="linenos">4056</span></a><span class="sd">    :param val_clear: The `val_clear` parameter in the `params_string_to_dict` function is a dictionary</span>
</span><span id="params_string_to_dict-4057"><a href="#params_string_to_dict-4057"><span class="linenos">4057</span></a><span class="sd">    that contains key-value pairs used to clear specific characters from the parameter values before</span>
</span><span id="params_string_to_dict-4058"><a href="#params_string_to_dict-4058"><span class="linenos">4058</span></a><span class="sd">    storing them in the resulting dictionary</span>
</span><span id="params_string_to_dict-4059"><a href="#params_string_to_dict-4059"><span class="linenos">4059</span></a><span class="sd">    :type val_clear: dict</span>
</span><span id="params_string_to_dict-4060"><a href="#params_string_to_dict-4060"><span class="linenos">4060</span></a><span class="sd">    :param header: The `header` parameter in the `params_string_to_dict` function is a boolean flag that</span>
</span><span id="params_string_to_dict-4061"><a href="#params_string_to_dict-4061"><span class="linenos">4061</span></a><span class="sd">    determines whether the input string `params` has a header that should be skipped when processing the</span>
</span><span id="params_string_to_dict-4062"><a href="#params_string_to_dict-4062"><span class="linenos">4062</span></a><span class="sd">    parameters. If `header` is set to `True`, the function will start processing parameters from the</span>
</span><span id="params_string_to_dict-4063"><a href="#params_string_to_dict-4063"><span class="linenos">4063</span></a><span class="sd">    second line onwards, defaults to True</span>
</span><span id="params_string_to_dict-4064"><a href="#params_string_to_dict-4064"><span class="linenos">4064</span></a><span class="sd">    :type header: bool (optional)</span>
</span><span id="params_string_to_dict-4065"><a href="#params_string_to_dict-4065"><span class="linenos">4065</span></a><span class="sd">    :return: The function `params_string_to_dict` returns a dictionary containing the parameters</span>
</span><span id="params_string_to_dict-4066"><a href="#params_string_to_dict-4066"><span class="linenos">4066</span></a><span class="sd">    extracted from the input string `params`.</span>
</span><span id="params_string_to_dict-4067"><a href="#params_string_to_dict-4067"><span class="linenos">4067</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="params_string_to_dict-4068"><a href="#params_string_to_dict-4068"><span class="linenos">4068</span></a>
</span><span id="params_string_to_dict-4069"><a href="#params_string_to_dict-4069"><span class="linenos">4069</span></a>    <span class="c1"># Params dict</span>
</span><span id="params_string_to_dict-4070"><a href="#params_string_to_dict-4070"><span class="linenos">4070</span></a>    <span class="n">params_dict</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="params_string_to_dict-4071"><a href="#params_string_to_dict-4071"><span class="linenos">4071</span></a>
</span><span id="params_string_to_dict-4072"><a href="#params_string_to_dict-4072"><span class="linenos">4072</span></a>    <span class="c1"># Header</span>
</span><span id="params_string_to_dict-4073"><a href="#params_string_to_dict-4073"><span class="linenos">4073</span></a>    <span class="k">if</span> <span class="n">header</span><span class="p">:</span>
</span><span id="params_string_to_dict-4074"><a href="#params_string_to_dict-4074"><span class="linenos">4074</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="params_string_to_dict-4075"><a href="#params_string_to_dict-4075"><span class="linenos">4075</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="params_string_to_dict-4076"><a href="#params_string_to_dict-4076"><span class="linenos">4076</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="params_string_to_dict-4077"><a href="#params_string_to_dict-4077"><span class="linenos">4077</span></a>
</span><span id="params_string_to_dict-4078"><a href="#params_string_to_dict-4078"><span class="linenos">4078</span></a>    <span class="c1"># Params</span>
</span><span id="params_string_to_dict-4079"><a href="#params_string_to_dict-4079"><span class="linenos">4079</span></a>    <span class="n">params_split</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">param_sep</span><span class="p">)</span>
</span><span id="params_string_to_dict-4080"><a href="#params_string_to_dict-4080"><span class="linenos">4080</span></a>    <span class="k">for</span> <span class="n">params_option</span> <span class="ow">in</span> <span class="n">params_split</span><span class="p">[</span><span class="n">start</span><span class="p">:]:</span>
</span><span id="params_string_to_dict-4081"><a href="#params_string_to_dict-4081"><span class="linenos">4081</span></a>        <span class="k">if</span> <span class="n">params_option</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="params_string_to_dict-4082"><a href="#params_string_to_dict-4082"><span class="linenos">4082</span></a>            <span class="n">params_option_var_val</span> <span class="o">=</span> <span class="n">params_option</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">var_val_sep</span><span class="p">)</span>
</span><span id="params_string_to_dict-4083"><a href="#params_string_to_dict-4083"><span class="linenos">4083</span></a>            <span class="n">params_option_var</span> <span class="o">=</span> <span class="n">params_option_var_val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="params_string_to_dict-4084"><a href="#params_string_to_dict-4084"><span class="linenos">4084</span></a>            <span class="n">params_option_val</span> <span class="o">=</span> <span class="n">params_option_var_val</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="params_string_to_dict-4085"><a href="#params_string_to_dict-4085"><span class="linenos">4085</span></a>            <span class="k">if</span> <span class="n">params_option_val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="params_string_to_dict-4086"><a href="#params_string_to_dict-4086"><span class="linenos">4086</span></a>                <span class="k">if</span> <span class="n">params_option_val</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]:</span>
</span><span id="params_string_to_dict-4087"><a href="#params_string_to_dict-4087"><span class="linenos">4087</span></a>                    <span class="n">params_option_val</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="params_string_to_dict-4088"><a href="#params_string_to_dict-4088"><span class="linenos">4088</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="params_string_to_dict-4089"><a href="#params_string_to_dict-4089"><span class="linenos">4089</span></a>                    <span class="c1"># clear value</span>
</span><span id="params_string_to_dict-4090"><a href="#params_string_to_dict-4090"><span class="linenos">4090</span></a>                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">val_clear</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="params_string_to_dict-4091"><a href="#params_string_to_dict-4091"><span class="linenos">4091</span></a>                        <span class="n">params_option_val</span> <span class="o">=</span> <span class="n">params_option_val</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="params_string_to_dict-4092"><a href="#params_string_to_dict-4092"><span class="linenos">4092</span></a>                <span class="n">params_dict</span><span class="p">[</span><span class="n">params_option_var</span><span class="p">]</span> <span class="o">=</span> <span class="n">params_option_val</span>
</span><span id="params_string_to_dict-4093"><a href="#params_string_to_dict-4093"><span class="linenos">4093</span></a>    <span class="k">return</span> <span class="n">params_dict</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#params_string_to_dict">params_string_to_dict</a></code> function in Python converts a string of parameters into a dictionary
using specified separators and clears certain characters from the parameter values.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>params</strong>:  The <code>params</code> parameter in the <code><a href="#params_string_to_dict">params_string_to_dict</a></code> function is a string of
parameters that you want to convert into a dictionary. It contains the information you want to parse
and organize into key-value pairs</li>
<li><strong>param_sep</strong>:  The <code>param_sep</code> parameter in the <code><a href="#params_string_to_dict">params_string_to_dict</a></code> function is used to
specify the separator that separates different parameters in the input string <code>params</code>. By default,
the <code>param_sep</code> is set to ":" in the function definition. This means that the function expects the
parameters in the input, defaults to :</li>
<li><strong>var_val_sep</strong>:  The <code>var_val_sep</code> parameter in the <code><a href="#params_string_to_dict">params_string_to_dict</a></code> function is used to
specify the separator between the variable and value in the input string <code>params</code>. By default, it is
set to <code>"="</code>, which means that the function expects the format of each parameter in the <code>params</code>,
defaults to =</li>
<li><strong>val_clear</strong>:  The <code>val_clear</code> parameter in the <code><a href="#params_string_to_dict">params_string_to_dict</a></code> function is a dictionary
that contains key-value pairs used to clear specific characters from the parameter values before
storing them in the resulting dictionary</li>
<li><strong>header</strong>:  The <code>header</code> parameter in the <code><a href="#params_string_to_dict">params_string_to_dict</a></code> function is a boolean flag that
determines whether the input string <code>params</code> has a header that should be skipped when processing the
parameters. If <code>header</code> is set to <code>True</code>, the function will start processing parameters from the
second line onwards, defaults to True</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#params_string_to_dict">params_string_to_dict</a></code> returns a dictionary containing the parameters
  extracted from the input string <code>params</code>.</p>
</blockquote>
</div>


                </section>
                <section id="determine_value_type">
                            <input id="determine_value_type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">determine_value_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">value</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">sep</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span>, </span><span class="param"><span class="n">skip_null</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="determine_value_type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#determine_value_type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="determine_value_type-4096"><a href="#determine_value_type-4096"><span class="linenos">4096</span></a><span class="k">def</span> <span class="nf">determine_value_type</span><span class="p">(</span>
</span><span id="determine_value_type-4097"><a href="#determine_value_type-4097"><span class="linenos">4097</span></a>    <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sep</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="n">skip_null</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">]</span>
</span><span id="determine_value_type-4098"><a href="#determine_value_type-4098"><span class="linenos">4098</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="determine_value_type-4099"><a href="#determine_value_type-4099"><span class="linenos">4099</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="determine_value_type-4100"><a href="#determine_value_type-4100"><span class="linenos">4100</span></a><span class="sd">    The function `determine_value_type` determines the type of a given value in a string format,</span>
</span><span id="determine_value_type-4101"><a href="#determine_value_type-4101"><span class="linenos">4101</span></a><span class="sd">    handling lists of values separated by a specified separator and skipping specified null-like</span>
</span><span id="determine_value_type-4102"><a href="#determine_value_type-4102"><span class="linenos">4102</span></a><span class="sd">    values.</span>
</span><span id="determine_value_type-4103"><a href="#determine_value_type-4103"><span class="linenos">4103</span></a>
</span><span id="determine_value_type-4104"><a href="#determine_value_type-4104"><span class="linenos">4104</span></a><span class="sd">    :param value: The `value` parameter in the `determine_value_type` function is the input value</span>
</span><span id="determine_value_type-4105"><a href="#determine_value_type-4105"><span class="linenos">4105</span></a><span class="sd">    that you want to determine the type of. It can be a string containing one or more values</span>
</span><span id="determine_value_type-4106"><a href="#determine_value_type-4106"><span class="linenos">4106</span></a><span class="sd">    separated by a specified separator (default is &#39;;&#39;)</span>
</span><span id="determine_value_type-4107"><a href="#determine_value_type-4107"><span class="linenos">4107</span></a><span class="sd">    :type value: str</span>
</span><span id="determine_value_type-4108"><a href="#determine_value_type-4108"><span class="linenos">4108</span></a><span class="sd">    :param sep: The `sep` parameter in the `determine_value_type` function is used to specify the</span>
</span><span id="determine_value_type-4109"><a href="#determine_value_type-4109"><span class="linenos">4109</span></a><span class="sd">    separator character that is used to split the input `value` string into individual values. By</span>
</span><span id="determine_value_type-4110"><a href="#determine_value_type-4110"><span class="linenos">4110</span></a><span class="sd">    default, the separator is set to &quot;;&quot;, but you can change it to a different character if needed,</span>
</span><span id="determine_value_type-4111"><a href="#determine_value_type-4111"><span class="linenos">4111</span></a><span class="sd">    defaults to ;</span>
</span><span id="determine_value_type-4112"><a href="#determine_value_type-4112"><span class="linenos">4112</span></a><span class="sd">    :type sep: str (optional)</span>
</span><span id="determine_value_type-4113"><a href="#determine_value_type-4113"><span class="linenos">4113</span></a><span class="sd">    :param skip_null: The `skip_null` parameter in the `determine_value_type` function is a list</span>
</span><span id="determine_value_type-4114"><a href="#determine_value_type-4114"><span class="linenos">4114</span></a><span class="sd">    that contains values that should be skipped during the type determination process. These values</span>
</span><span id="determine_value_type-4115"><a href="#determine_value_type-4115"><span class="linenos">4115</span></a><span class="sd">    are considered as null-like or empty values and are not taken into account when determining the</span>
</span><span id="determine_value_type-4116"><a href="#determine_value_type-4116"><span class="linenos">4116</span></a><span class="sd">    type of the given value</span>
</span><span id="determine_value_type-4117"><a href="#determine_value_type-4117"><span class="linenos">4117</span></a><span class="sd">    :type skip_null: list</span>
</span><span id="determine_value_type-4118"><a href="#determine_value_type-4118"><span class="linenos">4118</span></a><span class="sd">    :return: The function `determine_value_type` returns a string indicating the type of the given</span>
</span><span id="determine_value_type-4119"><a href="#determine_value_type-4119"><span class="linenos">4119</span></a><span class="sd">    value. The possible return values are:</span>
</span><span id="determine_value_type-4120"><a href="#determine_value_type-4120"><span class="linenos">4120</span></a><span class="sd">    - &quot;VARCHAR&quot; if the value contains at least one non-numeric character</span>
</span><span id="determine_value_type-4121"><a href="#determine_value_type-4121"><span class="linenos">4121</span></a><span class="sd">    - &quot;DOUBLE&quot; if the value contains at least one floating-point number</span>
</span><span id="determine_value_type-4122"><a href="#determine_value_type-4122"><span class="linenos">4122</span></a><span class="sd">    - &quot;BIGINT&quot; if the value contains only integers</span>
</span><span id="determine_value_type-4123"><a href="#determine_value_type-4123"><span class="linenos">4123</span></a><span class="sd">    - None if the value is empty or does not match any</span>
</span><span id="determine_value_type-4124"><a href="#determine_value_type-4124"><span class="linenos">4124</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="determine_value_type-4125"><a href="#determine_value_type-4125"><span class="linenos">4125</span></a>
</span><span id="determine_value_type-4126"><a href="#determine_value_type-4126"><span class="linenos">4126</span></a>    <span class="c1"># Split the value by sep (dafult &#39;;&#39;) to handle lists of values</span>
</span><span id="determine_value_type-4127"><a href="#determine_value_type-4127"><span class="linenos">4127</span></a>    <span class="n">values</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="p">)</span>
</span><span id="determine_value_type-4128"><a href="#determine_value_type-4128"><span class="linenos">4128</span></a>
</span><span id="determine_value_type-4129"><a href="#determine_value_type-4129"><span class="linenos">4129</span></a>    <span class="n">has_float</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="determine_value_type-4130"><a href="#determine_value_type-4130"><span class="linenos">4130</span></a>    <span class="n">has_int</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="determine_value_type-4131"><a href="#determine_value_type-4131"><span class="linenos">4131</span></a>    <span class="n">has_string</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="determine_value_type-4132"><a href="#determine_value_type-4132"><span class="linenos">4132</span></a>
</span><span id="determine_value_type-4133"><a href="#determine_value_type-4133"><span class="linenos">4133</span></a>    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
</span><span id="determine_value_type-4134"><a href="#determine_value_type-4134"><span class="linenos">4134</span></a>        <span class="n">val</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="determine_value_type-4135"><a href="#determine_value_type-4135"><span class="linenos">4135</span></a>
</span><span id="determine_value_type-4136"><a href="#determine_value_type-4136"><span class="linenos">4136</span></a>        <span class="c1"># Skip empty or null-like values</span>
</span><span id="determine_value_type-4137"><a href="#determine_value_type-4137"><span class="linenos">4137</span></a>        <span class="k">if</span> <span class="n">skip_null</span> <span class="ow">and</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">skip_null</span><span class="p">:</span>
</span><span id="determine_value_type-4138"><a href="#determine_value_type-4138"><span class="linenos">4138</span></a>            <span class="k">continue</span>
</span><span id="determine_value_type-4139"><a href="#determine_value_type-4139"><span class="linenos">4139</span></a>
</span><span id="determine_value_type-4140"><a href="#determine_value_type-4140"><span class="linenos">4140</span></a>        <span class="c1"># Check if value is integer</span>
</span><span id="determine_value_type-4141"><a href="#determine_value_type-4141"><span class="linenos">4141</span></a>        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^-?\d+$&quot;</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
</span><span id="determine_value_type-4142"><a href="#determine_value_type-4142"><span class="linenos">4142</span></a>            <span class="n">has_int</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="determine_value_type-4143"><a href="#determine_value_type-4143"><span class="linenos">4143</span></a>        <span class="c1"># Check if value is float</span>
</span><span id="determine_value_type-4144"><a href="#determine_value_type-4144"><span class="linenos">4144</span></a>        <span class="k">elif</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^-?\d*\.\d+$&quot;</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
</span><span id="determine_value_type-4145"><a href="#determine_value_type-4145"><span class="linenos">4145</span></a>            <span class="n">has_float</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="determine_value_type-4146"><a href="#determine_value_type-4146"><span class="linenos">4146</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="determine_value_type-4147"><a href="#determine_value_type-4147"><span class="linenos">4147</span></a>            <span class="n">has_string</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="determine_value_type-4148"><a href="#determine_value_type-4148"><span class="linenos">4148</span></a>            <span class="k">return</span> <span class="s2">&quot;VARCHAR&quot;</span>  <span class="c1"># force return VARCHAR to speed up</span>
</span><span id="determine_value_type-4149"><a href="#determine_value_type-4149"><span class="linenos">4149</span></a>
</span><span id="determine_value_type-4150"><a href="#determine_value_type-4150"><span class="linenos">4150</span></a>    <span class="k">if</span> <span class="n">has_string</span><span class="p">:</span>
</span><span id="determine_value_type-4151"><a href="#determine_value_type-4151"><span class="linenos">4151</span></a>        <span class="k">return</span> <span class="s2">&quot;VARCHAR&quot;</span>
</span><span id="determine_value_type-4152"><a href="#determine_value_type-4152"><span class="linenos">4152</span></a>    <span class="k">elif</span> <span class="n">has_float</span><span class="p">:</span>
</span><span id="determine_value_type-4153"><a href="#determine_value_type-4153"><span class="linenos">4153</span></a>        <span class="k">return</span> <span class="s2">&quot;DOUBLE&quot;</span>
</span><span id="determine_value_type-4154"><a href="#determine_value_type-4154"><span class="linenos">4154</span></a>    <span class="k">elif</span> <span class="n">has_int</span><span class="p">:</span>
</span><span id="determine_value_type-4155"><a href="#determine_value_type-4155"><span class="linenos">4155</span></a>        <span class="k">return</span> <span class="s2">&quot;BIGINT&quot;</span>
</span><span id="determine_value_type-4156"><a href="#determine_value_type-4156"><span class="linenos">4156</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="determine_value_type-4157"><a href="#determine_value_type-4157"><span class="linenos">4157</span></a>        <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Default to None if no identifiable type is found</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#determine_value_type">determine_value_type</a></code> determines the type of a given value in a string format,
handling lists of values separated by a specified separator and skipping specified null-like
values.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>value</strong>:  The <code>value</code> parameter in the <code><a href="#determine_value_type">determine_value_type</a></code> function is the input value
that you want to determine the type of. It can be a string containing one or more values
separated by a specified separator (default is ';')</li>
<li><strong>sep</strong>:  The <code>sep</code> parameter in the <code><a href="#determine_value_type">determine_value_type</a></code> function is used to specify the
separator character that is used to split the input <code>value</code> string into individual values. By
default, the separator is set to ";", but you can change it to a different character if needed,
defaults to ;</li>
<li><strong>skip_null</strong>:  The <code>skip_null</code> parameter in the <code><a href="#determine_value_type">determine_value_type</a></code> function is a list
that contains values that should be skipped during the type determination process. These values
are considered as null-like or empty values and are not taken into account when determining the
type of the given value</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#determine_value_type">determine_value_type</a></code> returns a string indicating the type of the given
  value. The possible return values are:</p>
  
  <ul>
  <li>"VARCHAR" if the value contains at least one non-numeric character</li>
  <li>"DOUBLE" if the value contains at least one floating-point number</li>
  <li>"BIGINT" if the value contains only integers</li>
  <li>None if the value is empty or does not match any</li>
  </ul>
</blockquote>
</div>


                </section>
                <section id="determine_column_types">
                            <input id="determine_column_types-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">determine_column_types</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">values_list</span><span class="p">:</span> <span class="nb">list</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="determine_column_types-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#determine_column_types"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="determine_column_types-4160"><a href="#determine_column_types-4160"><span class="linenos">4160</span></a><span class="k">def</span> <span class="nf">determine_column_types</span><span class="p">(</span><span class="n">values_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="determine_column_types-4161"><a href="#determine_column_types-4161"><span class="linenos">4161</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="determine_column_types-4162"><a href="#determine_column_types-4162"><span class="linenos">4162</span></a><span class="sd">    The function `determine_column_types` analyzes a list of values to determine the predominant</span>
</span><span id="determine_column_types-4163"><a href="#determine_column_types-4163"><span class="linenos">4163</span></a><span class="sd">    data type among VARCHAR, DOUBLE, and BIGINT.</span>
</span><span id="determine_column_types-4164"><a href="#determine_column_types-4164"><span class="linenos">4164</span></a>
</span><span id="determine_column_types-4165"><a href="#determine_column_types-4165"><span class="linenos">4165</span></a><span class="sd">    :param values_list: It seems like you have provided the code snippet for a function that</span>
</span><span id="determine_column_types-4166"><a href="#determine_column_types-4166"><span class="linenos">4166</span></a><span class="sd">    determines the type of values in a list, but you have not provided the actual values_list that</span>
</span><span id="determine_column_types-4167"><a href="#determine_column_types-4167"><span class="linenos">4167</span></a><span class="sd">    the function will operate on. If you provide me with the values_list, I can help you test the</span>
</span><span id="determine_column_types-4168"><a href="#determine_column_types-4168"><span class="linenos">4168</span></a><span class="sd">    function and see how it determines the</span>
</span><span id="determine_column_types-4169"><a href="#determine_column_types-4169"><span class="linenos">4169</span></a><span class="sd">    :type values_list: list</span>
</span><span id="determine_column_types-4170"><a href="#determine_column_types-4170"><span class="linenos">4170</span></a><span class="sd">    :return: the type of the column based on the types of values present in the input list. It will</span>
</span><span id="determine_column_types-4171"><a href="#determine_column_types-4171"><span class="linenos">4171</span></a><span class="sd">    return &quot;VARCHAR&quot; if the list contains any string values, &quot;DOUBLE&quot; if it contains any float</span>
</span><span id="determine_column_types-4172"><a href="#determine_column_types-4172"><span class="linenos">4172</span></a><span class="sd">    values, &quot;BIGINT&quot; if it contains any integer values, and &quot;VARCHAR&quot; if none of the specific types</span>
</span><span id="determine_column_types-4173"><a href="#determine_column_types-4173"><span class="linenos">4173</span></a><span class="sd">    are found.</span>
</span><span id="determine_column_types-4174"><a href="#determine_column_types-4174"><span class="linenos">4174</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="determine_column_types-4175"><a href="#determine_column_types-4175"><span class="linenos">4175</span></a>
</span><span id="determine_column_types-4176"><a href="#determine_column_types-4176"><span class="linenos">4176</span></a>    <span class="n">has_float</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="determine_column_types-4177"><a href="#determine_column_types-4177"><span class="linenos">4177</span></a>    <span class="n">has_int</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="determine_column_types-4178"><a href="#determine_column_types-4178"><span class="linenos">4178</span></a>    <span class="n">has_string</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="determine_column_types-4179"><a href="#determine_column_types-4179"><span class="linenos">4179</span></a>
</span><span id="determine_column_types-4180"><a href="#determine_column_types-4180"><span class="linenos">4180</span></a>    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values_list</span><span class="p">:</span>
</span><span id="determine_column_types-4181"><a href="#determine_column_types-4181"><span class="linenos">4181</span></a>        <span class="n">value_type</span> <span class="o">=</span> <span class="n">determine_value_type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="determine_column_types-4182"><a href="#determine_column_types-4182"><span class="linenos">4182</span></a>
</span><span id="determine_column_types-4183"><a href="#determine_column_types-4183"><span class="linenos">4183</span></a>        <span class="k">if</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;VARCHAR&quot;</span><span class="p">:</span>
</span><span id="determine_column_types-4184"><a href="#determine_column_types-4184"><span class="linenos">4184</span></a>            <span class="n">has_string</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="determine_column_types-4185"><a href="#determine_column_types-4185"><span class="linenos">4185</span></a>            <span class="k">return</span> <span class="s2">&quot;VARCHAR&quot;</span>  <span class="c1"># force return VARCHAR to speed up</span>
</span><span id="determine_column_types-4186"><a href="#determine_column_types-4186"><span class="linenos">4186</span></a>        <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;DOUBLE&quot;</span><span class="p">:</span>
</span><span id="determine_column_types-4187"><a href="#determine_column_types-4187"><span class="linenos">4187</span></a>            <span class="n">has_float</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="determine_column_types-4188"><a href="#determine_column_types-4188"><span class="linenos">4188</span></a>        <span class="k">elif</span> <span class="n">value_type</span> <span class="o">==</span> <span class="s2">&quot;BIGINT&quot;</span><span class="p">:</span>
</span><span id="determine_column_types-4189"><a href="#determine_column_types-4189"><span class="linenos">4189</span></a>            <span class="n">has_int</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="determine_column_types-4190"><a href="#determine_column_types-4190"><span class="linenos">4190</span></a>
</span><span id="determine_column_types-4191"><a href="#determine_column_types-4191"><span class="linenos">4191</span></a>    <span class="k">if</span> <span class="n">has_string</span><span class="p">:</span>
</span><span id="determine_column_types-4192"><a href="#determine_column_types-4192"><span class="linenos">4192</span></a>        <span class="k">return</span> <span class="s2">&quot;VARCHAR&quot;</span>
</span><span id="determine_column_types-4193"><a href="#determine_column_types-4193"><span class="linenos">4193</span></a>    <span class="k">elif</span> <span class="n">has_float</span><span class="p">:</span>
</span><span id="determine_column_types-4194"><a href="#determine_column_types-4194"><span class="linenos">4194</span></a>        <span class="k">return</span> <span class="s2">&quot;DOUBLE&quot;</span>
</span><span id="determine_column_types-4195"><a href="#determine_column_types-4195"><span class="linenos">4195</span></a>    <span class="k">elif</span> <span class="n">has_int</span><span class="p">:</span>
</span><span id="determine_column_types-4196"><a href="#determine_column_types-4196"><span class="linenos">4196</span></a>        <span class="k">return</span> <span class="s2">&quot;BIGINT&quot;</span>
</span><span id="determine_column_types-4197"><a href="#determine_column_types-4197"><span class="linenos">4197</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="determine_column_types-4198"><a href="#determine_column_types-4198"><span class="linenos">4198</span></a>        <span class="k">return</span> <span class="s2">&quot;VARCHAR&quot;</span>  <span class="c1"># Default to VARCHAR if no identifiable type is found</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#determine_column_types">determine_column_types</a></code> analyzes a list of values to determine the predominant
data type among VARCHAR, DOUBLE, and BIGINT.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>values_list</strong>:  It seems like you have provided the code snippet for a function that
determines the type of values in a list, but you have not provided the actual values_list that
the function will operate on. If you provide me with the values_list, I can help you test the
function and see how it determines the</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>the type of the column based on the types of values present in the input list. It will
  return "VARCHAR" if the list contains any string values, "DOUBLE" if it contains any float
  values, "BIGINT" if it contains any integer values, and "VARCHAR" if none of the specific types
  are found.</p>
</blockquote>
</div>


                </section>
                <section id="detect_column_type">
                            <input id="detect_column_type-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">detect_column_type</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">column</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="detect_column_type-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#detect_column_type"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="detect_column_type-4201"><a href="#detect_column_type-4201"><span class="linenos">4201</span></a><span class="k">def</span> <span class="nf">detect_column_type</span><span class="p">(</span><span class="n">column</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="detect_column_type-4202"><a href="#detect_column_type-4202"><span class="linenos">4202</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="detect_column_type-4203"><a href="#detect_column_type-4203"><span class="linenos">4203</span></a><span class="sd">    The function `detect_column_type` determines the type of a given column in a DataFrame as either</span>
</span><span id="detect_column_type-4204"><a href="#detect_column_type-4204"><span class="linenos">4204</span></a><span class="sd">    DATETIME, BOOLEAN, DOUBLE, or VARCHAR.</span>
</span><span id="detect_column_type-4205"><a href="#detect_column_type-4205"><span class="linenos">4205</span></a>
</span><span id="detect_column_type-4206"><a href="#detect_column_type-4206"><span class="linenos">4206</span></a><span class="sd">    :param column: The function `detect_column_type` takes a column as input and determines its data</span>
</span><span id="detect_column_type-4207"><a href="#detect_column_type-4207"><span class="linenos">4207</span></a><span class="sd">    type based on certain conditions. The conditions are as follows:</span>
</span><span id="detect_column_type-4208"><a href="#detect_column_type-4208"><span class="linenos">4208</span></a><span class="sd">    :return: The function `detect_column_type` returns a string indicating the type of data in the input</span>
</span><span id="detect_column_type-4209"><a href="#detect_column_type-4209"><span class="linenos">4209</span></a><span class="sd">    column. The possible return values are &quot;DATETIME&quot;, &quot;BOOLEAN&quot;, &quot;DOUBLE&quot;, or &quot;VARCHAR&quot; based on the</span>
</span><span id="detect_column_type-4210"><a href="#detect_column_type-4210"><span class="linenos">4210</span></a><span class="sd">    conditions checked in the function.</span>
</span><span id="detect_column_type-4211"><a href="#detect_column_type-4211"><span class="linenos">4211</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="detect_column_type-4212"><a href="#detect_column_type-4212"><span class="linenos">4212</span></a>
</span><span id="detect_column_type-4213"><a href="#detect_column_type-4213"><span class="linenos">4213</span></a>    <span class="kn">from</span> <span class="nn">pandas.api.types</span> <span class="kn">import</span> <span class="n">is_datetime64_any_dtype</span> <span class="k">as</span> <span class="n">is_datetime</span>
</span><span id="detect_column_type-4214"><a href="#detect_column_type-4214"><span class="linenos">4214</span></a>
</span><span id="detect_column_type-4215"><a href="#detect_column_type-4215"><span class="linenos">4215</span></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">column</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="detect_column_type-4216"><a href="#detect_column_type-4216"><span class="linenos">4216</span></a>        <span class="k">return</span> <span class="s2">&quot;VARCHAR&quot;</span>
</span><span id="detect_column_type-4217"><a href="#detect_column_type-4217"><span class="linenos">4217</span></a>    <span class="k">elif</span> <span class="n">is_datetime</span><span class="p">(</span><span class="n">column</span><span class="p">):</span>
</span><span id="detect_column_type-4218"><a href="#detect_column_type-4218"><span class="linenos">4218</span></a>        <span class="k">return</span> <span class="s2">&quot;DATETIME&quot;</span>
</span><span id="detect_column_type-4219"><a href="#detect_column_type-4219"><span class="linenos">4219</span></a>    <span class="k">elif</span> <span class="n">column</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
</span><span id="detect_column_type-4220"><a href="#detect_column_type-4220"><span class="linenos">4220</span></a>        <span class="k">return</span> <span class="s2">&quot;BOOLEAN&quot;</span>
</span><span id="detect_column_type-4221"><a href="#detect_column_type-4221"><span class="linenos">4221</span></a>    <span class="k">elif</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;coerce&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">notnull</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
</span><span id="detect_column_type-4222"><a href="#detect_column_type-4222"><span class="linenos">4222</span></a>        <span class="k">return</span> <span class="s2">&quot;DOUBLE&quot;</span>
</span><span id="detect_column_type-4223"><a href="#detect_column_type-4223"><span class="linenos">4223</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="detect_column_type-4224"><a href="#detect_column_type-4224"><span class="linenos">4224</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="detect_column_type-4225"><a href="#detect_column_type-4225"><span class="linenos">4225</span></a>            <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">column</span><span class="p">)</span>
</span><span id="detect_column_type-4226"><a href="#detect_column_type-4226"><span class="linenos">4226</span></a>            <span class="k">return</span> <span class="s2">&quot;DOUBLE&quot;</span>
</span><span id="detect_column_type-4227"><a href="#detect_column_type-4227"><span class="linenos">4227</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="detect_column_type-4228"><a href="#detect_column_type-4228"><span class="linenos">4228</span></a>            <span class="k">return</span> <span class="s2">&quot;VARCHAR&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The function <code><a href="#detect_column_type">detect_column_type</a></code> determines the type of a given column in a DataFrame as either
DATETIME, BOOLEAN, DOUBLE, or VARCHAR.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>column</strong>:  The function <code><a href="#detect_column_type">detect_column_type</a></code> takes a column as input and determines its data
type based on certain conditions. The conditions are as follows:</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#detect_column_type">detect_column_type</a></code> returns a string indicating the type of data in the input
  column. The possible return values are "DATETIME", "BOOLEAN", "DOUBLE", or "VARCHAR" based on the
  conditions checked in the function.</p>
</blockquote>
</div>


                </section>
                <section id="determine_column_number">
                            <input id="determine_column_number-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">determine_column_number</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">values_list</span><span class="p">:</span> <span class="nb">list</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="determine_column_number-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#determine_column_number"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="determine_column_number-4231"><a href="#determine_column_number-4231"><span class="linenos">4231</span></a><span class="k">def</span> <span class="nf">determine_column_number</span><span class="p">(</span><span class="n">values_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="determine_column_number-4232"><a href="#determine_column_number-4232"><span class="linenos">4232</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot; &quot;&quot;&quot;</span>
</span><span id="determine_column_number-4233"><a href="#determine_column_number-4233"><span class="linenos">4233</span></a>
</span><span id="determine_column_number-4234"><a href="#determine_column_number-4234"><span class="linenos">4234</span></a>    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values_list</span><span class="p">:</span>
</span><span id="determine_column_number-4235"><a href="#determine_column_number-4235"><span class="linenos">4235</span></a>        <span class="k">if</span> <span class="s2">&quot;;&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
</span><span id="determine_column_number-4236"><a href="#determine_column_number-4236"><span class="linenos">4236</span></a>            <span class="k">return</span> <span class="s2">&quot;.&quot;</span>
</span><span id="determine_column_number-4237"><a href="#determine_column_number-4237"><span class="linenos">4237</span></a>
</span><span id="determine_column_number-4238"><a href="#determine_column_number-4238"><span class="linenos">4238</span></a>    <span class="k">return</span> <span class="s2">&quot;1&quot;</span>
</span></pre></div>


    

                </section>
                <section id="clean_annotation_field">
                            <input id="clean_annotation_field-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">clean_annotation_field</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>, </span><span class="param"><span class="n">char_allowed</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="clean_annotation_field-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#clean_annotation_field"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="clean_annotation_field-4241"><a href="#clean_annotation_field-4241"><span class="linenos">4241</span></a><span class="k">def</span> <span class="nf">clean_annotation_field</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">char_allowed</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="clean_annotation_field-4242"><a href="#clean_annotation_field-4242"><span class="linenos">4242</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="clean_annotation_field-4243"><a href="#clean_annotation_field-4243"><span class="linenos">4243</span></a><span class="sd">    The `clean_annotation_field` function removes characters from a string that are not alphanumeric or</span>
</span><span id="clean_annotation_field-4244"><a href="#clean_annotation_field-4244"><span class="linenos">4244</span></a><span class="sd">    in a specified list.</span>
</span><span id="clean_annotation_field-4245"><a href="#clean_annotation_field-4245"><span class="linenos">4245</span></a>
</span><span id="clean_annotation_field-4246"><a href="#clean_annotation_field-4246"><span class="linenos">4246</span></a><span class="sd">    :param name: The `name` parameter is a string that represents the input text that you want to clean.</span>
</span><span id="clean_annotation_field-4247"><a href="#clean_annotation_field-4247"><span class="linenos">4247</span></a><span class="sd">    It typically contains annotations or other text that you want to process</span>
</span><span id="clean_annotation_field-4248"><a href="#clean_annotation_field-4248"><span class="linenos">4248</span></a><span class="sd">    :type name: str</span>
</span><span id="clean_annotation_field-4249"><a href="#clean_annotation_field-4249"><span class="linenos">4249</span></a><span class="sd">    :param char_allowed: The `char_allowed` parameter is a list that contains characters that are</span>
</span><span id="clean_annotation_field-4250"><a href="#clean_annotation_field-4250"><span class="linenos">4250</span></a><span class="sd">    allowed to remain in the `name` string after cleaning. Any character in the `name` string that is</span>
</span><span id="clean_annotation_field-4251"><a href="#clean_annotation_field-4251"><span class="linenos">4251</span></a><span class="sd">    not alphanumeric and not in the `char_allowed` list will be removed during the cleaning process</span>
</span><span id="clean_annotation_field-4252"><a href="#clean_annotation_field-4252"><span class="linenos">4252</span></a><span class="sd">    :type char_allowed: list</span>
</span><span id="clean_annotation_field-4253"><a href="#clean_annotation_field-4253"><span class="linenos">4253</span></a><span class="sd">    :return: The function `clean_annotation_field` returns a cleaned version of the `name` string, where</span>
</span><span id="clean_annotation_field-4254"><a href="#clean_annotation_field-4254"><span class="linenos">4254</span></a><span class="sd">    only alphanumeric characters and characters from the `char_allowed` list are kept.</span>
</span><span id="clean_annotation_field-4255"><a href="#clean_annotation_field-4255"><span class="linenos">4255</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="clean_annotation_field-4256"><a href="#clean_annotation_field-4256"><span class="linenos">4256</span></a>
</span><span id="clean_annotation_field-4257"><a href="#clean_annotation_field-4257"><span class="linenos">4257</span></a>    <span class="c1"># Init</span>
</span><span id="clean_annotation_field-4258"><a href="#clean_annotation_field-4258"><span class="linenos">4258</span></a>    <span class="k">if</span> <span class="n">char_allowed</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="clean_annotation_field-4259"><a href="#clean_annotation_field-4259"><span class="linenos">4259</span></a>        <span class="n">char_allowed</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="clean_annotation_field-4260"><a href="#clean_annotation_field-4260"><span class="linenos">4260</span></a>
</span><span id="clean_annotation_field-4261"><a href="#clean_annotation_field-4261"><span class="linenos">4261</span></a>    <span class="c1"># Convert char_allowed to a set for faster membership testing</span>
</span><span id="clean_annotation_field-4262"><a href="#clean_annotation_field-4262"><span class="linenos">4262</span></a>    <span class="n">char_allowed_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">char_allowed</span><span class="p">)</span>
</span><span id="clean_annotation_field-4263"><a href="#clean_annotation_field-4263"><span class="linenos">4263</span></a>
</span><span id="clean_annotation_field-4264"><a href="#clean_annotation_field-4264"><span class="linenos">4264</span></a>    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="clean_annotation_field-4265"><a href="#clean_annotation_field-4265"><span class="linenos">4265</span></a>        <span class="n">char</span> <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">name</span> <span class="k">if</span> <span class="p">(</span><span class="n">char</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="ow">or</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">char_allowed_set</span><span class="p">)</span>
</span><span id="clean_annotation_field-4266"><a href="#clean_annotation_field-4266"><span class="linenos">4266</span></a>    <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>The <code><a href="#clean_annotation_field">clean_annotation_field</a></code> function removes characters from a string that are not alphanumeric or
in a specified list.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong>:  The <code>name</code> parameter is a string that represents the input text that you want to clean.
It typically contains annotations or other text that you want to process</li>
<li><strong>char_allowed</strong>:  The <code>char_allowed</code> parameter is a list that contains characters that are
allowed to remain in the <code>name</code> string after cleaning. Any character in the <code>name</code> string that is
not alphanumeric and not in the <code>char_allowed</code> list will be removed during the cleaning process</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The function <code><a href="#clean_annotation_field">clean_annotation_field</a></code> returns a cleaned version of the <code>name</code> string, where
  only alphanumeric characters and characters from the <code>char_allowed</code> list are kept.</p>
</blockquote>
</div>


                </section>
                <section id="docker_automount">
                            <input id="docker_automount-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">docker_automount</span><span class="signature pdoc-code condensed">(<span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="docker_automount-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#docker_automount"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="docker_automount-4269"><a href="#docker_automount-4269"><span class="linenos">4269</span></a><span class="k">def</span> <span class="nf">docker_automount</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="docker_automount-4270"><a href="#docker_automount-4270"><span class="linenos">4270</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="docker_automount-4271"><a href="#docker_automount-4271"><span class="linenos">4271</span></a><span class="sd">     Add needed volume to the tool container, check first if we are already inside one otherwise return empty string</span>
</span><span id="docker_automount-4272"><a href="#docker_automount-4272"><span class="linenos">4272</span></a><span class="sd">    :param containerid: for other linux distribution catch container mount from container ID</span>
</span><span id="docker_automount-4273"><a href="#docker_automount-4273"><span class="linenos">4273</span></a><span class="sd">    :return: string containing volume to add</span>
</span><span id="docker_automount-4274"><a href="#docker_automount-4274"><span class="linenos">4274</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="docker_automount-4275"><a href="#docker_automount-4275"><span class="linenos">4275</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;/.dockerenv&quot;</span><span class="p">):</span>
</span><span id="docker_automount-4276"><a href="#docker_automount-4276"><span class="linenos">4276</span></a>        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Not inside docker container, block automount option&quot;</span><span class="p">)</span>
</span><span id="docker_automount-4277"><a href="#docker_automount-4277"><span class="linenos">4277</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span><span id="docker_automount-4278"><a href="#docker_automount-4278"><span class="linenos">4278</span></a>
</span><span id="docker_automount-4279"><a href="#docker_automount-4279"><span class="linenos">4279</span></a>    <span class="n">container_id</span> <span class="o">=</span> <span class="n">command</span><span class="p">(</span>
</span><span id="docker_automount-4280"><a href="#docker_automount-4280"><span class="linenos">4280</span></a>        <span class="sa">r</span><span class="s2">&quot;cat /proc/self/cgroup | grep &#39;docker&#39; | sed &#39;s/^.*\///&#39; | tail -n1&quot;</span>
</span><span id="docker_automount-4281"><a href="#docker_automount-4281"><span class="linenos">4281</span></a>    <span class="p">)</span>
</span><span id="docker_automount-4282"><a href="#docker_automount-4282"><span class="linenos">4282</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">container_id</span><span class="p">:</span>
</span><span id="docker_automount-4283"><a href="#docker_automount-4283"><span class="linenos">4283</span></a>        <span class="n">container_id</span> <span class="o">=</span> <span class="n">command</span><span class="p">(</span><span class="s2">&quot;cat /proc/1/cpuset | cut -d/ -f3&quot;</span><span class="p">)</span>
</span><span id="docker_automount-4284"><a href="#docker_automount-4284"><span class="linenos">4284</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">container_id</span><span class="p">:</span>
</span><span id="docker_automount-4285"><a href="#docker_automount-4285"><span class="linenos">4285</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Can&#39;t get container ID from within container EXIT&quot;</span><span class="p">)</span>
</span><span id="docker_automount-4286"><a href="#docker_automount-4286"><span class="linenos">4286</span></a>
</span><span id="docker_automount-4287"><a href="#docker_automount-4287"><span class="linenos">4287</span></a>    <span class="n">mounts_new</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="docker_automount-4288"><a href="#docker_automount-4288"><span class="linenos">4288</span></a>    <span class="n">mounts</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">command</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;docker inspect -f json </span><span class="si">{</span><span class="n">container_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;Mounts&quot;</span><span class="p">]</span>
</span><span id="docker_automount-4289"><a href="#docker_automount-4289"><span class="linenos">4289</span></a>    <span class="k">for</span> <span class="n">volume</span> <span class="ow">in</span> <span class="n">mounts</span><span class="p">:</span>
</span><span id="docker_automount-4290"><a href="#docker_automount-4290"><span class="linenos">4290</span></a>        <span class="k">if</span> <span class="s2">&quot;sock&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">volume</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Source&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;tmp&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">volume</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Source&quot;</span><span class="p">):</span>
</span><span id="docker_automount-4291"><a href="#docker_automount-4291"><span class="linenos">4291</span></a>            <span class="n">mounts_new</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; -v </span><span class="si">{</span><span class="n">volume</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">volume</span><span class="o">.</span><span class="n">get</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;Destination&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">volume</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Mode&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="docker_automount-4292"><a href="#docker_automount-4292"><span class="linenos">4292</span></a>    <span class="k">return</span> <span class="n">mounts_new</span>
</span></pre></div>


            <div class="docstring"><p>Add needed volume to the tool container, check first if we are already inside one otherwise return empty string</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>containerid</strong>:  for other linux distribution catch container mount from container ID</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>string containing volume to add</p>
</blockquote>
</div>


                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>